(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function s(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(r){if(r.ep)return;r.ep=!0;const i=s(r);fetch(r.href,i)}})();var pe=(t=>(t.ADD="a",t.ADD_u="A",t.NAND="d",t.NAND_u="D",t.NOR="r",t.NOR_u="R",t.NOT="n",t.NOT_u="N",t.OR="o",t.OR_u="O",t.XNOR="v",t.XNOR_u="V",t.XOR="x",t.XOR_u="X",t))(pe||{}),He=(t=>(t.SWITCH="s",t.SWITCH_u="S",t.BUTTON="b",t.BUTTON_u="B",t.CLOCK="k",t.CLOCK_u="K",t))(He||{}),it=(t=>(t.LED_RED="l",t.LED_RED_u="L",t.SEGMENTS="e",t.SEGMENTS_u="E",t))(it||{}),ks=(t=>(t.DELETE="Delete",t.BACKSPACE="Backspace",t.INSERT="Insert",t))(ks||{}),le=(t=>(t[t.LINE=1]="LINE",t[t.NODE=2]="NODE",t[t.TEXT=3]="TEXT",t[t.SLOT=4]="SLOT",t[t.INPUT=5]="INPUT",t[t.OUTPUT=6]="OUTPUT",t))(le||{}),z=(t=>(t[t.G_AND=0]="G_AND",t[t.G_NAND=1]="G_NAND",t[t.G_NOR=2]="G_NOR",t[t.G_NOT=3]="G_NOT",t[t.G_OR=4]="G_OR",t[t.G_XNOR=5]="G_XNOR",t[t.G_XOR=6]="G_XOR",t[t.I_SWITCH=100]="I_SWITCH",t[t.I_BUTTON=101]="I_BUTTON",t[t.I_CLOCK=102]="I_CLOCK",t[t.O_LED_RED=200]="O_LED_RED",t[t.O_7_SEGMENTS=201]="O_7_SEGMENTS",t))(z||{}),ne=(t=>(t[t.MOUSE_CLICKED=0]="MOUSE_CLICKED",t[t.MOUSE_RELEASED=1]="MOUSE_RELEASED",t[t.MOUSE_DRAGGED=2]="MOUSE_DRAGGED",t[t.KEY_PRESSED=10]="KEY_PRESSED",t[t.KEY_RELEASED=11]="KEY_RELEASED",t[t.KEY_HOLDED=12]="KEY_HOLDED",t[t.FOCUS_IN=20]="FOCUS_IN",t[t.FOCUS_OUT=21]="FOCUS_OUT",t[t.CLOCK_TRIGGERED=30]="CLOCK_TRIGGERED",t[t.CLOCK_FINISHED=31]="CLOCK_FINISHED",t[t.PHYSICS_ENGINE_CYCLE=40]="PHYSICS_ENGINE_CYCLE",t))(ne||{});const tr="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'?%3e%3csvg%20width='64'%20height='64'%20version='1.1'%20viewBox='0%200%2016%2016'%20xmlns='http://www.w3.org/2000/svg'%3e%3cg%20fill='none'%20stroke='%23289fac'%20stroke-linejoin='round'%20stroke-opacity='.5'%20stroke-width='.3'%3e%3cpath%20d='m0%2010.82h16'/%3e%3cpath%20d='m0%205.482h16'/%3e%3cpath%20d='m0%200.0675h16'/%3e%3cpath%20d='m10.82%200v16'/%3e%3cpath%20d='m16.06%200v16'/%3e%3cpath%20d='m0.0675%200v16'/%3e%3cpath%20d='m5.482%200v16'/%3e%3cpath%20d='m0%2016.06h16'/%3e%3c/g%3e%3c/svg%3e",sr=["connections","nodes","slots","texts"];function oi(t){t.save(),t.setTransform(1,0,0,1,0,0),t.clearRect(0,0,t.canvas.width,t.canvas.height),t.restore()}function nr(t,e){oi(t);for(const s of sr)for(const n of e[s].values())n.draw(t)}function ir(t,e){oi(t),t.rect(0,0,t.canvas.width,t.canvas.height),t.fillStyle=e??"#ff0000",t.fill()}function rr(t){return t=t-(t>>1&1431655765),t=(t&858993459)+(t>>2&858993459),(t+(t>>4)&252645135)*16843009>>24}const or=(t,e)=>Os(t),ai=(t,e)=>{const s=(1<<e)-1;return(t&s)===s},ar=(t,e)=>!ai(t,e),li=(t,e)=>!Os(t),lr=(t,e)=>e>1?li(t):(t&1)!==1,Os=(t,e)=>(t|0)!==0,cr=(t,e)=>!ci(t),ci=(t,e)=>rr(t)%2===1,je={input_output:or,and:ai,nand:ar,nor:li,not:lr,or:Os,xnor:cr,xor:ci},Be={updateGraph(t,e){const s=new Set,n=[e];let r=n.shift();for(;r!==void 0;)!s.has(r)&&t[r]!==void 0&&((t[r].nodeType<z.I_SWITCH||t[r].nodeType>=z.O_LED_RED)&&this.computeState(t,t[r]),n.push(...t[r].signalTo.values())),s.add(r),r=n.shift()},computeState(t,e){const s=this.getComputeFunction(e.nodeType);let n=0,r=0;for(const i of e.signalFrom.values()){if(i>=-1){const o=t[i]?.output?1:0;r+=o<<n}n++}e.output=s(r,n)},getComputeFunction(t){switch(t){case z.G_AND:return je.and;case z.G_NAND:return je.nand;case z.G_NOR:return je.nor;case z.G_NOT:return je.not;case z.G_OR:return je.or;case z.G_XNOR:return je.xnor;case z.G_XOR:return je.xor;default:return je.input_output}}},xe={vertex:{add(t,e,s,n,r=!1,i=new Map,o=new Set){if(t[e]===void 0){if(i.size===0)for(const h of Object.values(n.connectionSlot))h.in&&i.set(h.id,-1);t[e]={id:e,output:r,signalFrom:i,signalTo:o,nodeType:s,signalGraph:t},Be.updateGraph(t,e)}},remove(t,e){const s=t[e];if(s===void 0){console.warn(`Node ${e} não encontrado no grafo de sinal lógico ao ser removido!`);return}for(const n of s.signalTo.values())t[n]!==void 0&&t[n].signalFrom.forEach((r,i,o)=>{r===e&&o.set(i,-1)});delete t[e]},getState(t,e){return t[e].output??!1},setState(t,e,s){t[e]&&(t[e].output=s)}},edge:{add(t,e,s,n){const r=s.parent.id,i=n.parent.id;t[r]!==void 0?t[r].signalTo.add(i):console.warn(`Node inicial com ID ${i} não encontrado no grafo de sinal, isso poderá acarretar em bugs`,e),t[i]!==void 0?t[i].signalFrom.set(n.slotIdAtParent,r):console.warn(`Node final com ID ${i} não encontrado no grafo de sinal, isso poderá acarretar em bugs`,e),Be.updateGraph(t,r)},remove(t,e){if(e===void 0)return;const s=e.connectedTo.start?.nodeId??-1,n=e.connectedTo.end?.nodeId??-1;n>=0&&t[n]!==void 0&&t[n].signalFrom.forEach((r,i,o)=>{r===s&&o.set(i,-1)}),s>=0&&t[s]!==void 0&&t[s].signalTo.delete(e.connectedTo.end?.nodeId??-1),n!==-1&&Be.updateGraph(t,n)}}},Ke={node(t,e){const s=t.nodes.get(e);if(s===void 0)return!1;for(let n=0;n<s.slots.length;n++)t.removeComponent(s.slots[n].id,le.SLOT);return xe.vertex.remove(t.signalGraph,e),t.nodes.delete(e)},slot(t,e){const s=t.slots.get(e);if(s===void 0)return!1;for(const n of Object.values(s.slotConnections))t.removeComponent(n.id,le.LINE);return t.slots.delete(e)},connection(t,e){const s=t.connections.get(e);if(s===void 0)return!1;const n=t.slots.get(s.connectedTo.start?.slotId??-1),r=t.slots.get(s.connectedTo.end?.slotId??-1);if(n){const i=n.slotConnections.findIndex(o=>o.id===e);i!==-1&&n.slotConnections.splice(i,1)}if(r){const i=r.slotConnections.findIndex(o=>o.id===e);i!==-1&&r.slotConnections.splice(i,1)}return xe.edge.remove(t.signalGraph,s),t.connections.delete(e)},text(t,e){return t.texts.delete(e)}};class U{type="float";_x=0;_y=0;static get ZERO(){return new U}static get ONE(){return new U(1,1)}static get UP(){return new U(0,-1)}static get DOWN(){return new U(0,1)}static get LEFT(){return new U(-1,-0)}static get RIGHT(){return new U(1,0)}get x(){return this._x}set x(e){this._x=e}get y(){return this._y}set y(e){this._y=e}constructor(e=0,s=0){typeof e=="number"?(this.x=e,this.y=s):U.isVector2(e)&&(this.x=e.x,this.y=e.y)}static isVector2(e){return typeof e=="object"&&e!==null&&"_x"in e&&"_y"in e&&"type"in e&&(e.type==="int"||e.type==="float")}add(e){return U.isVector2(e)?(this.x+=e.x,this.y+=e.y):(this.x+=e,this.y+=e),this}static add(e,s,n){return n??=U.ZERO,U.isVector2(s)?(n.x=e.x+s.x,n.y=e.y+s.y):(n.x=e.x+s,n.y=e.y+s),n}sub(e){return U.isVector2(e)?(this.x-=e.x,this.y-=e.y):(this.x-=e,this.y-=e),this}static sub(e,s,n){return n??=U.ZERO,U.isVector2(s)?(n.x=e.x-s.x,n.y=e.y-s.y):(n.x=e.x-s,n.y=e.y-s),n}mul(e){return U.isVector2(e)?(this.x*=e.x,this.y*=e.y):(this.x*=e,this.y*=e),this}static mul(e,s,n){return n??=U.ZERO,U.isVector2(s)?(n.x=e.x*s.x,n.y=e.y*s.y):(n.x=e.x*s,n.y=e.y*s),n}div(e){return U.isVector2(e)?(this.x/=e.x,this.y/=e.y):(this.x/=e,this.y/=e),this}static div(e,s,n){return n??=U.ZERO,U.isVector2(s)?(n.x=e.x/s.x,n.y=e.y/s.y):(n.x=e.x/s,n.y=e.y/s),n}dot(e){return this.x*e.x+this.y*e.y}static dot(e,s){return e.x*s.x+e.y*s.y}cross(e){return this.x*e.y-this.y*e.x}static cross(e,s){return e.x*s.y-e.y*s.x}len(){return Math.sqrt(this.lenSquared())}static len(e){return Math.sqrt(U.lenSquared(e))}lenSquared(){return this.dot(this)}static lenSquared(e){return U.dot(e,e)}madd(e,s){return this.x+=e.x*s,this.y+=e.y*s,this}static madd(e,s,n,r){return r??=new U(0,0),r.x=e.x+s.x*n,r.y=e.y+s.y*n,r}lerp(e,s){return this.madd(U.sub(e,this),s)}static lerp(e,s,n,r){return U.madd(e,U.sub(s,e),n,r)}bilinear(e,s){return this.x=U.lerp(this,e,s.x).x,this.y=U.lerp(this,e,s.y).y,this}static bilinear(e,s,n,r){return r??=new U(0,0),r.x=U.lerp(e,s,n.x,void 0).x,r.y=U.lerp(e,s,n.y,void 0).y,r}equals(e,s=1e-4){return Math.abs(this.x-e.x)<s&&Math.abs(this.y-e.y)<s}static equals(e,s,n=1e-4){return Math.abs(e.x-s.x)<n&&Math.abs(e.y-s.y)<n}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}static min(e,s,n){return n??=new U(0,0),n.x=Math.min(e.x,s.x),n.y=Math.min(e.y,s.y),n}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}static max(e,s,n){return n??=new U(0,0),n.x=Math.max(e.x,s.x),n.y=Math.max(e.y,s.y),n}rotate(e){const s=Math.sin(e),n=Math.cos(e);return this.x=this.x*n-this.y*s,this.y=this.x*s+this.y*n,this}static rotate(e,s,n){n??=new U(0,0);const r=Math.sin(s),i=Math.cos(s);return n.x=e.x*i-e.y*r,n.y=e.x*r+e.y*i,n}atan2(e){return Math.atan2(e.y-this.y,e.x-this.x)}static atan2(e,s){return Math.atan2(s.y-e.y,s.x-e.x)}normalize(){return this.div(this.len())}static normalize(e,s){return U.div(e,e.len(),s)}abs(){return this.x=Math.abs(this.x),this.y=Math.abs(this.y),this}static abs(e,s){return s??=new U(0,0),s.x=Math.abs(e.x),s.y=Math.abs(e.y),s}copy(e){return this.x=e.x,this.y=e.y,this}static copy(e,s){return s.x=e.x,s.y=e.y,s}clone(){return new U(this)}static clone(e){return new U(e)}toPlainObject(){return{x:this.x,y:this.y}}}class C{type="int";_x=0;_y=0;static get ZERO(){return new C}static get ONE(){return new C(1,1)}static get UP(){return new C(0,-1)}static get DOWN(){return new C(0,1)}static get LEFT(){return new C(-1,-0)}static get RIGHT(){return new C(1,0)}get x(){return this._x}set x(e){this._x=Math.round(e)}get y(){return this._y}set y(e){this._y=Math.round(e)}constructor(e=0,s=0){typeof e=="number"?(this.x=e,this.y=s):C.isVector2(e)&&(this.x=e.x,this.y=e.y)}static isVector2(e){return typeof e=="object"&&e!==null&&"_x"in e&&"_y"in e&&"type"in e&&(e.type==="int"||e.type==="float")}add(e){return C.isVector2(e)?(this.x+=e.x,this.y+=e.y):(this.x+=e,this.y+=e),this}static add(e,s,n){return n??=C.ZERO,C.isVector2(s)?(n.x=e.x+s.x,n.y=e.y+s.y):(n.x=e.x+s,n.y=e.y+s),n}sub(e){return C.isVector2(e)?(this.x-=e.x,this.y-=e.y):(this.x-=e,this.y-=e),this}static sub(e,s,n){return n??=C.ZERO,C.isVector2(s)?(n.x=e.x-s.x,n.y=e.y-s.y):(n.x=e.x-s,n.y=e.y-s),n}mul(e){return C.isVector2(e)?(this.x*=e.x,this.y*=e.y):(this.x*=e,this.y*=e),this}static mul(e,s,n){return n??=C.ZERO,C.isVector2(s)?(n.x=e.x*s.x,n.y=e.y*s.y):(n.x=e.x*s,n.y=e.y*s),n}div(e){return C.isVector2(e)?(this.x/=e.x,this.y/=e.y):(this.x/=e,this.y/=e),this}static div(e,s,n){return n??=C.ZERO,C.isVector2(s)?(n.x=e.x/s.x,n.y=e.y/s.y):(n.x=e.x/s,n.y=e.y/s),n}dot(e){return this.x*e.x+this.y*e.y}static dot(e,s){return e.x*s.x+e.y*s.y}cross(e){return this.x*e.y-this.y*e.x}static cross(e,s){return e.x*s.y-e.y*s.x}len(){return Math.sqrt(this.lenSquared())}static len(e){return Math.sqrt(C.lenSquared(e))}lenSquared(){return this.dot(this)}static lenSquared(e){return C.dot(e,e)}madd(e,s){return this.x+=e.x*s,this.y+=e.y*s,this}static madd(e,s,n,r){return r??=C.ZERO,r.x=e.x+s.x*n,r.y=e.y+s.y*n,r}lerp(e,s){return this.madd(C.sub(e,this),s)}static lerp(e,s,n,r){return C.madd(e,C.sub(s,e),n,r)}bilinear(e,s){return this.x=C.lerp(this,e,s.x).x,this.y=C.lerp(this,e,s.y).y,this}static bilinear(e,s,n,r){return r??=C.ZERO,r.x=C.lerp(e,s,n.x).x,r.y=C.lerp(e,s,n.y).y,r}equals(e,s=0){return s===0?this.x===e.x&&this.y===e.y:Math.abs(this.x-e.x)<s&&Math.abs(this.y-e.y)<s}static equals(e,s,n=0){return n===0?e.x===s.x&&e.y===s.y:Math.abs(e.x-s.x)<n&&Math.abs(e.y-s.y)<n}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}static min(e,s,n){return n??=C.ZERO,n.x=Math.min(e.x,s.x),n.y=Math.min(e.y,s.y),n}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}static max(e,s,n){return n??=C.ZERO,n.x=Math.max(e.x,s.x),n.y=Math.max(e.y,s.y),n}rotate(e){const s=Math.sin(e),n=Math.cos(e);return this.x=this.x*n-this.y*s,this.y=this.x*s+this.y*n,this}static rotate(e,s,n){n??=C.ZERO;const r=Math.sin(s),i=Math.cos(s);return n.x=e.x*i-e.y*r,n.y=e.x*r+e.y*i,n}atan2(e){return Math.atan2(e.y-this.y,e.x-this.x)}static atan2(e,s){return Math.atan2(s.y-e.y,s.x-e.x)}normalize(){return U.div(this,this.len())}static normalize(e,s){return U.div(e,e.len(),s)}abs(){return this.x=Math.abs(this.x),this.y=Math.abs(this.y),this}static abs(e,s){return s??=C.ZERO,s.x=Math.abs(e.x),s.y=Math.abs(e.y),s}copy(e){return this.x=e.x,this.y=e.y,this}static copy(e,s){return s.x=e.x,s.y=e.y,s}clone(){return new C(this)}static clone(e){return new C(e)}toPlainObject(){return{x:this.x,y:this.y}}}class rt{position;endPosition;borderColor;drawPath;regenPath;lineLength;constructor(e,s,n="#FF8008DC"){this.position=e,this.endPosition=s,this.lineLength=this.computeLineLength(),this.borderColor=n,this.regenPath=!0,this.drawPath=this.generatePath()}generatePath(){const e=new Path2D;return e.moveTo(this.position.x,this.position.y),e.lineTo(this.endPosition.x,this.endPosition.y),this.regenPath=!1,e}computeLineLength(){return C.sub(this.endPosition,this.position).len()}draw(e,s){s&&((!this.drawPath||this.regenPath)&&(this.drawPath=this.generatePath()),e.save(),e.strokeStyle=this.borderColor,e.stroke(this.drawPath),e.restore())}moveShape(e,s){s?(this.position.add(e),this.endPosition.add(e)):(this.position.add(C.sub(this.position,e)),this.endPosition.add(C.sub(this.position,e)))}collisionWithPoint(e){const s=C.sub(this.position,e).len(),n=C.sub(this.endPosition,e).len();return s+n-this.lineLength<1e-4}collisionWithBox(e){return e.collisionWithLine(this)}collisionWithCircle(e){if(e.collisionWithPoint(this.position)||e.collisionWithPoint(this.endPosition))return!0;const s=((e.position.x-this.position.x)*(this.endPosition.x-this.position.x)+(e.position.y-this.position.y)*(this.endPosition.y-this.position.y))/Math.pow(this.lineLength,2),n=new C(this.position.x+s*(this.endPosition.x-this.position.x),this.position.y+s*(this.endPosition.y-this.position.y));return this.collisionWithPoint(n)?C.sub(n,e.position).len()<e.radius:!1}collisionWithLine(e){const s=(this.position.x-this.endPosition.x)*(e.position.y-e.endPosition.y)-(this.position.y-this.endPosition.y)*(e.position.x-e.endPosition.x);if(s===0)return!!(this.collisionWithPoint(e.position)||this.collisionWithPoint(e.endPosition)||e.collisionWithPoint(this.position));const n=(this.position.x-e.position.x)*(e.position.y-e.endPosition.y)-(this.position.y-e.position.y)*(e.position.x-e.endPosition.x),r=(this.position.x-this.endPosition.x)*(this.position.y-e.position.y)-(this.position.y-this.endPosition.y)*(this.position.x-e.position.x),i=n/s,o=-(r/s);return i>=0&&i<=1&&o>=0&&o<=1}}class Me{position;localVertices;vertices;width;height;drawPath;regenPath;borderColor;constructor(e,s=2,n=2,r="#FF8008DC"){this.position=e,this.width=s,this.height=n,this.borderColor=r,this.localVertices=this.setLocalVertices(),this.regenPath=!1,this.vertices={a:C.add(this.position,this.localVertices.a),b:C.add(this.position,this.localVertices.b),c:C.add(this.position,this.localVertices.c),d:C.add(this.position,this.localVertices.d)}}setVertices(){C.add(this.position,this.localVertices.a,this.vertices.a),C.add(this.position,this.localVertices.b,this.vertices.b),C.add(this.position,this.localVertices.c,this.vertices.c),C.add(this.position,this.localVertices.d,this.vertices.d)}setLocalVertices(){return Object.freeze({a:new C,b:new C(this.width,0),c:new C(this.width,this.height),d:new C(0,this.height)})}generatePath(){const e=new Path2D;return e.rect(this.vertices.a.x,this.vertices.a.y,this.width,this.height),this.regenPath=!1,e}draw(e,s){s&&((!this.drawPath||this.regenPath)&&(this.drawPath=this.generatePath()),e.save(),e.strokeStyle=this.borderColor,e.stroke(this.drawPath),e.restore())}moveShape(e,s=!0){s?this.position.add(e):this.position.copy(e),this.setVertices(),this.regenPath=!0}collisionWithPoint(e){return e.x>this.vertices.a.x&&e.x<this.vertices.c.x&&e.y>this.vertices.a.y&&e.y<this.vertices.c.y}collisionWithBox(e){return!(this.vertices.c.x<e.vertices.a.x||this.vertices.c.y<e.vertices.a.y||this.vertices.a.x>e.vertices.c.x||this.vertices.a.y>e.vertices.c.y)}collisionWithCircle(e){return e.collisionWithBox(this)}collisionWithLine(e){const s=new rt(this.vertices.a,this.vertices.d),n=new rt(this.vertices.a,this.vertices.b),r=new rt(this.vertices.b,this.vertices.c),i=new rt(this.vertices.c,this.vertices.d);return this.collisionWithPoint(e.position)||this.collisionWithPoint(e.endPosition)||e.collisionWithLine(s)||e.collisionWithLine(n)||e.collisionWithLine(r)||e.collisionWithLine(i)}}const dr={setCollisionShapeSize(t,e,s=0,n=0,r=0,i=0,o=1e-4){return new U(Math.abs(t.x-e.x)<o?s:n,Math.abs(t.y-e.y)<o?r:i)},generateCollisionShapes(t,e,s){if(s.length===0)return[];const n=[],r=new C(6,6),i=t.clone(),o=new C;for(let h=0;h<=s.length;h++){h<s.length?C.bilinear(t,e,s[h],o):o.copy(e);const p=this.setCollisionShapeSize(i,o,12,o.x-i.x,12,o.y-i.y);n.push(new Me(i.sub(r),p.x,p.y)),i.copy(o)}return n}},As=Math.PI*.5,hr=Math.PI*1.5,ct=Math.PI*.25,dt=Math.PI*.75;function di(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Wt={exports:{}},ur=Wt.exports,qs;function fr(){return qs||(qs=1,function(t,e){(function(){var s,n,r,i,o,h,p,w,u,$,v,k,_,b,f;r=Math.floor,$=Math.min,n=function(l,a){return l<a?-1:l>a?1:0},u=function(l,a,c,y,d){var m;if(c==null&&(c=0),d==null&&(d=n),c<0)throw new Error("lo must be non-negative");for(y==null&&(y=l.length);c<y;)m=r((c+y)/2),d(a,l[m])<0?y=m:c=m+1;return[].splice.apply(l,[c,c-c].concat(a)),a},h=function(l,a,c){return c==null&&(c=n),l.push(a),b(l,0,l.length-1,c)},o=function(l,a){var c,y;return a==null&&(a=n),c=l.pop(),l.length?(y=l[0],l[0]=c,f(l,0,a)):y=c,y},w=function(l,a,c){var y;return c==null&&(c=n),y=l[0],l[0]=a,f(l,0,c),y},p=function(l,a,c){var y;return c==null&&(c=n),l.length&&c(l[0],a)<0&&(y=[l[0],a],a=y[0],l[0]=y[1],f(l,0,c)),a},i=function(l,a){var c,y,d,m,S,I;for(a==null&&(a=n),m=(function(){I=[];for(var R=0,D=r(l.length/2);0<=D?R<D:R>D;0<=D?R++:R--)I.push(R);return I}).apply(this).reverse(),S=[],y=0,d=m.length;y<d;y++)c=m[y],S.push(f(l,c,a));return S},_=function(l,a,c){var y;if(c==null&&(c=n),y=l.indexOf(a),y!==-1)return b(l,0,y,c),f(l,y,c)},v=function(l,a,c){var y,d,m,S,I;if(c==null&&(c=n),d=l.slice(0,a),!d.length)return d;for(i(d,c),I=l.slice(a),m=0,S=I.length;m<S;m++)y=I[m],p(d,y,c);return d.sort(c).reverse()},k=function(l,a,c){var y,d,m,S,I,R,D,q,F;if(c==null&&(c=n),a*10<=l.length){if(m=l.slice(0,a).sort(c),!m.length)return m;for(d=m[m.length-1],D=l.slice(a),S=0,R=D.length;S<R;S++)y=D[S],c(y,d)<0&&(u(m,y,0,null,c),m.pop(),d=m[m.length-1]);return m}for(i(l,c),F=[],I=0,q=$(a,l.length);0<=q?I<q:I>q;0<=q?++I:--I)F.push(o(l,c));return F},b=function(l,a,c,y){var d,m,S;for(y==null&&(y=n),d=l[c];c>a;){if(S=c-1>>1,m=l[S],y(d,m)<0){l[c]=m,c=S;continue}break}return l[c]=d},f=function(l,a,c){var y,d,m,S,I;for(c==null&&(c=n),d=l.length,I=a,m=l[a],y=2*a+1;y<d;)S=y+1,S<d&&!(c(l[y],l[S])<0)&&(y=S),l[a]=l[y],a=y,y=2*a+1;return l[a]=m,b(l,I,a,c)},s=function(){l.push=h,l.pop=o,l.replace=w,l.pushpop=p,l.heapify=i,l.updateItem=_,l.nlargest=v,l.nsmallest=k;function l(a){this.cmp=a??n,this.nodes=[]}return l.prototype.push=function(a){return h(this.nodes,a,this.cmp)},l.prototype.pop=function(){return o(this.nodes,this.cmp)},l.prototype.peek=function(){return this.nodes[0]},l.prototype.contains=function(a){return this.nodes.indexOf(a)!==-1},l.prototype.replace=function(a){return w(this.nodes,a,this.cmp)},l.prototype.pushpop=function(a){return p(this.nodes,a,this.cmp)},l.prototype.heapify=function(){return i(this.nodes,this.cmp)},l.prototype.updateItem=function(a){return _(this.nodes,a,this.cmp)},l.prototype.clear=function(){return this.nodes=[]},l.prototype.empty=function(){return this.nodes.length===0},l.prototype.size=function(){return this.nodes.length},l.prototype.clone=function(){var a;return a=new l,a.nodes=this.nodes.slice(0),a},l.prototype.toArray=function(){return this.nodes.slice(0)},l.prototype.insert=l.prototype.push,l.prototype.top=l.prototype.peek,l.prototype.front=l.prototype.peek,l.prototype.has=l.prototype.contains,l.prototype.copy=l.prototype.clone,l}(),function(l,a){return t.exports=a()}(this,function(){return s})}).call(ur)}(Wt)),Wt.exports}var as,Ls;function pr(){return Ls||(Ls=1,as=fr()),as}var mr=pr();const yr=di(mr),gr={stepDirectionFromAtan2(t){const e=U.ZERO;return t<=ct&&t>=-ct&&(e.x=1),t>ct&&t<dt&&(e.y=1),(t>=dt||t<=-dt)&&(e.x=-1),t<-ct&&t>-dt&&(e.y=-1),e},getSearchArea(t,e,s=3){const r=U.sub(t,e).abs().clone().mul(s),i=C.min(t,e),o=C.max(t,e),h=U.add(i,o).div(2);return i.copy(U.sub(h,U.div(r,2))),new Me(i,r.x,r.y)},getCollisionsInArea(t,e){const s=new Map;for(const n of t.values())n.collisionShape.collisionWithBox(e)&&s.set(n.id,n);return s},floatEquals(t,e,s){return Math.abs(t-e)<s},currentDirection(t,e,s){const n=U.sub(e,t),r=n.len();if(n.equals(U.ZERO)&&r===0)return"e";const i=t.atan2(e);return this.floatEquals(i,As,s)?"y":this.floatEquals(i,0,s)?"x":"c"},optimizePath(t,e=1e-5){const s=[];let n="c";for(let r=0;r<t.length;r++){const i=this.currentDirection(t[Math.max(0,r-1)],t[Math.min(r,t.length-1)],e);i==="c"||i!==n&&n!=="e"?s.push(t[r]):i==="x"?s[s.length-1].x=t[r].x:i==="y"&&(s[s.length-1].y=t[r].y),n=i}return s.filter(r=>!r.equals(U.ONE))},simplePathFinder(t,e,s=new U(.5,1)){const n=[];if(t.equals(e))return n;const r=t.clone(),i=U.ZERO;let o=0;for(;!r.equals(e)&&!(o>15);){o++;const h=e.atan2(r),w=this.stepDirectionFromAtan2(h).abs().mul(s).add(i);n.push(w),C.bilinear(t,e,w,r),i.copy(w)}return n},stepCollisionExists(t,e,s,n,r){const i=C.bilinear(t,e,n);for(const o of r.values())if(o.collisionShape.collisionWithLine(new rt(s,i)))return!0;return!1},manhattanDistance(t,e){return Math.abs(t.x-e.x)+Math.abs(t.y-e.y)},computeStepScore(t,e,s){return this.manhattanDistance(t,e)+this.manhattanDistance(e,s)},createPathFromScores(t,e){let s=t.get(`${e.x}::${e.y}`);const n=[];for(;s!==void 0;)n.push(s.t.clone()),s=s.from!==void 0?t.get(`${s.from.x}::${s.from.y}`):void 0;return t.clear(),n.reverse()},setNodeScore(t,e,s,n,r,i){const o=`${n.x}::${n.y}`;let h;const p=t.get(o)?.score??1/0;if(isNaN(p))return 3;if(i!==void 0){h=`${i.x}::${i.y}`;const u=t.get(h);if(n.equals(i))return 2;if(u?.from?.equals(i))return 4}const w=this.computeStepScore(e,n,s);return w<p?(t.set(o,{position:n,t:r,from:i,score:w}),1):0},testStep(t,e,s,n,r,i,o,h){const p=U.mul(r,h).add(n),w=C.bilinear(t,e,p);for(;U.min(h,o).equals(o);){if(this.stepCollisionExists(t,e,s,p,i)){h.sub(.075);continue}return[!0,w,p]}return[!1,C.ZERO,U.ZERO]},getPossibleNextSteps(t,e,s,n,r,i,o){const h=[],p=this.stepDirectionFromAtan2(s.atan2(e)),w=[p,U.rotate(p,As),U.rotate(p,hr)];for(const u of w){const[$,v,k]=this.testStep(t,e,s,n,u,r,o,i.clone());$&&h.push([v,k])}return h},complexPathFinder(t,e,s){const n=new Map;this.setNodeScore(n,t,e,t,new U(0,0),void 0);const r=new yr((w,u)=>w.score-u.score);r.push({key:t,score:n.get(`${t.x}::${t.y}`).score});const i=U.sub(t,e).abs().max(U.ONE),o=new U(.5,.5),h=new U(4,4).div(i).min(o);let p=0;for(;p<=512&&r.size()>0;){p++;const w=r.pop(),u=n.get(`${w.key.x}::${w.key.y}`),$=u.position,v=u.t;if($.equals(e,16))return this.setNodeScore(n,t,e,e,new U(1,1),$),[!0,this.createPathFromScores(n,e)];const k=this.getPossibleNextSteps(t,e,$,v,s,o,h);if(k.length===0){n.set(`${w.key.x}::${w.key.y}`,{position:$,t:v,from:u.from,score:NaN}),u.from!==void 0&&r.push({key:u.from,score:n.get(`${u.from.x}::${u.from.y}`).score});continue}for(const _ of k)switch(this.setNodeScore(n,t,e,_[0],_[1],$)){case 1:r.push({key:_[0],score:n.get(`${_[0].x}::${_[0].y}`).score});break;case 2:case 4:u.from!==void 0&&r.push({key:u.from,score:n.get(`${u.from.x}::${u.from.y}`)?.score??1/0}),u.score=NaN;break}}return[!1,[]]},find(t,e,s){if(t.equals(e,8))return[];const n=this.getSearchArea(t,e,1);let r=this.getCollisionsInArea(s,n);if(r.size===0)return this.simplePathFinder(t,e);{const i=this.getSearchArea(t,e,3);r=this.getCollisionsInArea(s,i);const[o,h]=this.complexPathFinder(t,e,r);return o?h:this.simplePathFinder(t,e)}}};var Ie=(t=>(t[t.START=0]="START",t[t.END=1]="END",t[t.BOTH=2]="BOTH",t[t.NONE=-1]="NONE",t))(Ie||{});class vr{id;position;componentType;endPosition;anchors;connectedTo;drawPath;regenPath;collisionShape;selected;constructor(e,s,n,r={start:void 0,end:void 0},i){this.id=e,this.position=s,this.componentType=le.LINE,this.endPosition=n,this.anchors=i??[new U(.25,0),new U(.25,.5),new U(.5,.5),new U(.5,1)],this.connectedTo=r,this.regenPath=!0,this.collisionShape=this.generateCollisionShapes(),this.selected=!1}generatePath(){const e=new Path2D;e.moveTo(this.position.x,this.position.y);const s=new C;for(let n=0;n<this.anchors.length;n++)C.bilinear(this.position,this.endPosition,this.anchors[n],s),e.lineTo(s.x,s.y);return e.lineTo(this.endPosition.x,this.endPosition.y),this.regenPath=!1,e}generateCollisionShapes(){return dr.generateCollisionShapes(this.position,this.endPosition,this.anchors)}generateAnchors(e){return gr.find(this.position,this.endPosition,e)}draw(e){if(this.endPosition!==this.position){(this.regenPath||!this.drawPath)&&(this.drawPath=this.generatePath()),e.save(),e.strokeStyle="#101010",e.lineWidth=2,e.lineJoin="round",e.stroke(this.drawPath),e.restore();for(let s=0;s<this.collisionShape.length;s++)this.collisionShape[s].draw(e,this.selected)}}addAnchor(e,s=this.anchors.length){this.anchors.splice(s,0,e),this.regenPath=!0}removePoint(e=this.anchors.length-1){if(e<0||e>=this.anchors.length){console.error("ConnectionComponent.removePoint - index is out of bounds!");return}this.anchors.splice(e,1),this.regenPath=!0}move(e,s=!0,n=2,r=!0,i=new Map){s?(n!==1&&this.position.add(e),n!==0&&this.endPosition.add(e)):(n!==1&&this.position.copy(e),n!==0&&this.endPosition.copy(e)),this.anchors=this.generateAnchors(i),r&&(this.collisionShape=this.generateCollisionShapes()),this.regenPath=!0}changeAnchor(e,s=this.anchors.length-1){if(s<0||s>=this.anchors.length){console.error("ConnectionComponent.changePosition - index is out of bounds!");return}this.anchors[s]=U.sub(e,this.position).div(U.sub(this.endPosition,this.position)),this.regenPath=!0}changeConnection(e,s,n=!1){e!==void 0&&s!==void 0?n?this.connectedTo.end={slotId:e,nodeId:s}:this.connectedTo.start={slotId:e,nodeId:s}:n?this.connectedTo.end=void 0:this.connectedTo.start=void 0}onEvent(e){switch(e){case ne.FOCUS_IN:this.selected=!0;break;case ne.FOCUS_OUT:this.selected=!1;break;default:return!1}return!0}toObject(){const e={id:this.id,componentType:this.componentType,position:this.position.toPlainObject(),endPosition:this.endPosition.toPlainObject(),anchors:[],connectedTo:this.connectedTo};return this.anchors.forEach(s=>e.anchors.push(s.toPlainObject())),e}}async function wr(t){const e=new Image;return e.src=t,await e.decode(),window.createImageBitmap(e)}function Je(t,e){const s={};let n=0;for(const r of e)Object.keys(t).includes(r)&&(s[n]=t[r],n++);return s}const hi="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'?%3e%3csvg%20width='88'%20height='50'%20version='1.1'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='m64%2025h25m-64-10h-26m27%2020h-27'%20fill='none'%20stroke='%23000'%20stroke-width='2'/%3e%3cpath%20d='m26.857%207.8571h17.619c9.7607%200%2016.667%207.64%2016.667%2017.143s-7.3822%2017.143-17.143%2017.143h-17.143z'%20fill='%23fff'/%3e%3cpath%20d='m24%205v40h20.476c11.268%200%2020-9%2020-20s-8.7321-20-20-20zm2.8571%202.8571h17.619c9.7607%200%2016.667%207.64%2016.667%2017.143s-7.3822%2017.143-17.143%2017.143h-17.143z'/%3e%3c/svg%3e",ui="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'?%3e%3csvg%20width='88'%20height='50'%20version='1.1'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='m73%2025h16m-64-10h-26m27%2020h-27'%20fill='none'%20stroke='%23000'%20stroke-width='2'/%3e%3cpath%20d='m26.857%207.8571h17.619c9.7607%200%2016.667%207.64%2016.667%2017.143s-7.3822%2017.143-17.143%2017.143h-17.143z'%20fill='%23fff'/%3e%3cpath%20d='m24%205v40h20.476c11.268%200%2020-9%2020-20s-8.7321-20-20-20zm2.8571%202.8571h17.619c9.7607%200%2016.667%207.64%2016.667%2017.143s-7.3822%2017.143-17.143%2017.143h-17.143z'/%3e%3cpath%20d='m73%2025a4%204%200%201%201-8%200%204%204%200%201%201%208%200z'%20fill='%23fff'%20stroke='%23000'%20stroke-width='3'/%3e%3c/svg%3e",fi="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'?%3e%3csvg%20width='88'%20height='50'%20version='1.1'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='m73%2025h16m-64-10h-26m27%2020h-27'%20fill='none'%20stroke='%23000'%20stroke-width='2'/%3e%3cpath%20d='m23.969%208h11.281c4.6842%200%2018.287-0.13021%2027.969%2017-4.7668%208.4291-10.521%2012.684-15.719%2014.812-5.3607%202.1954-9.8419%202.1875-12.25%202.1875h-11.25c1.8736-3.1084%204.75-9.0494%204.75-17%200-7.9734-2.9085-13.9-4.7812-17z'%20fill='%23fff'%20fill-rule='evenodd'/%3e%3cpath%20d='m18.094%205%202%202.4375s5.6562%207%205.6562%2017.562-5.6562%2017.562-5.6562%2017.562l-2%202.4375h17.156c2.4081%201e-6%207.6897%200.02451%2013.625-2.4062%205.9353-2.4308%2012.537-7.3433%2017.688-16.875l-1.3125-0.71875%201.3125-0.71875c-10.303-19.066-26.556-19.281-31.312-19.281zm5.875%203h11.281c4.6842%200%2018.287-0.13021%2027.969%2017-4.7668%208.4291-10.521%2012.684-15.719%2014.812-5.3607%202.1954-9.8419%202.1875-12.25%202.1875h-11.25c1.8736-3.1084%204.75-9.0494%204.75-17%200-7.9734-2.9085-13.9-4.7812-17z'%20fill-rule='evenodd'/%3e%3cpath%20d='m73%2025a4%204%200%201%201-8%200%204%204%200%201%201%208%200z'%20fill='%23fff'%20stroke='%23000'%20stroke-width='3'/%3e%3c/svg%3e",pi="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'?%3e%3csvg%20width='88'%20height='50'%20version='1.1'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='m73.135%2025h15.843m-65.957%200h-24'%20fill='none'%20stroke='%23000'%20stroke-width='2'/%3e%3cpath%20d='m25.947%207.4063%2036.125%2017.594-36.125%2017.594z'%20fill='%23fff'/%3e%3cpath%20d='m72.978%2025a4%204%200%201%201-8%200%204%204%200%201%201%208%200z'%20fill='%23fff'%20stroke='%23000'%20stroke-width='3'/%3e%3cpath%20d='m22.947%202.5938v44.812l2.1562-1.0625%2041.031-20v-2.6875l-41.031-20zm3%204.8125%2036.125%2017.594-36.125%2017.594z'/%3e%3c/svg%3e",mi="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'?%3e%3csvg%20width='88'%20height='50'%20version='1.1'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='m64%2025h25m-64-10h-26m27%2020h-27'%20fill='none'%20stroke='%23000'%20stroke-width='2'/%3e%3cpath%20d='m23.969%208h11.281c4.6842%200%2018.287-0.13021%2027.969%2017-4.7668%208.4291-10.521%2012.684-15.719%2014.812-5.3607%202.1954-9.8419%202.1875-12.25%202.1875h-11.25c1.8736-3.1084%204.75-9.0494%204.75-17%200-7.9734-2.9085-13.9-4.7812-17z'%20fill='%23fff'%20fill-rule='evenodd'/%3e%3cpath%20d='m18.094%205%202%202.4375s5.6562%207%205.6562%2017.562-5.6562%2017.562-5.6562%2017.562l-2%202.4375h17.156c2.4081%201e-6%207.6897%200.02451%2013.625-2.4062%205.9353-2.4308%2012.537-7.3433%2017.688-16.875l-1.3125-0.71875%201.3125-0.71875c-10.303-19.066-26.556-19.281-31.312-19.281zm5.875%203h11.281c4.6842%200%2018.287-0.13021%2027.969%2017-4.7668%208.4291-10.521%2012.684-15.719%2014.812-5.3607%202.1954-9.8419%202.1875-12.25%202.1875h-11.25c1.8736-3.1084%204.75-9.0494%204.75-17%200-7.9734-2.9085-13.9-4.7812-17z'%20fill-rule='evenodd'/%3e%3c/svg%3e",yi="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'?%3e%3csvg%20width='88'%20height='50'%20version='1.1'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='m72.333%2025h16.667m-64.614-10h-25.386m26.362%2020h-26.362'%20fill='none'%20stroke='%23000'%20stroke-width='2'/%3e%3cg%20transform='translate(-6)'%20fill-rule='evenodd'%3e%3cpath%20d='m24.25%2042c-1.5974%202.6444-2.25%203-2.25%203h-3.6562l2-2.4375s5.6562-7.0001%205.6562-17.563-5.6562-17.562-5.6562-17.562l-2-2.4375h3.6562c0.78125%200.9375%201.4219%201.6562%202.2188%203%201.8727%203.0998%204.7812%209.0266%204.7812%2017%200%207.9506-2.8967%2013.879-4.75%2017z'/%3e%3cpath%20d='m29.969%208h11.281c4.6842%200%2018.287-0.13021%2027.969%2017-4.7668%208.4291-10.521%2012.684-15.719%2014.812-5.3607%202.1954-9.8419%202.1875-12.25%202.1875h-11.25c1.8736-3.1084%204.75-9.0494%204.75-17%200-7.9734-2.9085-13.9-4.7812-17z'%20fill='%23fff'/%3e%3cpath%20d='m24.094%205%202%202.4375s5.6562%207%205.6562%2017.562-5.6562%2017.562-5.6562%2017.562l-2%202.4375h17.156c2.4081%201e-6%207.6897%200.02451%2013.625-2.4062%205.9353-2.4308%2012.537-7.3433%2017.688-16.875l-1.3125-0.71875%201.3125-0.71875c-10.303-19.066-26.556-19.281-31.312-19.281zm5.875%203h11.281c4.6842%200%2018.287-0.13021%2027.969%2017-4.7668%208.4291-10.521%2012.684-15.719%2014.812-5.3607%202.1954-9.8419%202.1875-12.25%202.1875h-11.25c1.8736-3.1084%204.75-9.0494%204.75-17%200-7.9734-2.9085-13.9-4.7812-17z'/%3e%3c/g%3e%3cpath%20d='m73%2025a4%204%200%201%201-8%200%204%204%200%201%201%208%200z'%20fill='%23fff'%20stroke='%23000'%20stroke-width='3'/%3e%3c/svg%3e",gi="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'?%3e%3csvg%20width='88'%20height='50'%20version='1.1'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='m64%2025h25m-64.614-10h-25.386m26.362%2020h-26.362'%20fill='none'%20stroke='%23000'%20stroke-width='2'/%3e%3cg%20transform='translate(-6)'%20fill-rule='evenodd'%3e%3cpath%20d='m24.25%2042c-1.5974%202.6444-2.25%203-2.25%203h-3.6562l2-2.4375s5.6562-7%205.6562-17.562-5.6562-17.562-5.6562-17.562l-2-2.4375h3.6562c0.78125%200.9375%201.4219%201.6562%202.2188%203%201.8727%203.0998%204.7812%209.0266%204.7812%2017%200%207.9506-2.8967%2013.879-4.75%2017z'/%3e%3cpath%20d='m29.969%208h11.281c4.6842%200%2018.287-0.1302%2027.969%2017-4.7668%208.4291-10.521%2012.684-15.719%2014.812-5.3607%202.1954-9.8419%202.1875-12.25%202.1875h-11.25c1.8736-3.1084%204.75-9.0494%204.75-17%200-7.9734-2.9085-13.9-4.7812-17z'%20fill='%23fff'/%3e%3cpath%20d='m24.094%205%202%202.4375s5.6562%207%205.6562%2017.562-5.6562%2017.562-5.6562%2017.562l-2%202.4375h17.156c2.4081%200%207.6897%200.02451%2013.625-2.4062s12.537-7.3433%2017.688-16.875l-1.3125-0.71875%201.3125-0.71875c-10.303-19.066-26.556-19.281-31.312-19.281zm5.875%203h11.281c4.6842%200%2018.287-0.1302%2027.969%2017-4.7668%208.4291-10.521%2012.684-15.719%2014.812-5.3607%202.1954-9.8419%202.1875-12.25%202.1875h-11.25c1.8736-3.1084%204.75-9.0494%204.75-17%200-7.9734-2.9085-13.9-4.7812-17z'/%3e%3c/g%3e%3c/svg%3e",_r={id:z.G_AND,imgPath:[hi],connectionSlot:[{id:0,name:"A",in:!0,localPos:new C(-4,15)},{id:1,name:"B",in:!0,localPos:new C(-4,35)},{id:2,name:"C",in:!1,localPos:new C(92,25)}]},kr={id:z.G_NAND,imgPath:[ui],connectionSlot:[{id:0,name:"A",in:!0,localPos:new C(-4,15)},{id:1,name:"B",in:!0,localPos:new C(-4,35)},{id:2,name:"C",in:!1,localPos:new C(92,25)}]},br={id:z.G_NOR,imgPath:[fi],connectionSlot:[{id:0,name:"A",in:!0,localPos:new C(-4,15)},{id:1,name:"B",in:!0,localPos:new C(-4,35)},{id:2,name:"C",in:!1,localPos:new C(92,25)}]},zs={id:z.G_NOT,imgPath:[pi],connectionSlot:[{id:0,name:"In",in:!0,localPos:new C(-4,25)},{id:1,name:"Out",in:!1,localPos:new C(92,25)}]},$r={id:z.G_OR,imgPath:[mi],connectionSlot:[{id:0,name:"A",in:!0,localPos:new C(-4,15)},{id:1,name:"B",in:!0,localPos:new C(-4,35)},{id:2,name:"C",in:!1,localPos:new C(92,25)}]},Sr={id:z.G_XNOR,imgPath:[yi],connectionSlot:[{id:0,name:"A",in:!0,localPos:new C(-4,15)},{id:1,name:"B",in:!0,localPos:new C(-4,35)},{id:2,name:"C",in:!1,localPos:new C(92,25)}]},Pr={id:z.G_XOR,imgPath:[gi],connectionSlot:[{id:0,name:"A",in:!0,localPos:new C(-4,15)},{id:1,name:"B",in:!0,localPos:new C(-4,35)},{id:2,name:"C",in:!1,localPos:new C(92,25)}]};class ot{id;position;componentType;nodeType;slots;collisionShape;_images;imageSize;halfImageSize;imageMode="UP_LEFT";_signalData;selected;get image(){return Object.keys(this._images).length===0?null:this._images[0]}get state(){return this._signalData.output??!1}constructor(e,s,n,r,i,o,h,p,w=!0){if(this.id=e,this.position=s,this.componentType=le.NODE,this.nodeType=ot.getNodeModel(n),this._signalData=p[this.id],this.slots=o,this._images=Je(h,this.nodeType.imgPath),this.imageSize=new C(this.image?.width??100,this.image?.height??100),this.halfImageSize=C.div(this.imageSize,2),w){this.imageMode="CENTER",this.position.sub(this.halfImageSize);const u=new C(r,i).sub(this.imageSize);this.position.min(u).max(C.ZERO)}this.collisionShape=new Me(this.position,this.imageSize.x,this.imageSize.y),this.selected=!1}static getNodeModel(e){switch(e){case z.G_AND:return _r;case z.G_NAND:return kr;case z.G_NOR:return br;case z.G_NOT:return zs;case z.G_OR:return $r;case z.G_XNOR:return Sr;case z.G_XOR:return Pr;default:return zs}}move(e,s=!0){s?this.position.add(e):this.imageMode==="CENTER"?C.sub(e,this.halfImageSize,this.position):this.position.copy(e),this.collisionShape.moveShape(this.position,!1)}draw(e){this.image&&(e.drawImage(this.image,this.position.x,this.position.y),this.collisionShape!==void 0&&this.collisionShape.draw(e,this.selected))}onEvent(e){switch(e){case ne.FOCUS_IN:this.selected=!0;break;case ne.FOCUS_OUT:this.selected=!1;break;default:return!1}return!0}toObject(){return{id:this.id,componentType:this.componentType,nodeType:this.nodeType.id,position:this.position.toPlainObject(),slotIds:this.slots.map(s=>s.id),state:this.state}}}class Er{position;radius;radiusSquared;drawPath;regenPath;borderColor;constructor(e,s,n="#FF8008DC"){this.position=e,this.radius=s,this.radiusSquared=s*s,this.borderColor=n,this.regenPath=!1}generatePath(){const e=new Path2D;return e.arc(this.position.x,this.position.y,this.radius,0,Math.PI*2),this.regenPath=!1,e}draw(e,s){s&&((!this.drawPath||this.regenPath)&&(this.drawPath=this.generatePath()),e.save(),e.strokeStyle=this.borderColor,e.stroke(this.drawPath),e.restore())}moveShape(e,s=!0){s?this.position.add(e):this.position.copy(e),this.drawPath=this.generatePath()}collisionWithPoint(e){return C.sub(this.position,e).lenSquared()<this.radiusSquared}collisionWithBox(e){if(e.collisionWithPoint(this.position))return!0;const s=C.max(e.vertices.a,C.min(e.vertices.c,this.position));return C.sub(this.position,s).lenSquared()<this.radiusSquared}collisionWithCircle(e){return C.sub(this.position,e.position).len()<this.radius+e.radius}collisionWithLine(e){return e.collisionWithCircle(this)}}class Ir{id;position;globalPosition;componentType;parent;slotIdAtParent;_slotConnections;drawPath;regenPath;selected;inSlot;color;colorActive;radius;attractionRadius;collisionShape;get slotConnections(){return this._slotConnections}set slotConnections(e){this.inSlot?(this._slotConnections.splice(0,this._slotConnections.length),this._slotConnections.push(e[0])):this._slotConnections=e}constructor(e,s,n,r,i=[],o=!0,h=4,p=12,w="#0880FF",u="#FF0000"){this.id=e,this.position=s,this.globalPosition=C.add(s,n.position),this.componentType=le.SLOT,this.parent=n,this.slotIdAtParent=r,this._slotConnections=i,this.color=w,this.colorActive=u,this.selected=!1,this.inSlot=o,this.radius=h,this.attractionRadius=p,this.collisionShape=new Er(this.globalPosition,this.attractionRadius),this.regenPath=!1}move(e,s=!0){C.add(this.position,this.parent.position,this.globalPosition),this.collisionShape.moveShape(this.globalPosition,!1),this.regenPath=!0}generatePath(){const e=new Path2D;return e.arc(this.globalPosition.x,this.globalPosition.y,this.radius,0,Math.PI*2),e}draw(e){(!this.drawPath||this.regenPath)&&(this.drawPath=this.generatePath()),e.save(),e.fillStyle=this.selected?this.colorActive:this.color,e.fill(this.drawPath),e.restore(),this.collisionShape.draw(e,this.selected)}onEvent(e){switch(e){case ne.FOCUS_IN:this.selected=!0;break;case ne.FOCUS_OUT:this.selected=!1;break;default:return!1}return!0}toObject(){return{id:this.id,componentType:this.componentType,position:this.position.toPlainObject(),parentId:this.parent.id,slotIdAtParent:this.slotIdAtParent,connectionIds:this.slotConnections.map(s=>s.id),inSlot:this.inSlot,color:this.color,colorActive:this.colorActive,radius:this.radius,attractionRadius:this.attractionRadius}}}class Or{id;position;componentType;text;parent;style;textSize;collisionShape;canvasContext;selected;constructor(e,s,n="",r="12px sans-serif",i,o){this.id=e,this.position=s,this.componentType=le.TEXT,this.text=n,this.style=r,this.parent=i,this.canvasContext=o,this.textSize=this.measureText(n,r),this.position.sub(C.div(this.textSize,2)),this.collisionShape=new Me(this.position,this.textSize.x,this.textSize.y),this.selected=!1}measureText(e,s){this.canvasContext.font=s,this.canvasContext.textBaseline="top",this.canvasContext.textAlign="left";const n=this.canvasContext.measureText(e);return new C(n.width,n.actualBoundingBoxDescent-n.actualBoundingBoxAscent).max(new C(16,16))}draw(e){e.save(),e.font=this.style,e.textBaseline="top",e.textAlign="left",e.fillText(this.text,this.position.x,this.position.y),e.restore(),this.collisionShape.draw(e,this.selected)}move(e,s=!0){s?this.position.add(e):C.sub(e,C.div(this.textSize,2),this.position),this.collisionShape.moveShape(this.position,!1)}onEvent(e){switch(e){case ne.FOCUS_IN:this.selected=!0;break;case ne.FOCUS_OUT:this.selected=!1;break;default:return!1}return!0}toObject(){return{id:this.id,componentType:this.componentType,position:this.position.toPlainObject(),text:this.text,parent:this.parent,style:this.style}}}const vi="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB3aWR0aD0iNzAiIGhlaWdodD0iNTAiIHZlcnNpb249IjEuMSIgdmlld0JveD0iMCAwIDcwIDUwIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIj4KIDxnPgogIDxyZWN0IHg9IjEiIHk9IjEiIHdpZHRoPSI0OCIgaGVpZ2h0PSI0OCIgZmlsbD0iI2ZmZiIgc3Ryb2tlPSIjMDAwIiBzdHJva2Utd2lkdGg9IjIiLz4KICA8cGF0aCBkPSJtNDkuNSAyNS4wNDRoMjEuNSIgZmlsbD0iI2ZmZiIgc3Ryb2tlPSIjMDAwIiBzdHJva2Utd2lkdGg9IjIuMTEzNiIvPgogIDx0ZXh0IHg9IjE1Ljg0OCIgeT0iMzYuNDM5OTk5IiBmaWxsPSIjMDAwMDAwIiBmb250LXNpemU9IjMycHgiIHN0cm9rZT0iIzAwMDAwMCIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+PHRzcGFuIHg9IjE1Ljg0OCIgeT0iMzYuNDM5OTk5IiBmaWxsPSIjMDAwMDAwIiBmb250LXNpemU9IjMycHgiIHN0cm9rZT0iIzAwMDAwMCI+MDwvdHNwYW4+PC90ZXh0PgogPC9nPgo8L3N2Zz4K",wi="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB3aWR0aD0iNzAiIGhlaWdodD0iNTAiIHZlcnNpb249IjEuMSIgdmlld0JveD0iMCAwIDcwIDUwIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPgogPGc+CiAgPHJlY3QgeD0iMSIgeT0iMSIgd2lkdGg9IjQ4IiBoZWlnaHQ9IjQ4IiBmaWxsPSIjZmZmIiBzdHJva2U9IiMwMDAiIHN0cm9rZS13aWR0aD0iMiIvPgogIDxwYXRoIGQ9Im00OS41IDI1LjA0NGgyMS41IiBmaWxsPSIjZmZmIiBzdHJva2U9IiMwMDAiIHN0cm9rZS13aWR0aD0iMi4xMTM2Ii8+CiAgPHRleHQgeD0iMTUuODQ4IiB5PSIzNi40Mzk5OTkiIGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjMycHgiIHN0cm9rZT0iIzAwMDAwMCIgc3R5bGU9ImZvbnQtdmFyaWFudC1jYXBzOm5vcm1hbDtmb250LXZhcmlhbnQtZWFzdC1hc2lhbjpub3JtYWw7Zm9udC12YXJpYW50LWxpZ2F0dXJlczpub3JtYWw7Zm9udC12YXJpYW50LW51bWVyaWM6bm9ybWFsIiB4bWw6c3BhY2U9InByZXNlcnZlIj48dHNwYW4+MTwvdHNwYW4+PC90ZXh0PgogPC9nPgo8L3N2Zz4K",_i="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'%20standalone='no'?%3e%3csvg%20width='70'%20height='50'%20version='1.1'%20viewBox='0%200%2070%2050'%20id='svg1'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:svg='http://www.w3.org/2000/svg'%3e%3cdefs%20id='defs1'%20/%3e%3cg%20id='g1'%20transform='translate(-0.96743465)'%3e%3cpath%20d='M%2049.5,25.044%20H%2071'%20fill='%23ffffff'%20stroke='%23000000'%20stroke-width='2.1136'%20id='path1'%20/%3e%3c/g%3e%3ccircle%20style='fill:%23ffffff;stroke:%23000000;stroke-width:2'%20id='path3'%20cx='25'%20cy='25'%20r='24'%20/%3e%3ccircle%20style='fill:%23b3b3b3;stroke:%23000000;stroke-width:1;stroke-dasharray:none'%20id='path4'%20cx='25'%20cy='25'%20r='20'%20/%3e%3c/svg%3e",ki="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'%20standalone='no'?%3e%3csvg%20width='70'%20height='50'%20version='1.1'%20viewBox='0%200%2070%2050'%20id='svg1'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:svg='http://www.w3.org/2000/svg'%3e%3cdefs%20id='defs1'%20/%3e%3cg%20id='g4'%3e%3cpath%20d='M%2049.5,25.044%20H%2071'%20fill='%23ffffff'%20stroke='%23000000'%20stroke-width='2.1136'%20id='path1'%20transform='translate(-0.96743465)'%20/%3e%3ccircle%20style='fill:%23ffffff;stroke:%23000000;stroke-width:2'%20id='path3'%20cx='25'%20cy='25'%20r='24'%20/%3e%3ccircle%20style='fill:%23ff0000;stroke:%23000000;stroke-width:1;stroke-dasharray:none'%20id='path4'%20cx='25'%20cy='25'%20r='20'%20/%3e%3c/g%3e%3c/svg%3e",bi="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'?%3e%3c!--%20Created%20with%20Inkscape%20(http://www.inkscape.org/)%20--%3e%3csvg%20width='60'%20height='50'%20version='1.1'%20viewBox='0%200%2060%2050'%20xmlns='http://www.w3.org/2000/svg'%3e%3cg%20stroke='%23000'%3e%3crect%20x='1'%20y='1'%20width='48'%20height='48'%20fill='%23fff'%20stroke-width='2'/%3e%3cpath%20d='m4.8716%2042.094h5.9456v-34.435h13.13v34.683h12.015v-34.683h9.1662'%20fill='none'/%3e%3cpath%20d='m49.671%2025h10.529'%20fill='none'%20stroke-width='2'/%3e%3c/g%3e%3c/svg%3e",$i={id:z.I_SWITCH,imgPath:[vi,wi],connectionSlot:[{id:0,in:!1,name:"Out",localPos:new C(74,25)}]},Si={id:z.I_BUTTON,imgPath:[_i,ki],connectionSlot:[{id:0,in:!1,name:"Out",localPos:new C(74,25)}]},Pi={id:z.I_CLOCK,imgPath:[bi],connectionSlot:[{id:0,in:!1,name:"Out",localPos:new C(64,25)}]};class Tr{id;position;componentType;nodeType;slots;collisionShape;_images;imageSize;halfImageSize;imageMode="UP_LEFT";_signalData;selected;get image(){return Object.keys(this._images).length===0?null:this._images[this.state?1:0]}get state(){return this._signalData.output??!1}set state(e){this._signalData.output=e}constructor(e,s,n,r,i,o,h,p=!0){if(this.id=e,this.position=s,this.componentType=le.INPUT,this.nodeType=$i,this._signalData=h[this.id],this.slots=i,this._images=Je(o,this.nodeType.imgPath),this.imageSize=new C(this.image?.width??100,this.image?.height??100),this.halfImageSize=C.div(this.imageSize,2),p){this.imageMode="CENTER",this.position.sub(this.halfImageSize);const w=new C(n,r).sub(this.imageSize);this.position.min(w).max(C.ZERO)}this.collisionShape=new Me(this.position,this.imageSize.x,this.imageSize.y),this.selected=!1}move(e,s=!0){s?this.position.add(e):this.imageMode==="CENTER"?C.sub(e,this.halfImageSize,this.position):this.position.copy(e),this.collisionShape.moveShape(this.position,!1)}draw(e){this.image&&(e.drawImage(this.image,this.position.x,this.position.y),this.collisionShape!==void 0&&this.collisionShape.draw(e,this.selected))}onEvent(e){switch(e){case ne.MOUSE_RELEASED:this.state=!this.state;break;case ne.FOCUS_IN:this.selected=!0;break;case ne.FOCUS_OUT:this.selected=!1;break;default:return!1}return!0}toObject(){return{id:this.id,componentType:this.componentType,nodeType:this.nodeType.id,position:this.position.toPlainObject(),slotIds:this.slots.map(s=>s.id),state:this.state}}}const Ei="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'?%3e%3csvg%20width='46.08'%20height='64'%20version='1.1'%20viewBox='0%200%2046.08%2064'%20xmlns='http://www.w3.org/2000/svg'%3e%3cg%20stroke='%23000'%20stroke-linejoin='round'%3e%3cpath%20d='m23.041%202.5131c-6.8934%200-12.445%204.8028-12.445%2010.768v18.825%202.7066h-7.2638v9.2635h39.415v-9.2635h-7.2638v-2.7066-18.825c0-5.9654-5.5488-10.768-12.442-10.768z'%20fill='%23d9d9d9'%20stroke-width='2.5854'/%3e%3cpath%20d='m9.619%2035.474h26.424'%20fill='%23fdfdfd'%20stroke-width='1.2927'/%3e%3cpath%20d='m23.04%2044.39v21.976'%20fill='%23fdfdfd'%20stroke-width='2.8546'/%3e%3c/g%3e%3c/svg%3e",Ii="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'?%3e%3csvg%20width='46.08'%20height='64'%20version='1.1'%20viewBox='0%200%2046.08%2064'%20xmlns='http://www.w3.org/2000/svg'%3e%3cg%20stroke='%23000'%20stroke-linejoin='round'%3e%3cpath%20d='m23.041%202.5131c-6.8934%200-12.445%204.8028-12.445%2010.768v18.825%202.7066h-7.2638v9.2635h39.415v-9.2635h-7.2638v-2.7066-18.825c0-5.9654-5.5488-10.768-12.442-10.768z'%20fill='%23ff4949'%20stroke-width='2.5854'/%3e%3cpath%20d='m9.619%2035.474h26.424'%20fill='%23fdfdfd'%20stroke-width='1.2927'/%3e%3cpath%20d='m23.04%2044.39v21.976'%20fill='%23fdfdfd'%20stroke-width='2.8546'/%3e%3c/g%3e%3c/svg%3e",Oi="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'%20standalone='no'?%3e%3c!--%20Created%20with%20Inkscape%20(http://www.inkscape.org/)%20--%3e%3csvg%20width='90'%20height='120'%20viewBox='0%200%2090%20120'%20version='1.1'%20id='svg1'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:svg='http://www.w3.org/2000/svg'%3e%3cdefs%20id='defs1'%20/%3e%3cg%20id='layer1'%3e%3crect%20style='fill:%23ffffff;stroke:%23000000;stroke-width:1.98364;stroke-dasharray:none;fill-opacity:1'%20id='rect1'%20width='68.016357'%20height='118.01637'%20x='20.991819'%20y='0.99181795'%20/%3e%3cpath%20style='fill:%23b3b3b3;fill-opacity:1;stroke:none;stroke-width:2;stroke-dasharray:none'%20d='m%2037.896931,20.60398%202.443296,-2.225144%20h%2029.843106%20l%201.919733,2.225144%20-1.919733,2.225144%20H%2040.340227%20Z'%20id='path1'%20/%3e%3cpath%20style='fill:%23b3b3b3;fill-opacity:1;stroke:none;stroke-width:2;stroke-dasharray:none'%20d='m%2073.999998,23.18857%202.225144,2.443296%20v%2029.843106%20l%20-2.225144,1.919732%20-2.225144,-1.919732%20V%2025.631866%20Z'%20id='path1-5'%20/%3e%3cpath%20style='fill:%23b3b3b3;fill-opacity:1;stroke:none;stroke-width:2;stroke-dasharray:none'%20d='m%2037.89693,59.979294%202.443296,-2.225144%20h%2029.843107%20l%201.919732,2.225144%20-1.919732,2.225144%20H%2040.340226%20Z'%20id='path2'%20/%3e%3cpath%20style='fill:%23b3b3b3;fill-opacity:1;stroke:none;stroke-width:2;stroke-dasharray:none'%20d='m%2035.999998,23.18857%202.225144,2.443296%20v%2029.843106%20l%20-2.225144,1.919732%20-2.225144,-1.919732%20V%2025.631866%20Z'%20id='path3'%20/%3e%3cpath%20style='fill:%23b3b3b3;fill-opacity:1;stroke:none;stroke-width:2;stroke-dasharray:none'%20d='m%2073.999998,62.605295%202.225144,2.443296%20V%2094.891697%20L%2073.999998,96.81143%2071.774854,94.891697%20V%2065.048591%20Z'%20id='path4'%20/%3e%3cpath%20style='fill:%23b3b3b3;fill-opacity:1;stroke:none;stroke-width:2;stroke-dasharray:none'%20d='m%2037.89693,99.396019%202.443296,-2.225144%20h%2029.843107%20l%201.919732,2.225144%20-1.919732,2.225141%20H%2040.340226%20Z'%20id='path5'%20/%3e%3cpath%20style='fill:%23b3b3b3;fill-opacity:1;stroke:none;stroke-width:2;stroke-dasharray:none'%20d='m%2035.999998,62.605295%202.225144,2.443296%20V%2094.891697%20L%2035.999998,96.81143%2033.774854,94.891697%20V%2065.048591%20Z'%20id='path6'%20/%3e%3cpath%20style='fill:none;fill-opacity:1;stroke:%23000000;stroke-width:2;stroke-dasharray:none;stroke-opacity:1'%20d='M%2020.942532,17%20H%200'%20id='path7'%20/%3e%3cpath%20style='fill:none;fill-opacity:1;stroke:%23000000;stroke-width:2;stroke-dasharray:none;stroke-opacity:1'%20d='M%2020.942532,31.333333%20H%200'%20id='path8'%20/%3e%3cpath%20style='fill:none;fill-opacity:1;stroke:%23000000;stroke-width:2;stroke-dasharray:none;stroke-opacity:1'%20d='M%2020.942532,45.666667%20H%200'%20id='path9'%20/%3e%3cpath%20style='fill:none;fill-opacity:1;stroke:%23000000;stroke-width:2;stroke-dasharray:none;stroke-opacity:1'%20d='M%2020.942532,60%20H%200'%20id='path10'%20/%3e%3cpath%20style='fill:none;fill-opacity:1;stroke:%23000000;stroke-width:2;stroke-dasharray:none;stroke-opacity:1'%20d='M%2020.942532,74.333333%20H%200'%20id='path11'%20/%3e%3cpath%20style='fill:none;fill-opacity:1;stroke:%23000000;stroke-width:2;stroke-dasharray:none;stroke-opacity:1'%20d='M%2020.942532,88.666667%20H%200'%20id='path12'%20/%3e%3cpath%20style='fill:none;fill-opacity:1;stroke:%23000000;stroke-width:2;stroke-dasharray:none;stroke-opacity:1'%20d='M%2020.942532,103%20H%200'%20id='path13'%20/%3e%3c/g%3e%3c/svg%3e",Ti="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'%20standalone='no'?%3e%3c!--%20Created%20with%20Inkscape%20(http://www.inkscape.org/)%20--%3e%3csvg%20width='90'%20height='120'%20viewBox='0%200%2090%20120'%20version='1.1'%20id='svg1'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:svg='http://www.w3.org/2000/svg'%3e%3cdefs%20id='defs1'%20/%3e%3cg%20id='layer1'%3e%3crect%20style='display:none;fill:none;stroke:%23000000;stroke-width:1.98364;stroke-dasharray:none'%20id='rect1'%20width='68.016357'%20height='118.01637'%20x='20.991819'%20y='0.99181795'%20/%3e%3cpath%20style='fill:%23ff0000;fill-opacity:1;stroke:none;stroke-width:2;stroke-dasharray:none'%20d='m%2037.896931,20.60398%202.443296,-2.225144%20h%2029.843106%20l%201.919733,2.225144%20-1.919733,2.225144%20H%2040.340227%20Z'%20id='path1'%20/%3e%3cpath%20style='display:none;fill:%23ff0000;fill-opacity:1;stroke:none;stroke-width:2;stroke-dasharray:none'%20d='m%2073.999998,23.18857%202.225144,2.443296%20v%2029.843106%20l%20-2.225144,1.919732%20-2.225144,-1.919732%20V%2025.631866%20Z'%20id='path1-5'%20/%3e%3cpath%20style='display:none;fill:%23ff0000;fill-opacity:1;stroke:none;stroke-width:2;stroke-dasharray:none'%20d='m%2073.999998,62.605295%202.225144,2.443296%20V%2094.891697%20L%2073.999998,96.81143%2071.774854,94.891697%20V%2065.048591%20Z'%20id='path4'%20/%3e%3cpath%20style='display:none;fill:%23ff0000;fill-opacity:1;stroke:none;stroke-width:2;stroke-dasharray:none'%20d='m%2037.89693,99.396019%202.443296,-2.225144%20h%2029.843107%20l%201.919732,2.225144%20-1.919732,2.225141%20H%2040.340226%20Z'%20id='path5'%20/%3e%3cpath%20style='display:none;fill:%23ff0000;fill-opacity:1;stroke:none;stroke-width:2;stroke-dasharray:none'%20d='m%2035.999998,62.605295%202.225144,2.443296%20V%2094.891697%20L%2035.999998,96.81143%2033.774854,94.891697%20V%2065.048591%20Z'%20id='path6'%20/%3e%3cpath%20style='display:none;fill:%23ff0000;fill-opacity:1;stroke:none;stroke-width:2;stroke-dasharray:none'%20d='m%2035.999998,23.18857%202.225144,2.443296%20v%2029.843106%20l%20-2.225144,1.919732%20-2.225144,-1.919732%20V%2025.631866%20Z'%20id='path3'%20/%3e%3cpath%20style='display:none;fill:%23ff0000;fill-opacity:1;stroke:none;stroke-width:2;stroke-dasharray:none'%20d='m%2037.89693,59.979294%202.443296,-2.225144%20h%2029.843107%20l%201.919732,2.225144%20-1.919732,2.225144%20H%2040.340226%20Z'%20id='path2'%20/%3e%3cpath%20style='display:none;fill:none;fill-opacity:1;stroke:%23000000;stroke-width:2;stroke-dasharray:none;stroke-opacity:1'%20d='M%2020.942532,17%20H%200'%20id='path7'%20/%3e%3cpath%20style='display:none;fill:none;fill-opacity:1;stroke:%23000000;stroke-width:2;stroke-dasharray:none;stroke-opacity:1'%20d='M%2020.942532,31.333333%20H%200'%20id='path8'%20/%3e%3cpath%20style='display:none;fill:none;fill-opacity:1;stroke:%23000000;stroke-width:2;stroke-dasharray:none;stroke-opacity:1'%20d='M%2020.942532,45.666667%20H%200'%20id='path9'%20/%3e%3cpath%20style='display:none;fill:none;fill-opacity:1;stroke:%23000000;stroke-width:2;stroke-dasharray:none;stroke-opacity:1'%20d='M%2020.942532,60%20H%200'%20id='path10'%20/%3e%3cpath%20style='display:none;fill:none;fill-opacity:1;stroke:%23000000;stroke-width:2;stroke-dasharray:none;stroke-opacity:1'%20d='M%2020.942532,74.333333%20H%200'%20id='path11'%20/%3e%3cpath%20style='display:none;fill:none;fill-opacity:1;stroke:%23000000;stroke-width:2;stroke-dasharray:none;stroke-opacity:1'%20d='M%2020.942532,88.666667%20H%200'%20id='path12'%20/%3e%3cpath%20style='display:none;fill:none;fill-opacity:1;stroke:%23000000;stroke-width:2;stroke-dasharray:none;stroke-opacity:1'%20d='M%2020.942532,103%20H%200'%20id='path13'%20/%3e%3c/g%3e%3c/svg%3e",Ni="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'%20standalone='no'?%3e%3c!--%20Created%20with%20Inkscape%20(http://www.inkscape.org/)%20--%3e%3csvg%20width='90'%20height='120'%20viewBox='0%200%2090%20120'%20version='1.1'%20id='svg1'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:svg='http://www.w3.org/2000/svg'%3e%3cdefs%20id='defs1'%20/%3e%3cg%20id='layer1'%3e%3crect%20style='display:none;fill:none;stroke:%23000000;stroke-width:1.98364;stroke-dasharray:none'%20id='rect1'%20width='68.016357'%20height='118.01637'%20x='20.991819'%20y='0.99181795'%20/%3e%3cpath%20style='display:none;fill:%23ff0000;fill-opacity:1;stroke:none;stroke-width:2;stroke-dasharray:none'%20d='m%2037.896931,20.60398%202.443296,-2.225144%20h%2029.843106%20l%201.919733,2.225144%20-1.919733,2.225144%20H%2040.340227%20Z'%20id='path1'%20/%3e%3cpath%20style='display:inline;fill:%23ff0000;fill-opacity:1;stroke:none;stroke-width:2;stroke-dasharray:none'%20d='m%2073.999998,23.18857%202.225144,2.443296%20v%2029.843106%20l%20-2.225144,1.919732%20-2.225144,-1.919732%20V%2025.631866%20Z'%20id='path1-5'%20/%3e%3cpath%20style='display:none;fill:%23ff0000;fill-opacity:1;stroke:none;stroke-width:2;stroke-dasharray:none'%20d='m%2073.999998,62.605295%202.225144,2.443296%20V%2094.891697%20L%2073.999998,96.81143%2071.774854,94.891697%20V%2065.048591%20Z'%20id='path4'%20/%3e%3cpath%20style='display:none;fill:%23ff0000;fill-opacity:1;stroke:none;stroke-width:2;stroke-dasharray:none'%20d='m%2037.89693,99.396019%202.443296,-2.225144%20h%2029.843107%20l%201.919732,2.225144%20-1.919732,2.225141%20H%2040.340226%20Z'%20id='path5'%20/%3e%3cpath%20style='display:none;fill:%23ff0000;fill-opacity:1;stroke:none;stroke-width:2;stroke-dasharray:none'%20d='m%2035.999998,62.605295%202.225144,2.443296%20V%2094.891697%20L%2035.999998,96.81143%2033.774854,94.891697%20V%2065.048591%20Z'%20id='path6'%20/%3e%3cpath%20style='display:none;fill:%23ff0000;fill-opacity:1;stroke:none;stroke-width:2;stroke-dasharray:none'%20d='m%2035.999998,23.18857%202.225144,2.443296%20v%2029.843106%20l%20-2.225144,1.919732%20-2.225144,-1.919732%20V%2025.631866%20Z'%20id='path3'%20/%3e%3cpath%20style='display:none;fill:%23ff0000;fill-opacity:1;stroke:none;stroke-width:2;stroke-dasharray:none'%20d='m%2037.89693,59.979294%202.443296,-2.225144%20h%2029.843107%20l%201.919732,2.225144%20-1.919732,2.225144%20H%2040.340226%20Z'%20id='path2'%20/%3e%3cpath%20style='display:none;fill:none;fill-opacity:1;stroke:%23000000;stroke-width:2;stroke-dasharray:none;stroke-opacity:1'%20d='M%2020.942532,17%20H%200'%20id='path7'%20/%3e%3cpath%20style='display:none;fill:none;fill-opacity:1;stroke:%23000000;stroke-width:2;stroke-dasharray:none;stroke-opacity:1'%20d='M%2020.942532,31.333333%20H%200'%20id='path8'%20/%3e%3cpath%20style='display:none;fill:none;fill-opacity:1;stroke:%23000000;stroke-width:2;stroke-dasharray:none;stroke-opacity:1'%20d='M%2020.942532,45.666667%20H%200'%20id='path9'%20/%3e%3cpath%20style='display:none;fill:none;fill-opacity:1;stroke:%23000000;stroke-width:2;stroke-dasharray:none;stroke-opacity:1'%20d='M%2020.942532,60%20H%200'%20id='path10'%20/%3e%3cpath%20style='display:none;fill:none;fill-opacity:1;stroke:%23000000;stroke-width:2;stroke-dasharray:none;stroke-opacity:1'%20d='M%2020.942532,74.333333%20H%200'%20id='path11'%20/%3e%3cpath%20style='display:none;fill:none;fill-opacity:1;stroke:%23000000;stroke-width:2;stroke-dasharray:none;stroke-opacity:1'%20d='M%2020.942532,88.666667%20H%200'%20id='path12'%20/%3e%3cpath%20style='display:none;fill:none;fill-opacity:1;stroke:%23000000;stroke-width:2;stroke-dasharray:none;stroke-opacity:1'%20d='M%2020.942532,103%20H%200'%20id='path13'%20/%3e%3c/g%3e%3c/svg%3e",Ci="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'%20standalone='no'?%3e%3c!--%20Created%20with%20Inkscape%20(http://www.inkscape.org/)%20--%3e%3csvg%20width='90'%20height='120'%20viewBox='0%200%2090%20120'%20version='1.1'%20id='svg1'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:svg='http://www.w3.org/2000/svg'%3e%3cdefs%20id='defs1'%20/%3e%3cg%20id='layer1'%3e%3crect%20style='display:none;fill:none;stroke:%23000000;stroke-width:1.98364;stroke-dasharray:none'%20id='rect1'%20width='68.016357'%20height='118.01637'%20x='20.991819'%20y='0.99181795'%20/%3e%3cpath%20style='display:none;fill:%23ff0000;fill-opacity:1;stroke:none;stroke-width:2;stroke-dasharray:none'%20d='m%2037.896931,20.60398%202.443296,-2.225144%20h%2029.843106%20l%201.919733,2.225144%20-1.919733,2.225144%20H%2040.340227%20Z'%20id='path1'%20/%3e%3cpath%20style='display:none;fill:%23ff0000;fill-opacity:1;stroke:none;stroke-width:2;stroke-dasharray:none'%20d='m%2073.999998,23.18857%202.225144,2.443296%20v%2029.843106%20l%20-2.225144,1.919732%20-2.225144,-1.919732%20V%2025.631866%20Z'%20id='path1-5'%20/%3e%3cpath%20style='display:inline;fill:%23ff0000;fill-opacity:1;stroke:none;stroke-width:2;stroke-dasharray:none'%20d='m%2073.999998,62.605295%202.225144,2.443296%20V%2094.891697%20L%2073.999998,96.81143%2071.774854,94.891697%20V%2065.048591%20Z'%20id='path4'%20/%3e%3cpath%20style='display:none;fill:%23ff0000;fill-opacity:1;stroke:none;stroke-width:2;stroke-dasharray:none'%20d='m%2037.89693,99.396019%202.443296,-2.225144%20h%2029.843107%20l%201.919732,2.225144%20-1.919732,2.225141%20H%2040.340226%20Z'%20id='path5'%20/%3e%3cpath%20style='display:none;fill:%23ff0000;fill-opacity:1;stroke:none;stroke-width:2;stroke-dasharray:none'%20d='m%2035.999998,62.605295%202.225144,2.443296%20V%2094.891697%20L%2035.999998,96.81143%2033.774854,94.891697%20V%2065.048591%20Z'%20id='path6'%20/%3e%3cpath%20style='display:none;fill:%23ff0000;fill-opacity:1;stroke:none;stroke-width:2;stroke-dasharray:none'%20d='m%2035.999998,23.18857%202.225144,2.443296%20v%2029.843106%20l%20-2.225144,1.919732%20-2.225144,-1.919732%20V%2025.631866%20Z'%20id='path3'%20/%3e%3cpath%20style='display:none;fill:%23ff0000;fill-opacity:1;stroke:none;stroke-width:2;stroke-dasharray:none'%20d='m%2037.89693,59.979294%202.443296,-2.225144%20h%2029.843107%20l%201.919732,2.225144%20-1.919732,2.225144%20H%2040.340226%20Z'%20id='path2'%20/%3e%3cpath%20style='display:none;fill:none;fill-opacity:1;stroke:%23000000;stroke-width:2;stroke-dasharray:none;stroke-opacity:1'%20d='M%2020.942532,17%20H%200'%20id='path7'%20/%3e%3cpath%20style='display:none;fill:none;fill-opacity:1;stroke:%23000000;stroke-width:2;stroke-dasharray:none;stroke-opacity:1'%20d='M%2020.942532,31.333333%20H%200'%20id='path8'%20/%3e%3cpath%20style='display:none;fill:none;fill-opacity:1;stroke:%23000000;stroke-width:2;stroke-dasharray:none;stroke-opacity:1'%20d='M%2020.942532,45.666667%20H%200'%20id='path9'%20/%3e%3cpath%20style='display:none;fill:none;fill-opacity:1;stroke:%23000000;stroke-width:2;stroke-dasharray:none;stroke-opacity:1'%20d='M%2020.942532,60%20H%200'%20id='path10'%20/%3e%3cpath%20style='display:none;fill:none;fill-opacity:1;stroke:%23000000;stroke-width:2;stroke-dasharray:none;stroke-opacity:1'%20d='M%2020.942532,74.333333%20H%200'%20id='path11'%20/%3e%3cpath%20style='display:none;fill:none;fill-opacity:1;stroke:%23000000;stroke-width:2;stroke-dasharray:none;stroke-opacity:1'%20d='M%2020.942532,88.666667%20H%200'%20id='path12'%20/%3e%3cpath%20style='display:none;fill:none;fill-opacity:1;stroke:%23000000;stroke-width:2;stroke-dasharray:none;stroke-opacity:1'%20d='M%2020.942532,103%20H%200'%20id='path13'%20/%3e%3c/g%3e%3c/svg%3e",Ri="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'%20standalone='no'?%3e%3c!--%20Created%20with%20Inkscape%20(http://www.inkscape.org/)%20--%3e%3csvg%20width='90'%20height='120'%20viewBox='0%200%2090%20120'%20version='1.1'%20id='svg1'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:svg='http://www.w3.org/2000/svg'%3e%3cdefs%20id='defs1'%20/%3e%3cg%20id='layer1'%3e%3crect%20style='display:none;fill:none;stroke:%23000000;stroke-width:1.98364;stroke-dasharray:none'%20id='rect1'%20width='68.016357'%20height='118.01637'%20x='20.991819'%20y='0.99181795'%20/%3e%3cpath%20style='display:none;fill:%23ff0000;fill-opacity:1;stroke:none;stroke-width:2;stroke-dasharray:none'%20d='m%2037.896931,20.60398%202.443296,-2.225144%20h%2029.843106%20l%201.919733,2.225144%20-1.919733,2.225144%20H%2040.340227%20Z'%20id='path1'%20/%3e%3cpath%20style='display:none;fill:%23ff0000;fill-opacity:1;stroke:none;stroke-width:2;stroke-dasharray:none'%20d='m%2073.999998,23.18857%202.225144,2.443296%20v%2029.843106%20l%20-2.225144,1.919732%20-2.225144,-1.919732%20V%2025.631866%20Z'%20id='path1-5'%20/%3e%3cpath%20style='display:none;fill:%23ff0000;fill-opacity:1;stroke:none;stroke-width:2;stroke-dasharray:none'%20d='m%2073.999998,62.605295%202.225144,2.443296%20V%2094.891697%20L%2073.999998,96.81143%2071.774854,94.891697%20V%2065.048591%20Z'%20id='path4'%20/%3e%3cpath%20style='display:inline;fill:%23ff0000;fill-opacity:1;stroke:none;stroke-width:2;stroke-dasharray:none'%20d='m%2037.89693,99.396019%202.443296,-2.225144%20h%2029.843107%20l%201.919732,2.225144%20-1.919732,2.225141%20H%2040.340226%20Z'%20id='path5'%20/%3e%3cpath%20style='display:none;fill:%23ff0000;fill-opacity:1;stroke:none;stroke-width:2;stroke-dasharray:none'%20d='m%2035.999998,62.605295%202.225144,2.443296%20V%2094.891697%20L%2035.999998,96.81143%2033.774854,94.891697%20V%2065.048591%20Z'%20id='path6'%20/%3e%3cpath%20style='display:none;fill:%23ff0000;fill-opacity:1;stroke:none;stroke-width:2;stroke-dasharray:none'%20d='m%2035.999998,23.18857%202.225144,2.443296%20v%2029.843106%20l%20-2.225144,1.919732%20-2.225144,-1.919732%20V%2025.631866%20Z'%20id='path3'%20/%3e%3cpath%20style='display:none;fill:%23ff0000;fill-opacity:1;stroke:none;stroke-width:2;stroke-dasharray:none'%20d='m%2037.89693,59.979294%202.443296,-2.225144%20h%2029.843107%20l%201.919732,2.225144%20-1.919732,2.225144%20H%2040.340226%20Z'%20id='path2'%20/%3e%3cpath%20style='display:none;fill:none;fill-opacity:1;stroke:%23000000;stroke-width:2;stroke-dasharray:none;stroke-opacity:1'%20d='M%2020.942532,17%20H%200'%20id='path7'%20/%3e%3cpath%20style='display:none;fill:none;fill-opacity:1;stroke:%23000000;stroke-width:2;stroke-dasharray:none;stroke-opacity:1'%20d='M%2020.942532,31.333333%20H%200'%20id='path8'%20/%3e%3cpath%20style='display:none;fill:none;fill-opacity:1;stroke:%23000000;stroke-width:2;stroke-dasharray:none;stroke-opacity:1'%20d='M%2020.942532,45.666667%20H%200'%20id='path9'%20/%3e%3cpath%20style='display:none;fill:none;fill-opacity:1;stroke:%23000000;stroke-width:2;stroke-dasharray:none;stroke-opacity:1'%20d='M%2020.942532,60%20H%200'%20id='path10'%20/%3e%3cpath%20style='display:none;fill:none;fill-opacity:1;stroke:%23000000;stroke-width:2;stroke-dasharray:none;stroke-opacity:1'%20d='M%2020.942532,74.333333%20H%200'%20id='path11'%20/%3e%3cpath%20style='display:none;fill:none;fill-opacity:1;stroke:%23000000;stroke-width:2;stroke-dasharray:none;stroke-opacity:1'%20d='M%2020.942532,88.666667%20H%200'%20id='path12'%20/%3e%3cpath%20style='display:none;fill:none;fill-opacity:1;stroke:%23000000;stroke-width:2;stroke-dasharray:none;stroke-opacity:1'%20d='M%2020.942532,103%20H%200'%20id='path13'%20/%3e%3c/g%3e%3c/svg%3e",xi="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'%20standalone='no'?%3e%3c!--%20Created%20with%20Inkscape%20(http://www.inkscape.org/)%20--%3e%3csvg%20width='90'%20height='120'%20viewBox='0%200%2090%20120'%20version='1.1'%20id='svg1'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:svg='http://www.w3.org/2000/svg'%3e%3cdefs%20id='defs1'%20/%3e%3cg%20id='layer1'%3e%3crect%20style='display:none;fill:none;stroke:%23000000;stroke-width:1.98364;stroke-dasharray:none'%20id='rect1'%20width='68.016357'%20height='118.01637'%20x='20.991819'%20y='0.99181795'%20/%3e%3cpath%20style='display:none;fill:%23ff0000;fill-opacity:1;stroke:none;stroke-width:2;stroke-dasharray:none'%20d='m%2037.896931,20.60398%202.443296,-2.225144%20h%2029.843106%20l%201.919733,2.225144%20-1.919733,2.225144%20H%2040.340227%20Z'%20id='path1'%20/%3e%3cpath%20style='display:none;fill:%23ff0000;fill-opacity:1;stroke:none;stroke-width:2;stroke-dasharray:none'%20d='m%2073.999998,23.18857%202.225144,2.443296%20v%2029.843106%20l%20-2.225144,1.919732%20-2.225144,-1.919732%20V%2025.631866%20Z'%20id='path1-5'%20/%3e%3cpath%20style='display:none;fill:%23ff0000;fill-opacity:1;stroke:none;stroke-width:2;stroke-dasharray:none'%20d='m%2073.999998,62.605295%202.225144,2.443296%20V%2094.891697%20L%2073.999998,96.81143%2071.774854,94.891697%20V%2065.048591%20Z'%20id='path4'%20/%3e%3cpath%20style='display:none;fill:%23ff0000;fill-opacity:1;stroke:none;stroke-width:2;stroke-dasharray:none'%20d='m%2037.89693,99.396019%202.443296,-2.225144%20h%2029.843107%20l%201.919732,2.225144%20-1.919732,2.225141%20H%2040.340226%20Z'%20id='path5'%20/%3e%3cpath%20style='display:inline;fill:%23ff0000;fill-opacity:1;stroke:none;stroke-width:2;stroke-dasharray:none'%20d='m%2035.999998,62.605295%202.225144,2.443296%20V%2094.891697%20L%2035.999998,96.81143%2033.774854,94.891697%20V%2065.048591%20Z'%20id='path6'%20/%3e%3cpath%20style='display:none;fill:%23ff0000;fill-opacity:1;stroke:none;stroke-width:2;stroke-dasharray:none'%20d='m%2035.999998,23.18857%202.225144,2.443296%20v%2029.843106%20l%20-2.225144,1.919732%20-2.225144,-1.919732%20V%2025.631866%20Z'%20id='path3'%20/%3e%3cpath%20style='display:none;fill:%23ff0000;fill-opacity:1;stroke:none;stroke-width:2;stroke-dasharray:none'%20d='m%2037.89693,59.979294%202.443296,-2.225144%20h%2029.843107%20l%201.919732,2.225144%20-1.919732,2.225144%20H%2040.340226%20Z'%20id='path2'%20/%3e%3cpath%20style='display:none;fill:none;fill-opacity:1;stroke:%23000000;stroke-width:2;stroke-dasharray:none;stroke-opacity:1'%20d='M%2020.942532,17%20H%200'%20id='path7'%20/%3e%3cpath%20style='display:none;fill:none;fill-opacity:1;stroke:%23000000;stroke-width:2;stroke-dasharray:none;stroke-opacity:1'%20d='M%2020.942532,31.333333%20H%200'%20id='path8'%20/%3e%3cpath%20style='display:none;fill:none;fill-opacity:1;stroke:%23000000;stroke-width:2;stroke-dasharray:none;stroke-opacity:1'%20d='M%2020.942532,45.666667%20H%200'%20id='path9'%20/%3e%3cpath%20style='display:none;fill:none;fill-opacity:1;stroke:%23000000;stroke-width:2;stroke-dasharray:none;stroke-opacity:1'%20d='M%2020.942532,60%20H%200'%20id='path10'%20/%3e%3cpath%20style='display:none;fill:none;fill-opacity:1;stroke:%23000000;stroke-width:2;stroke-dasharray:none;stroke-opacity:1'%20d='M%2020.942532,74.333333%20H%200'%20id='path11'%20/%3e%3cpath%20style='display:none;fill:none;fill-opacity:1;stroke:%23000000;stroke-width:2;stroke-dasharray:none;stroke-opacity:1'%20d='M%2020.942532,88.666667%20H%200'%20id='path12'%20/%3e%3cpath%20style='display:none;fill:none;fill-opacity:1;stroke:%23000000;stroke-width:2;stroke-dasharray:none;stroke-opacity:1'%20d='M%2020.942532,103%20H%200'%20id='path13'%20/%3e%3c/g%3e%3c/svg%3e",Mi="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'%20standalone='no'?%3e%3c!--%20Created%20with%20Inkscape%20(http://www.inkscape.org/)%20--%3e%3csvg%20width='90'%20height='120'%20viewBox='0%200%2090%20120'%20version='1.1'%20id='svg1'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:svg='http://www.w3.org/2000/svg'%3e%3cdefs%20id='defs1'%20/%3e%3cg%20id='layer1'%3e%3crect%20style='display:none;fill:none;stroke:%23000000;stroke-width:1.98364;stroke-dasharray:none'%20id='rect1'%20width='68.016357'%20height='118.01637'%20x='20.991819'%20y='0.99181795'%20/%3e%3cpath%20style='display:none;fill:%23ff0000;fill-opacity:1;stroke:none;stroke-width:2;stroke-dasharray:none'%20d='m%2037.896931,20.60398%202.443296,-2.225144%20h%2029.843106%20l%201.919733,2.225144%20-1.919733,2.225144%20H%2040.340227%20Z'%20id='path1'%20/%3e%3cpath%20style='display:none;fill:%23ff0000;fill-opacity:1;stroke:none;stroke-width:2;stroke-dasharray:none'%20d='m%2073.999998,23.18857%202.225144,2.443296%20v%2029.843106%20l%20-2.225144,1.919732%20-2.225144,-1.919732%20V%2025.631866%20Z'%20id='path1-5'%20/%3e%3cpath%20style='display:none;fill:%23ff0000;fill-opacity:1;stroke:none;stroke-width:2;stroke-dasharray:none'%20d='m%2073.999998,62.605295%202.225144,2.443296%20V%2094.891697%20L%2073.999998,96.81143%2071.774854,94.891697%20V%2065.048591%20Z'%20id='path4'%20/%3e%3cpath%20style='display:none;fill:%23ff0000;fill-opacity:1;stroke:none;stroke-width:2;stroke-dasharray:none'%20d='m%2037.89693,99.396019%202.443296,-2.225144%20h%2029.843107%20l%201.919732,2.225144%20-1.919732,2.225141%20H%2040.340226%20Z'%20id='path5'%20/%3e%3cpath%20style='display:none;fill:%23ff0000;fill-opacity:1;stroke:none;stroke-width:2;stroke-dasharray:none'%20d='m%2035.999998,62.605295%202.225144,2.443296%20V%2094.891697%20L%2035.999998,96.81143%2033.774854,94.891697%20V%2065.048591%20Z'%20id='path6'%20/%3e%3cpath%20style='display:inline;fill:%23ff0000;fill-opacity:1;stroke:none;stroke-width:2;stroke-dasharray:none'%20d='m%2035.999998,23.18857%202.225144,2.443296%20v%2029.843106%20l%20-2.225144,1.919732%20-2.225144,-1.919732%20V%2025.631866%20Z'%20id='path3'%20/%3e%3cpath%20style='display:none;fill:%23ff0000;fill-opacity:1;stroke:none;stroke-width:2;stroke-dasharray:none'%20d='m%2037.89693,59.979294%202.443296,-2.225144%20h%2029.843107%20l%201.919732,2.225144%20-1.919732,2.225144%20H%2040.340226%20Z'%20id='path2'%20/%3e%3cpath%20style='display:none;fill:none;fill-opacity:1;stroke:%23000000;stroke-width:2;stroke-dasharray:none;stroke-opacity:1'%20d='M%2020.942532,17%20H%200'%20id='path7'%20/%3e%3cpath%20style='display:none;fill:none;fill-opacity:1;stroke:%23000000;stroke-width:2;stroke-dasharray:none;stroke-opacity:1'%20d='M%2020.942532,31.333333%20H%200'%20id='path8'%20/%3e%3cpath%20style='display:none;fill:none;fill-opacity:1;stroke:%23000000;stroke-width:2;stroke-dasharray:none;stroke-opacity:1'%20d='M%2020.942532,45.666667%20H%200'%20id='path9'%20/%3e%3cpath%20style='display:none;fill:none;fill-opacity:1;stroke:%23000000;stroke-width:2;stroke-dasharray:none;stroke-opacity:1'%20d='M%2020.942532,60%20H%200'%20id='path10'%20/%3e%3cpath%20style='display:none;fill:none;fill-opacity:1;stroke:%23000000;stroke-width:2;stroke-dasharray:none;stroke-opacity:1'%20d='M%2020.942532,74.333333%20H%200'%20id='path11'%20/%3e%3cpath%20style='display:none;fill:none;fill-opacity:1;stroke:%23000000;stroke-width:2;stroke-dasharray:none;stroke-opacity:1'%20d='M%2020.942532,88.666667%20H%200'%20id='path12'%20/%3e%3cpath%20style='display:none;fill:none;fill-opacity:1;stroke:%23000000;stroke-width:2;stroke-dasharray:none;stroke-opacity:1'%20d='M%2020.942532,103%20H%200'%20id='path13'%20/%3e%3c/g%3e%3c/svg%3e",ji="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'%20standalone='no'?%3e%3c!--%20Created%20with%20Inkscape%20(http://www.inkscape.org/)%20--%3e%3csvg%20width='90'%20height='120'%20viewBox='0%200%2090%20120'%20version='1.1'%20id='svg1'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:svg='http://www.w3.org/2000/svg'%3e%3cdefs%20id='defs1'%20/%3e%3cg%20id='layer1'%3e%3crect%20style='display:none;fill:none;stroke:%23000000;stroke-width:1.98364;stroke-dasharray:none'%20id='rect1'%20width='68.016357'%20height='118.01637'%20x='20.991819'%20y='0.99181795'%20/%3e%3cpath%20style='display:none;fill:%23ff0000;fill-opacity:1;stroke:none;stroke-width:2;stroke-dasharray:none'%20d='m%2037.896931,20.60398%202.443296,-2.225144%20h%2029.843106%20l%201.919733,2.225144%20-1.919733,2.225144%20H%2040.340227%20Z'%20id='path1'%20/%3e%3cpath%20style='display:none;fill:%23ff0000;fill-opacity:1;stroke:none;stroke-width:2;stroke-dasharray:none'%20d='m%2073.999998,23.18857%202.225144,2.443296%20v%2029.843106%20l%20-2.225144,1.919732%20-2.225144,-1.919732%20V%2025.631866%20Z'%20id='path1-5'%20/%3e%3cpath%20style='display:none;fill:%23ff0000;fill-opacity:1;stroke:none;stroke-width:2;stroke-dasharray:none'%20d='m%2073.999998,62.605295%202.225144,2.443296%20V%2094.891697%20L%2073.999998,96.81143%2071.774854,94.891697%20V%2065.048591%20Z'%20id='path4'%20/%3e%3cpath%20style='display:none;fill:%23ff0000;fill-opacity:1;stroke:none;stroke-width:2;stroke-dasharray:none'%20d='m%2037.89693,99.396019%202.443296,-2.225144%20h%2029.843107%20l%201.919732,2.225144%20-1.919732,2.225141%20H%2040.340226%20Z'%20id='path5'%20/%3e%3cpath%20style='display:none;fill:%23ff0000;fill-opacity:1;stroke:none;stroke-width:2;stroke-dasharray:none'%20d='m%2035.999998,62.605295%202.225144,2.443296%20V%2094.891697%20L%2035.999998,96.81143%2033.774854,94.891697%20V%2065.048591%20Z'%20id='path6'%20/%3e%3cpath%20style='display:none;fill:%23ff0000;fill-opacity:1;stroke:none;stroke-width:2;stroke-dasharray:none'%20d='m%2035.999998,23.18857%202.225144,2.443296%20v%2029.843106%20l%20-2.225144,1.919732%20-2.225144,-1.919732%20V%2025.631866%20Z'%20id='path3'%20/%3e%3cpath%20style='display:inline;fill:%23ff0000;fill-opacity:1;stroke:none;stroke-width:2;stroke-dasharray:none'%20d='m%2037.89693,59.979294%202.443296,-2.225144%20h%2029.843107%20l%201.919732,2.225144%20-1.919732,2.225144%20H%2040.340226%20Z'%20id='path2'%20/%3e%3cpath%20style='display:none;fill:none;fill-opacity:1;stroke:%23000000;stroke-width:2;stroke-dasharray:none;stroke-opacity:1'%20d='M%2020.942532,17%20H%200'%20id='path7'%20/%3e%3cpath%20style='display:none;fill:none;fill-opacity:1;stroke:%23000000;stroke-width:2;stroke-dasharray:none;stroke-opacity:1'%20d='M%2020.942532,31.333333%20H%200'%20id='path8'%20/%3e%3cpath%20style='display:none;fill:none;fill-opacity:1;stroke:%23000000;stroke-width:2;stroke-dasharray:none;stroke-opacity:1'%20d='M%2020.942532,45.666667%20H%200'%20id='path9'%20/%3e%3cpath%20style='display:none;fill:none;fill-opacity:1;stroke:%23000000;stroke-width:2;stroke-dasharray:none;stroke-opacity:1'%20d='M%2020.942532,60%20H%200'%20id='path10'%20/%3e%3cpath%20style='display:none;fill:none;fill-opacity:1;stroke:%23000000;stroke-width:2;stroke-dasharray:none;stroke-opacity:1'%20d='M%2020.942532,74.333333%20H%200'%20id='path11'%20/%3e%3cpath%20style='display:none;fill:none;fill-opacity:1;stroke:%23000000;stroke-width:2;stroke-dasharray:none;stroke-opacity:1'%20d='M%2020.942532,88.666667%20H%200'%20id='path12'%20/%3e%3cpath%20style='display:none;fill:none;fill-opacity:1;stroke:%23000000;stroke-width:2;stroke-dasharray:none;stroke-opacity:1'%20d='M%2020.942532,103%20H%200'%20id='path13'%20/%3e%3c/g%3e%3c/svg%3e",Di={id:z.O_LED_RED,imgPath:[Ei,Ii],connectionSlot:[{id:0,in:!0,name:"In",localPos:new C(23,66)}]},Ai={id:z.O_7_SEGMENTS,imgPath:[Oi,Ti,Ni,Ci,Ri,xi,Mi,ji],connectionSlot:[{id:0,in:!0,name:"A",localPos:new C(-4,17)},{id:1,in:!0,name:"B",localPos:new C(-4,32)},{id:2,in:!0,name:"C",localPos:new C(-4,46)},{id:3,in:!0,name:"D",localPos:new C(-4,60)},{id:4,in:!0,name:"E",localPos:new C(-4,75)},{id:5,in:!0,name:"F",localPos:new C(-4,89)},{id:6,in:!0,name:"G",localPos:new C(-4,103)}]};class Nr{id;position;componentType;nodeType;slots;collisionShape;_images;imageSize;halfImageSize;imageMode="UP_LEFT";_signalData;selected;get image(){return Object.keys(this._images).length===0?null:this._images[this.state?1:0]}get state(){return this._signalData.output??!1}constructor(e,s,n,r,i,o,h,p=!0){if(this.id=e,this.position=s,this.componentType=le.OUTPUT,this.nodeType=Di,this._signalData=h[this.id],this.slots=i,this._images=Je(o,this.nodeType.imgPath),this.imageSize=new C(this.image?.width??100,this.image?.height??100),this.halfImageSize=C.div(this.imageSize,2),p){this.imageMode="CENTER",this.position.sub(this.halfImageSize);const w=new C(n,r).sub(this.imageSize);this.position.min(w).max(C.ZERO)}this.collisionShape=new Me(this.position,this.imageSize.x,this.imageSize.y),this.selected=!1}move(e,s=!0){s?this.position.add(e):this.imageMode==="CENTER"?C.sub(e,this.halfImageSize,this.position):this.position.copy(e),this.collisionShape.moveShape(this.position,!1)}draw(e){this.image&&(e.drawImage(this.image,this.position.x,this.position.y),this.collisionShape!==void 0&&this.collisionShape.draw(e,this.selected))}onEvent(e){switch(e){case ne.FOCUS_IN:this.selected=!0;break;case ne.FOCUS_OUT:this.selected=!1;break;default:return!1}return!0}toObject(){return{id:this.id,componentType:this.componentType,nodeType:this.nodeType.id,position:this.position.toPlainObject(),slotIds:this.slots.map(s=>s.id),state:this.state}}}class Cr{id;position;componentType;nodeType;slots;collisionShape;_images;imageSize;halfImageSize;imageMode="UP_LEFT";_signalData;selected;get image(){return Object.keys(this._images).length===0?null:this._images[0]}get state(){return this._signalData.output??!1}constructor(e,s,n,r,i,o,h,p=!0){if(this.id=e,this.position=s,this.componentType=le.OUTPUT,this.nodeType=Ai,this._signalData=h[this.id],this.slots=i,this._images=Je(o,this.nodeType.imgPath),this.imageSize=new C(this.image?.width??100,this.image?.height??100),this.halfImageSize=C.div(this.imageSize,2),p){this.imageMode="CENTER",this.position.sub(this.halfImageSize);const w=new C(n,r).sub(this.imageSize);this.position.min(w).max(C.ZERO)}this.collisionShape=new Me(this.position,this.imageSize.x,this.imageSize.y),this.selected=!1}move(e,s=!0){s?this.position.add(e):this.imageMode==="CENTER"?C.sub(e,this.halfImageSize,this.position):this.position.copy(e),this.collisionShape.moveShape(this.position,!1)}draw(e){if(this.image){if(e.drawImage(this.image,this.position.x,this.position.y),Object.keys(this._images).length>=8)for(const[s,n]of this._signalData.signalFrom)n>=0&&this._signalData.signalGraph[n].output===!0&&e.drawImage(this._images[s+1],this.position.x,this.position.y);this.collisionShape!==void 0&&this.collisionShape.draw(e,this.selected)}}onEvent(e){switch(e){case ne.FOCUS_IN:this.selected=!0;break;case ne.FOCUS_OUT:this.selected=!1;break;default:return!1}return!0}toObject(){return{id:this.id,componentType:this.componentType,nodeType:this.nodeType.id,position:this.position.toPlainObject(),slotIds:this.slots.map(s=>s.id),state:this.state}}}class Rr{id;position;componentType;nodeType;slots;collisionShape;_images;imageSize;halfImageSize;imageMode="UP_LEFT";_signalData;selected;get image(){return Object.keys(this._images).length===0?null:this._images[this.state?1:0]}get state(){return this._signalData.output??!1}set state(e){this._signalData.output=e}constructor(e,s,n,r,i,o,h,p=!0){if(this.id=e,this.position=s,this.componentType=le.INPUT,this.nodeType=Si,this._signalData=h[this.id],this.slots=i,this._images=Je(o,this.nodeType.imgPath),this.imageSize=new C(this.image?.width??100,this.image?.height??100),this.halfImageSize=C.div(this.imageSize,2),p){this.imageMode="CENTER",this.position.sub(this.halfImageSize);const w=new C(n,r).sub(this.halfImageSize);this.position.min(w).max(C.ZERO)}this.collisionShape=new Me(this.position,this.imageSize.x,this.imageSize.y),this.selected=!1}move(e,s=!0){s?this.position.add(e):this.imageMode==="CENTER"?C.sub(e,this.halfImageSize,this.position):this.position.copy(e),this.collisionShape.moveShape(this.position,!1)}draw(e){this.image&&(e.drawImage(this.image,this.position.x,this.position.y),this.collisionShape!==void 0&&this.collisionShape.draw(e,this.selected))}onEvent(e){switch(e){case ne.MOUSE_CLICKED:this.state=!0;break;case ne.MOUSE_RELEASED:this.state=!1;break;case ne.FOCUS_IN:this.selected=!0;break;case ne.FOCUS_OUT:this.selected=!1;break;default:return!1}return!0}toObject(){return{id:this.id,componentType:this.componentType,nodeType:this.nodeType.id,position:this.position.toPlainObject(),slotIds:this.slots.map(s=>s.id),state:this.state}}}class xr{id;position;componentType;nodeType;slots;collisionShape;_images;imageSize;halfImageSize;imageMode="UP_LEFT";_signalData;selected;clockDelay;currentClockStep=0;get image(){return Object.keys(this._images).length===0?null:this._images[0]}get state(){return this._signalData.output??!1}set state(e){this._signalData.output=e}constructor(e,s,n,r,i,o,h,p=60,w=!0){if(this.id=e,this.position=s,this.componentType=le.INPUT,this.nodeType=Pi,this._signalData=h[this.id],this.slots=i,this.clockDelay=p,this._images=Je(o,this.nodeType.imgPath),this.imageSize=new C(this.image?.width??100,this.image?.height??100),this.halfImageSize=C.div(this.imageSize,2),w){this.imageMode="CENTER",this.position.sub(this.halfImageSize);const u=new C(n,r).sub(this.imageSize);this.position.min(u).max(C.ZERO)}this.collisionShape=new Me(this.position,this.imageSize.x,this.imageSize.y),this.selected=!1}move(e,s=!0){s?this.position.add(e):this.imageMode==="CENTER"?C.sub(e,this.halfImageSize,this.position):this.position.copy(e),this.collisionShape.moveShape(this.position,!1)}draw(e){this.image&&(e.drawImage(this.image,this.position.x,this.position.y),this.collisionShape!==void 0&&this.collisionShape.draw(e,this.selected))}onEvent(e){switch(e){case ne.FOCUS_IN:this.selected=!0;break;case ne.FOCUS_OUT:this.selected=!1;break;case ne.CLOCK_FINISHED:this.state=!this.state,this.currentClockStep=0;break;case ne.PHYSICS_ENGINE_CYCLE:this.currentClockStep++,this.currentClockStep>this.clockDelay&&this.onEvent(ne.CLOCK_FINISHED);break;default:return!1}return!0}toObject(){return{id:this.id,componentType:this.componentType,nodeType:this.nodeType.id,position:this.position.toPlainObject(),slotIds:this.slots.map(s=>s.id),state:this.state}}}const we={node(t=-1,e,s,n,r,i,o,h=[],p=!0,w=!1){const u=t>=0?t:e.nextComponentId;if(r<z.G_AND||r>=z.I_SWITCH)return console.error("O tipo de node passado como parâmetro é inválido!",r),-1;xe.vertex.add(e.signalGraph,u,r,ot.getNodeModel(r),w);const $=new ot(u,new C(i,o),r,s,n,[],e.nodeImageList,e.signalGraph,p);e.nodes.set(u,$);const v=e.nodes.get(u);if(e.updateComponentId(t>=0?t:void 0),h.length===0){const k=ot.getNodeModel(r).connectionSlot;for(const _ of Object.values(k)){const b=this.slot(void 0,e,_.localPos.x,_.localPos.y,v,_.id,_.in);if(!v.slots.find(f=>f.id===b)){const f=e.slots.get(b);f&&v.slots.push(f)}}}else for(const k of h){const _=e.slots.get(k);_&&v.slots.push(_)}return u},input(t=-1,e,s,n,r,i,o,h=[],p=!0,w=!1){const u=t>=0?t:e.nextComponentId;let $,v;switch(r){case z.I_SWITCH:v=$i,xe.vertex.add(e.signalGraph,u,r,v,w),$=new Tr(u,new C(i,o),s,n,[],e.nodeImageList,e.signalGraph,p);break;case z.I_BUTTON:v=Si,xe.vertex.add(e.signalGraph,u,r,v,w),$=new Rr(u,new C(i,o),s,n,[],e.nodeImageList,e.signalGraph,p);break;case z.I_CLOCK:v=Pi,xe.vertex.add(e.signalGraph,u,r,v,w),$=new xr(u,new C(i,o),s,n,[],e.nodeImageList,e.signalGraph,void 0,p);break;default:return console.error("O tipo de node de entrada passado como parâmetro é inválido!",r),-1}e.nodes.set(u,$);const k=e.nodes.get(u);if(e.updateComponentId(t>=0?t:void 0),h.length===0){const _=v.connectionSlot;for(const b of Object.values(_)){const f=this.slot(void 0,e,b.localPos.x,b.localPos.y,k,b.id,b.in);if(!k.slots.find(l=>l.id===f)){const l=e.slots.get(f);l&&k.slots.push(l)}}}else for(const _ of h){const b=e.slots.get(_);b&&k.slots.push(b)}return u},output(t=-1,e,s,n,r,i,o,h=[],p=!0,w=!1){const u=t>=0?t:e.nextComponentId;let $,v;switch(r){case z.O_LED_RED:v=Di,xe.vertex.add(e.signalGraph,u,r,v,w),$=new Nr(u,new C(i,o),s,n,[],e.nodeImageList,e.signalGraph,p);break;case z.O_7_SEGMENTS:v=Ai,xe.vertex.add(e.signalGraph,u,r,v,w),$=new Cr(u,new C(i,o),s,n,[],e.nodeImageList,e.signalGraph,p);break;default:return console.error("O tipo de node de saída passado como parâmetro é inválido!",r),-1}e.nodes.set(u,$);const k=e.nodes.get(u);if(e.updateComponentId(t>=0?t:void 0),h.length===0){const _=v.connectionSlot;for(const b of Object.values(_)){const f=this.slot(void 0,e,b.localPos.x,b.localPos.y,k,b.id,b.in);if(!k.slots.find(l=>l.id===f)){const l=e.slots.get(f);l&&k.slots.push(l)}}}else for(const _ of h){const b=e.slots.get(_);b&&k.slots.push(b)}return u},slot(t=-1,e,s,n,r,i,o,h,p,w,u){const $=t>=0?t:e.nextComponentId,v=new Ir($,new C(s,n),r,i,void 0,o,h,p,w,u);return e.slots.set($,v),(r.componentType===le.INPUT||r.componentType===le.OUTPUT||r.componentType===le.NODE)&&r.slots.push(e.slots.get($)),e.updateComponentId(t>=0?t:void 0)},connection(t=-1,e,s,n,r,i,o,h,p){const w=t>=0?t:e.nextComponentId,u=new vr(w,new C(s,n),new C(r,i),{start:o,end:h},p);return e.connections.set(w,u),e.updateComponentId(t>=0?t:void 0)},text(t=-1,e,s,n,r,i,o,h){const p=t>=0?t:e.nextComponentId,w=new Or(p,new C(r,i),n,o,h?{id:h.id,type:h.componentType}:void 0,s);return e.texts.set(p,w),e.updateComponentId(t>=0?t:void 0)}};class lt{documentId;_nextComponentId;nodes;slots;connections;texts;nodeImageList;signalGraph;constructor(e,s=0,n,r={},i=new Map,o=new Map,h=new Map,p=new Map){this.documentId=e,this._nextComponentId=s,this.nodes=i,this.slots=o,this.connections=h,this.texts=p,this.signalGraph=r,this.nodeImageList=n}getDocumentId(){return this.documentId}get components(){return{nodes:this.nodes,slots:this.slots,connections:this.connections,texts:this.texts}}get nextComponentId(){return this._nextComponentId}updateComponentId(e){const s=this._nextComponentId;return this._nextComponentId=e?Math.max(this._nextComponentId,e+1):this._nextComponentId+1,s}removeComponent(e=this._nextComponentId-1,s){if(s)switch(s){case le.NODE:case le.INPUT:case le.OUTPUT:return Ke.node(this,e);case le.SLOT:return Ke.slot(this,e);case le.LINE:return Ke.connection(this,e);case le.TEXT:return Ke.text(this,e)}else{const n=this.connections.get(e)??this.nodes.get(e)??this.slots.get(e)??this.texts.get(e);if(n!==void 0)return this.removeComponent(n.id,n.componentType)}return!1}saveAsJson(){const e={id:this.documentId,data:{nodes:[],connections:[],slots:[],texts:[]},signal:[]};for(const[s,n]of Object.entries(this.components))for(const r of n.values())switch(s){case"nodes":e.data.nodes.push(r.toObject());break;case"slots":e.data.slots.push(r.toObject());break;case"connections":e.data.connections.push(r.toObject());break;case"texts":e.data.texts.push(r.toObject());break}for(const[s,n]of Object.entries(this.signalGraph)){const r=parseInt(s);e.signal.push({id:r,data:{output:n.output,signalFrom:[...n.signalFrom.entries()],signalTo:[...n.signalTo.values()],nodeType:n.nodeType}})}return JSON.stringify(e)}static createFromJson(e,s,n){const r={};for(const o of Object.values(e.signal))r[o.id]={id:o.id,output:o.data.output,signalFrom:new Map(o.data.signalFrom.map(h=>[h[0],h[1]])),signalTo:new Set(o.data.signalTo),nodeType:o.data.nodeType,signalGraph:r};const i=new lt(e.id,0,structuredClone(n),r);for(const o of e.data.nodes)o.nodeType>=z.G_AND&&o.nodeType<z.I_SWITCH?we.node(o.id,i,s.canvas.width,s.canvas.height,o.nodeType,o.position.x,o.position.y,o.slotIds,!1):o.nodeType>=z.I_SWITCH&&o.nodeType<z.O_LED_RED?we.input(o.id,i,s.canvas.width,s.canvas.height,o.nodeType,o.position.x,o.position.y,o.slotIds,!1):o.nodeType>=z.O_LED_RED&&we.output(o.id,i,s.canvas.width,s.canvas.height,o.nodeType,o.position.x,o.position.y,o.slotIds,!1);for(const o of e.data.slots)we.slot(o.id,i,o.position.x,o.position.y,i.nodes.get(o.parentId),o.slotIdAtParent,o.inSlot,o.radius,o.attractionRadius,o.color,o.colorActive);for(const o of e.data.connections)we.connection(o.id,i,o.position.x,o.position.y,o.endPosition.x,o.endPosition.y,o.connectedTo.start,o.connectedTo.end,o.anchors.map(h=>new U(h.x,h.y))),o.connectedTo.start&&i.slots.get(o.connectedTo.start.slotId).slotConnections.push(i.connections.get(o.id)),o.connectedTo.end&&i.slots.get(o.connectedTo.end.slotId).slotConnections.push(i.connections.get(o.id));for(const o of e.data.texts){we.text(o.id,i,s,o.text,o.position.x,o.position.y,o.style);break}return i}}const Ts={checkComponentClick(t,e){const s=[];for(const[n,r]of e.entries()){if(r.collisionShape instanceof Array)return console.warn("Não utilize a função checkComponentClick para checar colisões com conexões!"),[];r.collisionShape.collisionWithPoint(t)&&s.push(n)}return s}},qi={checkSlotClick(t,e){return Ts.checkComponentClick(e,t)}},Ye={editingLine:void 0,startSlot:void 0,endSlot:void 0,oldStartSlot:void 0,oldEndSlot:void 0,movePoint:Ie.NONE,reset:function(){this.editingLine=void 0,this.startSlot=void 0,this.endSlot=void 0,this.oldStartSlot=void 0,this.oldEndSlot=void 0,this.movePoint=Ie.NONE},checkConnectionClick:function(t,e){const s=new Set;for(const[n,r]of t.entries())r.collisionShape.find(o=>o.collisionWithPoint(e))!==void 0&&s.add(n);return[...s.values()]},newConnection:function(t,e){if(this.editingLine!==void 0||me.movingObject!=="none")return!1;const s=t.slots.get(e);if(s===void 0)return!1;this.movePoint=s.inSlot?Ie.START:Ie.END,[this.startSlot,this.endSlot]=s.inSlot?[void 0,s]:[s,void 0];const n=we.connection(void 0,t,s.globalPosition.x,s.globalPosition.y,s.globalPosition.x,s.globalPosition.y,s.inSlot?void 0:{nodeId:s.parent.id,slotId:s.id},s.inSlot?{nodeId:s.parent.id,slotId:s.id}:void 0);return this.editingLine=t.connections.get(n),me.movingObject="connection",!0},move:function(t,e){return!(me.movingObject==="connection"||me.movingObject==="none")||this.editingLine===void 0?!1:(me.movingObject="connection",this.editingLine.move(e,!1,this.movePoint,!0,t.nodes),!0)},setConnectionProps:function(t){return this.startSlot===void 0||this.endSlot===void 0||this.editingLine===void 0?!1:(this.editingLine.position=this.startSlot.globalPosition.clone(),this.editingLine.endPosition=this.endSlot.globalPosition.clone(),this.editingLine.anchors=this.editingLine.generateAnchors(t.nodes),this.editingLine.changeConnection(this.startSlot.id,this.startSlot.parent.id,!1),this.editingLine.changeConnection(this.endSlot.id,this.endSlot.parent.id,!0),this.startSlot.slotConnections.push(this.editingLine),this.endSlot.slotConnections.push(this.editingLine),xe.edge.add(t.signalGraph,this.editingLine,this.startSlot,this.endSlot),this.editingLine.move(C.ZERO,!0,Ie.START,!1),this.reset(),!0)},isValidPosition:function(t,e){const s=qi.checkSlotClick(t.slots,e);if(s.length===0||this.movePoint===Ie.START&&s[0]===this.endSlot?.id||this.movePoint===Ie.END&&s[0]===this.startSlot?.id)return!1;const n=t.slots.get(s[0]);if(n===void 0)return!1;if(this.movePoint===Ie.START){if(this.endSlot===void 0||n.inSlot===this.endSlot.inSlot)return!1;this.startSlot=n}if(this.movePoint===Ie.END){if(this.startSlot===void 0||n.inSlot===this.startSlot.inSlot)return!1;this.endSlot=n}return!0},bindLine:function(t,e){return this.editingLine===void 0?!1:!this.isValidPosition(t,e)||this.startSlot===void 0||this.endSlot===void 0?(Ke.connection(t,this.editingLine.id),!1):this.removeOldInputConnections(t)&&this.setConnectionProps(t)},removeOldInputConnections:function(t){if(this.startSlot===void 0||this.endSlot===void 0||this.editingLine===void 0||!this.endSlot.inSlot)return!1;for(const e of this.endSlot.slotConnections)e.id!==this.editingLine.id&&Ke.connection(t,e.id);return!0}},bs={checkNodeClick(t,e){return Ts.checkComponentClick(e,t)},move(t,e,s,n=!0){const r=e.getCollisionList().nodes;if(r.length===0||!(me.movingObject==="none"||me.movingObject==="node"))return!1;me.movingObject="node";const i=t.nodes.get(r[0]);return i===void 0?!1:(i.move(s,n),this.moveLinkedElements(i,t.nodes),!0)},moveLinkedElements(t,e){for(const s of t.slots)if(s){s.move();for(let n=0;n<s.slotConnections.length;n++){const r=s.slotConnections[n];r.connectedTo.start?.slotId===s.id?r.move(s.globalPosition,!1,0,!0,e):r.connectedTo.end?.slotId===s.id&&r.move(s.globalPosition,!1,1,!0,e)}}},onPhysicsEngineUpdate(t,e){const s=[];for(const n of t.values())n.nodeType.id===z.I_CLOCK&&n.onEvent(ne.PHYSICS_ENGINE_CYCLE)&&s.push(n.id);for(const n of s)Be.updateGraph(e,n)}},Us={checkTextClick(t,e){return Ts.checkComponentClick(e,t)},move(t,e,s,n=!0){const r=e.getCollisionList().texts;if(r.length===0||!(me.movingObject==="none"||me.movingObject==="text"))return!1;me.movingObject="text";const i=t.get(r[0]);return i===void 0?!1:(i.move(s,n),!0)}};class me{collisionList;_mouse;static movingObject="none";constructor(e){this._mouse=e,this.collisionList={nodes:[],slots:[],connections:[],texts:[]},me.movingObject="none"}onMouseClick(e){if(this._mouse.stateChanged&&this._mouse.clicked){this.clearAllCollisions(e);const s=bs.checkNodeClick(e.nodes,this._mouse.position),n=qi.checkSlotClick(e.slots,this._mouse.position),r=Ye.checkConnectionClick(e.connections,this._mouse.position),i=Us.checkTextClick(e.texts,this._mouse.position);this.collisionList={nodes:s,slots:n,connections:r,texts:i},n.length>0&&Ye.newConnection(e,n[0]);const o=e.nodes.get(this.collisionList.nodes[0]);o!==void 0&&o.nodeType.id===z.I_BUTTON&&(o.onEvent(ne.MOUSE_CLICKED),Be.updateGraph(e.signalGraph,this.collisionList.nodes[0])),this.displaySelectedComponents(e),this._mouse.stateChanged=!1}}onMouseRelease(e){if(!this._mouse.clicked&&this._mouse.stateChanged){if(!this._mouse.dragged)for(const s of this.collisionList.nodes){const n=e.nodes.get(s);n!==void 0&&n.componentType===le.INPUT&&n.onEvent(ne.MOUSE_RELEASED)&&Be.updateGraph(e.signalGraph,s)}Ye.bindLine(e,this._mouse.position),Ye.reset(),this._mouse.stateChanged=!1}me.movingObject="none"}onMouseMove(e){return this._mouse.clicked&&this._mouse.dragged?Ye.move(e,this._mouse.position)||bs.move(e,this,this._mouse.position,!1)||Us.move(e.texts,this,this._mouse.position,!1):!1}displaySelectedComponents(e){for(const[s,n]of Object.entries(this.collisionList))e.components[s].get(n[0])?.onEvent(ne.FOCUS_IN)}clearSelectedComponents(e){for(const[s,n]of Object.entries(this.collisionList))for(const r of n)e.components[s].get(r)?.onEvent(ne.FOCUS_OUT)}getCollisionList(){return this.collisionList}clearAllCollisions(e){this.clearSelectedComponents(e),this.collisionList.nodes=[],this.collisionList.slots=[],this.collisionList.connections=[],this.collisionList.texts=[]}}class Mr{position=new C;mouseClicked=!1;doubleClicked=!1;clickStartPosition=new C;mouseStateChanged=!1;clickToDragThreshold=6;doubleClickTimer=300;alreadyClicked=!1;mouseDragged=!1;get clicked(){return this.mouseClicked}set clicked(e){this.mouseClicked=e,this.mouseStateChanged=!0,e?this.clickStartPosition.copy(this.position):this.mouseDragged=!1}get dragged(){const e=C.sub(this.position,this.clickStartPosition);return this.mouseDragged=this.mouseDragged||e.x>this.clickToDragThreshold||e.x<-this.clickToDragThreshold||e.y>this.clickToDragThreshold||e.y<-this.clickToDragThreshold,this.mouseDragged}get stateChanged(){return this.mouseStateChanged}set stateChanged(e){this.mouseStateChanged=e,this.alreadyClicked?this.doubleClicked=this.mouseClicked:(this.alreadyClicked=!0,setTimeout(()=>this.alreadyClicked=!1,this.doubleClickTimer))}}var ue=Uint8Array,_e=Uint16Array,Ns=Int32Array,Yt=new ue([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),Qt=new ue([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),$s=new ue([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Li=function(t,e){for(var s=new _e(31),n=0;n<31;++n)s[n]=e+=1<<t[n-1];for(var r=new Ns(s[30]),n=1;n<30;++n)for(var i=s[n];i<s[n+1];++i)r[i]=i-s[n]<<5|n;return{b:s,r}},zi=Li(Yt,2),Ui=zi.b,Ss=zi.r;Ui[28]=258,Ss[258]=28;var Fi=Li(Qt,0),jr=Fi.b,Fs=Fi.r,Ps=new _e(32768);for(var ae=0;ae<32768;++ae){var De=(ae&43690)>>1|(ae&21845)<<1;De=(De&52428)>>2|(De&13107)<<2,De=(De&61680)>>4|(De&3855)<<4,Ps[ae]=((De&65280)>>8|(De&255)<<8)>>1}var Oe=function(t,e,s){for(var n=t.length,r=0,i=new _e(e);r<n;++r)t[r]&&++i[t[r]-1];var o=new _e(e);for(r=1;r<e;++r)o[r]=o[r-1]+i[r-1]<<1;var h;if(s){h=new _e(1<<e);var p=15-e;for(r=0;r<n;++r)if(t[r])for(var w=r<<4|t[r],u=e-t[r],$=o[t[r]-1]++<<u,v=$|(1<<u)-1;$<=v;++$)h[Ps[$]>>p]=w}else for(h=new _e(n),r=0;r<n;++r)t[r]&&(h[r]=Ps[o[t[r]-1]++]>>15-t[r]);return h},qe=new ue(288);for(var ae=0;ae<144;++ae)qe[ae]=8;for(var ae=144;ae<256;++ae)qe[ae]=9;for(var ae=256;ae<280;++ae)qe[ae]=7;for(var ae=280;ae<288;++ae)qe[ae]=8;var at=new ue(32);for(var ae=0;ae<32;++ae)at[ae]=5;var Dr=Oe(qe,9,0),Ar=Oe(qe,9,1),qr=Oe(at,5,0),Lr=Oe(at,5,1),ls=function(t){for(var e=t[0],s=1;s<t.length;++s)t[s]>e&&(e=t[s]);return e},$e=function(t,e,s){var n=e/8|0;return(t[n]|t[n+1]<<8)>>(e&7)&s},cs=function(t,e){var s=e/8|0;return(t[s]|t[s+1]<<8|t[s+2]<<16)>>(e&7)},Cs=function(t){return(t+7)/8|0},Hi=function(t,e,s){return(s==null||s>t.length)&&(s=t.length),new ue(t.subarray(e,s))},zr=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],Pe=function(t,e,s){var n=new Error(e||zr[t]);if(n.code=t,Error.captureStackTrace&&Error.captureStackTrace(n,Pe),!s)throw n;return n},Ur=function(t,e,s,n){var r=t.length,i=0;if(!r||e.f&&!e.l)return s||new ue(0);var o=!s,h=o||e.i!=2,p=e.i;o&&(s=new ue(r*3));var w=function(E){var N=s.length;if(E>N){var M=new ue(Math.max(N*2,E));M.set(s),s=M}},u=e.f||0,$=e.p||0,v=e.b||0,k=e.l,_=e.d,b=e.m,f=e.n,l=r*8;do{if(!k){u=$e(t,$,1);var a=$e(t,$+1,3);if($+=3,a)if(a==1)k=Ar,_=Lr,b=9,f=5;else if(a==2){var m=$e(t,$,31)+257,S=$e(t,$+10,15)+4,I=m+$e(t,$+5,31)+1;$+=14;for(var R=new ue(I),D=new ue(19),q=0;q<S;++q)D[$s[q]]=$e(t,$+q*3,7);$+=S*3;for(var F=ls(D),V=(1<<F)-1,K=Oe(D,F,1),q=0;q<I;){var ee=K[$e(t,$,V)];$+=ee&15;var c=ee>>4;if(c<16)R[q++]=c;else{var re=0,te=0;for(c==16?(te=3+$e(t,$,3),$+=2,re=R[q-1]):c==17?(te=3+$e(t,$,7),$+=3):c==18&&(te=11+$e(t,$,127),$+=7);te--;)R[q++]=re}}var B=R.subarray(0,m),oe=R.subarray(m);b=ls(B),f=ls(oe),k=Oe(B,b,1),_=Oe(oe,f,1)}else Pe(1);else{var c=Cs($)+4,y=t[c-4]|t[c-3]<<8,d=c+y;if(d>r){p&&Pe(0);break}h&&w(v+y),s.set(t.subarray(c,d),v),e.b=v+=y,e.p=$=d*8,e.f=u;continue}if($>l){p&&Pe(0);break}}h&&w(v+131072);for(var A=(1<<b)-1,O=(1<<f)-1,j=$;;j=$){var re=k[cs(t,$)&A],T=re>>4;if($+=re&15,$>l){p&&Pe(0);break}if(re||Pe(2),T<256)s[v++]=T;else if(T==256){j=$,k=null;break}else{var g=T-254;if(T>264){var q=T-257,P=Yt[q];g=$e(t,$,(1<<P)-1)+Ui[q],$+=P}var x=_[cs(t,$)&O],H=x>>4;x||Pe(3),$+=x&15;var oe=jr[H];if(H>3){var P=Qt[H];oe+=cs(t,$)&(1<<P)-1,$+=P}if($>l){p&&Pe(0);break}h&&w(v+131072);var G=v+g;if(v<oe){var Q=i-oe,W=Math.min(oe,G);for(Q+v<0&&Pe(3);v<W;++v)s[v]=n[Q+v]}for(;v<G;++v)s[v]=s[v-oe]}}e.l=k,e.p=j,e.b=v,e.f=u,k&&(u=1,e.m=b,e.d=_,e.n=f)}while(!u);return v!=s.length&&o?Hi(s,0,v):s.subarray(0,v)},Te=function(t,e,s){s<<=e&7;var n=e/8|0;t[n]|=s,t[n+1]|=s>>8},Qe=function(t,e,s){s<<=e&7;var n=e/8|0;t[n]|=s,t[n+1]|=s>>8,t[n+2]|=s>>16},ds=function(t,e){for(var s=[],n=0;n<t.length;++n)t[n]&&s.push({s:n,f:t[n]});var r=s.length,i=s.slice();if(!r)return{t:Vi,l:0};if(r==1){var o=new ue(s[0].s+1);return o[s[0].s]=1,{t:o,l:1}}s.sort(function(d,m){return d.f-m.f}),s.push({s:-1,f:25001});var h=s[0],p=s[1],w=0,u=1,$=2;for(s[0]={s:-1,f:h.f+p.f,l:h,r:p};u!=r-1;)h=s[s[w].f<s[$].f?w++:$++],p=s[w!=u&&s[w].f<s[$].f?w++:$++],s[u++]={s:-1,f:h.f+p.f,l:h,r:p};for(var v=i[0].s,n=1;n<r;++n)i[n].s>v&&(v=i[n].s);var k=new _e(v+1),_=Es(s[u-1],k,0);if(_>e){var n=0,b=0,f=_-e,l=1<<f;for(i.sort(function(m,S){return k[S.s]-k[m.s]||m.f-S.f});n<r;++n){var a=i[n].s;if(k[a]>e)b+=l-(1<<_-k[a]),k[a]=e;else break}for(b>>=f;b>0;){var c=i[n].s;k[c]<e?b-=1<<e-k[c]++-1:++n}for(;n>=0&&b;--n){var y=i[n].s;k[y]==e&&(--k[y],++b)}_=e}return{t:new ue(k),l:_}},Es=function(t,e,s){return t.s==-1?Math.max(Es(t.l,e,s+1),Es(t.r,e,s+1)):e[t.s]=s},Hs=function(t){for(var e=t.length;e&&!t[--e];);for(var s=new _e(++e),n=0,r=t[0],i=1,o=function(p){s[n++]=p},h=1;h<=e;++h)if(t[h]==r&&h!=e)++i;else{if(!r&&i>2){for(;i>138;i-=138)o(32754);i>2&&(o(i>10?i-11<<5|28690:i-3<<5|12305),i=0)}else if(i>3){for(o(r),--i;i>6;i-=6)o(8304);i>2&&(o(i-3<<5|8208),i=0)}for(;i--;)o(r);i=1,r=t[h]}return{c:s.subarray(0,n),n:e}},et=function(t,e){for(var s=0,n=0;n<e.length;++n)s+=t[n]*e[n];return s},Gi=function(t,e,s){var n=s.length,r=Cs(e+2);t[r]=n&255,t[r+1]=n>>8,t[r+2]=t[r]^255,t[r+3]=t[r+1]^255;for(var i=0;i<n;++i)t[r+i+4]=s[i];return(r+4+n)*8},Gs=function(t,e,s,n,r,i,o,h,p,w,u){Te(e,u++,s),++r[256];for(var $=ds(r,15),v=$.t,k=$.l,_=ds(i,15),b=_.t,f=_.l,l=Hs(v),a=l.c,c=l.n,y=Hs(b),d=y.c,m=y.n,S=new _e(19),I=0;I<a.length;++I)++S[a[I]&31];for(var I=0;I<d.length;++I)++S[d[I]&31];for(var R=ds(S,7),D=R.t,q=R.l,F=19;F>4&&!D[$s[F-1]];--F);var V=w+5<<3,K=et(r,qe)+et(i,at)+o,ee=et(r,v)+et(i,b)+o+14+3*F+et(S,D)+2*S[16]+3*S[17]+7*S[18];if(p>=0&&V<=K&&V<=ee)return Gi(e,u,t.subarray(p,p+w));var re,te,B,oe;if(Te(e,u,1+(ee<K)),u+=2,ee<K){re=Oe(v,k,0),te=v,B=Oe(b,f,0),oe=b;var A=Oe(D,q,0);Te(e,u,c-257),Te(e,u+5,m-1),Te(e,u+10,F-4),u+=14;for(var I=0;I<F;++I)Te(e,u+3*I,D[$s[I]]);u+=3*F;for(var O=[a,d],j=0;j<2;++j)for(var T=O[j],I=0;I<T.length;++I){var g=T[I]&31;Te(e,u,A[g]),u+=D[g],g>15&&(Te(e,u,T[I]>>5&127),u+=T[I]>>12)}}else re=Dr,te=qe,B=qr,oe=at;for(var I=0;I<h;++I){var P=n[I];if(P>255){var g=P>>18&31;Qe(e,u,re[g+257]),u+=te[g+257],g>7&&(Te(e,u,P>>23&31),u+=Yt[g]);var x=P&31;Qe(e,u,B[x]),u+=oe[x],x>3&&(Qe(e,u,P>>5&8191),u+=Qt[x])}else Qe(e,u,re[P]),u+=te[P]}return Qe(e,u,re[256]),u+te[256]},Fr=new Ns([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),Vi=new ue(0),Hr=function(t,e,s,n,r,i){var o=i.z||t.length,h=new ue(n+o+5*(1+Math.ceil(o/7e3))+r),p=h.subarray(n,h.length-r),w=i.l,u=(i.r||0)&7;if(e){u&&(p[0]=i.r>>3);for(var $=Fr[e-1],v=$>>13,k=$&8191,_=(1<<s)-1,b=i.p||new _e(32768),f=i.h||new _e(_+1),l=Math.ceil(s/3),a=2*l,c=function(L){return(t[L]^t[L+1]<<l^t[L+2]<<a)&_},y=new Ns(25e3),d=new _e(288),m=new _e(32),S=0,I=0,R=i.i||0,D=0,q=i.w||0,F=0;R+2<o;++R){var V=c(R),K=R&32767,ee=f[V];if(b[K]=ee,f[V]=K,q<=R){var re=o-R;if((S>7e3||D>24576)&&(re>423||!w)){u=Gs(t,p,0,y,d,m,I,D,F,R-F,u),D=S=I=0,F=R;for(var te=0;te<286;++te)d[te]=0;for(var te=0;te<30;++te)m[te]=0}var B=2,oe=0,A=k,O=K-ee&32767;if(re>2&&V==c(R-O))for(var j=Math.min(v,re)-1,T=Math.min(32767,R),g=Math.min(258,re);O<=T&&--A&&K!=ee;){if(t[R+B]==t[R+B-O]){for(var P=0;P<g&&t[R+P]==t[R+P-O];++P);if(P>B){if(B=P,oe=O,P>j)break;for(var x=Math.min(O,P-2),H=0,te=0;te<x;++te){var G=R-O+te&32767,Q=b[G],W=G-Q&32767;W>H&&(H=W,ee=G)}}}K=ee,ee=b[K],O+=K-ee&32767}if(oe){y[D++]=268435456|Ss[B]<<18|Fs[oe];var E=Ss[B]&31,N=Fs[oe]&31;I+=Yt[E]+Qt[N],++d[257+E],++m[N],q=R+B,++S}else y[D++]=t[R],++d[t[R]]}}for(R=Math.max(R,q);R<o;++R)y[D++]=t[R],++d[t[R]];u=Gs(t,p,w,y,d,m,I,D,F,R-F,u),w||(i.r=u&7|p[u/8|0]<<3,u-=7,i.h=f,i.p=b,i.i=R,i.w=q)}else{for(var R=i.w||0;R<o+w;R+=65535){var M=R+65535;M>=o&&(p[u/8|0]=w,M=o),u=Gi(p,u+1,t.subarray(R,M))}i.i=o}return Hi(h,0,n+Cs(u)+r)},Gr=function(){for(var t=new Int32Array(256),e=0;e<256;++e){for(var s=e,n=9;--n;)s=(s&1&&-306674912)^s>>>1;t[e]=s}return t}(),Vr=function(){var t=-1;return{p:function(e){for(var s=t,n=0;n<e.length;++n)s=Gr[s&255^e[n]]^s>>>8;t=s},d:function(){return~t}}},Zr=function(t,e,s,n,r){if(!r&&(r={l:1},e.dictionary)){var i=e.dictionary.subarray(-32768),o=new ue(i.length+t.length);o.set(i),o.set(t,i.length),t=o,r.w=i.length}return Hr(t,e.level==null?6:e.level,e.mem==null?r.l?Math.ceil(Math.max(8,Math.min(13,Math.log(t.length)))*1.5):20:12+e.mem,s,n,r)},Is=function(t,e,s){for(;s;++e)t[e]=s,s>>>=8},Kr=function(t,e){var s=e.filename;if(t[0]=31,t[1]=139,t[2]=8,t[8]=e.level<2?4:e.level==9?2:0,t[9]=3,e.mtime!=0&&Is(t,4,Math.floor(new Date(e.mtime||Date.now())/1e3)),s){t[3]=8;for(var n=0;n<=s.length;++n)t[n+10]=s.charCodeAt(n)}},Br=function(t){(t[0]!=31||t[1]!=139||t[2]!=8)&&Pe(6,"invalid gzip data");var e=t[3],s=10;e&4&&(s+=(t[10]|t[11]<<8)+2);for(var n=(e>>3&1)+(e>>4&1);n>0;n-=!t[s++]);return s+(e&2)},Wr=function(t){var e=t.length;return(t[e-4]|t[e-3]<<8|t[e-2]<<16|t[e-1]<<24)>>>0},Jr=function(t){return 10+(t.filename?t.filename.length+1:0)};function Xr(t,e){e||(e={});var s=Vr(),n=t.length;s.p(t);var r=Zr(t,e,Jr(e),8),i=r.length;return Kr(r,e),Is(r,i-8,s.d()),Is(r,i-4,n),r}function Yr(t,e){var s=Br(t);return s+8>t.length&&Pe(6,"invalid gzip data"),Ur(t.subarray(s,-8),{i:2},new ue(Wr(t)),e)}var Qr=typeof TextDecoder<"u"&&new TextDecoder,eo=0;try{Qr.decode(Vi,{stream:!0}),eo=1}catch{}var ht={exports:{}},hs={},Ne={},ze={},us={},fs={},ps={},Vs;function Jt(){return Vs||(Vs=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.regexpCode=t.getEsmExportName=t.getProperty=t.safeStringify=t.stringify=t.strConcat=t.addCodeArg=t.str=t._=t.nil=t._Code=t.Name=t.IDENTIFIER=t._CodeOrName=void 0;class e{}t._CodeOrName=e,t.IDENTIFIER=/^[a-z$_][a-z$_0-9]*$/i;class s extends e{constructor(a){if(super(),!t.IDENTIFIER.test(a))throw new Error("CodeGen: name must be a valid identifier");this.str=a}toString(){return this.str}emptyStr(){return!1}get names(){return{[this.str]:1}}}t.Name=s;class n extends e{constructor(a){super(),this._items=typeof a=="string"?[a]:a}toString(){return this.str}emptyStr(){if(this._items.length>1)return!1;const a=this._items[0];return a===""||a==='""'}get str(){var a;return(a=this._str)!==null&&a!==void 0?a:this._str=this._items.reduce((c,y)=>`${c}${y}`,"")}get names(){var a;return(a=this._names)!==null&&a!==void 0?a:this._names=this._items.reduce((c,y)=>(y instanceof s&&(c[y.str]=(c[y.str]||0)+1),c),{})}}t._Code=n,t.nil=new n("");function r(l,...a){const c=[l[0]];let y=0;for(;y<a.length;)h(c,a[y]),c.push(l[++y]);return new n(c)}t._=r;const i=new n("+");function o(l,...a){const c=[k(l[0])];let y=0;for(;y<a.length;)c.push(i),h(c,a[y]),c.push(i,k(l[++y]));return p(c),new n(c)}t.str=o;function h(l,a){a instanceof n?l.push(...a._items):a instanceof s?l.push(a):l.push($(a))}t.addCodeArg=h;function p(l){let a=1;for(;a<l.length-1;){if(l[a]===i){const c=w(l[a-1],l[a+1]);if(c!==void 0){l.splice(a-1,3,c);continue}l[a++]="+"}a++}}function w(l,a){if(a==='""')return l;if(l==='""')return a;if(typeof l=="string")return a instanceof s||l[l.length-1]!=='"'?void 0:typeof a!="string"?`${l.slice(0,-1)}${a}"`:a[0]==='"'?l.slice(0,-1)+a.slice(1):void 0;if(typeof a=="string"&&a[0]==='"'&&!(l instanceof s))return`"${l}${a.slice(1)}`}function u(l,a){return a.emptyStr()?l:l.emptyStr()?a:o`${l}${a}`}t.strConcat=u;function $(l){return typeof l=="number"||typeof l=="boolean"||l===null?l:k(Array.isArray(l)?l.join(","):l)}function v(l){return new n(k(l))}t.stringify=v;function k(l){return JSON.stringify(l).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}t.safeStringify=k;function _(l){return typeof l=="string"&&t.IDENTIFIER.test(l)?new n(`.${l}`):r`[${l}]`}t.getProperty=_;function b(l){if(typeof l=="string"&&t.IDENTIFIER.test(l))return new n(`${l}`);throw new Error(`CodeGen: invalid export name: ${l}, use explicit $id name mapping`)}t.getEsmExportName=b;function f(l){return new n(l.toString())}t.regexpCode=f}(ps)),ps}var ms={},Zs;function Ks(){return Zs||(Zs=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.ValueScope=t.ValueScopeName=t.Scope=t.varKinds=t.UsedValueState=void 0;const e=Jt();class s extends Error{constructor(w){super(`CodeGen: "code" for ${w} not defined`),this.value=w.value}}var n;(function(p){p[p.Started=0]="Started",p[p.Completed=1]="Completed"})(n||(t.UsedValueState=n={})),t.varKinds={const:new e.Name("const"),let:new e.Name("let"),var:new e.Name("var")};class r{constructor({prefixes:w,parent:u}={}){this._names={},this._prefixes=w,this._parent=u}toName(w){return w instanceof e.Name?w:this.name(w)}name(w){return new e.Name(this._newName(w))}_newName(w){const u=this._names[w]||this._nameGroup(w);return`${w}${u.index++}`}_nameGroup(w){var u,$;if(!(($=(u=this._parent)===null||u===void 0?void 0:u._prefixes)===null||$===void 0)&&$.has(w)||this._prefixes&&!this._prefixes.has(w))throw new Error(`CodeGen: prefix "${w}" is not allowed in this scope`);return this._names[w]={prefix:w,index:0}}}t.Scope=r;class i extends e.Name{constructor(w,u){super(u),this.prefix=w}setValue(w,{property:u,itemIndex:$}){this.value=w,this.scopePath=(0,e._)`.${new e.Name(u)}[${$}]`}}t.ValueScopeName=i;const o=(0,e._)`\n`;class h extends r{constructor(w){super(w),this._values={},this._scope=w.scope,this.opts={...w,_n:w.lines?o:e.nil}}get(){return this._scope}name(w){return new i(w,this._newName(w))}value(w,u){var $;if(u.ref===void 0)throw new Error("CodeGen: ref must be passed in value");const v=this.toName(w),{prefix:k}=v,_=($=u.key)!==null&&$!==void 0?$:u.ref;let b=this._values[k];if(b){const a=b.get(_);if(a)return a}else b=this._values[k]=new Map;b.set(_,v);const f=this._scope[k]||(this._scope[k]=[]),l=f.length;return f[l]=u.ref,v.setValue(u,{property:k,itemIndex:l}),v}getValue(w,u){const $=this._values[w];if($)return $.get(u)}scopeRefs(w,u=this._values){return this._reduceValues(u,$=>{if($.scopePath===void 0)throw new Error(`CodeGen: name "${$}" has no value`);return(0,e._)`${w}${$.scopePath}`})}scopeCode(w=this._values,u,$){return this._reduceValues(w,v=>{if(v.value===void 0)throw new Error(`CodeGen: name "${v}" has no value`);return v.value.code},u,$)}_reduceValues(w,u,$={},v){let k=e.nil;for(const _ in w){const b=w[_];if(!b)continue;const f=$[_]=$[_]||new Map;b.forEach(l=>{if(f.has(l))return;f.set(l,n.Started);let a=u(l);if(a){const c=this.opts.es5?t.varKinds.var:t.varKinds.const;k=(0,e._)`${k}${c} ${l} = ${a};${this.opts._n}`}else if(a=v?.(l))k=(0,e._)`${k}${a}${this.opts._n}`;else throw new s(l);f.set(l,n.Completed)})}return k}}t.ValueScope=h}(ms)),ms}var Bs;function Y(){return Bs||(Bs=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.or=t.and=t.not=t.CodeGen=t.operators=t.varKinds=t.ValueScopeName=t.ValueScope=t.Scope=t.Name=t.regexpCode=t.stringify=t.getProperty=t.nil=t.strConcat=t.str=t._=void 0;const e=Jt(),s=Ks();var n=Jt();Object.defineProperty(t,"_",{enumerable:!0,get:function(){return n._}}),Object.defineProperty(t,"str",{enumerable:!0,get:function(){return n.str}}),Object.defineProperty(t,"strConcat",{enumerable:!0,get:function(){return n.strConcat}}),Object.defineProperty(t,"nil",{enumerable:!0,get:function(){return n.nil}}),Object.defineProperty(t,"getProperty",{enumerable:!0,get:function(){return n.getProperty}}),Object.defineProperty(t,"stringify",{enumerable:!0,get:function(){return n.stringify}}),Object.defineProperty(t,"regexpCode",{enumerable:!0,get:function(){return n.regexpCode}}),Object.defineProperty(t,"Name",{enumerable:!0,get:function(){return n.Name}});var r=Ks();Object.defineProperty(t,"Scope",{enumerable:!0,get:function(){return r.Scope}}),Object.defineProperty(t,"ValueScope",{enumerable:!0,get:function(){return r.ValueScope}}),Object.defineProperty(t,"ValueScopeName",{enumerable:!0,get:function(){return r.ValueScopeName}}),Object.defineProperty(t,"varKinds",{enumerable:!0,get:function(){return r.varKinds}}),t.operators={GT:new e._Code(">"),GTE:new e._Code(">="),LT:new e._Code("<"),LTE:new e._Code("<="),EQ:new e._Code("==="),NEQ:new e._Code("!=="),NOT:new e._Code("!"),OR:new e._Code("||"),AND:new e._Code("&&"),ADD:new e._Code("+")};class i{optimizeNodes(){return this}optimizeNames(g,P){return this}}class o extends i{constructor(g,P,x){super(),this.varKind=g,this.name=P,this.rhs=x}render({es5:g,_n:P}){const x=g?s.varKinds.var:this.varKind,H=this.rhs===void 0?"":` = ${this.rhs}`;return`${x} ${this.name}${H};`+P}optimizeNames(g,P){if(g[this.name.str])return this.rhs&&(this.rhs=K(this.rhs,g,P)),this}get names(){return this.rhs instanceof e._CodeOrName?this.rhs.names:{}}}class h extends i{constructor(g,P,x){super(),this.lhs=g,this.rhs=P,this.sideEffects=x}render({_n:g}){return`${this.lhs} = ${this.rhs};`+g}optimizeNames(g,P){if(!(this.lhs instanceof e.Name&&!g[this.lhs.str]&&!this.sideEffects))return this.rhs=K(this.rhs,g,P),this}get names(){const g=this.lhs instanceof e.Name?{}:{...this.lhs.names};return V(g,this.rhs)}}class p extends h{constructor(g,P,x,H){super(g,x,H),this.op=P}render({_n:g}){return`${this.lhs} ${this.op}= ${this.rhs};`+g}}class w extends i{constructor(g){super(),this.label=g,this.names={}}render({_n:g}){return`${this.label}:`+g}}class u extends i{constructor(g){super(),this.label=g,this.names={}}render({_n:g}){return`break${this.label?` ${this.label}`:""};`+g}}class $ extends i{constructor(g){super(),this.error=g}render({_n:g}){return`throw ${this.error};`+g}get names(){return this.error.names}}class v extends i{constructor(g){super(),this.code=g}render({_n:g}){return`${this.code};`+g}optimizeNodes(){return`${this.code}`?this:void 0}optimizeNames(g,P){return this.code=K(this.code,g,P),this}get names(){return this.code instanceof e._CodeOrName?this.code.names:{}}}class k extends i{constructor(g=[]){super(),this.nodes=g}render(g){return this.nodes.reduce((P,x)=>P+x.render(g),"")}optimizeNodes(){const{nodes:g}=this;let P=g.length;for(;P--;){const x=g[P].optimizeNodes();Array.isArray(x)?g.splice(P,1,...x):x?g[P]=x:g.splice(P,1)}return g.length>0?this:void 0}optimizeNames(g,P){const{nodes:x}=this;let H=x.length;for(;H--;){const G=x[H];G.optimizeNames(g,P)||(ee(g,G.names),x.splice(H,1))}return x.length>0?this:void 0}get names(){return this.nodes.reduce((g,P)=>F(g,P.names),{})}}class _ extends k{render(g){return"{"+g._n+super.render(g)+"}"+g._n}}class b extends k{}class f extends _{}f.kind="else";class l extends _{constructor(g,P){super(P),this.condition=g}render(g){let P=`if(${this.condition})`+super.render(g);return this.else&&(P+="else "+this.else.render(g)),P}optimizeNodes(){super.optimizeNodes();const g=this.condition;if(g===!0)return this.nodes;let P=this.else;if(P){const x=P.optimizeNodes();P=this.else=Array.isArray(x)?new f(x):x}if(P)return g===!1?P instanceof l?P:P.nodes:this.nodes.length?this:new l(re(g),P instanceof l?[P]:P.nodes);if(!(g===!1||!this.nodes.length))return this}optimizeNames(g,P){var x;if(this.else=(x=this.else)===null||x===void 0?void 0:x.optimizeNames(g,P),!!(super.optimizeNames(g,P)||this.else))return this.condition=K(this.condition,g,P),this}get names(){const g=super.names;return V(g,this.condition),this.else&&F(g,this.else.names),g}}l.kind="if";class a extends _{}a.kind="for";class c extends a{constructor(g){super(),this.iteration=g}render(g){return`for(${this.iteration})`+super.render(g)}optimizeNames(g,P){if(super.optimizeNames(g,P))return this.iteration=K(this.iteration,g,P),this}get names(){return F(super.names,this.iteration.names)}}class y extends a{constructor(g,P,x,H){super(),this.varKind=g,this.name=P,this.from=x,this.to=H}render(g){const P=g.es5?s.varKinds.var:this.varKind,{name:x,from:H,to:G}=this;return`for(${P} ${x}=${H}; ${x}<${G}; ${x}++)`+super.render(g)}get names(){const g=V(super.names,this.from);return V(g,this.to)}}class d extends a{constructor(g,P,x,H){super(),this.loop=g,this.varKind=P,this.name=x,this.iterable=H}render(g){return`for(${this.varKind} ${this.name} ${this.loop} ${this.iterable})`+super.render(g)}optimizeNames(g,P){if(super.optimizeNames(g,P))return this.iterable=K(this.iterable,g,P),this}get names(){return F(super.names,this.iterable.names)}}class m extends _{constructor(g,P,x){super(),this.name=g,this.args=P,this.async=x}render(g){return`${this.async?"async ":""}function ${this.name}(${this.args})`+super.render(g)}}m.kind="func";class S extends k{render(g){return"return "+super.render(g)}}S.kind="return";class I extends _{render(g){let P="try"+super.render(g);return this.catch&&(P+=this.catch.render(g)),this.finally&&(P+=this.finally.render(g)),P}optimizeNodes(){var g,P;return super.optimizeNodes(),(g=this.catch)===null||g===void 0||g.optimizeNodes(),(P=this.finally)===null||P===void 0||P.optimizeNodes(),this}optimizeNames(g,P){var x,H;return super.optimizeNames(g,P),(x=this.catch)===null||x===void 0||x.optimizeNames(g,P),(H=this.finally)===null||H===void 0||H.optimizeNames(g,P),this}get names(){const g=super.names;return this.catch&&F(g,this.catch.names),this.finally&&F(g,this.finally.names),g}}class R extends _{constructor(g){super(),this.error=g}render(g){return`catch(${this.error})`+super.render(g)}}R.kind="catch";class D extends _{render(g){return"finally"+super.render(g)}}D.kind="finally";class q{constructor(g,P={}){this._values={},this._blockStarts=[],this._constants={},this.opts={...P,_n:P.lines?`
`:""},this._extScope=g,this._scope=new s.Scope({parent:g}),this._nodes=[new b]}toString(){return this._root.render(this.opts)}name(g){return this._scope.name(g)}scopeName(g){return this._extScope.name(g)}scopeValue(g,P){const x=this._extScope.value(g,P);return(this._values[x.prefix]||(this._values[x.prefix]=new Set)).add(x),x}getScopeValue(g,P){return this._extScope.getValue(g,P)}scopeRefs(g){return this._extScope.scopeRefs(g,this._values)}scopeCode(){return this._extScope.scopeCode(this._values)}_def(g,P,x,H){const G=this._scope.toName(P);return x!==void 0&&H&&(this._constants[G.str]=x),this._leafNode(new o(g,G,x)),G}const(g,P,x){return this._def(s.varKinds.const,g,P,x)}let(g,P,x){return this._def(s.varKinds.let,g,P,x)}var(g,P,x){return this._def(s.varKinds.var,g,P,x)}assign(g,P,x){return this._leafNode(new h(g,P,x))}add(g,P){return this._leafNode(new p(g,t.operators.ADD,P))}code(g){return typeof g=="function"?g():g!==e.nil&&this._leafNode(new v(g)),this}object(...g){const P=["{"];for(const[x,H]of g)P.length>1&&P.push(","),P.push(x),(x!==H||this.opts.es5)&&(P.push(":"),(0,e.addCodeArg)(P,H));return P.push("}"),new e._Code(P)}if(g,P,x){if(this._blockNode(new l(g)),P&&x)this.code(P).else().code(x).endIf();else if(P)this.code(P).endIf();else if(x)throw new Error('CodeGen: "else" body without "then" body');return this}elseIf(g){return this._elseNode(new l(g))}else(){return this._elseNode(new f)}endIf(){return this._endBlockNode(l,f)}_for(g,P){return this._blockNode(g),P&&this.code(P).endFor(),this}for(g,P){return this._for(new c(g),P)}forRange(g,P,x,H,G=this.opts.es5?s.varKinds.var:s.varKinds.let){const Q=this._scope.toName(g);return this._for(new y(G,Q,P,x),()=>H(Q))}forOf(g,P,x,H=s.varKinds.const){const G=this._scope.toName(g);if(this.opts.es5){const Q=P instanceof e.Name?P:this.var("_arr",P);return this.forRange("_i",0,(0,e._)`${Q}.length`,W=>{this.var(G,(0,e._)`${Q}[${W}]`),x(G)})}return this._for(new d("of",H,G,P),()=>x(G))}forIn(g,P,x,H=this.opts.es5?s.varKinds.var:s.varKinds.const){if(this.opts.ownProperties)return this.forOf(g,(0,e._)`Object.keys(${P})`,x);const G=this._scope.toName(g);return this._for(new d("in",H,G,P),()=>x(G))}endFor(){return this._endBlockNode(a)}label(g){return this._leafNode(new w(g))}break(g){return this._leafNode(new u(g))}return(g){const P=new S;if(this._blockNode(P),this.code(g),P.nodes.length!==1)throw new Error('CodeGen: "return" should have one node');return this._endBlockNode(S)}try(g,P,x){if(!P&&!x)throw new Error('CodeGen: "try" without "catch" and "finally"');const H=new I;if(this._blockNode(H),this.code(g),P){const G=this.name("e");this._currNode=H.catch=new R(G),P(G)}return x&&(this._currNode=H.finally=new D,this.code(x)),this._endBlockNode(R,D)}throw(g){return this._leafNode(new $(g))}block(g,P){return this._blockStarts.push(this._nodes.length),g&&this.code(g).endBlock(P),this}endBlock(g){const P=this._blockStarts.pop();if(P===void 0)throw new Error("CodeGen: not in self-balancing block");const x=this._nodes.length-P;if(x<0||g!==void 0&&x!==g)throw new Error(`CodeGen: wrong number of nodes: ${x} vs ${g} expected`);return this._nodes.length=P,this}func(g,P=e.nil,x,H){return this._blockNode(new m(g,P,x)),H&&this.code(H).endFunc(),this}endFunc(){return this._endBlockNode(m)}optimize(g=1){for(;g-- >0;)this._root.optimizeNodes(),this._root.optimizeNames(this._root.names,this._constants)}_leafNode(g){return this._currNode.nodes.push(g),this}_blockNode(g){this._currNode.nodes.push(g),this._nodes.push(g)}_endBlockNode(g,P){const x=this._currNode;if(x instanceof g||P&&x instanceof P)return this._nodes.pop(),this;throw new Error(`CodeGen: not in block "${P?`${g.kind}/${P.kind}`:g.kind}"`)}_elseNode(g){const P=this._currNode;if(!(P instanceof l))throw new Error('CodeGen: "else" without "if"');return this._currNode=P.else=g,this}get _root(){return this._nodes[0]}get _currNode(){const g=this._nodes;return g[g.length-1]}set _currNode(g){const P=this._nodes;P[P.length-1]=g}}t.CodeGen=q;function F(T,g){for(const P in g)T[P]=(T[P]||0)+(g[P]||0);return T}function V(T,g){return g instanceof e._CodeOrName?F(T,g.names):T}function K(T,g,P){if(T instanceof e.Name)return x(T);if(!H(T))return T;return new e._Code(T._items.reduce((G,Q)=>(Q instanceof e.Name&&(Q=x(Q)),Q instanceof e._Code?G.push(...Q._items):G.push(Q),G),[]));function x(G){const Q=P[G.str];return Q===void 0||g[G.str]!==1?G:(delete g[G.str],Q)}function H(G){return G instanceof e._Code&&G._items.some(Q=>Q instanceof e.Name&&g[Q.str]===1&&P[Q.str]!==void 0)}}function ee(T,g){for(const P in g)T[P]=(T[P]||0)-(g[P]||0)}function re(T){return typeof T=="boolean"||typeof T=="number"||T===null?!T:(0,e._)`!${j(T)}`}t.not=re;const te=O(t.operators.AND);function B(...T){return T.reduce(te)}t.and=B;const oe=O(t.operators.OR);function A(...T){return T.reduce(oe)}t.or=A;function O(T){return(g,P)=>g===e.nil?P:P===e.nil?g:(0,e._)`${j(g)} ${T} ${j(P)}`}function j(T){return T instanceof e.Name?T:(0,e._)`(${T})`}}(fs)),fs}var J={},Ws;function se(){if(Ws)return J;Ws=1,Object.defineProperty(J,"__esModule",{value:!0}),J.checkStrictMode=J.getErrorPath=J.Type=J.useFunc=J.setEvaluated=J.evaluatedPropsToName=J.mergeEvaluated=J.eachItem=J.unescapeJsonPointer=J.escapeJsonPointer=J.escapeFragment=J.unescapeFragment=J.schemaRefOrVal=J.schemaHasRulesButRef=J.schemaHasRules=J.checkUnknownRules=J.alwaysValidSchema=J.toHash=void 0;const t=Y(),e=Jt();function s(d){const m={};for(const S of d)m[S]=!0;return m}J.toHash=s;function n(d,m){return typeof m=="boolean"?m:Object.keys(m).length===0?!0:(r(d,m),!i(m,d.self.RULES.all))}J.alwaysValidSchema=n;function r(d,m=d.schema){const{opts:S,self:I}=d;if(!S.strictSchema||typeof m=="boolean")return;const R=I.RULES.keywords;for(const D in m)R[D]||y(d,`unknown keyword: "${D}"`)}J.checkUnknownRules=r;function i(d,m){if(typeof d=="boolean")return!d;for(const S in d)if(m[S])return!0;return!1}J.schemaHasRules=i;function o(d,m){if(typeof d=="boolean")return!d;for(const S in d)if(S!=="$ref"&&m.all[S])return!0;return!1}J.schemaHasRulesButRef=o;function h({topSchemaRef:d,schemaPath:m},S,I,R){if(!R){if(typeof S=="number"||typeof S=="boolean")return S;if(typeof S=="string")return(0,t._)`${S}`}return(0,t._)`${d}${m}${(0,t.getProperty)(I)}`}J.schemaRefOrVal=h;function p(d){return $(decodeURIComponent(d))}J.unescapeFragment=p;function w(d){return encodeURIComponent(u(d))}J.escapeFragment=w;function u(d){return typeof d=="number"?`${d}`:d.replace(/~/g,"~0").replace(/\//g,"~1")}J.escapeJsonPointer=u;function $(d){return d.replace(/~1/g,"/").replace(/~0/g,"~")}J.unescapeJsonPointer=$;function v(d,m){if(Array.isArray(d))for(const S of d)m(S);else m(d)}J.eachItem=v;function k({mergeNames:d,mergeToName:m,mergeValues:S,resultToName:I}){return(R,D,q,F)=>{const V=q===void 0?D:q instanceof t.Name?(D instanceof t.Name?d(R,D,q):m(R,D,q),q):D instanceof t.Name?(m(R,q,D),D):S(D,q);return F===t.Name&&!(V instanceof t.Name)?I(R,V):V}}J.mergeEvaluated={props:k({mergeNames:(d,m,S)=>d.if((0,t._)`${S} !== true && ${m} !== undefined`,()=>{d.if((0,t._)`${m} === true`,()=>d.assign(S,!0),()=>d.assign(S,(0,t._)`${S} || {}`).code((0,t._)`Object.assign(${S}, ${m})`))}),mergeToName:(d,m,S)=>d.if((0,t._)`${S} !== true`,()=>{m===!0?d.assign(S,!0):(d.assign(S,(0,t._)`${S} || {}`),b(d,S,m))}),mergeValues:(d,m)=>d===!0?!0:{...d,...m},resultToName:_}),items:k({mergeNames:(d,m,S)=>d.if((0,t._)`${S} !== true && ${m} !== undefined`,()=>d.assign(S,(0,t._)`${m} === true ? true : ${S} > ${m} ? ${S} : ${m}`)),mergeToName:(d,m,S)=>d.if((0,t._)`${S} !== true`,()=>d.assign(S,m===!0?!0:(0,t._)`${S} > ${m} ? ${S} : ${m}`)),mergeValues:(d,m)=>d===!0?!0:Math.max(d,m),resultToName:(d,m)=>d.var("items",m)})};function _(d,m){if(m===!0)return d.var("props",!0);const S=d.var("props",(0,t._)`{}`);return m!==void 0&&b(d,S,m),S}J.evaluatedPropsToName=_;function b(d,m,S){Object.keys(S).forEach(I=>d.assign((0,t._)`${m}${(0,t.getProperty)(I)}`,!0))}J.setEvaluated=b;const f={};function l(d,m){return d.scopeValue("func",{ref:m,code:f[m.code]||(f[m.code]=new e._Code(m.code))})}J.useFunc=l;var a;(function(d){d[d.Num=0]="Num",d[d.Str=1]="Str"})(a||(J.Type=a={}));function c(d,m,S){if(d instanceof t.Name){const I=m===a.Num;return S?I?(0,t._)`"[" + ${d} + "]"`:(0,t._)`"['" + ${d} + "']"`:I?(0,t._)`"/" + ${d}`:(0,t._)`"/" + ${d}.replace(/~/g, "~0").replace(/\\//g, "~1")`}return S?(0,t.getProperty)(d).toString():"/"+u(d)}J.getErrorPath=c;function y(d,m,S=d.opts.strictSchema){if(S){if(m=`strict mode: ${m}`,S===!0)throw new Error(m);d.self.logger.warn(m)}}return J.checkStrictMode=y,J}var ut={},Js;function Le(){if(Js)return ut;Js=1,Object.defineProperty(ut,"__esModule",{value:!0});const t=Y(),e={data:new t.Name("data"),valCxt:new t.Name("valCxt"),instancePath:new t.Name("instancePath"),parentData:new t.Name("parentData"),parentDataProperty:new t.Name("parentDataProperty"),rootData:new t.Name("rootData"),dynamicAnchors:new t.Name("dynamicAnchors"),vErrors:new t.Name("vErrors"),errors:new t.Name("errors"),this:new t.Name("this"),self:new t.Name("self"),scope:new t.Name("scope"),json:new t.Name("json"),jsonPos:new t.Name("jsonPos"),jsonLen:new t.Name("jsonLen"),jsonPart:new t.Name("jsonPart")};return ut.default=e,ut}var Xs;function es(){return Xs||(Xs=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.extendErrors=t.resetErrorsCount=t.reportExtraError=t.reportError=t.keyword$DataError=t.keywordError=void 0;const e=Y(),s=se(),n=Le();t.keywordError={message:({keyword:f})=>(0,e.str)`must pass "${f}" keyword validation`},t.keyword$DataError={message:({keyword:f,schemaType:l})=>l?(0,e.str)`"${f}" keyword must be ${l} ($data)`:(0,e.str)`"${f}" keyword is invalid ($data)`};function r(f,l=t.keywordError,a,c){const{it:y}=f,{gen:d,compositeRule:m,allErrors:S}=y,I=$(f,l,a);c??(m||S)?p(d,I):w(y,(0,e._)`[${I}]`)}t.reportError=r;function i(f,l=t.keywordError,a){const{it:c}=f,{gen:y,compositeRule:d,allErrors:m}=c,S=$(f,l,a);p(y,S),d||m||w(c,n.default.vErrors)}t.reportExtraError=i;function o(f,l){f.assign(n.default.errors,l),f.if((0,e._)`${n.default.vErrors} !== null`,()=>f.if(l,()=>f.assign((0,e._)`${n.default.vErrors}.length`,l),()=>f.assign(n.default.vErrors,null)))}t.resetErrorsCount=o;function h({gen:f,keyword:l,schemaValue:a,data:c,errsCount:y,it:d}){if(y===void 0)throw new Error("ajv implementation error");const m=f.name("err");f.forRange("i",y,n.default.errors,S=>{f.const(m,(0,e._)`${n.default.vErrors}[${S}]`),f.if((0,e._)`${m}.instancePath === undefined`,()=>f.assign((0,e._)`${m}.instancePath`,(0,e.strConcat)(n.default.instancePath,d.errorPath))),f.assign((0,e._)`${m}.schemaPath`,(0,e.str)`${d.errSchemaPath}/${l}`),d.opts.verbose&&(f.assign((0,e._)`${m}.schema`,a),f.assign((0,e._)`${m}.data`,c))})}t.extendErrors=h;function p(f,l){const a=f.const("err",l);f.if((0,e._)`${n.default.vErrors} === null`,()=>f.assign(n.default.vErrors,(0,e._)`[${a}]`),(0,e._)`${n.default.vErrors}.push(${a})`),f.code((0,e._)`${n.default.errors}++`)}function w(f,l){const{gen:a,validateName:c,schemaEnv:y}=f;y.$async?a.throw((0,e._)`new ${f.ValidationError}(${l})`):(a.assign((0,e._)`${c}.errors`,l),a.return(!1))}const u={keyword:new e.Name("keyword"),schemaPath:new e.Name("schemaPath"),params:new e.Name("params"),propertyName:new e.Name("propertyName"),message:new e.Name("message"),schema:new e.Name("schema"),parentSchema:new e.Name("parentSchema")};function $(f,l,a){const{createErrors:c}=f.it;return c===!1?(0,e._)`{}`:v(f,l,a)}function v(f,l,a={}){const{gen:c,it:y}=f,d=[k(y,a),_(f,a)];return b(f,l,d),c.object(...d)}function k({errorPath:f},{instancePath:l}){const a=l?(0,e.str)`${f}${(0,s.getErrorPath)(l,s.Type.Str)}`:f;return[n.default.instancePath,(0,e.strConcat)(n.default.instancePath,a)]}function _({keyword:f,it:{errSchemaPath:l}},{schemaPath:a,parentSchema:c}){let y=c?l:(0,e.str)`${l}/${f}`;return a&&(y=(0,e.str)`${y}${(0,s.getErrorPath)(a,s.Type.Str)}`),[u.schemaPath,y]}function b(f,{params:l,message:a},c){const{keyword:y,data:d,schemaValue:m,it:S}=f,{opts:I,propertyName:R,topSchemaRef:D,schemaPath:q}=S;c.push([u.keyword,y],[u.params,typeof l=="function"?l(f):l||(0,e._)`{}`]),I.messages&&c.push([u.message,typeof a=="function"?a(f):a]),I.verbose&&c.push([u.schema,m],[u.parentSchema,(0,e._)`${D}${q}`],[n.default.data,d]),R&&c.push([u.propertyName,R])}}(us)),us}var Ys;function to(){if(Ys)return ze;Ys=1,Object.defineProperty(ze,"__esModule",{value:!0}),ze.boolOrEmptySchema=ze.topBoolOrEmptySchema=void 0;const t=es(),e=Y(),s=Le(),n={message:"boolean schema is false"};function r(h){const{gen:p,schema:w,validateName:u}=h;w===!1?o(h,!1):typeof w=="object"&&w.$async===!0?p.return(s.default.data):(p.assign((0,e._)`${u}.errors`,null),p.return(!0))}ze.topBoolOrEmptySchema=r;function i(h,p){const{gen:w,schema:u}=h;u===!1?(w.var(p,!1),o(h)):w.var(p,!0)}ze.boolOrEmptySchema=i;function o(h,p){const{gen:w,data:u}=h,$={gen:w,keyword:"false schema",data:u,schema:!1,schemaCode:!1,schemaValue:!1,params:{},it:h};(0,t.reportError)($,n,void 0,p)}return ze}var he={},Ue={},Qs;function Zi(){if(Qs)return Ue;Qs=1,Object.defineProperty(Ue,"__esModule",{value:!0}),Ue.getRules=Ue.isJSONType=void 0;const t=["string","number","integer","boolean","null","object","array"],e=new Set(t);function s(r){return typeof r=="string"&&e.has(r)}Ue.isJSONType=s;function n(){const r={number:{type:"number",rules:[]},string:{type:"string",rules:[]},array:{type:"array",rules:[]},object:{type:"object",rules:[]}};return{types:{...r,integer:!0,boolean:!0,null:!0},rules:[{rules:[]},r.number,r.string,r.array,r.object],post:{rules:[]},all:{},keywords:{}}}return Ue.getRules=n,Ue}var Ce={},en;function Ki(){if(en)return Ce;en=1,Object.defineProperty(Ce,"__esModule",{value:!0}),Ce.shouldUseRule=Ce.shouldUseGroup=Ce.schemaHasRulesForType=void 0;function t({schema:n,self:r},i){const o=r.RULES.types[i];return o&&o!==!0&&e(n,o)}Ce.schemaHasRulesForType=t;function e(n,r){return r.rules.some(i=>s(n,i))}Ce.shouldUseGroup=e;function s(n,r){var i;return n[r.keyword]!==void 0||((i=r.definition.implements)===null||i===void 0?void 0:i.some(o=>n[o]!==void 0))}return Ce.shouldUseRule=s,Ce}var tn;function Xt(){if(tn)return he;tn=1,Object.defineProperty(he,"__esModule",{value:!0}),he.reportTypeError=he.checkDataTypes=he.checkDataType=he.coerceAndCheckDataType=he.getJSONTypes=he.getSchemaTypes=he.DataType=void 0;const t=Zi(),e=Ki(),s=es(),n=Y(),r=se();var i;(function(a){a[a.Correct=0]="Correct",a[a.Wrong=1]="Wrong"})(i||(he.DataType=i={}));function o(a){const c=h(a.type);if(c.includes("null")){if(a.nullable===!1)throw new Error("type: null contradicts nullable: false")}else{if(!c.length&&a.nullable!==void 0)throw new Error('"nullable" cannot be used without "type"');a.nullable===!0&&c.push("null")}return c}he.getSchemaTypes=o;function h(a){const c=Array.isArray(a)?a:a?[a]:[];if(c.every(t.isJSONType))return c;throw new Error("type must be JSONType or JSONType[]: "+c.join(","))}he.getJSONTypes=h;function p(a,c){const{gen:y,data:d,opts:m}=a,S=u(c,m.coerceTypes),I=c.length>0&&!(S.length===0&&c.length===1&&(0,e.schemaHasRulesForType)(a,c[0]));if(I){const R=_(c,d,m.strictNumbers,i.Wrong);y.if(R,()=>{S.length?$(a,c,S):f(a)})}return I}he.coerceAndCheckDataType=p;const w=new Set(["string","number","integer","boolean","null"]);function u(a,c){return c?a.filter(y=>w.has(y)||c==="array"&&y==="array"):[]}function $(a,c,y){const{gen:d,data:m,opts:S}=a,I=d.let("dataType",(0,n._)`typeof ${m}`),R=d.let("coerced",(0,n._)`undefined`);S.coerceTypes==="array"&&d.if((0,n._)`${I} == 'object' && Array.isArray(${m}) && ${m}.length == 1`,()=>d.assign(m,(0,n._)`${m}[0]`).assign(I,(0,n._)`typeof ${m}`).if(_(c,m,S.strictNumbers),()=>d.assign(R,m))),d.if((0,n._)`${R} !== undefined`);for(const q of y)(w.has(q)||q==="array"&&S.coerceTypes==="array")&&D(q);d.else(),f(a),d.endIf(),d.if((0,n._)`${R} !== undefined`,()=>{d.assign(m,R),v(a,R)});function D(q){switch(q){case"string":d.elseIf((0,n._)`${I} == "number" || ${I} == "boolean"`).assign(R,(0,n._)`"" + ${m}`).elseIf((0,n._)`${m} === null`).assign(R,(0,n._)`""`);return;case"number":d.elseIf((0,n._)`${I} == "boolean" || ${m} === null
              || (${I} == "string" && ${m} && ${m} == +${m})`).assign(R,(0,n._)`+${m}`);return;case"integer":d.elseIf((0,n._)`${I} === "boolean" || ${m} === null
              || (${I} === "string" && ${m} && ${m} == +${m} && !(${m} % 1))`).assign(R,(0,n._)`+${m}`);return;case"boolean":d.elseIf((0,n._)`${m} === "false" || ${m} === 0 || ${m} === null`).assign(R,!1).elseIf((0,n._)`${m} === "true" || ${m} === 1`).assign(R,!0);return;case"null":d.elseIf((0,n._)`${m} === "" || ${m} === 0 || ${m} === false`),d.assign(R,null);return;case"array":d.elseIf((0,n._)`${I} === "string" || ${I} === "number"
              || ${I} === "boolean" || ${m} === null`).assign(R,(0,n._)`[${m}]`)}}}function v({gen:a,parentData:c,parentDataProperty:y},d){a.if((0,n._)`${c} !== undefined`,()=>a.assign((0,n._)`${c}[${y}]`,d))}function k(a,c,y,d=i.Correct){const m=d===i.Correct?n.operators.EQ:n.operators.NEQ;let S;switch(a){case"null":return(0,n._)`${c} ${m} null`;case"array":S=(0,n._)`Array.isArray(${c})`;break;case"object":S=(0,n._)`${c} && typeof ${c} == "object" && !Array.isArray(${c})`;break;case"integer":S=I((0,n._)`!(${c} % 1) && !isNaN(${c})`);break;case"number":S=I();break;default:return(0,n._)`typeof ${c} ${m} ${a}`}return d===i.Correct?S:(0,n.not)(S);function I(R=n.nil){return(0,n.and)((0,n._)`typeof ${c} == "number"`,R,y?(0,n._)`isFinite(${c})`:n.nil)}}he.checkDataType=k;function _(a,c,y,d){if(a.length===1)return k(a[0],c,y,d);let m;const S=(0,r.toHash)(a);if(S.array&&S.object){const I=(0,n._)`typeof ${c} != "object"`;m=S.null?I:(0,n._)`!${c} || ${I}`,delete S.null,delete S.array,delete S.object}else m=n.nil;S.number&&delete S.integer;for(const I in S)m=(0,n.and)(m,k(I,c,y,d));return m}he.checkDataTypes=_;const b={message:({schema:a})=>`must be ${a}`,params:({schema:a,schemaValue:c})=>typeof a=="string"?(0,n._)`{type: ${a}}`:(0,n._)`{type: ${c}}`};function f(a){const c=l(a);(0,s.reportError)(c,b)}he.reportTypeError=f;function l(a){const{gen:c,data:y,schema:d}=a,m=(0,r.schemaRefOrVal)(a,d,"type");return{gen:c,keyword:"type",data:y,schema:d.type,schemaCode:m,schemaValue:m,parentSchema:d,params:{},it:a}}return he}var tt={},sn;function so(){if(sn)return tt;sn=1,Object.defineProperty(tt,"__esModule",{value:!0}),tt.assignDefaults=void 0;const t=Y(),e=se();function s(r,i){const{properties:o,items:h}=r.schema;if(i==="object"&&o)for(const p in o)n(r,p,o[p].default);else i==="array"&&Array.isArray(h)&&h.forEach((p,w)=>n(r,w,p.default))}tt.assignDefaults=s;function n(r,i,o){const{gen:h,compositeRule:p,data:w,opts:u}=r;if(o===void 0)return;const $=(0,t._)`${w}${(0,t.getProperty)(i)}`;if(p){(0,e.checkStrictMode)(r,`default is ignored for: ${$}`);return}let v=(0,t._)`${$} === undefined`;u.useDefaults==="empty"&&(v=(0,t._)`${v} || ${$} === null || ${$} === ""`),h.if(v,(0,t._)`${$} = ${(0,t.stringify)(o)}`)}return tt}var Se={},ie={},nn;function Ee(){if(nn)return ie;nn=1,Object.defineProperty(ie,"__esModule",{value:!0}),ie.validateUnion=ie.validateArray=ie.usePattern=ie.callValidateCode=ie.schemaProperties=ie.allSchemaProperties=ie.noPropertyInData=ie.propertyInData=ie.isOwnProperty=ie.hasPropFunc=ie.reportMissingProp=ie.checkMissingProp=ie.checkReportMissingProp=void 0;const t=Y(),e=se(),s=Le(),n=se();function r(a,c){const{gen:y,data:d,it:m}=a;y.if(u(y,d,c,m.opts.ownProperties),()=>{a.setParams({missingProperty:(0,t._)`${c}`},!0),a.error()})}ie.checkReportMissingProp=r;function i({gen:a,data:c,it:{opts:y}},d,m){return(0,t.or)(...d.map(S=>(0,t.and)(u(a,c,S,y.ownProperties),(0,t._)`${m} = ${S}`)))}ie.checkMissingProp=i;function o(a,c){a.setParams({missingProperty:c},!0),a.error()}ie.reportMissingProp=o;function h(a){return a.scopeValue("func",{ref:Object.prototype.hasOwnProperty,code:(0,t._)`Object.prototype.hasOwnProperty`})}ie.hasPropFunc=h;function p(a,c,y){return(0,t._)`${h(a)}.call(${c}, ${y})`}ie.isOwnProperty=p;function w(a,c,y,d){const m=(0,t._)`${c}${(0,t.getProperty)(y)} !== undefined`;return d?(0,t._)`${m} && ${p(a,c,y)}`:m}ie.propertyInData=w;function u(a,c,y,d){const m=(0,t._)`${c}${(0,t.getProperty)(y)} === undefined`;return d?(0,t.or)(m,(0,t.not)(p(a,c,y))):m}ie.noPropertyInData=u;function $(a){return a?Object.keys(a).filter(c=>c!=="__proto__"):[]}ie.allSchemaProperties=$;function v(a,c){return $(c).filter(y=>!(0,e.alwaysValidSchema)(a,c[y]))}ie.schemaProperties=v;function k({schemaCode:a,data:c,it:{gen:y,topSchemaRef:d,schemaPath:m,errorPath:S},it:I},R,D,q){const F=q?(0,t._)`${a}, ${c}, ${d}${m}`:c,V=[[s.default.instancePath,(0,t.strConcat)(s.default.instancePath,S)],[s.default.parentData,I.parentData],[s.default.parentDataProperty,I.parentDataProperty],[s.default.rootData,s.default.rootData]];I.opts.dynamicRef&&V.push([s.default.dynamicAnchors,s.default.dynamicAnchors]);const K=(0,t._)`${F}, ${y.object(...V)}`;return D!==t.nil?(0,t._)`${R}.call(${D}, ${K})`:(0,t._)`${R}(${K})`}ie.callValidateCode=k;const _=(0,t._)`new RegExp`;function b({gen:a,it:{opts:c}},y){const d=c.unicodeRegExp?"u":"",{regExp:m}=c.code,S=m(y,d);return a.scopeValue("pattern",{key:S.toString(),ref:S,code:(0,t._)`${m.code==="new RegExp"?_:(0,n.useFunc)(a,m)}(${y}, ${d})`})}ie.usePattern=b;function f(a){const{gen:c,data:y,keyword:d,it:m}=a,S=c.name("valid");if(m.allErrors){const R=c.let("valid",!0);return I(()=>c.assign(R,!1)),R}return c.var(S,!0),I(()=>c.break()),S;function I(R){const D=c.const("len",(0,t._)`${y}.length`);c.forRange("i",0,D,q=>{a.subschema({keyword:d,dataProp:q,dataPropType:e.Type.Num},S),c.if((0,t.not)(S),R)})}}ie.validateArray=f;function l(a){const{gen:c,schema:y,keyword:d,it:m}=a;if(!Array.isArray(y))throw new Error("ajv implementation error");if(y.some(D=>(0,e.alwaysValidSchema)(m,D))&&!m.opts.unevaluated)return;const I=c.let("valid",!1),R=c.name("_valid");c.block(()=>y.forEach((D,q)=>{const F=a.subschema({keyword:d,schemaProp:q,compositeRule:!0},R);c.assign(I,(0,t._)`${I} || ${R}`),a.mergeValidEvaluated(F,R)||c.if((0,t.not)(I))})),a.result(I,()=>a.reset(),()=>a.error(!0))}return ie.validateUnion=l,ie}var rn;function no(){if(rn)return Se;rn=1,Object.defineProperty(Se,"__esModule",{value:!0}),Se.validateKeywordUsage=Se.validSchemaType=Se.funcKeywordCode=Se.macroKeywordCode=void 0;const t=Y(),e=Le(),s=Ee(),n=es();function r(v,k){const{gen:_,keyword:b,schema:f,parentSchema:l,it:a}=v,c=k.macro.call(a.self,f,l,a),y=w(_,b,c);a.opts.validateSchema!==!1&&a.self.validateSchema(c,!0);const d=_.name("valid");v.subschema({schema:c,schemaPath:t.nil,errSchemaPath:`${a.errSchemaPath}/${b}`,topSchemaRef:y,compositeRule:!0},d),v.pass(d,()=>v.error(!0))}Se.macroKeywordCode=r;function i(v,k){var _;const{gen:b,keyword:f,schema:l,parentSchema:a,$data:c,it:y}=v;p(y,k);const d=!c&&k.compile?k.compile.call(y.self,l,a,y):k.validate,m=w(b,f,d),S=b.let("valid");v.block$data(S,I),v.ok((_=k.valid)!==null&&_!==void 0?_:S);function I(){if(k.errors===!1)q(),k.modifying&&o(v),F(()=>v.error());else{const V=k.async?R():D();k.modifying&&o(v),F(()=>h(v,V))}}function R(){const V=b.let("ruleErrs",null);return b.try(()=>q((0,t._)`await `),K=>b.assign(S,!1).if((0,t._)`${K} instanceof ${y.ValidationError}`,()=>b.assign(V,(0,t._)`${K}.errors`),()=>b.throw(K))),V}function D(){const V=(0,t._)`${m}.errors`;return b.assign(V,null),q(t.nil),V}function q(V=k.async?(0,t._)`await `:t.nil){const K=y.opts.passContext?e.default.this:e.default.self,ee=!("compile"in k&&!c||k.schema===!1);b.assign(S,(0,t._)`${V}${(0,s.callValidateCode)(v,m,K,ee)}`,k.modifying)}function F(V){var K;b.if((0,t.not)((K=k.valid)!==null&&K!==void 0?K:S),V)}}Se.funcKeywordCode=i;function o(v){const{gen:k,data:_,it:b}=v;k.if(b.parentData,()=>k.assign(_,(0,t._)`${b.parentData}[${b.parentDataProperty}]`))}function h(v,k){const{gen:_}=v;_.if((0,t._)`Array.isArray(${k})`,()=>{_.assign(e.default.vErrors,(0,t._)`${e.default.vErrors} === null ? ${k} : ${e.default.vErrors}.concat(${k})`).assign(e.default.errors,(0,t._)`${e.default.vErrors}.length`),(0,n.extendErrors)(v)},()=>v.error())}function p({schemaEnv:v},k){if(k.async&&!v.$async)throw new Error("async keyword in sync schema")}function w(v,k,_){if(_===void 0)throw new Error(`keyword "${k}" failed to compile`);return v.scopeValue("keyword",typeof _=="function"?{ref:_}:{ref:_,code:(0,t.stringify)(_)})}function u(v,k,_=!1){return!k.length||k.some(b=>b==="array"?Array.isArray(v):b==="object"?v&&typeof v=="object"&&!Array.isArray(v):typeof v==b||_&&typeof v>"u")}Se.validSchemaType=u;function $({schema:v,opts:k,self:_,errSchemaPath:b},f,l){if(Array.isArray(f.keyword)?!f.keyword.includes(l):f.keyword!==l)throw new Error("ajv implementation error");const a=f.dependencies;if(a?.some(c=>!Object.prototype.hasOwnProperty.call(v,c)))throw new Error(`parent schema must have dependencies of ${l}: ${a.join(",")}`);if(f.validateSchema&&!f.validateSchema(v[l])){const y=`keyword "${l}" value is invalid at path "${b}": `+_.errorsText(f.validateSchema.errors);if(k.validateSchema==="log")_.logger.error(y);else throw new Error(y)}}return Se.validateKeywordUsage=$,Se}var Re={},on;function io(){if(on)return Re;on=1,Object.defineProperty(Re,"__esModule",{value:!0}),Re.extendSubschemaMode=Re.extendSubschemaData=Re.getSubschema=void 0;const t=Y(),e=se();function s(i,{keyword:o,schemaProp:h,schema:p,schemaPath:w,errSchemaPath:u,topSchemaRef:$}){if(o!==void 0&&p!==void 0)throw new Error('both "keyword" and "schema" passed, only one allowed');if(o!==void 0){const v=i.schema[o];return h===void 0?{schema:v,schemaPath:(0,t._)`${i.schemaPath}${(0,t.getProperty)(o)}`,errSchemaPath:`${i.errSchemaPath}/${o}`}:{schema:v[h],schemaPath:(0,t._)`${i.schemaPath}${(0,t.getProperty)(o)}${(0,t.getProperty)(h)}`,errSchemaPath:`${i.errSchemaPath}/${o}/${(0,e.escapeFragment)(h)}`}}if(p!==void 0){if(w===void 0||u===void 0||$===void 0)throw new Error('"schemaPath", "errSchemaPath" and "topSchemaRef" are required with "schema"');return{schema:p,schemaPath:w,topSchemaRef:$,errSchemaPath:u}}throw new Error('either "keyword" or "schema" must be passed')}Re.getSubschema=s;function n(i,o,{dataProp:h,dataPropType:p,data:w,dataTypes:u,propertyName:$}){if(w!==void 0&&h!==void 0)throw new Error('both "data" and "dataProp" passed, only one allowed');const{gen:v}=o;if(h!==void 0){const{errorPath:_,dataPathArr:b,opts:f}=o,l=v.let("data",(0,t._)`${o.data}${(0,t.getProperty)(h)}`,!0);k(l),i.errorPath=(0,t.str)`${_}${(0,e.getErrorPath)(h,p,f.jsPropertySyntax)}`,i.parentDataProperty=(0,t._)`${h}`,i.dataPathArr=[...b,i.parentDataProperty]}if(w!==void 0){const _=w instanceof t.Name?w:v.let("data",w,!0);k(_),$!==void 0&&(i.propertyName=$)}u&&(i.dataTypes=u);function k(_){i.data=_,i.dataLevel=o.dataLevel+1,i.dataTypes=[],o.definedProperties=new Set,i.parentData=o.data,i.dataNames=[...o.dataNames,_]}}Re.extendSubschemaData=n;function r(i,{jtdDiscriminator:o,jtdMetadata:h,compositeRule:p,createErrors:w,allErrors:u}){p!==void 0&&(i.compositeRule=p),w!==void 0&&(i.createErrors=w),u!==void 0&&(i.allErrors=u),i.jtdDiscriminator=o,i.jtdMetadata=h}return Re.extendSubschemaMode=r,Re}var fe={},ys,an;function Bi(){return an||(an=1,ys=function t(e,s){if(e===s)return!0;if(e&&s&&typeof e=="object"&&typeof s=="object"){if(e.constructor!==s.constructor)return!1;var n,r,i;if(Array.isArray(e)){if(n=e.length,n!=s.length)return!1;for(r=n;r--!==0;)if(!t(e[r],s[r]))return!1;return!0}if(e.constructor===RegExp)return e.source===s.source&&e.flags===s.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===s.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===s.toString();if(i=Object.keys(e),n=i.length,n!==Object.keys(s).length)return!1;for(r=n;r--!==0;)if(!Object.prototype.hasOwnProperty.call(s,i[r]))return!1;for(r=n;r--!==0;){var o=i[r];if(!t(e[o],s[o]))return!1}return!0}return e!==e&&s!==s}),ys}var gs={exports:{}},ln;function ro(){if(ln)return gs.exports;ln=1;var t=gs.exports=function(n,r,i){typeof r=="function"&&(i=r,r={}),i=r.cb||i;var o=typeof i=="function"?i:i.pre||function(){},h=i.post||function(){};e(r,o,h,n,"",n)};t.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0,if:!0,then:!0,else:!0},t.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0},t.propsKeywords={$defs:!0,definitions:!0,properties:!0,patternProperties:!0,dependencies:!0},t.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0};function e(n,r,i,o,h,p,w,u,$,v){if(o&&typeof o=="object"&&!Array.isArray(o)){r(o,h,p,w,u,$,v);for(var k in o){var _=o[k];if(Array.isArray(_)){if(k in t.arrayKeywords)for(var b=0;b<_.length;b++)e(n,r,i,_[b],h+"/"+k+"/"+b,p,h,k,o,b)}else if(k in t.propsKeywords){if(_&&typeof _=="object")for(var f in _)e(n,r,i,_[f],h+"/"+k+"/"+s(f),p,h,k,o,f)}else(k in t.keywords||n.allKeys&&!(k in t.skipKeywords))&&e(n,r,i,_,h+"/"+k,p,h,k,o)}i(o,h,p,w,u,$,v)}}function s(n){return n.replace(/~/g,"~0").replace(/\//g,"~1")}return gs.exports}var cn;function ts(){if(cn)return fe;cn=1,Object.defineProperty(fe,"__esModule",{value:!0}),fe.getSchemaRefs=fe.resolveUrl=fe.normalizeId=fe._getFullPath=fe.getFullPath=fe.inlineRef=void 0;const t=se(),e=Bi(),s=ro(),n=new Set(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum","const"]);function r(b,f=!0){return typeof b=="boolean"?!0:f===!0?!o(b):f?h(b)<=f:!1}fe.inlineRef=r;const i=new Set(["$ref","$recursiveRef","$recursiveAnchor","$dynamicRef","$dynamicAnchor"]);function o(b){for(const f in b){if(i.has(f))return!0;const l=b[f];if(Array.isArray(l)&&l.some(o)||typeof l=="object"&&o(l))return!0}return!1}function h(b){let f=0;for(const l in b){if(l==="$ref")return 1/0;if(f++,!n.has(l)&&(typeof b[l]=="object"&&(0,t.eachItem)(b[l],a=>f+=h(a)),f===1/0))return 1/0}return f}function p(b,f="",l){l!==!1&&(f=$(f));const a=b.parse(f);return w(b,a)}fe.getFullPath=p;function w(b,f){return b.serialize(f).split("#")[0]+"#"}fe._getFullPath=w;const u=/#\/?$/;function $(b){return b?b.replace(u,""):""}fe.normalizeId=$;function v(b,f,l){return l=$(l),b.resolve(f,l)}fe.resolveUrl=v;const k=/^[a-z_][-a-z0-9._]*$/i;function _(b,f){if(typeof b=="boolean")return{};const{schemaId:l,uriResolver:a}=this.opts,c=$(b[l]||f),y={"":c},d=p(a,c,!1),m={},S=new Set;return s(b,{allKeys:!0},(D,q,F,V)=>{if(V===void 0)return;const K=d+q;let ee=y[V];typeof D[l]=="string"&&(ee=re.call(this,D[l])),te.call(this,D.$anchor),te.call(this,D.$dynamicAnchor),y[q]=ee;function re(B){const oe=this.opts.uriResolver.resolve;if(B=$(ee?oe(ee,B):B),S.has(B))throw R(B);S.add(B);let A=this.refs[B];return typeof A=="string"&&(A=this.refs[A]),typeof A=="object"?I(D,A.schema,B):B!==$(K)&&(B[0]==="#"?(I(D,m[B],B),m[B]=D):this.refs[B]=K),B}function te(B){if(typeof B=="string"){if(!k.test(B))throw new Error(`invalid anchor "${B}"`);re.call(this,`#${B}`)}}}),m;function I(D,q,F){if(q!==void 0&&!e(D,q))throw R(F)}function R(D){return new Error(`reference "${D}" resolves to more than one schema`)}}return fe.getSchemaRefs=_,fe}var dn;function ss(){if(dn)return Ne;dn=1,Object.defineProperty(Ne,"__esModule",{value:!0}),Ne.getData=Ne.KeywordCxt=Ne.validateFunctionCode=void 0;const t=to(),e=Xt(),s=Ki(),n=Xt(),r=so(),i=no(),o=io(),h=Y(),p=Le(),w=ts(),u=se(),$=es();function v(E){if(d(E)&&(S(E),y(E))){f(E);return}k(E,()=>(0,t.topBoolOrEmptySchema)(E))}Ne.validateFunctionCode=v;function k({gen:E,validateName:N,schema:M,schemaEnv:L,opts:Z},X){Z.code.es5?E.func(N,(0,h._)`${p.default.data}, ${p.default.valCxt}`,L.$async,()=>{E.code((0,h._)`"use strict"; ${a(M,Z)}`),b(E,Z),E.code(X)}):E.func(N,(0,h._)`${p.default.data}, ${_(Z)}`,L.$async,()=>E.code(a(M,Z)).code(X))}function _(E){return(0,h._)`{${p.default.instancePath}="", ${p.default.parentData}, ${p.default.parentDataProperty}, ${p.default.rootData}=${p.default.data}${E.dynamicRef?(0,h._)`, ${p.default.dynamicAnchors}={}`:h.nil}}={}`}function b(E,N){E.if(p.default.valCxt,()=>{E.var(p.default.instancePath,(0,h._)`${p.default.valCxt}.${p.default.instancePath}`),E.var(p.default.parentData,(0,h._)`${p.default.valCxt}.${p.default.parentData}`),E.var(p.default.parentDataProperty,(0,h._)`${p.default.valCxt}.${p.default.parentDataProperty}`),E.var(p.default.rootData,(0,h._)`${p.default.valCxt}.${p.default.rootData}`),N.dynamicRef&&E.var(p.default.dynamicAnchors,(0,h._)`${p.default.valCxt}.${p.default.dynamicAnchors}`)},()=>{E.var(p.default.instancePath,(0,h._)`""`),E.var(p.default.parentData,(0,h._)`undefined`),E.var(p.default.parentDataProperty,(0,h._)`undefined`),E.var(p.default.rootData,p.default.data),N.dynamicRef&&E.var(p.default.dynamicAnchors,(0,h._)`{}`)})}function f(E){const{schema:N,opts:M,gen:L}=E;k(E,()=>{M.$comment&&N.$comment&&V(E),D(E),L.let(p.default.vErrors,null),L.let(p.default.errors,0),M.unevaluated&&l(E),I(E),K(E)})}function l(E){const{gen:N,validateName:M}=E;E.evaluated=N.const("evaluated",(0,h._)`${M}.evaluated`),N.if((0,h._)`${E.evaluated}.dynamicProps`,()=>N.assign((0,h._)`${E.evaluated}.props`,(0,h._)`undefined`)),N.if((0,h._)`${E.evaluated}.dynamicItems`,()=>N.assign((0,h._)`${E.evaluated}.items`,(0,h._)`undefined`))}function a(E,N){const M=typeof E=="object"&&E[N.schemaId];return M&&(N.code.source||N.code.process)?(0,h._)`/*# sourceURL=${M} */`:h.nil}function c(E,N){if(d(E)&&(S(E),y(E))){m(E,N);return}(0,t.boolOrEmptySchema)(E,N)}function y({schema:E,self:N}){if(typeof E=="boolean")return!E;for(const M in E)if(N.RULES.all[M])return!0;return!1}function d(E){return typeof E.schema!="boolean"}function m(E,N){const{schema:M,gen:L,opts:Z}=E;Z.$comment&&M.$comment&&V(E),q(E),F(E);const X=L.const("_errs",p.default.errors);I(E,X),L.var(N,(0,h._)`${X} === ${p.default.errors}`)}function S(E){(0,u.checkUnknownRules)(E),R(E)}function I(E,N){if(E.opts.jtd)return re(E,[],!1,N);const M=(0,e.getSchemaTypes)(E.schema),L=(0,e.coerceAndCheckDataType)(E,M);re(E,M,!L,N)}function R(E){const{schema:N,errSchemaPath:M,opts:L,self:Z}=E;N.$ref&&L.ignoreKeywordsWithRef&&(0,u.schemaHasRulesButRef)(N,Z.RULES)&&Z.logger.warn(`$ref: keywords ignored in schema at path "${M}"`)}function D(E){const{schema:N,opts:M}=E;N.default!==void 0&&M.useDefaults&&M.strictSchema&&(0,u.checkStrictMode)(E,"default is ignored in the schema root")}function q(E){const N=E.schema[E.opts.schemaId];N&&(E.baseId=(0,w.resolveUrl)(E.opts.uriResolver,E.baseId,N))}function F(E){if(E.schema.$async&&!E.schemaEnv.$async)throw new Error("async schema in sync schema")}function V({gen:E,schemaEnv:N,schema:M,errSchemaPath:L,opts:Z}){const X=M.$comment;if(Z.$comment===!0)E.code((0,h._)`${p.default.self}.logger.log(${X})`);else if(typeof Z.$comment=="function"){const ce=(0,h.str)`${L}/$comment`,be=E.scopeValue("root",{ref:N.root});E.code((0,h._)`${p.default.self}.opts.$comment(${X}, ${ce}, ${be}.schema)`)}}function K(E){const{gen:N,schemaEnv:M,validateName:L,ValidationError:Z,opts:X}=E;M.$async?N.if((0,h._)`${p.default.errors} === 0`,()=>N.return(p.default.data),()=>N.throw((0,h._)`new ${Z}(${p.default.vErrors})`)):(N.assign((0,h._)`${L}.errors`,p.default.vErrors),X.unevaluated&&ee(E),N.return((0,h._)`${p.default.errors} === 0`))}function ee({gen:E,evaluated:N,props:M,items:L}){M instanceof h.Name&&E.assign((0,h._)`${N}.props`,M),L instanceof h.Name&&E.assign((0,h._)`${N}.items`,L)}function re(E,N,M,L){const{gen:Z,schema:X,data:ce,allErrors:be,opts:ye,self:ge}=E,{RULES:de}=ge;if(X.$ref&&(ye.ignoreKeywordsWithRef||!(0,u.schemaHasRulesButRef)(X,de))){Z.block(()=>H(E,"$ref",de.all.$ref.definition));return}ye.jtd||B(E,N),Z.block(()=>{for(const ke of de.rules)Ge(ke);Ge(de.post)});function Ge(ke){(0,s.shouldUseGroup)(X,ke)&&(ke.type?(Z.if((0,n.checkDataType)(ke.type,ce,ye.strictNumbers)),te(E,ke),N.length===1&&N[0]===ke.type&&M&&(Z.else(),(0,n.reportTypeError)(E)),Z.endIf()):te(E,ke),be||Z.if((0,h._)`${p.default.errors} === ${L||0}`))}}function te(E,N){const{gen:M,schema:L,opts:{useDefaults:Z}}=E;Z&&(0,r.assignDefaults)(E,N.type),M.block(()=>{for(const X of N.rules)(0,s.shouldUseRule)(L,X)&&H(E,X.keyword,X.definition,N.type)})}function B(E,N){E.schemaEnv.meta||!E.opts.strictTypes||(oe(E,N),E.opts.allowUnionTypes||A(E,N),O(E,E.dataTypes))}function oe(E,N){if(N.length){if(!E.dataTypes.length){E.dataTypes=N;return}N.forEach(M=>{T(E.dataTypes,M)||P(E,`type "${M}" not allowed by context "${E.dataTypes.join(",")}"`)}),g(E,N)}}function A(E,N){N.length>1&&!(N.length===2&&N.includes("null"))&&P(E,"use allowUnionTypes to allow union type keyword")}function O(E,N){const M=E.self.RULES.all;for(const L in M){const Z=M[L];if(typeof Z=="object"&&(0,s.shouldUseRule)(E.schema,Z)){const{type:X}=Z.definition;X.length&&!X.some(ce=>j(N,ce))&&P(E,`missing type "${X.join(",")}" for keyword "${L}"`)}}}function j(E,N){return E.includes(N)||N==="number"&&E.includes("integer")}function T(E,N){return E.includes(N)||N==="integer"&&E.includes("number")}function g(E,N){const M=[];for(const L of E.dataTypes)T(N,L)?M.push(L):N.includes("integer")&&L==="number"&&M.push("integer");E.dataTypes=M}function P(E,N){const M=E.schemaEnv.baseId+E.errSchemaPath;N+=` at "${M}" (strictTypes)`,(0,u.checkStrictMode)(E,N,E.opts.strictTypes)}class x{constructor(N,M,L){if((0,i.validateKeywordUsage)(N,M,L),this.gen=N.gen,this.allErrors=N.allErrors,this.keyword=L,this.data=N.data,this.schema=N.schema[L],this.$data=M.$data&&N.opts.$data&&this.schema&&this.schema.$data,this.schemaValue=(0,u.schemaRefOrVal)(N,this.schema,L,this.$data),this.schemaType=M.schemaType,this.parentSchema=N.schema,this.params={},this.it=N,this.def=M,this.$data)this.schemaCode=N.gen.const("vSchema",W(this.$data,N));else if(this.schemaCode=this.schemaValue,!(0,i.validSchemaType)(this.schema,M.schemaType,M.allowUndefined))throw new Error(`${L} value must be ${JSON.stringify(M.schemaType)}`);("code"in M?M.trackErrors:M.errors!==!1)&&(this.errsCount=N.gen.const("_errs",p.default.errors))}result(N,M,L){this.failResult((0,h.not)(N),M,L)}failResult(N,M,L){this.gen.if(N),L?L():this.error(),M?(this.gen.else(),M(),this.allErrors&&this.gen.endIf()):this.allErrors?this.gen.endIf():this.gen.else()}pass(N,M){this.failResult((0,h.not)(N),void 0,M)}fail(N){if(N===void 0){this.error(),this.allErrors||this.gen.if(!1);return}this.gen.if(N),this.error(),this.allErrors?this.gen.endIf():this.gen.else()}fail$data(N){if(!this.$data)return this.fail(N);const{schemaCode:M}=this;this.fail((0,h._)`${M} !== undefined && (${(0,h.or)(this.invalid$data(),N)})`)}error(N,M,L){if(M){this.setParams(M),this._error(N,L),this.setParams({});return}this._error(N,L)}_error(N,M){(N?$.reportExtraError:$.reportError)(this,this.def.error,M)}$dataError(){(0,$.reportError)(this,this.def.$dataError||$.keyword$DataError)}reset(){if(this.errsCount===void 0)throw new Error('add "trackErrors" to keyword definition');(0,$.resetErrorsCount)(this.gen,this.errsCount)}ok(N){this.allErrors||this.gen.if(N)}setParams(N,M){M?Object.assign(this.params,N):this.params=N}block$data(N,M,L=h.nil){this.gen.block(()=>{this.check$data(N,L),M()})}check$data(N=h.nil,M=h.nil){if(!this.$data)return;const{gen:L,schemaCode:Z,schemaType:X,def:ce}=this;L.if((0,h.or)((0,h._)`${Z} === undefined`,M)),N!==h.nil&&L.assign(N,!0),(X.length||ce.validateSchema)&&(L.elseIf(this.invalid$data()),this.$dataError(),N!==h.nil&&L.assign(N,!1)),L.else()}invalid$data(){const{gen:N,schemaCode:M,schemaType:L,def:Z,it:X}=this;return(0,h.or)(ce(),be());function ce(){if(L.length){if(!(M instanceof h.Name))throw new Error("ajv implementation error");const ye=Array.isArray(L)?L:[L];return(0,h._)`${(0,n.checkDataTypes)(ye,M,X.opts.strictNumbers,n.DataType.Wrong)}`}return h.nil}function be(){if(Z.validateSchema){const ye=N.scopeValue("validate$data",{ref:Z.validateSchema});return(0,h._)`!${ye}(${M})`}return h.nil}}subschema(N,M){const L=(0,o.getSubschema)(this.it,N);(0,o.extendSubschemaData)(L,this.it,N),(0,o.extendSubschemaMode)(L,N);const Z={...this.it,...L,items:void 0,props:void 0};return c(Z,M),Z}mergeEvaluated(N,M){const{it:L,gen:Z}=this;L.opts.unevaluated&&(L.props!==!0&&N.props!==void 0&&(L.props=u.mergeEvaluated.props(Z,N.props,L.props,M)),L.items!==!0&&N.items!==void 0&&(L.items=u.mergeEvaluated.items(Z,N.items,L.items,M)))}mergeValidEvaluated(N,M){const{it:L,gen:Z}=this;if(L.opts.unevaluated&&(L.props!==!0||L.items!==!0))return Z.if(M,()=>this.mergeEvaluated(N,h.Name)),!0}}Ne.KeywordCxt=x;function H(E,N,M,L){const Z=new x(E,M,N);"code"in M?M.code(Z,L):Z.$data&&M.validate?(0,i.funcKeywordCode)(Z,M):"macro"in M?(0,i.macroKeywordCode)(Z,M):(M.compile||M.validate)&&(0,i.funcKeywordCode)(Z,M)}const G=/^\/(?:[^~]|~0|~1)*$/,Q=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function W(E,{dataLevel:N,dataNames:M,dataPathArr:L}){let Z,X;if(E==="")return p.default.rootData;if(E[0]==="/"){if(!G.test(E))throw new Error(`Invalid JSON-pointer: ${E}`);Z=E,X=p.default.rootData}else{const ge=Q.exec(E);if(!ge)throw new Error(`Invalid JSON-pointer: ${E}`);const de=+ge[1];if(Z=ge[2],Z==="#"){if(de>=N)throw new Error(ye("property/index",de));return L[N-de]}if(de>N)throw new Error(ye("data",de));if(X=M[N-de],!Z)return X}let ce=X;const be=Z.split("/");for(const ge of be)ge&&(X=(0,h._)`${X}${(0,h.getProperty)((0,u.unescapeJsonPointer)(ge))}`,ce=(0,h._)`${ce} && ${X}`);return ce;function ye(ge,de){return`Cannot access ${ge} ${de} levels up, current level is ${N}`}}return Ne.getData=W,Ne}var ft={},hn;function Rs(){if(hn)return ft;hn=1,Object.defineProperty(ft,"__esModule",{value:!0});class t extends Error{constructor(s){super("validation failed"),this.errors=s,this.ajv=this.validation=!0}}return ft.default=t,ft}var pt={},un;function ns(){if(un)return pt;un=1,Object.defineProperty(pt,"__esModule",{value:!0});const t=ts();class e extends Error{constructor(n,r,i,o){super(o||`can't resolve reference ${i} from id ${r}`),this.missingRef=(0,t.resolveUrl)(n,r,i),this.missingSchema=(0,t.normalizeId)((0,t.getFullPath)(n,this.missingRef))}}return pt.default=e,pt}var ve={},fn;function xs(){if(fn)return ve;fn=1,Object.defineProperty(ve,"__esModule",{value:!0}),ve.resolveSchema=ve.getCompilingSchema=ve.resolveRef=ve.compileSchema=ve.SchemaEnv=void 0;const t=Y(),e=Rs(),s=Le(),n=ts(),r=se(),i=ss();class o{constructor(l){var a;this.refs={},this.dynamicAnchors={};let c;typeof l.schema=="object"&&(c=l.schema),this.schema=l.schema,this.schemaId=l.schemaId,this.root=l.root||this,this.baseId=(a=l.baseId)!==null&&a!==void 0?a:(0,n.normalizeId)(c?.[l.schemaId||"$id"]),this.schemaPath=l.schemaPath,this.localRefs=l.localRefs,this.meta=l.meta,this.$async=c?.$async,this.refs={}}}ve.SchemaEnv=o;function h(f){const l=u.call(this,f);if(l)return l;const a=(0,n.getFullPath)(this.opts.uriResolver,f.root.baseId),{es5:c,lines:y}=this.opts.code,{ownProperties:d}=this.opts,m=new t.CodeGen(this.scope,{es5:c,lines:y,ownProperties:d});let S;f.$async&&(S=m.scopeValue("Error",{ref:e.default,code:(0,t._)`require("ajv/dist/runtime/validation_error").default`}));const I=m.scopeName("validate");f.validateName=I;const R={gen:m,allErrors:this.opts.allErrors,data:s.default.data,parentData:s.default.parentData,parentDataProperty:s.default.parentDataProperty,dataNames:[s.default.data],dataPathArr:[t.nil],dataLevel:0,dataTypes:[],definedProperties:new Set,topSchemaRef:m.scopeValue("schema",this.opts.code.source===!0?{ref:f.schema,code:(0,t.stringify)(f.schema)}:{ref:f.schema}),validateName:I,ValidationError:S,schema:f.schema,schemaEnv:f,rootId:a,baseId:f.baseId||a,schemaPath:t.nil,errSchemaPath:f.schemaPath||(this.opts.jtd?"":"#"),errorPath:(0,t._)`""`,opts:this.opts,self:this};let D;try{this._compilations.add(f),(0,i.validateFunctionCode)(R),m.optimize(this.opts.code.optimize);const q=m.toString();D=`${m.scopeRefs(s.default.scope)}return ${q}`,this.opts.code.process&&(D=this.opts.code.process(D,f));const V=new Function(`${s.default.self}`,`${s.default.scope}`,D)(this,this.scope.get());if(this.scope.value(I,{ref:V}),V.errors=null,V.schema=f.schema,V.schemaEnv=f,f.$async&&(V.$async=!0),this.opts.code.source===!0&&(V.source={validateName:I,validateCode:q,scopeValues:m._values}),this.opts.unevaluated){const{props:K,items:ee}=R;V.evaluated={props:K instanceof t.Name?void 0:K,items:ee instanceof t.Name?void 0:ee,dynamicProps:K instanceof t.Name,dynamicItems:ee instanceof t.Name},V.source&&(V.source.evaluated=(0,t.stringify)(V.evaluated))}return f.validate=V,f}catch(q){throw delete f.validate,delete f.validateName,D&&this.logger.error("Error compiling schema, function code:",D),q}finally{this._compilations.delete(f)}}ve.compileSchema=h;function p(f,l,a){var c;a=(0,n.resolveUrl)(this.opts.uriResolver,l,a);const y=f.refs[a];if(y)return y;let d=v.call(this,f,a);if(d===void 0){const m=(c=f.localRefs)===null||c===void 0?void 0:c[a],{schemaId:S}=this.opts;m&&(d=new o({schema:m,schemaId:S,root:f,baseId:l}))}if(d!==void 0)return f.refs[a]=w.call(this,d)}ve.resolveRef=p;function w(f){return(0,n.inlineRef)(f.schema,this.opts.inlineRefs)?f.schema:f.validate?f:h.call(this,f)}function u(f){for(const l of this._compilations)if($(l,f))return l}ve.getCompilingSchema=u;function $(f,l){return f.schema===l.schema&&f.root===l.root&&f.baseId===l.baseId}function v(f,l){let a;for(;typeof(a=this.refs[l])=="string";)l=a;return a||this.schemas[l]||k.call(this,f,l)}function k(f,l){const a=this.opts.uriResolver.parse(l),c=(0,n._getFullPath)(this.opts.uriResolver,a);let y=(0,n.getFullPath)(this.opts.uriResolver,f.baseId,void 0);if(Object.keys(f.schema).length>0&&c===y)return b.call(this,a,f);const d=(0,n.normalizeId)(c),m=this.refs[d]||this.schemas[d];if(typeof m=="string"){const S=k.call(this,f,m);return typeof S?.schema!="object"?void 0:b.call(this,a,S)}if(typeof m?.schema=="object"){if(m.validate||h.call(this,m),d===(0,n.normalizeId)(l)){const{schema:S}=m,{schemaId:I}=this.opts,R=S[I];return R&&(y=(0,n.resolveUrl)(this.opts.uriResolver,y,R)),new o({schema:S,schemaId:I,root:f,baseId:y})}return b.call(this,a,m)}}ve.resolveSchema=k;const _=new Set(["properties","patternProperties","enum","dependencies","definitions"]);function b(f,{baseId:l,schema:a,root:c}){var y;if(((y=f.fragment)===null||y===void 0?void 0:y[0])!=="/")return;for(const S of f.fragment.slice(1).split("/")){if(typeof a=="boolean")return;const I=a[(0,r.unescapeFragment)(S)];if(I===void 0)return;a=I;const R=typeof a=="object"&&a[this.opts.schemaId];!_.has(S)&&R&&(l=(0,n.resolveUrl)(this.opts.uriResolver,l,R))}let d;if(typeof a!="boolean"&&a.$ref&&!(0,r.schemaHasRulesButRef)(a,this.RULES)){const S=(0,n.resolveUrl)(this.opts.uriResolver,l,a.$ref);d=k.call(this,c,S)}const{schemaId:m}=this.opts;if(d=d||new o({schema:a,schemaId:m,root:c,baseId:l}),d.schema!==d.root.schema)return d}return ve}const oo="https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#",ao="Meta-schema for $data reference (JSON AnySchema extension proposal)",lo="object",co=["$data"],ho={$data:{type:"string",anyOf:[{format:"relative-json-pointer"},{format:"json-pointer"}]}},uo=!1,fo={$id:oo,description:ao,type:lo,required:co,properties:ho,additionalProperties:uo};var mt={},st={exports:{}},vs,pn;function Wi(){if(pn)return vs;pn=1;const t=RegExp.prototype.test.bind(/^[\da-f]{8}-[\da-f]{4}-[\da-f]{4}-[\da-f]{4}-[\da-f]{12}$/iu),e=RegExp.prototype.test.bind(/^(?:(?:25[0-5]|2[0-4]\d|1\d{2}|[1-9]\d|\d)\.){3}(?:25[0-5]|2[0-4]\d|1\d{2}|[1-9]\d|\d)$/u);function s(v){let k="",_=0,b=0;for(b=0;b<v.length;b++)if(_=v[b].charCodeAt(0),_!==48){if(!(_>=48&&_<=57||_>=65&&_<=70||_>=97&&_<=102))return"";k+=v[b];break}for(b+=1;b<v.length;b++){if(_=v[b].charCodeAt(0),!(_>=48&&_<=57||_>=65&&_<=70||_>=97&&_<=102))return"";k+=v[b]}return k}const n=RegExp.prototype.test.bind(/[^!"$&'()*+,\-.;=_`a-z{}~]/u);function r(v){return v.length=0,!0}function i(v,k,_){if(v.length){const b=s(v);if(b!=="")k.push(b);else return _.error=!0,!1;v.length=0}return!0}function o(v){let k=0;const _={error:!1,address:"",zone:""},b=[],f=[];let l=!1,a=!1,c=i;for(let y=0;y<v.length;y++){const d=v[y];if(!(d==="["||d==="]"))if(d===":"){if(l===!0&&(a=!0),!c(f,b,_))break;if(++k>7){_.error=!0;break}y>0&&v[y-1]===":"&&(l=!0),b.push(":");continue}else if(d==="%"){if(!c(f,b,_))break;c=r}else{f.push(d);continue}}return f.length&&(c===r?_.zone=f.join(""):a?b.push(f.join("")):b.push(s(f))),_.address=b.join(""),_}function h(v){if(p(v,":")<2)return{host:v,isIPV6:!1};const k=o(v);if(k.error)return{host:v,isIPV6:!1};{let _=k.address,b=k.address;return k.zone&&(_+="%"+k.zone,b+="%25"+k.zone),{host:_,isIPV6:!0,escapedHost:b}}}function p(v,k){let _=0;for(let b=0;b<v.length;b++)v[b]===k&&_++;return _}function w(v){let k=v;const _=[];let b=-1,f=0;for(;f=k.length;){if(f===1){if(k===".")break;if(k==="/"){_.push("/");break}else{_.push(k);break}}else if(f===2){if(k[0]==="."){if(k[1]===".")break;if(k[1]==="/"){k=k.slice(2);continue}}else if(k[0]==="/"&&(k[1]==="."||k[1]==="/")){_.push("/");break}}else if(f===3&&k==="/.."){_.length!==0&&_.pop(),_.push("/");break}if(k[0]==="."){if(k[1]==="."){if(k[2]==="/"){k=k.slice(3);continue}}else if(k[1]==="/"){k=k.slice(2);continue}}else if(k[0]==="/"&&k[1]==="."){if(k[2]==="/"){k=k.slice(2);continue}else if(k[2]==="."&&k[3]==="/"){k=k.slice(3),_.length!==0&&_.pop();continue}}if((b=k.indexOf("/",1))===-1){_.push(k);break}else _.push(k.slice(0,b)),k=k.slice(b)}return _.join("")}function u(v,k){const _=k!==!0?escape:unescape;return v.scheme!==void 0&&(v.scheme=_(v.scheme)),v.userinfo!==void 0&&(v.userinfo=_(v.userinfo)),v.host!==void 0&&(v.host=_(v.host)),v.path!==void 0&&(v.path=_(v.path)),v.query!==void 0&&(v.query=_(v.query)),v.fragment!==void 0&&(v.fragment=_(v.fragment)),v}function $(v){const k=[];if(v.userinfo!==void 0&&(k.push(v.userinfo),k.push("@")),v.host!==void 0){let _=unescape(v.host);if(!e(_)){const b=h(_);b.isIPV6===!0?_=`[${b.escapedHost}]`:_=v.host}k.push(_)}return(typeof v.port=="number"||typeof v.port=="string")&&(k.push(":"),k.push(String(v.port))),k.length?k.join(""):void 0}return vs={nonSimpleDomain:n,recomposeAuthority:$,normalizeComponentEncoding:u,removeDotSegments:w,isIPv4:e,isUUID:t,normalizeIPv6:h,stringArrayToHexStripped:s},vs}var ws,mn;function po(){if(mn)return ws;mn=1;const{isUUID:t}=Wi(),e=/([\da-z][\d\-a-z]{0,31}):((?:[\w!$'()*+,\-.:;=@]|%[\da-f]{2})+)/iu,s=["http","https","ws","wss","urn","urn:uuid"];function n(d){return s.indexOf(d)!==-1}function r(d){return d.secure===!0?!0:d.secure===!1?!1:d.scheme?d.scheme.length===3&&(d.scheme[0]==="w"||d.scheme[0]==="W")&&(d.scheme[1]==="s"||d.scheme[1]==="S")&&(d.scheme[2]==="s"||d.scheme[2]==="S"):!1}function i(d){return d.host||(d.error=d.error||"HTTP URIs must have a host."),d}function o(d){const m=String(d.scheme).toLowerCase()==="https";return(d.port===(m?443:80)||d.port==="")&&(d.port=void 0),d.path||(d.path="/"),d}function h(d){return d.secure=r(d),d.resourceName=(d.path||"/")+(d.query?"?"+d.query:""),d.path=void 0,d.query=void 0,d}function p(d){if((d.port===(r(d)?443:80)||d.port==="")&&(d.port=void 0),typeof d.secure=="boolean"&&(d.scheme=d.secure?"wss":"ws",d.secure=void 0),d.resourceName){const[m,S]=d.resourceName.split("?");d.path=m&&m!=="/"?m:void 0,d.query=S,d.resourceName=void 0}return d.fragment=void 0,d}function w(d,m){if(!d.path)return d.error="URN can not be parsed",d;const S=d.path.match(e);if(S){const I=m.scheme||d.scheme||"urn";d.nid=S[1].toLowerCase(),d.nss=S[2];const R=`${I}:${m.nid||d.nid}`,D=y(R);d.path=void 0,D&&(d=D.parse(d,m))}else d.error=d.error||"URN can not be parsed.";return d}function u(d,m){if(d.nid===void 0)throw new Error("URN without nid cannot be serialized");const S=m.scheme||d.scheme||"urn",I=d.nid.toLowerCase(),R=`${S}:${m.nid||I}`,D=y(R);D&&(d=D.serialize(d,m));const q=d,F=d.nss;return q.path=`${I||m.nid}:${F}`,m.skipEscape=!0,q}function $(d,m){const S=d;return S.uuid=S.nss,S.nss=void 0,!m.tolerant&&(!S.uuid||!t(S.uuid))&&(S.error=S.error||"UUID is not valid."),S}function v(d){const m=d;return m.nss=(d.uuid||"").toLowerCase(),m}const k={scheme:"http",domainHost:!0,parse:i,serialize:o},_={scheme:"https",domainHost:k.domainHost,parse:i,serialize:o},b={scheme:"ws",domainHost:!0,parse:h,serialize:p},f={scheme:"wss",domainHost:b.domainHost,parse:b.parse,serialize:b.serialize},c={http:k,https:_,ws:b,wss:f,urn:{scheme:"urn",parse:w,serialize:u,skipNormalize:!0},"urn:uuid":{scheme:"urn:uuid",parse:$,serialize:v,skipNormalize:!0}};Object.setPrototypeOf(c,null);function y(d){return d&&(c[d]||c[d.toLowerCase()])||void 0}return ws={wsIsSecure:r,SCHEMES:c,isValidSchemeName:n,getSchemeHandler:y},ws}var yn;function mo(){if(yn)return st.exports;yn=1;const{normalizeIPv6:t,removeDotSegments:e,recomposeAuthority:s,normalizeComponentEncoding:n,isIPv4:r,nonSimpleDomain:i}=Wi(),{SCHEMES:o,getSchemeHandler:h}=po();function p(f,l){return typeof f=="string"?f=v(_(f,l),l):typeof f=="object"&&(f=_(v(f,l),l)),f}function w(f,l,a){const c=a?Object.assign({scheme:"null"},a):{scheme:"null"},y=u(_(f,c),_(l,c),c,!0);return c.skipEscape=!0,v(y,c)}function u(f,l,a,c){const y={};return c||(f=_(v(f,a),a),l=_(v(l,a),a)),a=a||{},!a.tolerant&&l.scheme?(y.scheme=l.scheme,y.userinfo=l.userinfo,y.host=l.host,y.port=l.port,y.path=e(l.path||""),y.query=l.query):(l.userinfo!==void 0||l.host!==void 0||l.port!==void 0?(y.userinfo=l.userinfo,y.host=l.host,y.port=l.port,y.path=e(l.path||""),y.query=l.query):(l.path?(l.path[0]==="/"?y.path=e(l.path):((f.userinfo!==void 0||f.host!==void 0||f.port!==void 0)&&!f.path?y.path="/"+l.path:f.path?y.path=f.path.slice(0,f.path.lastIndexOf("/")+1)+l.path:y.path=l.path,y.path=e(y.path)),y.query=l.query):(y.path=f.path,l.query!==void 0?y.query=l.query:y.query=f.query),y.userinfo=f.userinfo,y.host=f.host,y.port=f.port),y.scheme=f.scheme),y.fragment=l.fragment,y}function $(f,l,a){return typeof f=="string"?(f=unescape(f),f=v(n(_(f,a),!0),{...a,skipEscape:!0})):typeof f=="object"&&(f=v(n(f,!0),{...a,skipEscape:!0})),typeof l=="string"?(l=unescape(l),l=v(n(_(l,a),!0),{...a,skipEscape:!0})):typeof l=="object"&&(l=v(n(l,!0),{...a,skipEscape:!0})),f.toLowerCase()===l.toLowerCase()}function v(f,l){const a={host:f.host,scheme:f.scheme,userinfo:f.userinfo,port:f.port,path:f.path,query:f.query,nid:f.nid,nss:f.nss,uuid:f.uuid,fragment:f.fragment,reference:f.reference,resourceName:f.resourceName,secure:f.secure,error:""},c=Object.assign({},l),y=[],d=h(c.scheme||a.scheme);d&&d.serialize&&d.serialize(a,c),a.path!==void 0&&(c.skipEscape?a.path=unescape(a.path):(a.path=escape(a.path),a.scheme!==void 0&&(a.path=a.path.split("%3A").join(":")))),c.reference!=="suffix"&&a.scheme&&y.push(a.scheme,":");const m=s(a);if(m!==void 0&&(c.reference!=="suffix"&&y.push("//"),y.push(m),a.path&&a.path[0]!=="/"&&y.push("/")),a.path!==void 0){let S=a.path;!c.absolutePath&&(!d||!d.absolutePath)&&(S=e(S)),m===void 0&&S[0]==="/"&&S[1]==="/"&&(S="/%2F"+S.slice(2)),y.push(S)}return a.query!==void 0&&y.push("?",a.query),a.fragment!==void 0&&y.push("#",a.fragment),y.join("")}const k=/^(?:([^#/:?]+):)?(?:\/\/((?:([^#/?@]*)@)?(\[[^#/?\]]+\]|[^#/:?]*)(?::(\d*))?))?([^#?]*)(?:\?([^#]*))?(?:#((?:.|[\n\r])*))?/u;function _(f,l){const a=Object.assign({},l),c={scheme:void 0,userinfo:void 0,host:"",port:void 0,path:"",query:void 0,fragment:void 0};let y=!1;a.reference==="suffix"&&(a.scheme?f=a.scheme+":"+f:f="//"+f);const d=f.match(k);if(d){if(c.scheme=d[1],c.userinfo=d[3],c.host=d[4],c.port=parseInt(d[5],10),c.path=d[6]||"",c.query=d[7],c.fragment=d[8],isNaN(c.port)&&(c.port=d[5]),c.host)if(r(c.host)===!1){const I=t(c.host);c.host=I.host.toLowerCase(),y=I.isIPV6}else y=!0;c.scheme===void 0&&c.userinfo===void 0&&c.host===void 0&&c.port===void 0&&c.query===void 0&&!c.path?c.reference="same-document":c.scheme===void 0?c.reference="relative":c.fragment===void 0?c.reference="absolute":c.reference="uri",a.reference&&a.reference!=="suffix"&&a.reference!==c.reference&&(c.error=c.error||"URI is not a "+a.reference+" reference.");const m=h(a.scheme||c.scheme);if(!a.unicodeSupport&&(!m||!m.unicodeSupport)&&c.host&&(a.domainHost||m&&m.domainHost)&&y===!1&&i(c.host))try{c.host=URL.domainToASCII(c.host.toLowerCase())}catch(S){c.error=c.error||"Host's domain name can not be converted to ASCII: "+S}(!m||m&&!m.skipNormalize)&&(f.indexOf("%")!==-1&&(c.scheme!==void 0&&(c.scheme=unescape(c.scheme)),c.host!==void 0&&(c.host=unescape(c.host))),c.path&&(c.path=escape(unescape(c.path))),c.fragment&&(c.fragment=encodeURI(decodeURIComponent(c.fragment)))),m&&m.parse&&m.parse(c,a)}else c.error=c.error||"URI can not be parsed.";return c}const b={SCHEMES:o,normalize:p,resolve:w,resolveComponent:u,equal:$,serialize:v,parse:_};return st.exports=b,st.exports.default=b,st.exports.fastUri=b,st.exports}var gn;function yo(){if(gn)return mt;gn=1,Object.defineProperty(mt,"__esModule",{value:!0});const t=mo();return t.code='require("ajv/dist/runtime/uri").default',mt.default=t,mt}var vn;function go(){return vn||(vn=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.CodeGen=t.Name=t.nil=t.stringify=t.str=t._=t.KeywordCxt=void 0;var e=ss();Object.defineProperty(t,"KeywordCxt",{enumerable:!0,get:function(){return e.KeywordCxt}});var s=Y();Object.defineProperty(t,"_",{enumerable:!0,get:function(){return s._}}),Object.defineProperty(t,"str",{enumerable:!0,get:function(){return s.str}}),Object.defineProperty(t,"stringify",{enumerable:!0,get:function(){return s.stringify}}),Object.defineProperty(t,"nil",{enumerable:!0,get:function(){return s.nil}}),Object.defineProperty(t,"Name",{enumerable:!0,get:function(){return s.Name}}),Object.defineProperty(t,"CodeGen",{enumerable:!0,get:function(){return s.CodeGen}});const n=Rs(),r=ns(),i=Zi(),o=xs(),h=Y(),p=ts(),w=Xt(),u=se(),$=fo,v=yo(),k=(A,O)=>new RegExp(A,O);k.code="new RegExp";const _=["removeAdditional","useDefaults","coerceTypes"],b=new Set(["validate","serialize","parse","wrapper","root","schema","keyword","pattern","formats","validate$data","func","obj","Error"]),f={errorDataPath:"",format:"`validateFormats: false` can be used instead.",nullable:'"nullable" keyword is supported by default.',jsonPointers:"Deprecated jsPropertySyntax can be used instead.",extendRefs:"Deprecated ignoreKeywordsWithRef can be used instead.",missingRefs:"Pass empty schema with $id that should be ignored to ajv.addSchema.",processCode:"Use option `code: {process: (code, schemaEnv: object) => string}`",sourceCode:"Use option `code: {source: true}`",strictDefaults:"It is default now, see option `strict`.",strictKeywords:"It is default now, see option `strict`.",uniqueItems:'"uniqueItems" keyword is always validated.',unknownFormats:"Disable strict mode or pass `true` to `ajv.addFormat` (or `formats` option).",cache:"Map is used as cache, schema object as key.",serialize:"Map is used as cache, schema object as key.",ajvErrors:"It is default now."},l={ignoreKeywordsWithRef:"",jsPropertySyntax:"",unicode:'"minLength"/"maxLength" account for unicode characters by default.'},a=200;function c(A){var O,j,T,g,P,x,H,G,Q,W,E,N,M,L,Z,X,ce,be,ye,ge,de,Ge,ke,is,rs;const Xe=A.strict,os=(O=A.code)===null||O===void 0?void 0:O.optimize,js=os===!0||os===void 0?1:os||0,Ds=(T=(j=A.code)===null||j===void 0?void 0:j.regExp)!==null&&T!==void 0?T:k,er=(g=A.uriResolver)!==null&&g!==void 0?g:v.default;return{strictSchema:(x=(P=A.strictSchema)!==null&&P!==void 0?P:Xe)!==null&&x!==void 0?x:!0,strictNumbers:(G=(H=A.strictNumbers)!==null&&H!==void 0?H:Xe)!==null&&G!==void 0?G:!0,strictTypes:(W=(Q=A.strictTypes)!==null&&Q!==void 0?Q:Xe)!==null&&W!==void 0?W:"log",strictTuples:(N=(E=A.strictTuples)!==null&&E!==void 0?E:Xe)!==null&&N!==void 0?N:"log",strictRequired:(L=(M=A.strictRequired)!==null&&M!==void 0?M:Xe)!==null&&L!==void 0?L:!1,code:A.code?{...A.code,optimize:js,regExp:Ds}:{optimize:js,regExp:Ds},loopRequired:(Z=A.loopRequired)!==null&&Z!==void 0?Z:a,loopEnum:(X=A.loopEnum)!==null&&X!==void 0?X:a,meta:(ce=A.meta)!==null&&ce!==void 0?ce:!0,messages:(be=A.messages)!==null&&be!==void 0?be:!0,inlineRefs:(ye=A.inlineRefs)!==null&&ye!==void 0?ye:!0,schemaId:(ge=A.schemaId)!==null&&ge!==void 0?ge:"$id",addUsedSchema:(de=A.addUsedSchema)!==null&&de!==void 0?de:!0,validateSchema:(Ge=A.validateSchema)!==null&&Ge!==void 0?Ge:!0,validateFormats:(ke=A.validateFormats)!==null&&ke!==void 0?ke:!0,unicodeRegExp:(is=A.unicodeRegExp)!==null&&is!==void 0?is:!0,int32range:(rs=A.int32range)!==null&&rs!==void 0?rs:!0,uriResolver:er}}class y{constructor(O={}){this.schemas={},this.refs={},this.formats={},this._compilations=new Set,this._loading={},this._cache=new Map,O=this.opts={...O,...c(O)};const{es5:j,lines:T}=this.opts.code;this.scope=new h.ValueScope({scope:{},prefixes:b,es5:j,lines:T}),this.logger=F(O.logger);const g=O.validateFormats;O.validateFormats=!1,this.RULES=(0,i.getRules)(),d.call(this,f,O,"NOT SUPPORTED"),d.call(this,l,O,"DEPRECATED","warn"),this._metaOpts=D.call(this),O.formats&&I.call(this),this._addVocabularies(),this._addDefaultMetaSchema(),O.keywords&&R.call(this,O.keywords),typeof O.meta=="object"&&this.addMetaSchema(O.meta),S.call(this),O.validateFormats=g}_addVocabularies(){this.addKeyword("$async")}_addDefaultMetaSchema(){const{$data:O,meta:j,schemaId:T}=this.opts;let g=$;T==="id"&&(g={...$},g.id=g.$id,delete g.$id),j&&O&&this.addMetaSchema(g,g[T],!1)}defaultMeta(){const{meta:O,schemaId:j}=this.opts;return this.opts.defaultMeta=typeof O=="object"?O[j]||O:void 0}validate(O,j){let T;if(typeof O=="string"){if(T=this.getSchema(O),!T)throw new Error(`no schema with key or ref "${O}"`)}else T=this.compile(O);const g=T(j);return"$async"in T||(this.errors=T.errors),g}compile(O,j){const T=this._addSchema(O,j);return T.validate||this._compileSchemaEnv(T)}compileAsync(O,j){if(typeof this.opts.loadSchema!="function")throw new Error("options.loadSchema should be a function");const{loadSchema:T}=this.opts;return g.call(this,O,j);async function g(W,E){await P.call(this,W.$schema);const N=this._addSchema(W,E);return N.validate||x.call(this,N)}async function P(W){W&&!this.getSchema(W)&&await g.call(this,{$ref:W},!0)}async function x(W){try{return this._compileSchemaEnv(W)}catch(E){if(!(E instanceof r.default))throw E;return H.call(this,E),await G.call(this,E.missingSchema),x.call(this,W)}}function H({missingSchema:W,missingRef:E}){if(this.refs[W])throw new Error(`AnySchema ${W} is loaded but ${E} cannot be resolved`)}async function G(W){const E=await Q.call(this,W);this.refs[W]||await P.call(this,E.$schema),this.refs[W]||this.addSchema(E,W,j)}async function Q(W){const E=this._loading[W];if(E)return E;try{return await(this._loading[W]=T(W))}finally{delete this._loading[W]}}}addSchema(O,j,T,g=this.opts.validateSchema){if(Array.isArray(O)){for(const x of O)this.addSchema(x,void 0,T,g);return this}let P;if(typeof O=="object"){const{schemaId:x}=this.opts;if(P=O[x],P!==void 0&&typeof P!="string")throw new Error(`schema ${x} must be string`)}return j=(0,p.normalizeId)(j||P),this._checkUnique(j),this.schemas[j]=this._addSchema(O,T,j,g,!0),this}addMetaSchema(O,j,T=this.opts.validateSchema){return this.addSchema(O,j,!0,T),this}validateSchema(O,j){if(typeof O=="boolean")return!0;let T;if(T=O.$schema,T!==void 0&&typeof T!="string")throw new Error("$schema must be a string");if(T=T||this.opts.defaultMeta||this.defaultMeta(),!T)return this.logger.warn("meta-schema not available"),this.errors=null,!0;const g=this.validate(T,O);if(!g&&j){const P="schema is invalid: "+this.errorsText();if(this.opts.validateSchema==="log")this.logger.error(P);else throw new Error(P)}return g}getSchema(O){let j;for(;typeof(j=m.call(this,O))=="string";)O=j;if(j===void 0){const{schemaId:T}=this.opts,g=new o.SchemaEnv({schema:{},schemaId:T});if(j=o.resolveSchema.call(this,g,O),!j)return;this.refs[O]=j}return j.validate||this._compileSchemaEnv(j)}removeSchema(O){if(O instanceof RegExp)return this._removeAllSchemas(this.schemas,O),this._removeAllSchemas(this.refs,O),this;switch(typeof O){case"undefined":return this._removeAllSchemas(this.schemas),this._removeAllSchemas(this.refs),this._cache.clear(),this;case"string":{const j=m.call(this,O);return typeof j=="object"&&this._cache.delete(j.schema),delete this.schemas[O],delete this.refs[O],this}case"object":{const j=O;this._cache.delete(j);let T=O[this.opts.schemaId];return T&&(T=(0,p.normalizeId)(T),delete this.schemas[T],delete this.refs[T]),this}default:throw new Error("ajv.removeSchema: invalid parameter")}}addVocabulary(O){for(const j of O)this.addKeyword(j);return this}addKeyword(O,j){let T;if(typeof O=="string")T=O,typeof j=="object"&&(this.logger.warn("these parameters are deprecated, see docs for addKeyword"),j.keyword=T);else if(typeof O=="object"&&j===void 0){if(j=O,T=j.keyword,Array.isArray(T)&&!T.length)throw new Error("addKeywords: keyword must be string or non-empty array")}else throw new Error("invalid addKeywords parameters");if(K.call(this,T,j),!j)return(0,u.eachItem)(T,P=>ee.call(this,P)),this;te.call(this,j);const g={...j,type:(0,w.getJSONTypes)(j.type),schemaType:(0,w.getJSONTypes)(j.schemaType)};return(0,u.eachItem)(T,g.type.length===0?P=>ee.call(this,P,g):P=>g.type.forEach(x=>ee.call(this,P,g,x))),this}getKeyword(O){const j=this.RULES.all[O];return typeof j=="object"?j.definition:!!j}removeKeyword(O){const{RULES:j}=this;delete j.keywords[O],delete j.all[O];for(const T of j.rules){const g=T.rules.findIndex(P=>P.keyword===O);g>=0&&T.rules.splice(g,1)}return this}addFormat(O,j){return typeof j=="string"&&(j=new RegExp(j)),this.formats[O]=j,this}errorsText(O=this.errors,{separator:j=", ",dataVar:T="data"}={}){return!O||O.length===0?"No errors":O.map(g=>`${T}${g.instancePath} ${g.message}`).reduce((g,P)=>g+j+P)}$dataMetaSchema(O,j){const T=this.RULES.all;O=JSON.parse(JSON.stringify(O));for(const g of j){const P=g.split("/").slice(1);let x=O;for(const H of P)x=x[H];for(const H in T){const G=T[H];if(typeof G!="object")continue;const{$data:Q}=G.definition,W=x[H];Q&&W&&(x[H]=oe(W))}}return O}_removeAllSchemas(O,j){for(const T in O){const g=O[T];(!j||j.test(T))&&(typeof g=="string"?delete O[T]:g&&!g.meta&&(this._cache.delete(g.schema),delete O[T]))}}_addSchema(O,j,T,g=this.opts.validateSchema,P=this.opts.addUsedSchema){let x;const{schemaId:H}=this.opts;if(typeof O=="object")x=O[H];else{if(this.opts.jtd)throw new Error("schema must be object");if(typeof O!="boolean")throw new Error("schema must be object or boolean")}let G=this._cache.get(O);if(G!==void 0)return G;T=(0,p.normalizeId)(x||T);const Q=p.getSchemaRefs.call(this,O,T);return G=new o.SchemaEnv({schema:O,schemaId:H,meta:j,baseId:T,localRefs:Q}),this._cache.set(G.schema,G),P&&!T.startsWith("#")&&(T&&this._checkUnique(T),this.refs[T]=G),g&&this.validateSchema(O,!0),G}_checkUnique(O){if(this.schemas[O]||this.refs[O])throw new Error(`schema with key or id "${O}" already exists`)}_compileSchemaEnv(O){if(O.meta?this._compileMetaSchema(O):o.compileSchema.call(this,O),!O.validate)throw new Error("ajv implementation error");return O.validate}_compileMetaSchema(O){const j=this.opts;this.opts=this._metaOpts;try{o.compileSchema.call(this,O)}finally{this.opts=j}}}y.ValidationError=n.default,y.MissingRefError=r.default,t.default=y;function d(A,O,j,T="error"){for(const g in A){const P=g;P in O&&this.logger[T](`${j}: option ${g}. ${A[P]}`)}}function m(A){return A=(0,p.normalizeId)(A),this.schemas[A]||this.refs[A]}function S(){const A=this.opts.schemas;if(A)if(Array.isArray(A))this.addSchema(A);else for(const O in A)this.addSchema(A[O],O)}function I(){for(const A in this.opts.formats){const O=this.opts.formats[A];O&&this.addFormat(A,O)}}function R(A){if(Array.isArray(A)){this.addVocabulary(A);return}this.logger.warn("keywords option as map is deprecated, pass array");for(const O in A){const j=A[O];j.keyword||(j.keyword=O),this.addKeyword(j)}}function D(){const A={...this.opts};for(const O of _)delete A[O];return A}const q={log(){},warn(){},error(){}};function F(A){if(A===!1)return q;if(A===void 0)return console;if(A.log&&A.warn&&A.error)return A;throw new Error("logger must implement log, warn and error methods")}const V=/^[a-z_$][a-z0-9_$:-]*$/i;function K(A,O){const{RULES:j}=this;if((0,u.eachItem)(A,T=>{if(j.keywords[T])throw new Error(`Keyword ${T} is already defined`);if(!V.test(T))throw new Error(`Keyword ${T} has invalid name`)}),!!O&&O.$data&&!("code"in O||"validate"in O))throw new Error('$data keyword must have "code" or "validate" function')}function ee(A,O,j){var T;const g=O?.post;if(j&&g)throw new Error('keyword with "post" flag cannot have "type"');const{RULES:P}=this;let x=g?P.post:P.rules.find(({type:G})=>G===j);if(x||(x={type:j,rules:[]},P.rules.push(x)),P.keywords[A]=!0,!O)return;const H={keyword:A,definition:{...O,type:(0,w.getJSONTypes)(O.type),schemaType:(0,w.getJSONTypes)(O.schemaType)}};O.before?re.call(this,x,H,O.before):x.rules.push(H),P.all[A]=H,(T=O.implements)===null||T===void 0||T.forEach(G=>this.addKeyword(G))}function re(A,O,j){const T=A.rules.findIndex(g=>g.keyword===j);T>=0?A.rules.splice(T,0,O):(A.rules.push(O),this.logger.warn(`rule ${j} is not defined`))}function te(A){let{metaSchema:O}=A;O!==void 0&&(A.$data&&this.opts.$data&&(O=oe(O)),A.validateSchema=this.compile(O,!0))}const B={$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"};function oe(A){return{anyOf:[A,B]}}}(hs)),hs}var yt={},gt={},vt={},wn;function vo(){if(wn)return vt;wn=1,Object.defineProperty(vt,"__esModule",{value:!0});const t={keyword:"id",code(){throw new Error('NOT SUPPORTED: keyword "id", use "$id" for schema ID')}};return vt.default=t,vt}var Ae={},_n;function wo(){if(_n)return Ae;_n=1,Object.defineProperty(Ae,"__esModule",{value:!0}),Ae.callRef=Ae.getValidate=void 0;const t=ns(),e=Ee(),s=Y(),n=Le(),r=xs(),i=se(),o={keyword:"$ref",schemaType:"string",code(w){const{gen:u,schema:$,it:v}=w,{baseId:k,schemaEnv:_,validateName:b,opts:f,self:l}=v,{root:a}=_;if(($==="#"||$==="#/")&&k===a.baseId)return y();const c=r.resolveRef.call(l,a,k,$);if(c===void 0)throw new t.default(v.opts.uriResolver,k,$);if(c instanceof r.SchemaEnv)return d(c);return m(c);function y(){if(_===a)return p(w,b,_,_.$async);const S=u.scopeValue("root",{ref:a});return p(w,(0,s._)`${S}.validate`,a,a.$async)}function d(S){const I=h(w,S);p(w,I,S,S.$async)}function m(S){const I=u.scopeValue("schema",f.code.source===!0?{ref:S,code:(0,s.stringify)(S)}:{ref:S}),R=u.name("valid"),D=w.subschema({schema:S,dataTypes:[],schemaPath:s.nil,topSchemaRef:I,errSchemaPath:$},R);w.mergeEvaluated(D),w.ok(R)}}};function h(w,u){const{gen:$}=w;return u.validate?$.scopeValue("validate",{ref:u.validate}):(0,s._)`${$.scopeValue("wrapper",{ref:u})}.validate`}Ae.getValidate=h;function p(w,u,$,v){const{gen:k,it:_}=w,{allErrors:b,schemaEnv:f,opts:l}=_,a=l.passContext?n.default.this:s.nil;v?c():y();function c(){if(!f.$async)throw new Error("async schema referenced by sync schema");const S=k.let("valid");k.try(()=>{k.code((0,s._)`await ${(0,e.callValidateCode)(w,u,a)}`),m(u),b||k.assign(S,!0)},I=>{k.if((0,s._)`!(${I} instanceof ${_.ValidationError})`,()=>k.throw(I)),d(I),b||k.assign(S,!1)}),w.ok(S)}function y(){w.result((0,e.callValidateCode)(w,u,a),()=>m(u),()=>d(u))}function d(S){const I=(0,s._)`${S}.errors`;k.assign(n.default.vErrors,(0,s._)`${n.default.vErrors} === null ? ${I} : ${n.default.vErrors}.concat(${I})`),k.assign(n.default.errors,(0,s._)`${n.default.vErrors}.length`)}function m(S){var I;if(!_.opts.unevaluated)return;const R=(I=$?.validate)===null||I===void 0?void 0:I.evaluated;if(_.props!==!0)if(R&&!R.dynamicProps)R.props!==void 0&&(_.props=i.mergeEvaluated.props(k,R.props,_.props));else{const D=k.var("props",(0,s._)`${S}.evaluated.props`);_.props=i.mergeEvaluated.props(k,D,_.props,s.Name)}if(_.items!==!0)if(R&&!R.dynamicItems)R.items!==void 0&&(_.items=i.mergeEvaluated.items(k,R.items,_.items));else{const D=k.var("items",(0,s._)`${S}.evaluated.items`);_.items=i.mergeEvaluated.items(k,D,_.items,s.Name)}}}return Ae.callRef=p,Ae.default=o,Ae}var kn;function _o(){if(kn)return gt;kn=1,Object.defineProperty(gt,"__esModule",{value:!0});const t=vo(),e=wo(),s=["$schema","$id","$defs","$vocabulary",{keyword:"$comment"},"definitions",t.default,e.default];return gt.default=s,gt}var wt={},_t={},bn;function ko(){if(bn)return _t;bn=1,Object.defineProperty(_t,"__esModule",{value:!0});const t=Y(),e=t.operators,s={maximum:{okStr:"<=",ok:e.LTE,fail:e.GT},minimum:{okStr:">=",ok:e.GTE,fail:e.LT},exclusiveMaximum:{okStr:"<",ok:e.LT,fail:e.GTE},exclusiveMinimum:{okStr:">",ok:e.GT,fail:e.LTE}},n={message:({keyword:i,schemaCode:o})=>(0,t.str)`must be ${s[i].okStr} ${o}`,params:({keyword:i,schemaCode:o})=>(0,t._)`{comparison: ${s[i].okStr}, limit: ${o}}`},r={keyword:Object.keys(s),type:"number",schemaType:"number",$data:!0,error:n,code(i){const{keyword:o,data:h,schemaCode:p}=i;i.fail$data((0,t._)`${h} ${s[o].fail} ${p} || isNaN(${h})`)}};return _t.default=r,_t}var kt={},$n;function bo(){if($n)return kt;$n=1,Object.defineProperty(kt,"__esModule",{value:!0});const t=Y(),s={keyword:"multipleOf",type:"number",schemaType:"number",$data:!0,error:{message:({schemaCode:n})=>(0,t.str)`must be multiple of ${n}`,params:({schemaCode:n})=>(0,t._)`{multipleOf: ${n}}`},code(n){const{gen:r,data:i,schemaCode:o,it:h}=n,p=h.opts.multipleOfPrecision,w=r.let("res"),u=p?(0,t._)`Math.abs(Math.round(${w}) - ${w}) > 1e-${p}`:(0,t._)`${w} !== parseInt(${w})`;n.fail$data((0,t._)`(${o} === 0 || (${w} = ${i}/${o}, ${u}))`)}};return kt.default=s,kt}var bt={},$t={},Sn;function $o(){if(Sn)return $t;Sn=1,Object.defineProperty($t,"__esModule",{value:!0});function t(e){const s=e.length;let n=0,r=0,i;for(;r<s;)n++,i=e.charCodeAt(r++),i>=55296&&i<=56319&&r<s&&(i=e.charCodeAt(r),(i&64512)===56320&&r++);return n}return $t.default=t,t.code='require("ajv/dist/runtime/ucs2length").default',$t}var Pn;function So(){if(Pn)return bt;Pn=1,Object.defineProperty(bt,"__esModule",{value:!0});const t=Y(),e=se(),s=$o(),r={keyword:["maxLength","minLength"],type:"string",schemaType:"number",$data:!0,error:{message({keyword:i,schemaCode:o}){const h=i==="maxLength"?"more":"fewer";return(0,t.str)`must NOT have ${h} than ${o} characters`},params:({schemaCode:i})=>(0,t._)`{limit: ${i}}`},code(i){const{keyword:o,data:h,schemaCode:p,it:w}=i,u=o==="maxLength"?t.operators.GT:t.operators.LT,$=w.opts.unicode===!1?(0,t._)`${h}.length`:(0,t._)`${(0,e.useFunc)(i.gen,s.default)}(${h})`;i.fail$data((0,t._)`${$} ${u} ${p}`)}};return bt.default=r,bt}var St={},En;function Po(){if(En)return St;En=1,Object.defineProperty(St,"__esModule",{value:!0});const t=Ee(),e=Y(),n={keyword:"pattern",type:"string",schemaType:"string",$data:!0,error:{message:({schemaCode:r})=>(0,e.str)`must match pattern "${r}"`,params:({schemaCode:r})=>(0,e._)`{pattern: ${r}}`},code(r){const{data:i,$data:o,schema:h,schemaCode:p,it:w}=r,u=w.opts.unicodeRegExp?"u":"",$=o?(0,e._)`(new RegExp(${p}, ${u}))`:(0,t.usePattern)(r,h);r.fail$data((0,e._)`!${$}.test(${i})`)}};return St.default=n,St}var Pt={},In;function Eo(){if(In)return Pt;In=1,Object.defineProperty(Pt,"__esModule",{value:!0});const t=Y(),s={keyword:["maxProperties","minProperties"],type:"object",schemaType:"number",$data:!0,error:{message({keyword:n,schemaCode:r}){const i=n==="maxProperties"?"more":"fewer";return(0,t.str)`must NOT have ${i} than ${r} properties`},params:({schemaCode:n})=>(0,t._)`{limit: ${n}}`},code(n){const{keyword:r,data:i,schemaCode:o}=n,h=r==="maxProperties"?t.operators.GT:t.operators.LT;n.fail$data((0,t._)`Object.keys(${i}).length ${h} ${o}`)}};return Pt.default=s,Pt}var Et={},On;function Io(){if(On)return Et;On=1,Object.defineProperty(Et,"__esModule",{value:!0});const t=Ee(),e=Y(),s=se(),r={keyword:"required",type:"object",schemaType:"array",$data:!0,error:{message:({params:{missingProperty:i}})=>(0,e.str)`must have required property '${i}'`,params:({params:{missingProperty:i}})=>(0,e._)`{missingProperty: ${i}}`},code(i){const{gen:o,schema:h,schemaCode:p,data:w,$data:u,it:$}=i,{opts:v}=$;if(!u&&h.length===0)return;const k=h.length>=v.loopRequired;if($.allErrors?_():b(),v.strictRequired){const a=i.parentSchema.properties,{definedProperties:c}=i.it;for(const y of h)if(a?.[y]===void 0&&!c.has(y)){const d=$.schemaEnv.baseId+$.errSchemaPath,m=`required property "${y}" is not defined at "${d}" (strictRequired)`;(0,s.checkStrictMode)($,m,$.opts.strictRequired)}}function _(){if(k||u)i.block$data(e.nil,f);else for(const a of h)(0,t.checkReportMissingProp)(i,a)}function b(){const a=o.let("missing");if(k||u){const c=o.let("valid",!0);i.block$data(c,()=>l(a,c)),i.ok(c)}else o.if((0,t.checkMissingProp)(i,h,a)),(0,t.reportMissingProp)(i,a),o.else()}function f(){o.forOf("prop",p,a=>{i.setParams({missingProperty:a}),o.if((0,t.noPropertyInData)(o,w,a,v.ownProperties),()=>i.error())})}function l(a,c){i.setParams({missingProperty:a}),o.forOf(a,p,()=>{o.assign(c,(0,t.propertyInData)(o,w,a,v.ownProperties)),o.if((0,e.not)(c),()=>{i.error(),o.break()})},e.nil)}}};return Et.default=r,Et}var It={},Tn;function Oo(){if(Tn)return It;Tn=1,Object.defineProperty(It,"__esModule",{value:!0});const t=Y(),s={keyword:["maxItems","minItems"],type:"array",schemaType:"number",$data:!0,error:{message({keyword:n,schemaCode:r}){const i=n==="maxItems"?"more":"fewer";return(0,t.str)`must NOT have ${i} than ${r} items`},params:({schemaCode:n})=>(0,t._)`{limit: ${n}}`},code(n){const{keyword:r,data:i,schemaCode:o}=n,h=r==="maxItems"?t.operators.GT:t.operators.LT;n.fail$data((0,t._)`${i}.length ${h} ${o}`)}};return It.default=s,It}var Ot={},Tt={},Nn;function Ms(){if(Nn)return Tt;Nn=1,Object.defineProperty(Tt,"__esModule",{value:!0});const t=Bi();return t.code='require("ajv/dist/runtime/equal").default',Tt.default=t,Tt}var Cn;function To(){if(Cn)return Ot;Cn=1,Object.defineProperty(Ot,"__esModule",{value:!0});const t=Xt(),e=Y(),s=se(),n=Ms(),i={keyword:"uniqueItems",type:"array",schemaType:"boolean",$data:!0,error:{message:({params:{i:o,j:h}})=>(0,e.str)`must NOT have duplicate items (items ## ${h} and ${o} are identical)`,params:({params:{i:o,j:h}})=>(0,e._)`{i: ${o}, j: ${h}}`},code(o){const{gen:h,data:p,$data:w,schema:u,parentSchema:$,schemaCode:v,it:k}=o;if(!w&&!u)return;const _=h.let("valid"),b=$.items?(0,t.getSchemaTypes)($.items):[];o.block$data(_,f,(0,e._)`${v} === false`),o.ok(_);function f(){const y=h.let("i",(0,e._)`${p}.length`),d=h.let("j");o.setParams({i:y,j:d}),h.assign(_,!0),h.if((0,e._)`${y} > 1`,()=>(l()?a:c)(y,d))}function l(){return b.length>0&&!b.some(y=>y==="object"||y==="array")}function a(y,d){const m=h.name("item"),S=(0,t.checkDataTypes)(b,m,k.opts.strictNumbers,t.DataType.Wrong),I=h.const("indices",(0,e._)`{}`);h.for((0,e._)`;${y}--;`,()=>{h.let(m,(0,e._)`${p}[${y}]`),h.if(S,(0,e._)`continue`),b.length>1&&h.if((0,e._)`typeof ${m} == "string"`,(0,e._)`${m} += "_"`),h.if((0,e._)`typeof ${I}[${m}] == "number"`,()=>{h.assign(d,(0,e._)`${I}[${m}]`),o.error(),h.assign(_,!1).break()}).code((0,e._)`${I}[${m}] = ${y}`)})}function c(y,d){const m=(0,s.useFunc)(h,n.default),S=h.name("outer");h.label(S).for((0,e._)`;${y}--;`,()=>h.for((0,e._)`${d} = ${y}; ${d}--;`,()=>h.if((0,e._)`${m}(${p}[${y}], ${p}[${d}])`,()=>{o.error(),h.assign(_,!1).break(S)})))}}};return Ot.default=i,Ot}var Nt={},Rn;function No(){if(Rn)return Nt;Rn=1,Object.defineProperty(Nt,"__esModule",{value:!0});const t=Y(),e=se(),s=Ms(),r={keyword:"const",$data:!0,error:{message:"must be equal to constant",params:({schemaCode:i})=>(0,t._)`{allowedValue: ${i}}`},code(i){const{gen:o,data:h,$data:p,schemaCode:w,schema:u}=i;p||u&&typeof u=="object"?i.fail$data((0,t._)`!${(0,e.useFunc)(o,s.default)}(${h}, ${w})`):i.fail((0,t._)`${u} !== ${h}`)}};return Nt.default=r,Nt}var Ct={},xn;function Co(){if(xn)return Ct;xn=1,Object.defineProperty(Ct,"__esModule",{value:!0});const t=Y(),e=se(),s=Ms(),r={keyword:"enum",schemaType:"array",$data:!0,error:{message:"must be equal to one of the allowed values",params:({schemaCode:i})=>(0,t._)`{allowedValues: ${i}}`},code(i){const{gen:o,data:h,$data:p,schema:w,schemaCode:u,it:$}=i;if(!p&&w.length===0)throw new Error("enum must have non-empty array");const v=w.length>=$.opts.loopEnum;let k;const _=()=>k??(k=(0,e.useFunc)(o,s.default));let b;if(v||p)b=o.let("valid"),i.block$data(b,f);else{if(!Array.isArray(w))throw new Error("ajv implementation error");const a=o.const("vSchema",u);b=(0,t.or)(...w.map((c,y)=>l(a,y)))}i.pass(b);function f(){o.assign(b,!1),o.forOf("v",u,a=>o.if((0,t._)`${_()}(${h}, ${a})`,()=>o.assign(b,!0).break()))}function l(a,c){const y=w[c];return typeof y=="object"&&y!==null?(0,t._)`${_()}(${h}, ${a}[${c}])`:(0,t._)`${h} === ${y}`}}};return Ct.default=r,Ct}var Mn;function Ro(){if(Mn)return wt;Mn=1,Object.defineProperty(wt,"__esModule",{value:!0});const t=ko(),e=bo(),s=So(),n=Po(),r=Eo(),i=Io(),o=Oo(),h=To(),p=No(),w=Co(),u=[t.default,e.default,s.default,n.default,r.default,i.default,o.default,h.default,{keyword:"type",schemaType:["string","array"]},{keyword:"nullable",schemaType:"boolean"},p.default,w.default];return wt.default=u,wt}var Rt={},Ve={},jn;function Ji(){if(jn)return Ve;jn=1,Object.defineProperty(Ve,"__esModule",{value:!0}),Ve.validateAdditionalItems=void 0;const t=Y(),e=se(),n={keyword:"additionalItems",type:"array",schemaType:["boolean","object"],before:"uniqueItems",error:{message:({params:{len:i}})=>(0,t.str)`must NOT have more than ${i} items`,params:({params:{len:i}})=>(0,t._)`{limit: ${i}}`},code(i){const{parentSchema:o,it:h}=i,{items:p}=o;if(!Array.isArray(p)){(0,e.checkStrictMode)(h,'"additionalItems" is ignored when "items" is not an array of schemas');return}r(i,p)}};function r(i,o){const{gen:h,schema:p,data:w,keyword:u,it:$}=i;$.items=!0;const v=h.const("len",(0,t._)`${w}.length`);if(p===!1)i.setParams({len:o.length}),i.pass((0,t._)`${v} <= ${o.length}`);else if(typeof p=="object"&&!(0,e.alwaysValidSchema)($,p)){const _=h.var("valid",(0,t._)`${v} <= ${o.length}`);h.if((0,t.not)(_),()=>k(_)),i.ok(_)}function k(_){h.forRange("i",o.length,v,b=>{i.subschema({keyword:u,dataProp:b,dataPropType:e.Type.Num},_),$.allErrors||h.if((0,t.not)(_),()=>h.break())})}}return Ve.validateAdditionalItems=r,Ve.default=n,Ve}var xt={},Ze={},Dn;function Xi(){if(Dn)return Ze;Dn=1,Object.defineProperty(Ze,"__esModule",{value:!0}),Ze.validateTuple=void 0;const t=Y(),e=se(),s=Ee(),n={keyword:"items",type:"array",schemaType:["object","array","boolean"],before:"uniqueItems",code(i){const{schema:o,it:h}=i;if(Array.isArray(o))return r(i,"additionalItems",o);h.items=!0,!(0,e.alwaysValidSchema)(h,o)&&i.ok((0,s.validateArray)(i))}};function r(i,o,h=i.schema){const{gen:p,parentSchema:w,data:u,keyword:$,it:v}=i;b(w),v.opts.unevaluated&&h.length&&v.items!==!0&&(v.items=e.mergeEvaluated.items(p,h.length,v.items));const k=p.name("valid"),_=p.const("len",(0,t._)`${u}.length`);h.forEach((f,l)=>{(0,e.alwaysValidSchema)(v,f)||(p.if((0,t._)`${_} > ${l}`,()=>i.subschema({keyword:$,schemaProp:l,dataProp:l},k)),i.ok(k))});function b(f){const{opts:l,errSchemaPath:a}=v,c=h.length,y=c===f.minItems&&(c===f.maxItems||f[o]===!1);if(l.strictTuples&&!y){const d=`"${$}" is ${c}-tuple, but minItems or maxItems/${o} are not specified or different at path "${a}"`;(0,e.checkStrictMode)(v,d,l.strictTuples)}}}return Ze.validateTuple=r,Ze.default=n,Ze}var An;function xo(){if(An)return xt;An=1,Object.defineProperty(xt,"__esModule",{value:!0});const t=Xi(),e={keyword:"prefixItems",type:"array",schemaType:["array"],before:"uniqueItems",code:s=>(0,t.validateTuple)(s,"items")};return xt.default=e,xt}var Mt={},qn;function Mo(){if(qn)return Mt;qn=1,Object.defineProperty(Mt,"__esModule",{value:!0});const t=Y(),e=se(),s=Ee(),n=Ji(),i={keyword:"items",type:"array",schemaType:["object","boolean"],before:"uniqueItems",error:{message:({params:{len:o}})=>(0,t.str)`must NOT have more than ${o} items`,params:({params:{len:o}})=>(0,t._)`{limit: ${o}}`},code(o){const{schema:h,parentSchema:p,it:w}=o,{prefixItems:u}=p;w.items=!0,!(0,e.alwaysValidSchema)(w,h)&&(u?(0,n.validateAdditionalItems)(o,u):o.ok((0,s.validateArray)(o)))}};return Mt.default=i,Mt}var jt={},Ln;function jo(){if(Ln)return jt;Ln=1,Object.defineProperty(jt,"__esModule",{value:!0});const t=Y(),e=se(),n={keyword:"contains",type:"array",schemaType:["object","boolean"],before:"uniqueItems",trackErrors:!0,error:{message:({params:{min:r,max:i}})=>i===void 0?(0,t.str)`must contain at least ${r} valid item(s)`:(0,t.str)`must contain at least ${r} and no more than ${i} valid item(s)`,params:({params:{min:r,max:i}})=>i===void 0?(0,t._)`{minContains: ${r}}`:(0,t._)`{minContains: ${r}, maxContains: ${i}}`},code(r){const{gen:i,schema:o,parentSchema:h,data:p,it:w}=r;let u,$;const{minContains:v,maxContains:k}=h;w.opts.next?(u=v===void 0?1:v,$=k):u=1;const _=i.const("len",(0,t._)`${p}.length`);if(r.setParams({min:u,max:$}),$===void 0&&u===0){(0,e.checkStrictMode)(w,'"minContains" == 0 without "maxContains": "contains" keyword ignored');return}if($!==void 0&&u>$){(0,e.checkStrictMode)(w,'"minContains" > "maxContains" is always invalid'),r.fail();return}if((0,e.alwaysValidSchema)(w,o)){let c=(0,t._)`${_} >= ${u}`;$!==void 0&&(c=(0,t._)`${c} && ${_} <= ${$}`),r.pass(c);return}w.items=!0;const b=i.name("valid");$===void 0&&u===1?l(b,()=>i.if(b,()=>i.break())):u===0?(i.let(b,!0),$!==void 0&&i.if((0,t._)`${p}.length > 0`,f)):(i.let(b,!1),f()),r.result(b,()=>r.reset());function f(){const c=i.name("_valid"),y=i.let("count",0);l(c,()=>i.if(c,()=>a(y)))}function l(c,y){i.forRange("i",0,_,d=>{r.subschema({keyword:"contains",dataProp:d,dataPropType:e.Type.Num,compositeRule:!0},c),y()})}function a(c){i.code((0,t._)`${c}++`),$===void 0?i.if((0,t._)`${c} >= ${u}`,()=>i.assign(b,!0).break()):(i.if((0,t._)`${c} > ${$}`,()=>i.assign(b,!1).break()),u===1?i.assign(b,!0):i.if((0,t._)`${c} >= ${u}`,()=>i.assign(b,!0)))}}};return jt.default=n,jt}var _s={},zn;function Do(){return zn||(zn=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.validateSchemaDeps=t.validatePropertyDeps=t.error=void 0;const e=Y(),s=se(),n=Ee();t.error={message:({params:{property:p,depsCount:w,deps:u}})=>{const $=w===1?"property":"properties";return(0,e.str)`must have ${$} ${u} when property ${p} is present`},params:({params:{property:p,depsCount:w,deps:u,missingProperty:$}})=>(0,e._)`{property: ${p},
    missingProperty: ${$},
    depsCount: ${w},
    deps: ${u}}`};const r={keyword:"dependencies",type:"object",schemaType:"object",error:t.error,code(p){const[w,u]=i(p);o(p,w),h(p,u)}};function i({schema:p}){const w={},u={};for(const $ in p){if($==="__proto__")continue;const v=Array.isArray(p[$])?w:u;v[$]=p[$]}return[w,u]}function o(p,w=p.schema){const{gen:u,data:$,it:v}=p;if(Object.keys(w).length===0)return;const k=u.let("missing");for(const _ in w){const b=w[_];if(b.length===0)continue;const f=(0,n.propertyInData)(u,$,_,v.opts.ownProperties);p.setParams({property:_,depsCount:b.length,deps:b.join(", ")}),v.allErrors?u.if(f,()=>{for(const l of b)(0,n.checkReportMissingProp)(p,l)}):(u.if((0,e._)`${f} && (${(0,n.checkMissingProp)(p,b,k)})`),(0,n.reportMissingProp)(p,k),u.else())}}t.validatePropertyDeps=o;function h(p,w=p.schema){const{gen:u,data:$,keyword:v,it:k}=p,_=u.name("valid");for(const b in w)(0,s.alwaysValidSchema)(k,w[b])||(u.if((0,n.propertyInData)(u,$,b,k.opts.ownProperties),()=>{const f=p.subschema({keyword:v,schemaProp:b},_);p.mergeValidEvaluated(f,_)},()=>u.var(_,!0)),p.ok(_))}t.validateSchemaDeps=h,t.default=r}(_s)),_s}var Dt={},Un;function Ao(){if(Un)return Dt;Un=1,Object.defineProperty(Dt,"__esModule",{value:!0});const t=Y(),e=se(),n={keyword:"propertyNames",type:"object",schemaType:["object","boolean"],error:{message:"property name must be valid",params:({params:r})=>(0,t._)`{propertyName: ${r.propertyName}}`},code(r){const{gen:i,schema:o,data:h,it:p}=r;if((0,e.alwaysValidSchema)(p,o))return;const w=i.name("valid");i.forIn("key",h,u=>{r.setParams({propertyName:u}),r.subschema({keyword:"propertyNames",data:u,dataTypes:["string"],propertyName:u,compositeRule:!0},w),i.if((0,t.not)(w),()=>{r.error(!0),p.allErrors||i.break()})}),r.ok(w)}};return Dt.default=n,Dt}var At={},Fn;function Yi(){if(Fn)return At;Fn=1,Object.defineProperty(At,"__esModule",{value:!0});const t=Ee(),e=Y(),s=Le(),n=se(),i={keyword:"additionalProperties",type:["object"],schemaType:["boolean","object"],allowUndefined:!0,trackErrors:!0,error:{message:"must NOT have additional properties",params:({params:o})=>(0,e._)`{additionalProperty: ${o.additionalProperty}}`},code(o){const{gen:h,schema:p,parentSchema:w,data:u,errsCount:$,it:v}=o;if(!$)throw new Error("ajv implementation error");const{allErrors:k,opts:_}=v;if(v.props=!0,_.removeAdditional!=="all"&&(0,n.alwaysValidSchema)(v,p))return;const b=(0,t.allSchemaProperties)(w.properties),f=(0,t.allSchemaProperties)(w.patternProperties);l(),o.ok((0,e._)`${$} === ${s.default.errors}`);function l(){h.forIn("key",u,m=>{!b.length&&!f.length?y(m):h.if(a(m),()=>y(m))})}function a(m){let S;if(b.length>8){const I=(0,n.schemaRefOrVal)(v,w.properties,"properties");S=(0,t.isOwnProperty)(h,I,m)}else b.length?S=(0,e.or)(...b.map(I=>(0,e._)`${m} === ${I}`)):S=e.nil;return f.length&&(S=(0,e.or)(S,...f.map(I=>(0,e._)`${(0,t.usePattern)(o,I)}.test(${m})`))),(0,e.not)(S)}function c(m){h.code((0,e._)`delete ${u}[${m}]`)}function y(m){if(_.removeAdditional==="all"||_.removeAdditional&&p===!1){c(m);return}if(p===!1){o.setParams({additionalProperty:m}),o.error(),k||h.break();return}if(typeof p=="object"&&!(0,n.alwaysValidSchema)(v,p)){const S=h.name("valid");_.removeAdditional==="failing"?(d(m,S,!1),h.if((0,e.not)(S),()=>{o.reset(),c(m)})):(d(m,S),k||h.if((0,e.not)(S),()=>h.break()))}}function d(m,S,I){const R={keyword:"additionalProperties",dataProp:m,dataPropType:n.Type.Str};I===!1&&Object.assign(R,{compositeRule:!0,createErrors:!1,allErrors:!1}),o.subschema(R,S)}}};return At.default=i,At}var qt={},Hn;function qo(){if(Hn)return qt;Hn=1,Object.defineProperty(qt,"__esModule",{value:!0});const t=ss(),e=Ee(),s=se(),n=Yi(),r={keyword:"properties",type:"object",schemaType:"object",code(i){const{gen:o,schema:h,parentSchema:p,data:w,it:u}=i;u.opts.removeAdditional==="all"&&p.additionalProperties===void 0&&n.default.code(new t.KeywordCxt(u,n.default,"additionalProperties"));const $=(0,e.allSchemaProperties)(h);for(const f of $)u.definedProperties.add(f);u.opts.unevaluated&&$.length&&u.props!==!0&&(u.props=s.mergeEvaluated.props(o,(0,s.toHash)($),u.props));const v=$.filter(f=>!(0,s.alwaysValidSchema)(u,h[f]));if(v.length===0)return;const k=o.name("valid");for(const f of v)_(f)?b(f):(o.if((0,e.propertyInData)(o,w,f,u.opts.ownProperties)),b(f),u.allErrors||o.else().var(k,!0),o.endIf()),i.it.definedProperties.add(f),i.ok(k);function _(f){return u.opts.useDefaults&&!u.compositeRule&&h[f].default!==void 0}function b(f){i.subschema({keyword:"properties",schemaProp:f,dataProp:f},k)}}};return qt.default=r,qt}var Lt={},Gn;function Lo(){if(Gn)return Lt;Gn=1,Object.defineProperty(Lt,"__esModule",{value:!0});const t=Ee(),e=Y(),s=se(),n=se(),r={keyword:"patternProperties",type:"object",schemaType:"object",code(i){const{gen:o,schema:h,data:p,parentSchema:w,it:u}=i,{opts:$}=u,v=(0,t.allSchemaProperties)(h),k=v.filter(y=>(0,s.alwaysValidSchema)(u,h[y]));if(v.length===0||k.length===v.length&&(!u.opts.unevaluated||u.props===!0))return;const _=$.strictSchema&&!$.allowMatchingProperties&&w.properties,b=o.name("valid");u.props!==!0&&!(u.props instanceof e.Name)&&(u.props=(0,n.evaluatedPropsToName)(o,u.props));const{props:f}=u;l();function l(){for(const y of v)_&&a(y),u.allErrors?c(y):(o.var(b,!0),c(y),o.if(b))}function a(y){for(const d in _)new RegExp(y).test(d)&&(0,s.checkStrictMode)(u,`property ${d} matches pattern ${y} (use allowMatchingProperties)`)}function c(y){o.forIn("key",p,d=>{o.if((0,e._)`${(0,t.usePattern)(i,y)}.test(${d})`,()=>{const m=k.includes(y);m||i.subschema({keyword:"patternProperties",schemaProp:y,dataProp:d,dataPropType:n.Type.Str},b),u.opts.unevaluated&&f!==!0?o.assign((0,e._)`${f}[${d}]`,!0):!m&&!u.allErrors&&o.if((0,e.not)(b),()=>o.break())})})}}};return Lt.default=r,Lt}var zt={},Vn;function zo(){if(Vn)return zt;Vn=1,Object.defineProperty(zt,"__esModule",{value:!0});const t=se(),e={keyword:"not",schemaType:["object","boolean"],trackErrors:!0,code(s){const{gen:n,schema:r,it:i}=s;if((0,t.alwaysValidSchema)(i,r)){s.fail();return}const o=n.name("valid");s.subschema({keyword:"not",compositeRule:!0,createErrors:!1,allErrors:!1},o),s.failResult(o,()=>s.reset(),()=>s.error())},error:{message:"must NOT be valid"}};return zt.default=e,zt}var Ut={},Zn;function Uo(){if(Zn)return Ut;Zn=1,Object.defineProperty(Ut,"__esModule",{value:!0});const e={keyword:"anyOf",schemaType:"array",trackErrors:!0,code:Ee().validateUnion,error:{message:"must match a schema in anyOf"}};return Ut.default=e,Ut}var Ft={},Kn;function Fo(){if(Kn)return Ft;Kn=1,Object.defineProperty(Ft,"__esModule",{value:!0});const t=Y(),e=se(),n={keyword:"oneOf",schemaType:"array",trackErrors:!0,error:{message:"must match exactly one schema in oneOf",params:({params:r})=>(0,t._)`{passingSchemas: ${r.passing}}`},code(r){const{gen:i,schema:o,parentSchema:h,it:p}=r;if(!Array.isArray(o))throw new Error("ajv implementation error");if(p.opts.discriminator&&h.discriminator)return;const w=o,u=i.let("valid",!1),$=i.let("passing",null),v=i.name("_valid");r.setParams({passing:$}),i.block(k),r.result(u,()=>r.reset(),()=>r.error(!0));function k(){w.forEach((_,b)=>{let f;(0,e.alwaysValidSchema)(p,_)?i.var(v,!0):f=r.subschema({keyword:"oneOf",schemaProp:b,compositeRule:!0},v),b>0&&i.if((0,t._)`${v} && ${u}`).assign(u,!1).assign($,(0,t._)`[${$}, ${b}]`).else(),i.if(v,()=>{i.assign(u,!0),i.assign($,b),f&&r.mergeEvaluated(f,t.Name)})})}}};return Ft.default=n,Ft}var Ht={},Bn;function Ho(){if(Bn)return Ht;Bn=1,Object.defineProperty(Ht,"__esModule",{value:!0});const t=se(),e={keyword:"allOf",schemaType:"array",code(s){const{gen:n,schema:r,it:i}=s;if(!Array.isArray(r))throw new Error("ajv implementation error");const o=n.name("valid");r.forEach((h,p)=>{if((0,t.alwaysValidSchema)(i,h))return;const w=s.subschema({keyword:"allOf",schemaProp:p},o);s.ok(o),s.mergeEvaluated(w)})}};return Ht.default=e,Ht}var Gt={},Wn;function Go(){if(Wn)return Gt;Wn=1,Object.defineProperty(Gt,"__esModule",{value:!0});const t=Y(),e=se(),n={keyword:"if",schemaType:["object","boolean"],trackErrors:!0,error:{message:({params:i})=>(0,t.str)`must match "${i.ifClause}" schema`,params:({params:i})=>(0,t._)`{failingKeyword: ${i.ifClause}}`},code(i){const{gen:o,parentSchema:h,it:p}=i;h.then===void 0&&h.else===void 0&&(0,e.checkStrictMode)(p,'"if" without "then" and "else" is ignored');const w=r(p,"then"),u=r(p,"else");if(!w&&!u)return;const $=o.let("valid",!0),v=o.name("_valid");if(k(),i.reset(),w&&u){const b=o.let("ifClause");i.setParams({ifClause:b}),o.if(v,_("then",b),_("else",b))}else w?o.if(v,_("then")):o.if((0,t.not)(v),_("else"));i.pass($,()=>i.error(!0));function k(){const b=i.subschema({keyword:"if",compositeRule:!0,createErrors:!1,allErrors:!1},v);i.mergeEvaluated(b)}function _(b,f){return()=>{const l=i.subschema({keyword:b},v);o.assign($,v),i.mergeValidEvaluated(l,$),f?o.assign(f,(0,t._)`${b}`):i.setParams({ifClause:b})}}}};function r(i,o){const h=i.schema[o];return h!==void 0&&!(0,e.alwaysValidSchema)(i,h)}return Gt.default=n,Gt}var Vt={},Jn;function Vo(){if(Jn)return Vt;Jn=1,Object.defineProperty(Vt,"__esModule",{value:!0});const t=se(),e={keyword:["then","else"],schemaType:["object","boolean"],code({keyword:s,parentSchema:n,it:r}){n.if===void 0&&(0,t.checkStrictMode)(r,`"${s}" without "if" is ignored`)}};return Vt.default=e,Vt}var Xn;function Zo(){if(Xn)return Rt;Xn=1,Object.defineProperty(Rt,"__esModule",{value:!0});const t=Ji(),e=xo(),s=Xi(),n=Mo(),r=jo(),i=Do(),o=Ao(),h=Yi(),p=qo(),w=Lo(),u=zo(),$=Uo(),v=Fo(),k=Ho(),_=Go(),b=Vo();function f(l=!1){const a=[u.default,$.default,v.default,k.default,_.default,b.default,o.default,h.default,i.default,p.default,w.default];return l?a.push(e.default,n.default):a.push(t.default,s.default),a.push(r.default),a}return Rt.default=f,Rt}var Zt={},Kt={},Yn;function Ko(){if(Yn)return Kt;Yn=1,Object.defineProperty(Kt,"__esModule",{value:!0});const t=Y(),s={keyword:"format",type:["number","string"],schemaType:"string",$data:!0,error:{message:({schemaCode:n})=>(0,t.str)`must match format "${n}"`,params:({schemaCode:n})=>(0,t._)`{format: ${n}}`},code(n,r){const{gen:i,data:o,$data:h,schema:p,schemaCode:w,it:u}=n,{opts:$,errSchemaPath:v,schemaEnv:k,self:_}=u;if(!$.validateFormats)return;h?b():f();function b(){const l=i.scopeValue("formats",{ref:_.formats,code:$.code.formats}),a=i.const("fDef",(0,t._)`${l}[${w}]`),c=i.let("fType"),y=i.let("format");i.if((0,t._)`typeof ${a} == "object" && !(${a} instanceof RegExp)`,()=>i.assign(c,(0,t._)`${a}.type || "string"`).assign(y,(0,t._)`${a}.validate`),()=>i.assign(c,(0,t._)`"string"`).assign(y,a)),n.fail$data((0,t.or)(d(),m()));function d(){return $.strictSchema===!1?t.nil:(0,t._)`${w} && !${y}`}function m(){const S=k.$async?(0,t._)`(${a}.async ? await ${y}(${o}) : ${y}(${o}))`:(0,t._)`${y}(${o})`,I=(0,t._)`(typeof ${y} == "function" ? ${S} : ${y}.test(${o}))`;return(0,t._)`${y} && ${y} !== true && ${c} === ${r} && !${I}`}}function f(){const l=_.formats[p];if(!l){d();return}if(l===!0)return;const[a,c,y]=m(l);a===r&&n.pass(S());function d(){if($.strictSchema===!1){_.logger.warn(I());return}throw new Error(I());function I(){return`unknown format "${p}" ignored in schema at path "${v}"`}}function m(I){const R=I instanceof RegExp?(0,t.regexpCode)(I):$.code.formats?(0,t._)`${$.code.formats}${(0,t.getProperty)(p)}`:void 0,D=i.scopeValue("formats",{key:p,ref:I,code:R});return typeof I=="object"&&!(I instanceof RegExp)?[I.type||"string",I.validate,(0,t._)`${D}.validate`]:["string",I,D]}function S(){if(typeof l=="object"&&!(l instanceof RegExp)&&l.async){if(!k.$async)throw new Error("async format in sync schema");return(0,t._)`await ${y}(${o})`}return typeof c=="function"?(0,t._)`${y}(${o})`:(0,t._)`${y}.test(${o})`}}}};return Kt.default=s,Kt}var Qn;function Bo(){if(Qn)return Zt;Qn=1,Object.defineProperty(Zt,"__esModule",{value:!0});const e=[Ko().default];return Zt.default=e,Zt}var Fe={},ei;function Wo(){return ei||(ei=1,Object.defineProperty(Fe,"__esModule",{value:!0}),Fe.contentVocabulary=Fe.metadataVocabulary=void 0,Fe.metadataVocabulary=["title","description","default","deprecated","readOnly","writeOnly","examples"],Fe.contentVocabulary=["contentMediaType","contentEncoding","contentSchema"]),Fe}var ti;function Jo(){if(ti)return yt;ti=1,Object.defineProperty(yt,"__esModule",{value:!0});const t=_o(),e=Ro(),s=Zo(),n=Bo(),r=Wo(),i=[t.default,e.default,(0,s.default)(),n.default,r.metadataVocabulary,r.contentVocabulary];return yt.default=i,yt}var Bt={},nt={},si;function Xo(){if(si)return nt;si=1,Object.defineProperty(nt,"__esModule",{value:!0}),nt.DiscrError=void 0;var t;return function(e){e.Tag="tag",e.Mapping="mapping"}(t||(nt.DiscrError=t={})),nt}var ni;function Yo(){if(ni)return Bt;ni=1,Object.defineProperty(Bt,"__esModule",{value:!0});const t=Y(),e=Xo(),s=xs(),n=ns(),r=se(),o={keyword:"discriminator",type:"object",schemaType:"object",error:{message:({params:{discrError:h,tagName:p}})=>h===e.DiscrError.Tag?`tag "${p}" must be string`:`value of tag "${p}" must be in oneOf`,params:({params:{discrError:h,tag:p,tagName:w}})=>(0,t._)`{error: ${h}, tag: ${w}, tagValue: ${p}}`},code(h){const{gen:p,data:w,schema:u,parentSchema:$,it:v}=h,{oneOf:k}=$;if(!v.opts.discriminator)throw new Error("discriminator: requires discriminator option");const _=u.propertyName;if(typeof _!="string")throw new Error("discriminator: requires propertyName");if(u.mapping)throw new Error("discriminator: mapping is not supported");if(!k)throw new Error("discriminator: requires oneOf keyword");const b=p.let("valid",!1),f=p.const("tag",(0,t._)`${w}${(0,t.getProperty)(_)}`);p.if((0,t._)`typeof ${f} == "string"`,()=>l(),()=>h.error(!1,{discrError:e.DiscrError.Tag,tag:f,tagName:_})),h.ok(b);function l(){const y=c();p.if(!1);for(const d in y)p.elseIf((0,t._)`${f} === ${d}`),p.assign(b,a(y[d]));p.else(),h.error(!1,{discrError:e.DiscrError.Mapping,tag:f,tagName:_}),p.endIf()}function a(y){const d=p.name("valid"),m=h.subschema({keyword:"oneOf",schemaProp:y},d);return h.mergeEvaluated(m,t.Name),d}function c(){var y;const d={},m=I($);let S=!0;for(let q=0;q<k.length;q++){let F=k[q];if(F?.$ref&&!(0,r.schemaHasRulesButRef)(F,v.self.RULES)){const K=F.$ref;if(F=s.resolveRef.call(v.self,v.schemaEnv.root,v.baseId,K),F instanceof s.SchemaEnv&&(F=F.schema),F===void 0)throw new n.default(v.opts.uriResolver,v.baseId,K)}const V=(y=F?.properties)===null||y===void 0?void 0:y[_];if(typeof V!="object")throw new Error(`discriminator: oneOf subschemas (or referenced schemas) must have "properties/${_}"`);S=S&&(m||I(F)),R(V,q)}if(!S)throw new Error(`discriminator: "${_}" must be required`);return d;function I({required:q}){return Array.isArray(q)&&q.includes(_)}function R(q,F){if(q.const)D(q.const,F);else if(q.enum)for(const V of q.enum)D(V,F);else throw new Error(`discriminator: "properties/${_}" must have "const" or "enum"`)}function D(q,F){if(typeof q!="string"||q in d)throw new Error(`discriminator: "${_}" values must be unique strings`);d[q]=F}}}};return Bt.default=o,Bt}const Qo="http://json-schema.org/draft-07/schema#",ea="http://json-schema.org/draft-07/schema#",ta="Core schema meta-schema",sa={schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},na=["object","boolean"],ia={$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},ra={$schema:Qo,$id:ea,title:ta,definitions:sa,type:na,properties:ia,default:!0};var ii;function oa(){return ii||(ii=1,function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.MissingRefError=e.ValidationError=e.CodeGen=e.Name=e.nil=e.stringify=e.str=e._=e.KeywordCxt=e.Ajv=void 0;const s=go(),n=Jo(),r=Yo(),i=ra,o=["/properties"],h="http://json-schema.org/draft-07/schema";class p extends s.default{_addVocabularies(){super._addVocabularies(),n.default.forEach(_=>this.addVocabulary(_)),this.opts.discriminator&&this.addKeyword(r.default)}_addDefaultMetaSchema(){if(super._addDefaultMetaSchema(),!this.opts.meta)return;const _=this.opts.$data?this.$dataMetaSchema(i,o):i;this.addMetaSchema(_,h,!1),this.refs["http://json-schema.org/schema"]=h}defaultMeta(){return this.opts.defaultMeta=super.defaultMeta()||(this.getSchema(h)?h:void 0)}}e.Ajv=p,t.exports=e=p,t.exports.Ajv=p,Object.defineProperty(e,"__esModule",{value:!0}),e.default=p;var w=ss();Object.defineProperty(e,"KeywordCxt",{enumerable:!0,get:function(){return w.KeywordCxt}});var u=Y();Object.defineProperty(e,"_",{enumerable:!0,get:function(){return u._}}),Object.defineProperty(e,"str",{enumerable:!0,get:function(){return u.str}}),Object.defineProperty(e,"stringify",{enumerable:!0,get:function(){return u.stringify}}),Object.defineProperty(e,"nil",{enumerable:!0,get:function(){return u.nil}}),Object.defineProperty(e,"Name",{enumerable:!0,get:function(){return u.Name}}),Object.defineProperty(e,"CodeGen",{enumerable:!0,get:function(){return u.CodeGen}});var $=Rs();Object.defineProperty(e,"ValidationError",{enumerable:!0,get:function(){return $.default}});var v=ns();Object.defineProperty(e,"MissingRefError",{enumerable:!0,get:function(){return v.default}})}(ht,ht.exports)),ht.exports}var aa=oa();const la=di(aa),ca=new la,We={type:"object",properties:{x:{type:"number"},y:{type:"number"}},required:["x","y"]},da={type:"object",properties:{start:{type:"object",properties:{slotId:{type:"integer"},nodeId:{type:"integer"}},required:["nodeId","slotId"],nullable:!0},end:{type:"object",properties:{slotId:{type:"integer"},nodeId:{type:"integer"}},required:["nodeId","slotId"],nullable:!0}}},ha={type:"object",properties:{id:{type:"integer"},componentType:{type:"integer"},nodeType:{type:"integer"},position:We,slotIds:{type:"array",items:{type:"integer"}},state:{type:"boolean"}},required:["id","componentType","nodeType","position","slotIds","state"]},ua={type:"object",properties:{id:{type:"integer"},componentType:{type:"integer"},position:We,endPosition:We,anchors:{type:"array",items:We},connectedTo:da},required:["id","componentType","position","endPosition","anchors","connectedTo"]},fa={type:"object",properties:{id:{type:"integer"},componentType:{type:"integer"},position:We,parentId:{type:"integer"},slotIdAtParent:{type:"integer"},connectionIds:{type:"array",items:{type:"integer"}},inSlot:{type:"boolean"},color:{type:"string"},colorActive:{type:"string"},radius:{type:"number",minimum:0},attractionRadius:{type:"number",minimum:0}},required:["id","componentType","position","parentId","slotIdAtParent","connectionIds","inSlot","color","colorActive","radius","attractionRadius"]},pa={type:"object",properties:{id:{type:"integer"},componentType:{type:"integer"},position:We,text:{type:"string"},parent:{type:"object",properties:{id:{type:"integer"},type:{type:"integer"}},required:["id","type"],nullable:!0},style:{type:"string"}},required:["id","componentType","position","text","style"]},ma={type:"object",properties:{id:{type:"integer"},data:{type:"object",properties:{output:{type:"boolean"},signalFrom:{type:"array",items:{type:"array",items:{type:"integer"}}},signalTo:{type:"array",items:{type:"integer"}},nodeType:{type:"integer"}},required:["output","signalFrom","signalTo","nodeType"]}},required:["id","data"]},ya={type:"object",properties:{id:{type:"string"},data:{type:"object",properties:{nodes:{type:"array",items:ha},connections:{type:"array",items:ua},slots:{type:"array",items:fa},texts:{type:"array",items:pa}},required:["nodes","connections","slots","texts"]},signal:{type:"array",items:ma}},required:["id","data","signal"]},ri=ca.compile(ya);function ga(t,e,s){if(!s.target){console.error("Falha ao tentar carregar os dados da entrada de dados");return}const n=s.target;if(!n.files||!n.files[0])return;const r=new FileReader;r.readAsArrayBuffer(n.files[0]),r.onload=()=>{if(!r.result||typeof r.result=="string")return;const i=Yr(new Uint8Array(r.result)),o=JSON.parse(new TextDecoder().decode(i));if(!ri(o)){window.alert("Falha ao carregar projeto! Arquivo inválido ou corrompido."),console.error("Falha ao carregar projeto! Arquivo inválido ou corrompido.",ri.errors);return}t.editorEnv=lt.createFromJson(o,e,t.editorEnv.nodeImageList)}}function Qi(t){const e=window.prompt("Salvar projeto como:",`${t.documentId}-${Date.now()}`);if(e===null)return;const s=document.createElement("a"),n=new TextEncoder().encode(t.saveAsJson()),r=Xr(n,{level:6});s.href=URL.createObjectURL(new Blob([r],{type:"application/gzip"})),s.download=`${e}.simulation`,s.click()}function va(t){return confirm(`Deseja limpar o editor?
Qualquer progresso não salvo será perdido!`)===!0?new lt(t.documentId,0,t.nodeImageList):t}class wa{_keyboard;constructor(e){this._keyboard=e}onKeyDown(e){this._keyboard.nKeysPressed!==0&&(this._keyboard.keyPressed?this._keyboard.keyHold=!0:(this._keyboard.keyPressed=!0,this._keyboard.keyHold=!1),this._keyboard.keyHold||this.handleKeyPressed(e))}handleKeyPressed(e){const s=this._keyboard.getKeysPressed();s[pe.ADD]||s[pe.ADD_u]?e.node(z.G_AND):s[pe.NAND]||s[pe.NAND_u]?e.node(z.G_NAND):s[pe.NOR]||s[pe.NOR_u]?e.node(z.G_NOR):s[pe.NOT]||s[pe.NOT_u]?e.node(z.G_NOT):s[pe.OR]||s[pe.OR_u]?e.node(z.G_OR):s[pe.XNOR]||s[pe.XNOR_u]?e.node(z.G_XNOR):s[pe.XOR]||s[pe.XOR_u]?e.node(z.G_XOR):s[He.SWITCH]||s[He.SWITCH_u]?e.input(z.I_SWITCH):s[He.BUTTON]||s[He.BUTTON_u]?e.input(z.I_BUTTON):s[He.CLOCK]||s[He.CLOCK_u]?e.input(z.I_CLOCK):s[it.LED_RED]||s[it.LED_RED_u]?e.output(z.O_LED_RED):s[it.SEGMENTS]||s[it.SEGMENTS_u]?e.output(z.O_7_SEGMENTS):s[ks.DELETE]?e.remove():s[ks.INSERT]&&Qi(e.editorEnv)}onKeyUp(){this._keyboard.keyPressed&&this._keyboard.nKeysPressed===0&&(this._keyboard.keyPressed=!1,this._keyboard.keyHold=!1)}}class _a{keys={};keyPressed=!1;keyHold=!1;stateChange=!1;_nKeysPressed=0;get nKeysPressed(){return this._nKeysPressed}set nKeysPressed(e){e<0&&console.warn("Número de teclas pressionadas é menor que 0!"),this._nKeysPressed=Math.max(0,e)}setKeyPressed(e,s){this.keys[e]=s,this.nKeysPressed+=s?1:-1}getKeysPressed(){return this.keys}}const ka=[hi,ui,fi,pi,mi,yi,gi,vi,wi,_i,ki,bi,Ei,Ii,Oi,Ti,Ni,Ci,Ri,xi,Mi,ji];function ba(){const t={};for(const e of ka)wr(e).then(s=>{t[e]=s}).catch(()=>{console.warn("Erro ao carregar as imagens.")});return t}function $a(t,e,s){if(!window){console.error("Variável window é nula! Não será possível iniciar o editor");return}window.onload=()=>{t.resize(),setInterval(t.compute,1e3/t.tickRate),t.update(),setTimeout(()=>{document.getElementById("app").style.visibility="visible",document.getElementById("app-toolbar").style.visibility="visible",document.getElementById("app").className="animate-show",document.getElementById("app-toolbar").className="animate-show",document.getElementById("loading-div").style.visibility="hidden"},1e3)},window.onresize=()=>t.resize(),e.onmousedown=()=>t.mouse.clicked=!0,e.onmouseup=e.onmouseout=()=>t.mouse.clicked=!1,window.onmousemove=({x:r,y:i})=>t.setLocalMousePosition(r,i),window.onkeydown=r=>t.keyboard.setKeyPressed(r.key,!0),window.onkeyup=r=>t.keyboard.setKeyPressed(r.key,!1);const n=document.getElementsByTagName("img");for(const r of n)!r.classList.contains("editor-component")||!r.parentElement||!r.parentElement.classList.contains("app-key-item")||!r.hasAttributes()||!r.draggable||r.parentElement.addEventListener("dragstart",i=>{i.dataTransfer?.setData("text/plain",r.id),i.dataTransfer?.setDragImage(r,r.width/2,r.height/2)});e.addEventListener("dragover",r=>{r.preventDefault()}),e.addEventListener("drop",r=>{r.preventDefault(),r.dataTransfer&&(t.setLocalMousePosition(r.x,r.y),t.addByDrapAndDrop(r.dataTransfer.getData("text/plain")))}),document.getElementById("save-editor")?.addEventListener("click",()=>Qi(t.editorEnv)),document.getElementById("load-editor")?.addEventListener("click",()=>{document.getElementById("load-editor-file")?.click()}),document.getElementById("load-editor-file")?.addEventListener("change",r=>ga(t,t.canvasCtx,r)),document.getElementById("clear-editor")?.addEventListener("click",()=>{t.editorEnv=va(t.editorEnv)})}class Sa{editorEnv;mouse;keyboard;mouseEvents;keyboardEvents;canvasId;canvasCtx;backgroundCtx;backgroundPattern;windowResized;tickRate;constructor(e,s,n,r=60){this.editorEnv=new lt(e,0,ba()),this.mouse=new Mr,this.keyboard=new _a,this.mouseEvents=new me(this.mouse),this.keyboardEvents=new wa(this.keyboard);const i=document.getElementById(s),o=document.getElementById(n);this.canvasId=s,this.canvasCtx=this.createContext(i),this.backgroundCtx=this.createContext(o),this.backgroundPattern=null,this.loadBackgroundPattern(tr),this.windowResized=!0,this.tickRate=r,$a(this,i)}createContext(e){return e.getContext("2d",{desynchronized:!0})}loadBackgroundPattern(e){const s=new Image;s.onload=()=>{this.backgroundPattern=this.backgroundCtx.createPattern(s,"repeat")},s.src=e}getEditorArea(){const e=document.getElementById(this.canvasId)?.parentElement,s=new C(0,0);if(e){const n=window.getComputedStyle(e);s.x=parseFloat(n.width.substring(0,n.length-2)),s.y=parseFloat(n.height.substring(0,n.length-2))}else s.x=window.innerWidth,s.y=window.innerHeight;return s}setLocalMousePosition(e,s){const n=this.canvasCtx.canvas.getBoundingClientRect();this.mouse.position=new C(e-n.left,s-n.top)}resize(){const e=this.getEditorArea();this.canvasCtx.canvas.width=e.x,this.canvasCtx.canvas.height=e.y,this.backgroundCtx.canvas.width=e.x,this.backgroundCtx.canvas.height=e.y,this.windowResized=!0}update=()=>{nr(this.canvasCtx,this.editorEnv.components),this.windowResized&&(ir(this.backgroundCtx,this.backgroundPattern),this.windowResized=!1),requestAnimationFrame(this.update)};compute=()=>{this.keyboardEvents.onKeyDown(this),this.keyboardEvents.onKeyUp(),this.mouseEvents.onMouseClick(this.editorEnv),this.mouseEvents.onMouseMove(this.editorEnv),this.mouseEvents.onMouseRelease(this.editorEnv),bs.onPhysicsEngineUpdate(this.editorEnv.nodes,this.editorEnv.signalGraph)};node(e=z.G_AND,s=this.mouse.position.x,n=this.mouse.position.y){return we.node(void 0,this.editorEnv,this.canvasCtx.canvas.width,this.canvasCtx.canvas.height,e,s,n)}input(e=z.I_SWITCH,s=this.mouse.position.x,n=this.mouse.position.y){return we.input(void 0,this.editorEnv,this.canvasCtx.canvas.width,this.canvasCtx.canvas.height,e,s,n)}output(e=z.O_LED_RED,s=this.mouse.position.x,n=this.mouse.position.y){return we.output(void 0,this.editorEnv,this.canvasCtx.canvas.width,this.canvasCtx.canvas.height,e,s,n)}line(e,s,n,r,i,o){return we.connection(void 0,this.editorEnv,e,s,n,r,i,o)}text(e,s,n,r,i){return we.text(void 0,this.editorEnv,this.canvasCtx,e,s,n,r,i)}slot(e,s,n,r,i,o,h,p,w){return we.slot(void 0,this.editorEnv,e,s,n,r,i,o,h,p,w)}remove(){return this.mouseEvents.getCollisionList().nodes.length!==0?this.editorEnv.removeComponent(this.mouseEvents.getCollisionList().nodes[0]):this.mouseEvents.getCollisionList().connections.length!==0?this.editorEnv.removeComponent(this.mouseEvents.getCollisionList().connections[0]):this.mouseEvents.getCollisionList().texts.length!==0?this.editorEnv.removeComponent(this.mouseEvents.getCollisionList().texts[0]):!1}addByDrapAndDrop(e){switch(e){case"and-gate":return this.node(z.G_AND);case"or-gate":return this.node(z.G_OR);case"not-gate":return this.node(z.G_NOT);case"nand-gate":return this.node(z.G_NAND);case"nor-gate":return this.node(z.G_NOR);case"xor-gate":return this.node(z.G_XOR);case"xnor-gate":return this.node(z.G_XNOR);case"switch-input":return this.input(z.I_SWITCH);case"button-input":return this.input(z.I_BUTTON);case"clock-input":return this.input(z.I_CLOCK);case"led-red-output":return this.output(z.O_LED_RED);case"seven-segments-output":return this.output(z.O_7_SEGMENTS);default:return-1}}}new Sa("teste","editor-canvas","editor-background");
