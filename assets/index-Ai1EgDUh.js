var qe=Object.defineProperty;var Xe=(i,t,e)=>t in i?qe(i,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):i[t]=e;var r=(i,t,e)=>Xe(i,typeof t!="symbol"?t+"":t,e);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))s(n);new MutationObserver(n=>{for(const o of n)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&s(a)}).observe(document,{childList:!0,subtree:!0});function e(n){const o={};return n.integrity&&(o.integrity=n.integrity),n.referrerPolicy&&(o.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?o.credentials="include":n.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function s(n){if(n.ep)return;n.ep=!0;const o=e(n);fetch(n.href,o)}})();var F=(i=>(i.ADD="a",i.ADD_u="A",i.NAND="d",i.NAND_u="D",i.NOR="r",i.NOR_u="R",i.NOT="n",i.NOT_u="N",i.OR="o",i.OR_u="O",i.XNOR="v",i.XNOR_u="V",i.XOR="x",i.XOR_u="X",i))(F||{}),ct=(i=>(i.SWITCH="s",i.SWITCH_u="S",i.BUTTON="b",i.BUTTON_u="B",i.CLOCK="k",i.CLOCK_u="K",i))(ct||{}),bt=(i=>(i.LED_RED="l",i.LED_RED_u="L",i.SEGMENTS="e",i.SEGMENTS_u="E",i))(bt||{}),Ft=(i=>(i.DELETE="Delete",i.BACKSPACE="Backspace",i.INSERT="Insert",i))(Ft||{}),R=(i=>(i[i.LINE=1]="LINE",i[i.NODE=2]="NODE",i[i.TEXT=3]="TEXT",i[i.SLOT=4]="SLOT",i[i.INPUT=5]="INPUT",i[i.OUTPUT=6]="OUTPUT",i))(R||{}),S=(i=>(i[i.G_AND=0]="G_AND",i[i.G_NAND=1]="G_NAND",i[i.G_NOR=2]="G_NOR",i[i.G_NOT=3]="G_NOT",i[i.G_OR=4]="G_OR",i[i.G_XNOR=5]="G_XNOR",i[i.G_XOR=6]="G_XOR",i[i.I_SWITCH=100]="I_SWITCH",i[i.I_BUTTON=101]="I_BUTTON",i[i.I_CLOCK=102]="I_CLOCK",i[i.O_LED_RED=200]="O_LED_RED",i[i.O_7_SEGMENTS=201]="O_7_SEGMENTS",i))(S||{}),_=(i=>(i[i.MOUSE_CLICKED=0]="MOUSE_CLICKED",i[i.MOUSE_RELEASED=1]="MOUSE_RELEASED",i[i.MOUSE_DRAGGED=2]="MOUSE_DRAGGED",i[i.KEY_PRESSED=10]="KEY_PRESSED",i[i.KEY_RELEASED=11]="KEY_RELEASED",i[i.KEY_HOLDED=12]="KEY_HOLDED",i[i.FOCUS_IN=20]="FOCUS_IN",i[i.FOCUS_OUT=21]="FOCUS_OUT",i[i.CLOCK_TRIGGERED=30]="CLOCK_TRIGGERED",i[i.CLOCK_FINISHED=31]="CLOCK_FINISHED",i[i.PHYSICS_ENGINE_CYCLE=40]="PHYSICS_ENGINE_CYCLE",i))(_||{});const Ke="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'?%3e%3csvg%20width='64'%20height='64'%20version='1.1'%20viewBox='0%200%2016%2016'%20xmlns='http://www.w3.org/2000/svg'%3e%3cg%20fill='none'%20stroke='%23289fac'%20stroke-linejoin='round'%20stroke-opacity='.5'%20stroke-width='.3'%3e%3cpath%20d='m0%2010.82h16'/%3e%3cpath%20d='m0%205.482h16'/%3e%3cpath%20d='m0%200.0675h16'/%3e%3cpath%20d='m10.82%200v16'/%3e%3cpath%20d='m16.06%200v16'/%3e%3cpath%20d='m0.0675%200v16'/%3e%3cpath%20d='m5.482%200v16'/%3e%3cpath%20d='m0%2016.06h16'/%3e%3c/g%3e%3c/svg%3e",$e=["connections","nodes","slots","texts"];function ae(i){i.save(),i.setTransform(1,0,0,1,0,0),i.clearRect(0,0,i.canvas.width,i.canvas.height),i.restore()}function Qe(i,t){ae(i);for(const e of $e)for(const s of t[e].values())s.draw(i)}function Ye(i,t){ae(i),i.rect(0,0,i.canvas.width,i.canvas.height),i.fillStyle=t??"#ff0000",i.fill()}function Je(i){return i=i-(i>>1&1431655765),i=(i&858993459)+(i>>2&858993459),(i+(i>>4)&252645135)*16843009>>24}const Ve=(i,t)=>Kt(i),re=(i,t)=>{const e=(1<<t)-1;return(i&e)===e},ti=(i,t)=>!re(i,t),le=(i,t)=>!Kt(i),ei=(i,t)=>t>1?le(i):(i&1)!==1,Kt=(i,t)=>(i|0)!==0,ii=(i,t)=>!he(i),he=(i,t)=>Je(i)%2===1,rt={input_output:Ve,and:re,nand:ti,nor:le,not:ei,or:Kt,xnor:ii,xor:he},yt={updateGraph(i,t){const e=new Set,s=[t];let n=s.shift();for(;n!==void 0;)!e.has(n)&&i[n]!==void 0&&((i[n].nodeType<100||i[n].nodeType>=200)&&this.computeState(i,i[n]),s.push(...i[n].signalTo.values())),e.add(n),n=s.shift()},computeState(i,t){const e=this.getComputeFunction(t.nodeType);let s=0,n=0;for(const o of t.signalFrom.values()){if(o!==-1){const a=i[o].output?1:0;n+=a<<s}s++}t.output=e(n,s)},getComputeFunction(i){switch(i){case S.G_AND:return rt.and;case S.G_NAND:return rt.nand;case S.G_NOR:return rt.nor;case S.G_NOT:return rt.not;case S.G_OR:return rt.or;case S.G_XNOR:return rt.xnor;case S.G_XOR:return rt.xor;default:return rt.input_output}}},nt={vertex:{add(i,t,e,s,n=!1,o=new Map,a=new Set){if(i[t]===void 0){if(o.size===0)for(const h of Object.values(s.connectionSlot))h.in&&o.set(h.id,-1);i[t]={output:n,signalFrom:o,signalTo:a,nodeType:e},yt.updateGraph(i,t)}},remove(i,t){const e=i[t];if(e===void 0){console.warn(`Node ${t} não encontrado no grafo de sinal lógico ao ser removido!`);return}for(const s of e.signalTo.values())i[s]!==void 0&&i[s].signalFrom.forEach((n,o,a)=>{n===t&&a.delete(o)});delete i[t]},getState(i,t){return i[t].output??!1},setState(i,t,e){i[t]&&(i[t].output=e)}},edge:{add(i,t,e,s){const n=e.parent.id,o=s.parent.id;i[n]!==void 0?i[n].signalTo.add(o):console.warn(`Node inicial com ID ${o} não encontrado no grafo de sinal, isso poderá acarretar em bugs`,t),i[o]!==void 0?i[o].signalFrom.set(s.slotIdAtParent,n):console.warn(`Node final com ID ${o} não encontrado no grafo de sinal, isso poderá acarretar em bugs`,t),yt.updateGraph(i,n)},remove(i,t){var n,o,a,h;if(t===void 0)return;const e=((n=t.connectedTo.start)==null?void 0:n.nodeId)??-1,s=((o=t.connectedTo.end)==null?void 0:o.nodeId)??-1;s>=0&&i[s]!==void 0&&i[s].signalFrom.delete(((a=t.connectedTo.end)==null?void 0:a.slotId)??-1),e>=0&&i[e]!==void 0&&i[e].signalTo.delete(((h=t.connectedTo.end)==null?void 0:h.nodeId)??-1),s!==-1&&yt.updateGraph(i,s)}}},ut={node(i,t){const e=i.nodes.get(t);if(e===void 0)return!1;for(let s=0;s<e.slots.length;s++)i.removeComponent(e.slots[s].id,R.SLOT);return nt.vertex.remove(i.signalGraph,t),i.nodes.delete(t)},slot(i,t){const e=i.slots.get(t);if(e===void 0)return!1;for(const s of Object.values(e.slotConnections))i.removeComponent(s.id,R.LINE);return i.slots.delete(t)},connection(i,t){var o,a;const e=i.connections.get(t);if(e===void 0)return!1;const s=i.slots.get(((o=e.connectedTo.start)==null?void 0:o.slotId)??-1),n=i.slots.get(((a=e.connectedTo.end)==null?void 0:a.slotId)??-1);if(s){const h=s.slotConnections.findIndex(f=>f.id===t);h!==-1&&s.slotConnections.splice(h,1)}if(n){const h=n.slotConnections.findIndex(f=>f.id===t);h!==-1&&n.slotConnections.splice(h,1)}return nt.edge.remove(i.signalGraph,e),i.connections.delete(t)},text(i,t){return i.texts.delete(t)}};class w{constructor(t=0,e=0){r(this,"type","float");r(this,"_x",0);r(this,"_y",0);typeof t=="number"?(this.x=t,this.y=e):w.isVector2(t)&&(this.x=t.x,this.y=t.y)}static get ZERO(){return new w}static get ONE(){return new w(1,1)}static get UP(){return new w(0,-1)}static get DOWN(){return new w(0,1)}static get LEFT(){return new w(-1,-0)}static get RIGHT(){return new w(1,0)}get x(){return this._x}set x(t){this._x=t}get y(){return this._y}set y(t){this._y=t}static isVector2(t){return typeof t=="object"&&t!==null&&"_x"in t&&"_y"in t&&"type"in t&&(t.type==="int"||t.type==="float")}add(t){return w.isVector2(t)?(this.x+=t.x,this.y+=t.y):(this.x+=t,this.y+=t),this}static add(t,e,s){return s??(s=w.ZERO),w.isVector2(e)?(s.x=t.x+e.x,s.y=t.y+e.y):(s.x=t.x+e,s.y=t.y+e),s}sub(t){return w.isVector2(t)?(this.x-=t.x,this.y-=t.y):(this.x-=t,this.y-=t),this}static sub(t,e,s){return s??(s=w.ZERO),w.isVector2(e)?(s.x=t.x-e.x,s.y=t.y-e.y):(s.x=t.x-e,s.y=t.y-e),s}mul(t){return w.isVector2(t)?(this.x*=t.x,this.y*=t.y):(this.x*=t,this.y*=t),this}static mul(t,e,s){return s??(s=w.ZERO),w.isVector2(e)?(s.x=t.x*e.x,s.y=t.y*e.y):(s.x=t.x*e,s.y=t.y*e),s}div(t){return w.isVector2(t)?(this.x/=t.x,this.y/=t.y):(this.x/=t,this.y/=t),this}static div(t,e,s){return s??(s=w.ZERO),w.isVector2(e)?(s.x=t.x/e.x,s.y=t.y/e.y):(s.x=t.x/e,s.y=t.y/e),s}dot(t){return this.x*t.x+this.y*t.y}static dot(t,e){return t.x*e.x+t.y*e.y}cross(t){return this.x*t.y-this.y*t.x}static cross(t,e){return t.x*e.y-t.y*e.x}len(){return Math.sqrt(this.lenSquared())}static len(t){return Math.sqrt(w.lenSquared(t))}lenSquared(){return this.dot(this)}static lenSquared(t){return w.dot(t,t)}madd(t,e){return this.x+=t.x*e,this.y+=t.y*e,this}static madd(t,e,s,n){return n??(n=new w(0,0)),n.x=t.x+e.x*s,n.y=t.y+e.y*s,n}lerp(t,e){return this.madd(w.sub(t,this),e)}static lerp(t,e,s,n){return w.madd(t,w.sub(e,t),s,n)}bilinear(t,e){return this.x=w.lerp(this,t,e.x).x,this.y=w.lerp(this,t,e.y).y,this}static bilinear(t,e,s,n){return n??(n=new w(0,0)),n.x=w.lerp(t,e,s.x,void 0).x,n.y=w.lerp(t,e,s.y,void 0).y,n}equals(t,e=1e-4){return Math.abs(this.x-t.x)<e&&Math.abs(this.y-t.y)<e}static equals(t,e,s=1e-4){return Math.abs(t.x-e.x)<s&&Math.abs(t.y-e.y)<s}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this}static min(t,e,s){return s??(s=new w(0,0)),s.x=Math.min(t.x,e.x),s.y=Math.min(t.y,e.y),s}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this}static max(t,e,s){return s??(s=new w(0,0)),s.x=Math.max(t.x,e.x),s.y=Math.max(t.y,e.y),s}rotate(t){const e=Math.sin(t),s=Math.cos(t);return this.x=this.x*s-this.y*e,this.y=this.x*e+this.y*s,this}static rotate(t,e,s){s??(s=new w(0,0));const n=Math.sin(e),o=Math.cos(e);return s.x=t.x*o-t.y*n,s.y=t.x*n+t.y*o,s}atan2(t){return Math.atan2(t.y-this.y,t.x-this.x)}static atan2(t,e){return Math.atan2(e.y-t.y,e.x-t.x)}normalize(){return this.div(this.len())}static normalize(t,e){return w.div(t,t.len(),e)}abs(){return this.x=Math.abs(this.x),this.y=Math.abs(this.y),this}static abs(t,e){return e??(e=new w(0,0)),e.x=Math.abs(t.x),e.y=Math.abs(t.y),e}copy(t){return this.x=t.x,this.y=t.y,this}static copy(t,e){return e.x=t.x,e.y=t.y,e}clone(){return new w(this)}static clone(t){return new w(t)}toPlainObject(){return{x:this.x,y:this.y}}}class l{constructor(t=0,e=0){r(this,"type","int");r(this,"_x",0);r(this,"_y",0);typeof t=="number"?(this.x=t,this.y=e):l.isVector2(t)&&(this.x=t.x,this.y=t.y)}static get ZERO(){return new l}static get ONE(){return new l(1,1)}static get UP(){return new l(0,-1)}static get DOWN(){return new l(0,1)}static get LEFT(){return new l(-1,-0)}static get RIGHT(){return new l(1,0)}get x(){return this._x}set x(t){this._x=Math.round(t)}get y(){return this._y}set y(t){this._y=Math.round(t)}static isVector2(t){return typeof t=="object"&&t!==null&&"_x"in t&&"_y"in t&&"type"in t&&(t.type==="int"||t.type==="float")}add(t){return l.isVector2(t)?(this.x+=t.x,this.y+=t.y):(this.x+=t,this.y+=t),this}static add(t,e,s){return s??(s=l.ZERO),l.isVector2(e)?(s.x=t.x+e.x,s.y=t.y+e.y):(s.x=t.x+e,s.y=t.y+e),s}sub(t){return l.isVector2(t)?(this.x-=t.x,this.y-=t.y):(this.x-=t,this.y-=t),this}static sub(t,e,s){return s??(s=l.ZERO),l.isVector2(e)?(s.x=t.x-e.x,s.y=t.y-e.y):(s.x=t.x-e,s.y=t.y-e),s}mul(t){return l.isVector2(t)?(this.x*=t.x,this.y*=t.y):(this.x*=t,this.y*=t),this}static mul(t,e,s){return s??(s=l.ZERO),l.isVector2(e)?(s.x=t.x*e.x,s.y=t.y*e.y):(s.x=t.x*e,s.y=t.y*e),s}div(t){return l.isVector2(t)?(this.x/=t.x,this.y/=t.y):(this.x/=t,this.y/=t),this}static div(t,e,s){return s??(s=l.ZERO),l.isVector2(e)?(s.x=t.x/e.x,s.y=t.y/e.y):(s.x=t.x/e,s.y=t.y/e),s}dot(t){return this.x*t.x+this.y*t.y}static dot(t,e){return t.x*e.x+t.y*e.y}cross(t){return this.x*t.y-this.y*t.x}static cross(t,e){return t.x*e.y-t.y*e.x}len(){return Math.sqrt(this.lenSquared())}static len(t){return Math.sqrt(l.lenSquared(t))}lenSquared(){return this.dot(this)}static lenSquared(t){return l.dot(t,t)}madd(t,e){return this.x+=t.x*e,this.y+=t.y*e,this}static madd(t,e,s,n){return n??(n=l.ZERO),n.x=t.x+e.x*s,n.y=t.y+e.y*s,n}lerp(t,e){return this.madd(l.sub(t,this),e)}static lerp(t,e,s,n){return l.madd(t,l.sub(e,t),s,n)}bilinear(t,e){return this.x=l.lerp(this,t,e.x).x,this.y=l.lerp(this,t,e.y).y,this}static bilinear(t,e,s,n){return n??(n=l.ZERO),n.x=l.lerp(t,e,s.x).x,n.y=l.lerp(t,e,s.y).y,n}equals(t,e=0){return e===0?this.x===t.x&&this.y===t.y:Math.abs(this.x-t.x)<e&&Math.abs(this.y-t.y)<e}static equals(t,e,s=0){return s===0?t.x===e.x&&t.y===e.y:Math.abs(t.x-e.x)<s&&Math.abs(t.y-e.y)<s}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this}static min(t,e,s){return s??(s=l.ZERO),s.x=Math.min(t.x,e.x),s.y=Math.min(t.y,e.y),s}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this}static max(t,e,s){return s??(s=l.ZERO),s.x=Math.max(t.x,e.x),s.y=Math.max(t.y,e.y),s}rotate(t){const e=Math.sin(t),s=Math.cos(t);return this.x=this.x*s-this.y*e,this.y=this.x*e+this.y*s,this}static rotate(t,e,s){s??(s=l.ZERO);const n=Math.sin(e),o=Math.cos(e);return s.x=t.x*o-t.y*n,s.y=t.x*n+t.y*o,s}atan2(t){return Math.atan2(t.y-this.y,t.x-this.x)}static atan2(t,e){return Math.atan2(e.y-t.y,e.x-t.x)}normalize(){return w.div(this,this.len())}static normalize(t,e){return w.div(t,t.len(),e)}abs(){return this.x=Math.abs(this.x),this.y=Math.abs(this.y),this}static abs(t,e){return e??(e=l.ZERO),e.x=Math.abs(t.x),e.y=Math.abs(t.y),e}copy(t){return this.x=t.x,this.y=t.y,this}static copy(t,e){return e.x=t.x,e.y=t.y,e}clone(){return new l(this)}static clone(t){return new l(t)}toPlainObject(){return{x:this.x,y:this.y}}}class Ct{constructor(t,e,s="#FF8008DC"){r(this,"position");r(this,"endPosition");r(this,"borderColor");r(this,"drawPath");r(this,"regenPath");r(this,"lineLength");this.position=t,this.endPosition=e,this.lineLength=this.computeLineLength(),this.borderColor=s,this.regenPath=!0,this.drawPath=this.generatePath()}generatePath(){const t=new Path2D;return t.moveTo(this.position.x,this.position.y),t.lineTo(this.endPosition.x,this.endPosition.y),this.regenPath=!1,t}computeLineLength(){return l.sub(this.endPosition,this.position).len()}draw(t,e){e&&((!this.drawPath||this.regenPath)&&(this.drawPath=this.generatePath()),t.save(),t.strokeStyle=this.borderColor,t.stroke(this.drawPath),t.restore())}moveShape(t,e){e?(this.position.add(t),this.endPosition.add(t)):(this.position.add(l.sub(this.position,t)),this.endPosition.add(l.sub(this.position,t)))}collisionWithPoint(t){const e=l.sub(this.position,t).len(),s=l.sub(this.endPosition,t).len();return e+s-this.lineLength<1e-4}collisionWithBox(t){return t.collisionWithLine(this)}collisionWithCircle(t){if(t.collisionWithPoint(this.position)||t.collisionWithPoint(this.endPosition))return!0;const e=((t.position.x-this.position.x)*(this.endPosition.x-this.position.x)+(t.position.y-this.position.y)*(this.endPosition.y-this.position.y))/Math.pow(this.lineLength,2),s=new l(this.position.x+e*(this.endPosition.x-this.position.x),this.position.y+e*(this.endPosition.y-this.position.y));return this.collisionWithPoint(s)?l.sub(s,t.position).len()<t.radius:!1}collisionWithLine(t){const e=(this.position.x-this.endPosition.x)*(t.position.y-t.endPosition.y)-(this.position.y-this.endPosition.y)*(t.position.x-t.endPosition.x);if(e===0)return!!(this.collisionWithPoint(t.position)||this.collisionWithPoint(t.endPosition)||t.collisionWithPoint(this.position));const s=(this.position.x-t.position.x)*(t.position.y-t.endPosition.y)-(this.position.y-t.position.y)*(t.position.x-t.endPosition.x),n=(this.position.x-this.endPosition.x)*(this.position.y-t.position.y)-(this.position.y-this.endPosition.y)*(this.position.x-t.position.x),o=s/e,a=-(n/e);return o>=0&&o<=1&&a>=0&&a<=1}}class ot{constructor(t,e=2,s=2,n="#FF8008DC"){r(this,"position");r(this,"localVertices");r(this,"vertices");r(this,"width");r(this,"height");r(this,"drawPath");r(this,"regenPath");r(this,"borderColor");this.position=t,this.width=e,this.height=s,this.borderColor=n,this.localVertices=this.setLocalVertices(),this.regenPath=!1,this.vertices={a:l.add(this.position,this.localVertices.a),b:l.add(this.position,this.localVertices.b),c:l.add(this.position,this.localVertices.c),d:l.add(this.position,this.localVertices.d)}}setVertices(){l.add(this.position,this.localVertices.a,this.vertices.a),l.add(this.position,this.localVertices.b,this.vertices.b),l.add(this.position,this.localVertices.c,this.vertices.c),l.add(this.position,this.localVertices.d,this.vertices.d)}setLocalVertices(){return Object.freeze({a:new l,b:new l(this.width,0),c:new l(this.width,this.height),d:new l(0,this.height)})}generatePath(){const t=new Path2D;return t.rect(this.vertices.a.x,this.vertices.a.y,this.width,this.height),this.regenPath=!1,t}draw(t,e){e&&((!this.drawPath||this.regenPath)&&(this.drawPath=this.generatePath()),t.save(),t.strokeStyle=this.borderColor,t.stroke(this.drawPath),t.restore())}moveShape(t,e=!0){e?this.position.add(t):this.position.copy(t),this.setVertices(),this.regenPath=!0}collisionWithPoint(t){return t.x>this.vertices.a.x&&t.x<this.vertices.c.x&&t.y>this.vertices.a.y&&t.y<this.vertices.c.y}collisionWithBox(t){return!(this.vertices.c.x<t.vertices.a.x||this.vertices.c.y<t.vertices.a.y||this.vertices.a.x>t.vertices.c.x||this.vertices.a.y>t.vertices.c.y)}collisionWithCircle(t){return t.collisionWithBox(this)}collisionWithLine(t){const e=new Ct(this.vertices.a,this.vertices.d),s=new Ct(this.vertices.a,this.vertices.b),n=new Ct(this.vertices.b,this.vertices.c),o=new Ct(this.vertices.c,this.vertices.d);return this.collisionWithPoint(t.position)||this.collisionWithPoint(t.endPosition)||t.collisionWithLine(e)||t.collisionWithLine(s)||t.collisionWithLine(n)||t.collisionWithLine(o)}}const si={setCollisionShapeSize(i,t,e=0,s=0,n=0,o=0,a=1e-4){return new w(Math.abs(i.x-t.x)<a?e:s,Math.abs(i.y-t.y)<a?n:o)},generateCollisionShapes(i,t,e){if(e.length===0)return[];const s=[],n=new l(6,6),o=i.clone(),a=new l;for(let h=0;h<=e.length;h++){h<e.length?l.bilinear(i,t,e[h],a):a.copy(t);const f=this.setCollisionShapeSize(o,a,12,a.x-o.x,12,a.y-o.y);s.push(new ot(o.sub(n),f.x,f.y)),o.copy(a)}return s}},Jt=Math.PI*.5,ni=Math.PI*1.5,Nt=Math.PI*.25,Et=Math.PI*.75;function oi(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var Dt={exports:{}},ai=Dt.exports,Vt;function ri(){return Vt||(Vt=1,function(i,t){(function(){var e,s,n,o,a,h,f,m,c,p,y,I,T,v,M;n=Math.floor,p=Math.min,s=function(d,g){return d<g?-1:d>g?1:0},c=function(d,g,u,k,P){var b;if(u==null&&(u=0),P==null&&(P=s),u<0)throw new Error("lo must be non-negative");for(k==null&&(k=d.length);u<k;)b=n((u+k)/2),P(g,d[b])<0?k=b:u=b+1;return[].splice.apply(d,[u,u-u].concat(g)),g},h=function(d,g,u){return u==null&&(u=s),d.push(g),v(d,0,d.length-1,u)},a=function(d,g){var u,k;return g==null&&(g=s),u=d.pop(),d.length?(k=d[0],d[0]=u,M(d,0,g)):k=u,k},m=function(d,g,u){var k;return u==null&&(u=s),k=d[0],d[0]=g,M(d,0,u),k},f=function(d,g,u){var k;return u==null&&(u=s),d.length&&u(d[0],g)<0&&(k=[d[0],g],g=k[0],d[0]=k[1],M(d,0,u)),g},o=function(d,g){var u,k,P,b,O,C;for(g==null&&(g=s),b=(function(){C=[];for(var x=0,N=n(d.length/2);0<=N?x<N:x>N;0<=N?x++:x--)C.push(x);return C}).apply(this).reverse(),O=[],k=0,P=b.length;k<P;k++)u=b[k],O.push(M(d,u,g));return O},T=function(d,g,u){var k;if(u==null&&(u=s),k=d.indexOf(g),k!==-1)return v(d,0,k,u),M(d,k,u)},y=function(d,g,u){var k,P,b,O,C;if(u==null&&(u=s),P=d.slice(0,g),!P.length)return P;for(o(P,u),C=d.slice(g),b=0,O=C.length;b<O;b++)k=C[b],f(P,k,u);return P.sort(u).reverse()},I=function(d,g,u){var k,P,b,O,C,x,N,E,A;if(u==null&&(u=s),g*10<=d.length){if(b=d.slice(0,g).sort(u),!b.length)return b;for(P=b[b.length-1],N=d.slice(g),O=0,x=N.length;O<x;O++)k=N[O],u(k,P)<0&&(c(b,k,0,null,u),b.pop(),P=b[b.length-1]);return b}for(o(d,u),A=[],C=0,E=p(g,d.length);0<=E?C<E:C>E;0<=E?++C:--C)A.push(a(d,u));return A},v=function(d,g,u,k){var P,b,O;for(k==null&&(k=s),P=d[u];u>g;){if(O=u-1>>1,b=d[O],k(P,b)<0){d[u]=b,u=O;continue}break}return d[u]=P},M=function(d,g,u){var k,P,b,O,C;for(u==null&&(u=s),P=d.length,C=g,b=d[g],k=2*g+1;k<P;)O=k+1,O<P&&!(u(d[k],d[O])<0)&&(k=O),d[g]=d[k],g=k,k=2*g+1;return d[g]=b,v(d,C,g,u)},e=function(){d.push=h,d.pop=a,d.replace=m,d.pushpop=f,d.heapify=o,d.updateItem=T,d.nlargest=y,d.nsmallest=I;function d(g){this.cmp=g??s,this.nodes=[]}return d.prototype.push=function(g){return h(this.nodes,g,this.cmp)},d.prototype.pop=function(){return a(this.nodes,this.cmp)},d.prototype.peek=function(){return this.nodes[0]},d.prototype.contains=function(g){return this.nodes.indexOf(g)!==-1},d.prototype.replace=function(g){return m(this.nodes,g,this.cmp)},d.prototype.pushpop=function(g){return f(this.nodes,g,this.cmp)},d.prototype.heapify=function(){return o(this.nodes,this.cmp)},d.prototype.updateItem=function(g){return T(this.nodes,g,this.cmp)},d.prototype.clear=function(){return this.nodes=[]},d.prototype.empty=function(){return this.nodes.length===0},d.prototype.size=function(){return this.nodes.length},d.prototype.clone=function(){var g;return g=new d,g.nodes=this.nodes.slice(0),g},d.prototype.toArray=function(){return this.nodes.slice(0)},d.prototype.insert=d.prototype.push,d.prototype.top=d.prototype.peek,d.prototype.front=d.prototype.peek,d.prototype.has=d.prototype.contains,d.prototype.copy=d.prototype.clone,d}(),function(d,g){return i.exports=g()}(this,function(){return e})}).call(ai)}(Dt)),Dt.exports}var At,te;function li(){return te||(te=1,At=ri()),At}var hi=li();const ci=oi(hi),di={stepDirectionFromAtan2(i){const t=new w(0,0);return i<=Nt&&i>=-Nt&&(t.x=1),i>Nt&&i<Et&&(t.y=1),(i>=Et||i<=-Et)&&(t.x=-1),i<-Nt&&i>-Et&&(t.y=-1),t},getSearchArea(i,t,e=3){const n=w.sub(i,t).abs().clone().mul(e),o=l.min(i,t),a=l.max(i,t),h=w.add(o,a).div(2);return o.copy(w.sub(h,w.div(n,2))),new ot(o,n.x,n.y)},getCollisionsInArea(i,t){const e=new Map;for(const s of i.values())s.collisionShape.collisionWithBox(t)&&e.set(s.id,s);return e},floatEquals(i,t,e){return Math.abs(i-t)<e},currentDirection(i,t,e){const s=w.sub(t,i),n=s.len();if(s.equals(w.ZERO)&&n===0)return"e";const o=i.atan2(t);return this.floatEquals(o,Jt,e)?"y":this.floatEquals(o,0,e)?"x":"c"},optimizePath(i,t=1e-5){const e=[];let s="c";for(let n=0;n<i.length;n++){const o=this.currentDirection(i[Math.max(0,n-1)],i[Math.min(n,i.length-1)],t);o==="c"||o!==s&&s!=="e"?e.push(i[n]):o==="x"?e[e.length-1].x=i[n].x:o==="y"&&(e[e.length-1].y=i[n].y),s=o}return e.filter(n=>!n.equals(w.ONE))},simplePathFinder(i,t,e=new w(.5,1)){const s=[];if(i.equals(t))return s;const n=i.clone(),o=w.ZERO;let a=0;for(;!n.equals(t)&&!(a>15);){a++;const h=t.atan2(n),m=this.stepDirectionFromAtan2(h).abs().mul(e).add(o);s.push(m),l.bilinear(i,t,m,n),o.copy(m)}return s},stepCollisionExists(i,t,e,s,n){const o=l.bilinear(i,t,s);for(const a of n.values())if(a.collisionShape.collisionWithLine(new Ct(e,o)))return!0;return!1},manhattanDistance(i,t){return Math.abs(i.x-t.x)+Math.abs(i.y-t.y)},computeStepScore(i,t,e){return this.manhattanDistance(i,t)+this.manhattanDistance(t,e)},createPathFromScores(i,t){let e=i.get(`${t.x}::${t.y}`);const s=[];for(;e!==void 0;)s.push(e.t.clone()),e=e.from!==void 0?i.get(e.from):void 0;return i.clear(),s.reverse()},setNodeScore(i,t,e,s,n,o){var p;const a=`${s.x}::${s.y}`;let h,f=0;const m=((p=i.get(a))==null?void 0:p.score)??1/0;if(isNaN(m))return 3;if(o!==void 0){h=`${o.x}::${o.y}`;const y=i.get(h);if(f=(y==null?void 0:y.score)??0,s.equals(o))return 2;if((y==null?void 0:y.from)===h)return 4}const c=this.computeStepScore(t,s,e)+f/4;return c<m?(i.set(a,{position:s,t:n,from:h,score:c}),1):0},testStep(i,t,e,s,n,o,a,h,f){if(!w.min(h,f).equals(h))return[!1,l.ZERO,w.ZERO];const m=w.mul(n,f).add(s),c=l.bilinear(i,t,m);if(this.stepCollisionExists(i,t,e,m,o)){const p=w.mul(n,2).abs().max(w.ONE);return this.testStep(i,t,e,s,n,o,a,h,f.div(p))}return[!0,c,m]},getPossibleNextSteps(i,t,e,s,n,o,a){const h=[],f=this.stepDirectionFromAtan2(e.atan2(t)),m=[f,w.rotate(f,Jt),w.rotate(f,ni)];for(const c of m){const[p,y,I]=this.testStep(i,t,e,s,c,n,o,a,o.clone());p&&h.push([y,I])}return h},complexPathFinder(i,t,e){var m;const s=new Map;this.setNodeScore(s,i,t,i,new w(0,0),void 0);const n=new ci((c,p)=>c.score-p.score);n.push({key:`${i.x}::${i.y}`,score:s.get(`${i.x}::${i.y}`).score});const o=w.sub(i,t).abs().max(w.ONE),a=new w(.5,.5),h=new w(8,8).div(o).min(a);let f=0;for(;f<=512&&n.size()>0;){f++;const c=n.pop(),p=s.get(c.key),y=p.position,I=p.t;if(y.equals(t,8))return this.setNodeScore(s,i,t,t,new w(1,1),y),[!0,this.createPathFromScores(s,t)];const T=this.getPossibleNextSteps(i,t,y,I,e,a,h);if(T.length===0){s.set(c.key,{position:y,t:I,from:p.from,score:NaN}),p.from!==void 0&&n.push({key:p.from,score:s.get(p.from).score});continue}for(const v of T)switch(this.setNodeScore(s,i,t,v[0],v[1],y)){case 1:n.push({key:`${v[0].x}::${v[0].y}`,score:s.get(`${v[0].x}::${v[0].y}`).score});break;case 2:case 4:p.from&&n.push({key:p.from,score:((m=s.get(p.from))==null?void 0:m.score)??1/0}),p.score=NaN;break}}return[!1,[]]},find(i,t,e){if(i.equals(t,8))return[];const s=this.getSearchArea(i,t,1);let n=this.getCollisionsInArea(e,s);if(n.size===0)return this.simplePathFinder(i,t);{const o=this.getSearchArea(i,t,3);n=this.getCollisionsInArea(e,o);const[a,h]=this.complexPathFinder(i,t,n);return a?h:this.simplePathFinder(i,t)}}};var st=(i=>(i[i.START=0]="START",i[i.END=1]="END",i[i.BOTH=2]="BOTH",i[i.NONE=-1]="NONE",i))(st||{});class pi{constructor(t,e,s,n={start:void 0,end:void 0},o){r(this,"id");r(this,"position");r(this,"componentType");r(this,"endPosition");r(this,"anchors");r(this,"connectedTo");r(this,"drawPath");r(this,"regenPath");r(this,"collisionShape");r(this,"selected");this.id=t,this.position=e,this.componentType=R.LINE,this.endPosition=s,this.anchors=o??[new w(.25,0),new w(.25,.5),new w(.5,.5),new w(.5,1)],this.connectedTo=n,this.regenPath=!0,this.collisionShape=this.generateCollisionShapes(),this.selected=!1}generatePath(){const t=new Path2D;t.moveTo(this.position.x,this.position.y);const e=new l;for(let s=0;s<this.anchors.length;s++)l.bilinear(this.position,this.endPosition,this.anchors[s],e),t.lineTo(e.x,e.y);return t.lineTo(this.endPosition.x,this.endPosition.y),this.regenPath=!1,t}generateCollisionShapes(){return si.generateCollisionShapes(this.position,this.endPosition,this.anchors)}generateAnchors(t){return di.find(this.position,this.endPosition,t)}draw(t){if(this.endPosition!==this.position){(this.regenPath||!this.drawPath)&&(this.drawPath=this.generatePath()),t.save(),t.strokeStyle="#101010",t.lineWidth=2,t.lineJoin="round",t.stroke(this.drawPath),t.restore();for(let e=0;e<this.collisionShape.length;e++)this.collisionShape[e].draw(t,this.selected)}}addAnchor(t,e=this.anchors.length){this.anchors.splice(e,0,t),this.regenPath=!0}removePoint(t=this.anchors.length-1){if(t<0||t>=this.anchors.length){console.error("ConnectionComponent.removePoint - index is out of bounds!");return}this.anchors.splice(t,1),this.regenPath=!0}move(t,e=!0,s=2,n=!0,o=new Map){e?(s!==1&&this.position.add(t),s!==0&&this.endPosition.add(t)):(s===0&&this.position.copy(t),s===1&&this.endPosition.copy(t)),this.anchors=this.generateAnchors(o),n&&(this.collisionShape=this.generateCollisionShapes()),this.regenPath=!0}changeAnchor(t,e=this.anchors.length-1){if(e<0||e>=this.anchors.length){console.error("ConnectionComponent.changePosition - index is out of bounds!");return}this.anchors[e]=w.sub(t,this.position).div(w.sub(this.endPosition,this.position)),this.regenPath=!0}changeConnection(t,e,s=!1){t!==void 0&&e!==void 0?s?this.connectedTo.end={slotId:t,nodeId:e}:this.connectedTo.start={slotId:t,nodeId:e}:s?this.connectedTo.end=void 0:this.connectedTo.start=void 0}onEvent(t){switch(t){case _.FOCUS_IN:this.selected=!0;break;case _.FOCUS_OUT:this.selected=!1;break;default:return!1}return!0}toObject(){const t={id:this.id,componentType:this.componentType,position:this.position.toPlainObject(),endPosition:this.endPosition.toPlainObject(),anchors:[],connectedTo:this.connectedTo};return this.anchors.forEach(e=>t.anchors.push(e.toPlainObject())),t}}async function fi(i){const t=new Image;return t.src=i,await t.decode(),window.createImageBitmap(t)}function gt(i,t){const e={};let s=0;for(const n of t)Object.keys(i).includes(n)&&(e[s]=i[n],s++);return e}const ce="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'?%3e%3csvg%20width='88'%20height='50'%20version='1.1'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='m64%2025h25m-64-10h-26m27%2020h-27'%20fill='none'%20stroke='%23000'%20stroke-width='2'/%3e%3cpath%20d='m26.857%207.8571h17.619c9.7607%200%2016.667%207.64%2016.667%2017.143s-7.3822%2017.143-17.143%2017.143h-17.143z'%20fill='%23fff'/%3e%3cpath%20d='m24%205v40h20.476c11.268%200%2020-9%2020-20s-8.7321-20-20-20zm2.8571%202.8571h17.619c9.7607%200%2016.667%207.64%2016.667%2017.143s-7.3822%2017.143-17.143%2017.143h-17.143z'/%3e%3c/svg%3e",de="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'?%3e%3csvg%20width='88'%20height='50'%20version='1.1'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='m73%2025h16m-64-10h-26m27%2020h-27'%20fill='none'%20stroke='%23000'%20stroke-width='2'/%3e%3cpath%20d='m26.857%207.8571h17.619c9.7607%200%2016.667%207.64%2016.667%2017.143s-7.3822%2017.143-17.143%2017.143h-17.143z'%20fill='%23fff'/%3e%3cpath%20d='m24%205v40h20.476c11.268%200%2020-9%2020-20s-8.7321-20-20-20zm2.8571%202.8571h17.619c9.7607%200%2016.667%207.64%2016.667%2017.143s-7.3822%2017.143-17.143%2017.143h-17.143z'/%3e%3cpath%20d='m73%2025a4%204%200%201%201-8%200%204%204%200%201%201%208%200z'%20fill='%23fff'%20stroke='%23000'%20stroke-width='3'/%3e%3c/svg%3e",pe="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'?%3e%3csvg%20width='88'%20height='50'%20version='1.1'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='m73%2025h16m-64-10h-26m27%2020h-27'%20fill='none'%20stroke='%23000'%20stroke-width='2'/%3e%3cpath%20d='m23.969%208h11.281c4.6842%200%2018.287-0.13021%2027.969%2017-4.7668%208.4291-10.521%2012.684-15.719%2014.812-5.3607%202.1954-9.8419%202.1875-12.25%202.1875h-11.25c1.8736-3.1084%204.75-9.0494%204.75-17%200-7.9734-2.9085-13.9-4.7812-17z'%20fill='%23fff'%20fill-rule='evenodd'/%3e%3cpath%20d='m18.094%205%202%202.4375s5.6562%207%205.6562%2017.562-5.6562%2017.562-5.6562%2017.562l-2%202.4375h17.156c2.4081%201e-6%207.6897%200.02451%2013.625-2.4062%205.9353-2.4308%2012.537-7.3433%2017.688-16.875l-1.3125-0.71875%201.3125-0.71875c-10.303-19.066-26.556-19.281-31.312-19.281zm5.875%203h11.281c4.6842%200%2018.287-0.13021%2027.969%2017-4.7668%208.4291-10.521%2012.684-15.719%2014.812-5.3607%202.1954-9.8419%202.1875-12.25%202.1875h-11.25c1.8736-3.1084%204.75-9.0494%204.75-17%200-7.9734-2.9085-13.9-4.7812-17z'%20fill-rule='evenodd'/%3e%3cpath%20d='m73%2025a4%204%200%201%201-8%200%204%204%200%201%201%208%200z'%20fill='%23fff'%20stroke='%23000'%20stroke-width='3'/%3e%3c/svg%3e",fe="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'?%3e%3csvg%20width='88'%20height='50'%20version='1.1'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='m73.135%2025h15.843m-65.957%200h-24'%20fill='none'%20stroke='%23000'%20stroke-width='2'/%3e%3cpath%20d='m25.947%207.4063%2036.125%2017.594-36.125%2017.594z'%20fill='%23fff'/%3e%3cpath%20d='m72.978%2025a4%204%200%201%201-8%200%204%204%200%201%201%208%200z'%20fill='%23fff'%20stroke='%23000'%20stroke-width='3'/%3e%3cpath%20d='m22.947%202.5938v44.812l2.1562-1.0625%2041.031-20v-2.6875l-41.031-20zm3%204.8125%2036.125%2017.594-36.125%2017.594z'/%3e%3c/svg%3e",ue="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'?%3e%3csvg%20width='88'%20height='50'%20version='1.1'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='m64%2025h25m-64-10h-26m27%2020h-27'%20fill='none'%20stroke='%23000'%20stroke-width='2'/%3e%3cpath%20d='m23.969%208h11.281c4.6842%200%2018.287-0.13021%2027.969%2017-4.7668%208.4291-10.521%2012.684-15.719%2014.812-5.3607%202.1954-9.8419%202.1875-12.25%202.1875h-11.25c1.8736-3.1084%204.75-9.0494%204.75-17%200-7.9734-2.9085-13.9-4.7812-17z'%20fill='%23fff'%20fill-rule='evenodd'/%3e%3cpath%20d='m18.094%205%202%202.4375s5.6562%207%205.6562%2017.562-5.6562%2017.562-5.6562%2017.562l-2%202.4375h17.156c2.4081%201e-6%207.6897%200.02451%2013.625-2.4062%205.9353-2.4308%2012.537-7.3433%2017.688-16.875l-1.3125-0.71875%201.3125-0.71875c-10.303-19.066-26.556-19.281-31.312-19.281zm5.875%203h11.281c4.6842%200%2018.287-0.13021%2027.969%2017-4.7668%208.4291-10.521%2012.684-15.719%2014.812-5.3607%202.1954-9.8419%202.1875-12.25%202.1875h-11.25c1.8736-3.1084%204.75-9.0494%204.75-17%200-7.9734-2.9085-13.9-4.7812-17z'%20fill-rule='evenodd'/%3e%3c/svg%3e",ye="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'?%3e%3csvg%20width='88'%20height='50'%20version='1.1'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='m72.333%2025h16.667m-64.614-10h-25.386m26.362%2020h-26.362'%20fill='none'%20stroke='%23000'%20stroke-width='2'/%3e%3cg%20transform='translate(-6)'%20fill-rule='evenodd'%3e%3cpath%20d='m24.25%2042c-1.5974%202.6444-2.25%203-2.25%203h-3.6562l2-2.4375s5.6562-7.0001%205.6562-17.563-5.6562-17.562-5.6562-17.562l-2-2.4375h3.6562c0.78125%200.9375%201.4219%201.6562%202.2188%203%201.8727%203.0998%204.7812%209.0266%204.7812%2017%200%207.9506-2.8967%2013.879-4.75%2017z'/%3e%3cpath%20d='m29.969%208h11.281c4.6842%200%2018.287-0.13021%2027.969%2017-4.7668%208.4291-10.521%2012.684-15.719%2014.812-5.3607%202.1954-9.8419%202.1875-12.25%202.1875h-11.25c1.8736-3.1084%204.75-9.0494%204.75-17%200-7.9734-2.9085-13.9-4.7812-17z'%20fill='%23fff'/%3e%3cpath%20d='m24.094%205%202%202.4375s5.6562%207%205.6562%2017.562-5.6562%2017.562-5.6562%2017.562l-2%202.4375h17.156c2.4081%201e-6%207.6897%200.02451%2013.625-2.4062%205.9353-2.4308%2012.537-7.3433%2017.688-16.875l-1.3125-0.71875%201.3125-0.71875c-10.303-19.066-26.556-19.281-31.312-19.281zm5.875%203h11.281c4.6842%200%2018.287-0.13021%2027.969%2017-4.7668%208.4291-10.521%2012.684-15.719%2014.812-5.3607%202.1954-9.8419%202.1875-12.25%202.1875h-11.25c1.8736-3.1084%204.75-9.0494%204.75-17%200-7.9734-2.9085-13.9-4.7812-17z'/%3e%3c/g%3e%3cpath%20d='m73%2025a4%204%200%201%201-8%200%204%204%200%201%201%208%200z'%20fill='%23fff'%20stroke='%23000'%20stroke-width='3'/%3e%3c/svg%3e",ge="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'?%3e%3csvg%20width='88'%20height='50'%20version='1.1'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='m64%2025h25m-64.614-10h-25.386m26.362%2020h-26.362'%20fill='none'%20stroke='%23000'%20stroke-width='2'/%3e%3cg%20transform='translate(-6)'%20fill-rule='evenodd'%3e%3cpath%20d='m24.25%2042c-1.5974%202.6444-2.25%203-2.25%203h-3.6562l2-2.4375s5.6562-7%205.6562-17.562-5.6562-17.562-5.6562-17.562l-2-2.4375h3.6562c0.78125%200.9375%201.4219%201.6562%202.2188%203%201.8727%203.0998%204.7812%209.0266%204.7812%2017%200%207.9506-2.8967%2013.879-4.75%2017z'/%3e%3cpath%20d='m29.969%208h11.281c4.6842%200%2018.287-0.1302%2027.969%2017-4.7668%208.4291-10.521%2012.684-15.719%2014.812-5.3607%202.1954-9.8419%202.1875-12.25%202.1875h-11.25c1.8736-3.1084%204.75-9.0494%204.75-17%200-7.9734-2.9085-13.9-4.7812-17z'%20fill='%23fff'/%3e%3cpath%20d='m24.094%205%202%202.4375s5.6562%207%205.6562%2017.562-5.6562%2017.562-5.6562%2017.562l-2%202.4375h17.156c2.4081%200%207.6897%200.02451%2013.625-2.4062s12.537-7.3433%2017.688-16.875l-1.3125-0.71875%201.3125-0.71875c-10.303-19.066-26.556-19.281-31.312-19.281zm5.875%203h11.281c4.6842%200%2018.287-0.1302%2027.969%2017-4.7668%208.4291-10.521%2012.684-15.719%2014.812-5.3607%202.1954-9.8419%202.1875-12.25%202.1875h-11.25c1.8736-3.1084%204.75-9.0494%204.75-17%200-7.9734-2.9085-13.9-4.7812-17z'/%3e%3c/g%3e%3c/svg%3e",ui={id:S.G_AND,imgPath:[ce],connectionSlot:[{id:0,name:"A",in:!0,localPos:new l(-4,15)},{id:1,name:"B",in:!0,localPos:new l(-4,35)},{id:2,name:"C",in:!1,localPos:new l(92,25)}]},yi={id:S.G_NAND,imgPath:[de],connectionSlot:[{id:0,name:"A",in:!0,localPos:new l(-4,15)},{id:1,name:"B",in:!0,localPos:new l(-4,35)},{id:2,name:"C",in:!1,localPos:new l(92,25)}]},gi={id:S.G_NOR,imgPath:[pe],connectionSlot:[{id:0,name:"A",in:!0,localPos:new l(-4,15)},{id:1,name:"B",in:!0,localPos:new l(-4,35)},{id:2,name:"C",in:!1,localPos:new l(92,25)}]},ee={id:S.G_NOT,imgPath:[fe],connectionSlot:[{id:0,name:"In",in:!0,localPos:new l(-4,25)},{id:1,name:"Out",in:!1,localPos:new l(92,25)}]},mi={id:S.G_OR,imgPath:[ue],connectionSlot:[{id:0,name:"A",in:!0,localPos:new l(-4,15)},{id:1,name:"B",in:!0,localPos:new l(-4,35)},{id:2,name:"C",in:!1,localPos:new l(92,25)}]},wi={id:S.G_XNOR,imgPath:[ye],connectionSlot:[{id:0,name:"A",in:!0,localPos:new l(-4,15)},{id:1,name:"B",in:!0,localPos:new l(-4,35)},{id:2,name:"C",in:!1,localPos:new l(92,25)}]},ki={id:S.G_XOR,imgPath:[ge],connectionSlot:[{id:0,name:"A",in:!0,localPos:new l(-4,15)},{id:1,name:"B",in:!0,localPos:new l(-4,35)},{id:2,name:"C",in:!1,localPos:new l(92,25)}]};class It{constructor(t,e,s,n,o,a,h,f,m=!0){r(this,"id");r(this,"position");r(this,"componentType");r(this,"nodeType");r(this,"slots");r(this,"collisionShape");r(this,"_images");r(this,"imageSize");r(this,"halfImageSize");r(this,"imageMode","UP_LEFT");r(this,"_signalData");r(this,"selected");var c,p;if(this.id=t,this.position=e,this.componentType=R.NODE,this.nodeType=It.getNodeModel(s),this._signalData=f[this.id],this.slots=a,this._images=gt(h,this.nodeType.imgPath),this.imageSize=new l(((c=this.image)==null?void 0:c.width)??100,((p=this.image)==null?void 0:p.height)??100),this.halfImageSize=l.div(this.imageSize,2),m){this.imageMode="CENTER",this.position.sub(this.halfImageSize);const y=new l(n,o).sub(this.imageSize);this.position.min(y).max(l.ZERO)}this.collisionShape=new ot(this.position,this.imageSize.x,this.imageSize.y),this.selected=!1}get image(){return Object.keys(this._images).length===0?null:this._images[0]}get state(){return this._signalData.output??!1}static getNodeModel(t){switch(t){case S.G_AND:return ui;case S.G_NAND:return yi;case S.G_NOR:return gi;case S.G_NOT:return ee;case S.G_OR:return mi;case S.G_XNOR:return wi;case S.G_XOR:return ki;default:return ee}}move(t,e=!0){e?this.position.add(t):this.imageMode==="CENTER"?l.sub(t,this.halfImageSize,this.position):this.position.copy(t),this.collisionShape.moveShape(this.position,!1)}draw(t){this.image&&(t.drawImage(this.image,this.position.x,this.position.y),this.collisionShape!==void 0&&this.collisionShape.draw(t,this.selected))}onEvent(t){switch(t){case _.FOCUS_IN:this.selected=!0;break;case _.FOCUS_OUT:this.selected=!1;break;default:return!1}return!0}toObject(){return{id:this.id,componentType:this.componentType,nodeType:this.nodeType.id,position:this.position.toPlainObject(),slotIds:this.slots.map(e=>e.id),state:this.state}}}class vi{constructor(t,e,s="#FF8008DC"){r(this,"position");r(this,"radius");r(this,"radiusSquared");r(this,"drawPath");r(this,"regenPath");r(this,"borderColor");this.position=t,this.radius=e,this.radiusSquared=e*e,this.borderColor=s,this.regenPath=!1}generatePath(){const t=new Path2D;return t.arc(this.position.x,this.position.y,this.radius,0,Math.PI*2),this.regenPath=!1,t}draw(t,e){e&&((!this.drawPath||this.regenPath)&&(this.drawPath=this.generatePath()),t.save(),t.strokeStyle=this.borderColor,t.stroke(this.drawPath),t.restore())}moveShape(t,e=!0){e?this.position.add(t):this.position.copy(t),this.drawPath=this.generatePath()}collisionWithPoint(t){return l.sub(this.position,t).lenSquared()<this.radiusSquared}collisionWithBox(t){if(t.collisionWithPoint(this.position))return!0;const e=l.max(t.vertices.a,l.min(t.vertices.c,this.position));return l.sub(this.position,e).lenSquared()<this.radiusSquared}collisionWithCircle(t){return l.sub(this.position,t.position).len()<this.radius+t.radius}collisionWithLine(t){return t.collisionWithCircle(this)}}class xi{constructor(t,e,s,n,o=[],a=!0,h=4,f=12,m="#0880FF",c="#FF0000"){r(this,"id");r(this,"position");r(this,"globalPosition");r(this,"componentType");r(this,"parent");r(this,"slotIdAtParent");r(this,"_slotConnections");r(this,"drawPath");r(this,"regenPath");r(this,"selected");r(this,"inSlot");r(this,"color");r(this,"colorActive");r(this,"radius");r(this,"attractionRadius");r(this,"collisionShape");this.id=t,this.position=e,this.globalPosition=l.add(e,s.position),this.componentType=R.SLOT,this.parent=s,this.slotIdAtParent=n,this._slotConnections=o,this.color=m,this.colorActive=c,this.selected=!1,this.inSlot=a,this.radius=h,this.attractionRadius=f,this.collisionShape=new vi(this.globalPosition,this.attractionRadius),this.regenPath=!1}get slotConnections(){return this._slotConnections}set slotConnections(t){this.inSlot?(this._slotConnections.splice(0,this._slotConnections.length),this._slotConnections.push(t[0])):this._slotConnections=t}move(t,e=!0){l.add(this.position,this.parent.position,this.globalPosition),this.collisionShape.moveShape(this.globalPosition,!1),this.regenPath=!0}generatePath(){const t=new Path2D;return t.arc(this.globalPosition.x,this.globalPosition.y,this.radius,0,Math.PI*2),t}draw(t){(!this.drawPath||this.regenPath)&&(this.drawPath=this.generatePath()),t.save(),t.fillStyle=this.selected?this.colorActive:this.color,t.fill(this.drawPath),t.restore(),this.collisionShape.draw(t,this.selected)}onEvent(t){switch(t){case _.FOCUS_IN:this.selected=!0;break;case _.FOCUS_OUT:this.selected=!1;break;default:return!1}return!0}toObject(){return{id:this.id,componentType:this.componentType,position:this.position.toPlainObject(),parentId:this.parent.id,slotIdAtParent:this.slotIdAtParent,connectionIds:this.slotConnections.map(e=>e.id),inSlot:this.inSlot,color:this.color,colorActive:this.colorActive,radius:this.radius,attractionRadius:this.attractionRadius}}}class Si{constructor(t,e,s="",n="12px sans-serif",o,a){r(this,"id");r(this,"position");r(this,"componentType");r(this,"text");r(this,"parent");r(this,"style");r(this,"textSize");r(this,"collisionShape");r(this,"canvasContext");r(this,"selected");this.id=t,this.position=e,this.componentType=R.TEXT,this.text=s,this.style=n,this.parent=o,this.canvasContext=a,this.textSize=this.measureText(s,n),this.position.sub(l.div(this.textSize,2)),this.collisionShape=new ot(this.position,this.textSize.x,this.textSize.y),this.selected=!1}measureText(t,e){this.canvasContext.font=e,this.canvasContext.textBaseline="top",this.canvasContext.textAlign="left";const s=this.canvasContext.measureText(t);return new l(s.width,s.actualBoundingBoxDescent-s.actualBoundingBoxAscent).max(new l(16,16))}draw(t){t.save(),t.font=this.style,t.textBaseline="top",t.textAlign="left",t.fillText(this.text,this.position.x,this.position.y),t.restore(),this.collisionShape.draw(t,this.selected)}move(t,e=!0){e?this.position.add(t):l.sub(t,l.div(this.textSize,2),this.position),this.collisionShape.moveShape(this.position,!1)}onEvent(t){switch(t){case _.FOCUS_IN:this.selected=!0;break;case _.FOCUS_OUT:this.selected=!1;break;default:return!1}return!0}toObject(){return{id:this.id,componentType:this.componentType,position:this.position.toPlainObject(),text:this.text,parent:this.parent,style:this.style}}}const me="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4NCjxzdmcgd2lkdGg9IjcwIiBoZWlnaHQ9IjUwIiB2ZXJzaW9uPSIxLjEiIHZpZXdCb3g9IjAgMCA3MCA1MCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+DQogPGc+DQogIDxyZWN0IHg9IjEiIHk9IjEiIHdpZHRoPSI0OCIgaGVpZ2h0PSI0OCIgZmlsbD0iI2ZmZiIgc3Ryb2tlPSIjMDAwIiBzdHJva2Utd2lkdGg9IjIiLz4NCiAgPHBhdGggZD0ibTQ5LjUgMjUuMDQ0aDIxLjUiIGZpbGw9IiNmZmYiIHN0cm9rZT0iIzAwMCIgc3Ryb2tlLXdpZHRoPSIyLjExMzYiLz4NCiAgPHRleHQgeD0iMTUuODQ4IiB5PSIzNi40Mzk5OTkiIGZpbGw9IiMwMDAwMDAiIGZvbnQtc2l6ZT0iMzJweCIgc3Ryb2tlPSIjMDAwMDAwIiB4bWw6c3BhY2U9InByZXNlcnZlIj48dHNwYW4geD0iMTUuODQ4IiB5PSIzNi40Mzk5OTkiIGZpbGw9IiMwMDAwMDAiIGZvbnQtc2l6ZT0iMzJweCIgc3Ryb2tlPSIjMDAwMDAwIj4wPC90c3Bhbj48L3RleHQ+DQogPC9nPg0KPC9zdmc+DQo=",we="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4NCjxzdmcgd2lkdGg9IjcwIiBoZWlnaHQ9IjUwIiB2ZXJzaW9uPSIxLjEiIHZpZXdCb3g9IjAgMCA3MCA1MCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4NCiA8Zz4NCiAgPHJlY3QgeD0iMSIgeT0iMSIgd2lkdGg9IjQ4IiBoZWlnaHQ9IjQ4IiBmaWxsPSIjZmZmIiBzdHJva2U9IiMwMDAiIHN0cm9rZS13aWR0aD0iMiIvPg0KICA8cGF0aCBkPSJtNDkuNSAyNS4wNDRoMjEuNSIgZmlsbD0iI2ZmZiIgc3Ryb2tlPSIjMDAwIiBzdHJva2Utd2lkdGg9IjIuMTEzNiIvPg0KICA8dGV4dCB4PSIxNS44NDgiIHk9IjM2LjQzOTk5OSIgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMzJweCIgc3Ryb2tlPSIjMDAwMDAwIiBzdHlsZT0iZm9udC12YXJpYW50LWNhcHM6bm9ybWFsO2ZvbnQtdmFyaWFudC1lYXN0LWFzaWFuOm5vcm1hbDtmb250LXZhcmlhbnQtbGlnYXR1cmVzOm5vcm1hbDtmb250LXZhcmlhbnQtbnVtZXJpYzpub3JtYWwiIHhtbDpzcGFjZT0icHJlc2VydmUiPjx0c3Bhbj4xPC90c3Bhbj48L3RleHQ+DQogPC9nPg0KPC9zdmc+DQo=",ke="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'%20standalone='no'?%3e%3csvg%20width='70'%20height='50'%20version='1.1'%20viewBox='0%200%2070%2050'%20id='svg1'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:svg='http://www.w3.org/2000/svg'%3e%3cdefs%20id='defs1'%20/%3e%3cg%20id='g1'%20transform='translate(-0.96743465)'%3e%3cpath%20d='M%2049.5,25.044%20H%2071'%20fill='%23ffffff'%20stroke='%23000000'%20stroke-width='2.1136'%20id='path1'%20/%3e%3c/g%3e%3ccircle%20style='fill:%23ffffff;stroke:%23000000;stroke-width:2'%20id='path3'%20cx='25'%20cy='25'%20r='24'%20/%3e%3ccircle%20style='fill:%23b3b3b3;stroke:%23000000;stroke-width:1;stroke-dasharray:none'%20id='path4'%20cx='25'%20cy='25'%20r='20'%20/%3e%3c/svg%3e",ve="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'%20standalone='no'?%3e%3csvg%20width='70'%20height='50'%20version='1.1'%20viewBox='0%200%2070%2050'%20id='svg1'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:svg='http://www.w3.org/2000/svg'%3e%3cdefs%20id='defs1'%20/%3e%3cg%20id='g4'%3e%3cpath%20d='M%2049.5,25.044%20H%2071'%20fill='%23ffffff'%20stroke='%23000000'%20stroke-width='2.1136'%20id='path1'%20transform='translate(-0.96743465)'%20/%3e%3ccircle%20style='fill:%23ffffff;stroke:%23000000;stroke-width:2'%20id='path3'%20cx='25'%20cy='25'%20r='24'%20/%3e%3ccircle%20style='fill:%23ff0000;stroke:%23000000;stroke-width:1;stroke-dasharray:none'%20id='path4'%20cx='25'%20cy='25'%20r='20'%20/%3e%3c/g%3e%3c/svg%3e",xe="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'?%3e%3c!--%20Created%20with%20Inkscape%20(http://www.inkscape.org/)%20--%3e%3csvg%20width='60'%20height='50'%20version='1.1'%20viewBox='0%200%2060%2050'%20xmlns='http://www.w3.org/2000/svg'%3e%3cg%20stroke='%23000'%3e%3crect%20x='1'%20y='1'%20width='48'%20height='48'%20fill='%23fff'%20stroke-width='2'/%3e%3cpath%20d='m4.8716%2042.094h5.9456v-34.435h13.13v34.683h12.015v-34.683h9.1662'%20fill='none'/%3e%3cpath%20d='m49.671%2025h10.529'%20fill='none'%20stroke-width='2'/%3e%3c/g%3e%3c/svg%3e",Se={id:S.I_SWITCH,imgPath:[me,we],connectionSlot:[{id:0,in:!1,name:"Out",localPos:new l(74,25)}]},be={id:S.I_BUTTON,imgPath:[ke,ve],connectionSlot:[{id:0,in:!1,name:"Out",localPos:new l(74,25)}]},Ce={id:S.I_CLOCK,imgPath:[xe],connectionSlot:[{id:0,in:!1,name:"Out",localPos:new l(64,25)}]};class bi{constructor(t,e,s,n,o,a,h,f=!0){r(this,"id");r(this,"position");r(this,"componentType");r(this,"nodeType");r(this,"slots");r(this,"collisionShape");r(this,"_images");r(this,"imageSize");r(this,"halfImageSize");r(this,"imageMode","UP_LEFT");r(this,"_signalData");r(this,"selected");var m,c;if(this.id=t,this.position=e,this.componentType=R.INPUT,this.nodeType=Se,this._signalData=h[this.id],this.slots=o,this._images=gt(a,this.nodeType.imgPath),this.imageSize=new l(((m=this.image)==null?void 0:m.width)??100,((c=this.image)==null?void 0:c.height)??100),this.halfImageSize=l.div(this.imageSize,2),f){this.imageMode="CENTER",this.position.sub(this.halfImageSize);const p=new l(s,n).sub(this.imageSize);this.position.min(p).max(l.ZERO)}this.collisionShape=new ot(this.position,this.imageSize.x,this.imageSize.y),this.selected=!1}get image(){return Object.keys(this._images).length===0?null:this._images[this.state?1:0]}get state(){return this._signalData.output??!1}set state(t){this._signalData.output=t}move(t,e=!0){e?this.position.add(t):this.imageMode==="CENTER"?l.sub(t,this.halfImageSize,this.position):this.position.copy(t),this.collisionShape.moveShape(this.position,!1)}draw(t){this.image&&(t.drawImage(this.image,this.position.x,this.position.y),this.collisionShape!==void 0&&this.collisionShape.draw(t,this.selected))}onEvent(t){switch(t){case _.MOUSE_RELEASED:this.state=!this.state;break;case _.FOCUS_IN:this.selected=!0;break;case _.FOCUS_OUT:this.selected=!1;break;default:return!1}return!0}toObject(){return{id:this.id,componentType:this.componentType,nodeType:this.nodeType.id,position:this.position.toPlainObject(),slotIds:this.slots.map(e=>e.id),state:this.state}}}const Ie="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'?%3e%3csvg%20width='46.08'%20height='64'%20version='1.1'%20viewBox='0%200%2046.08%2064'%20xmlns='http://www.w3.org/2000/svg'%3e%3cg%20stroke='%23000'%20stroke-linejoin='round'%3e%3cpath%20d='m23.041%202.5131c-6.8934%200-12.445%204.8028-12.445%2010.768v18.825%202.7066h-7.2638v9.2635h39.415v-9.2635h-7.2638v-2.7066-18.825c0-5.9654-5.5488-10.768-12.442-10.768z'%20fill='%23d9d9d9'%20stroke-width='2.5854'/%3e%3cpath%20d='m9.619%2035.474h26.424'%20fill='%23fdfdfd'%20stroke-width='1.2927'/%3e%3cpath%20d='m23.04%2044.39v21.976'%20fill='%23fdfdfd'%20stroke-width='2.8546'/%3e%3c/g%3e%3c/svg%3e",Pe="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'?%3e%3csvg%20width='46.08'%20height='64'%20version='1.1'%20viewBox='0%200%2046.08%2064'%20xmlns='http://www.w3.org/2000/svg'%3e%3cg%20stroke='%23000'%20stroke-linejoin='round'%3e%3cpath%20d='m23.041%202.5131c-6.8934%200-12.445%204.8028-12.445%2010.768v18.825%202.7066h-7.2638v9.2635h39.415v-9.2635h-7.2638v-2.7066-18.825c0-5.9654-5.5488-10.768-12.442-10.768z'%20fill='%23ff4949'%20stroke-width='2.5854'/%3e%3cpath%20d='m9.619%2035.474h26.424'%20fill='%23fdfdfd'%20stroke-width='1.2927'/%3e%3cpath%20d='m23.04%2044.39v21.976'%20fill='%23fdfdfd'%20stroke-width='2.8546'/%3e%3c/g%3e%3c/svg%3e",Te="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'%20standalone='no'?%3e%3c!--%20Created%20with%20Inkscape%20(http://www.inkscape.org/)%20--%3e%3csvg%20width='90'%20height='120'%20viewBox='0%200%2090%20120'%20version='1.1'%20id='svg1'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:svg='http://www.w3.org/2000/svg'%3e%3cdefs%20id='defs1'%20/%3e%3cg%20id='layer1'%3e%3crect%20style='fill:%23ffffff;stroke:%23000000;stroke-width:1.98364;stroke-dasharray:none;fill-opacity:1'%20id='rect1'%20width='68.016357'%20height='118.01637'%20x='20.991819'%20y='0.99181795'%20/%3e%3cpath%20style='fill:%23b3b3b3;fill-opacity:1;stroke:none;stroke-width:2;stroke-dasharray:none'%20d='m%2037.896931,20.60398%202.443296,-2.225144%20h%2029.843106%20l%201.919733,2.225144%20-1.919733,2.225144%20H%2040.340227%20Z'%20id='path1'%20/%3e%3cpath%20style='fill:%23b3b3b3;fill-opacity:1;stroke:none;stroke-width:2;stroke-dasharray:none'%20d='m%2073.999998,23.18857%202.225144,2.443296%20v%2029.843106%20l%20-2.225144,1.919732%20-2.225144,-1.919732%20V%2025.631866%20Z'%20id='path1-5'%20/%3e%3cpath%20style='fill:%23b3b3b3;fill-opacity:1;stroke:none;stroke-width:2;stroke-dasharray:none'%20d='m%2037.89693,59.979294%202.443296,-2.225144%20h%2029.843107%20l%201.919732,2.225144%20-1.919732,2.225144%20H%2040.340226%20Z'%20id='path2'%20/%3e%3cpath%20style='fill:%23b3b3b3;fill-opacity:1;stroke:none;stroke-width:2;stroke-dasharray:none'%20d='m%2035.999998,23.18857%202.225144,2.443296%20v%2029.843106%20l%20-2.225144,1.919732%20-2.225144,-1.919732%20V%2025.631866%20Z'%20id='path3'%20/%3e%3cpath%20style='fill:%23b3b3b3;fill-opacity:1;stroke:none;stroke-width:2;stroke-dasharray:none'%20d='m%2073.999998,62.605295%202.225144,2.443296%20V%2094.891697%20L%2073.999998,96.81143%2071.774854,94.891697%20V%2065.048591%20Z'%20id='path4'%20/%3e%3cpath%20style='fill:%23b3b3b3;fill-opacity:1;stroke:none;stroke-width:2;stroke-dasharray:none'%20d='m%2037.89693,99.396019%202.443296,-2.225144%20h%2029.843107%20l%201.919732,2.225144%20-1.919732,2.225141%20H%2040.340226%20Z'%20id='path5'%20/%3e%3cpath%20style='fill:%23b3b3b3;fill-opacity:1;stroke:none;stroke-width:2;stroke-dasharray:none'%20d='m%2035.999998,62.605295%202.225144,2.443296%20V%2094.891697%20L%2035.999998,96.81143%2033.774854,94.891697%20V%2065.048591%20Z'%20id='path6'%20/%3e%3cpath%20style='fill:none;fill-opacity:1;stroke:%23000000;stroke-width:2;stroke-dasharray:none;stroke-opacity:1'%20d='M%2020.942532,17%20H%200'%20id='path7'%20/%3e%3cpath%20style='fill:none;fill-opacity:1;stroke:%23000000;stroke-width:2;stroke-dasharray:none;stroke-opacity:1'%20d='M%2020.942532,31.333333%20H%200'%20id='path8'%20/%3e%3cpath%20style='fill:none;fill-opacity:1;stroke:%23000000;stroke-width:2;stroke-dasharray:none;stroke-opacity:1'%20d='M%2020.942532,45.666667%20H%200'%20id='path9'%20/%3e%3cpath%20style='fill:none;fill-opacity:1;stroke:%23000000;stroke-width:2;stroke-dasharray:none;stroke-opacity:1'%20d='M%2020.942532,60%20H%200'%20id='path10'%20/%3e%3cpath%20style='fill:none;fill-opacity:1;stroke:%23000000;stroke-width:2;stroke-dasharray:none;stroke-opacity:1'%20d='M%2020.942532,74.333333%20H%200'%20id='path11'%20/%3e%3cpath%20style='fill:none;fill-opacity:1;stroke:%23000000;stroke-width:2;stroke-dasharray:none;stroke-opacity:1'%20d='M%2020.942532,88.666667%20H%200'%20id='path12'%20/%3e%3cpath%20style='fill:none;fill-opacity:1;stroke:%23000000;stroke-width:2;stroke-dasharray:none;stroke-opacity:1'%20d='M%2020.942532,103%20H%200'%20id='path13'%20/%3e%3c/g%3e%3c/svg%3e",Oe="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'%20standalone='no'?%3e%3c!--%20Created%20with%20Inkscape%20(http://www.inkscape.org/)%20--%3e%3csvg%20width='90'%20height='120'%20viewBox='0%200%2090%20120'%20version='1.1'%20id='svg1'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:svg='http://www.w3.org/2000/svg'%3e%3cdefs%20id='defs1'%20/%3e%3cg%20id='layer1'%3e%3crect%20style='display:none;fill:none;stroke:%23000000;stroke-width:1.98364;stroke-dasharray:none'%20id='rect1'%20width='68.016357'%20height='118.01637'%20x='20.991819'%20y='0.99181795'%20/%3e%3cpath%20style='fill:%23ff0000;fill-opacity:1;stroke:none;stroke-width:2;stroke-dasharray:none'%20d='m%2037.896931,20.60398%202.443296,-2.225144%20h%2029.843106%20l%201.919733,2.225144%20-1.919733,2.225144%20H%2040.340227%20Z'%20id='path1'%20/%3e%3cpath%20style='display:none;fill:%23ff0000;fill-opacity:1;stroke:none;stroke-width:2;stroke-dasharray:none'%20d='m%2073.999998,23.18857%202.225144,2.443296%20v%2029.843106%20l%20-2.225144,1.919732%20-2.225144,-1.919732%20V%2025.631866%20Z'%20id='path1-5'%20/%3e%3cpath%20style='display:none;fill:%23ff0000;fill-opacity:1;stroke:none;stroke-width:2;stroke-dasharray:none'%20d='m%2073.999998,62.605295%202.225144,2.443296%20V%2094.891697%20L%2073.999998,96.81143%2071.774854,94.891697%20V%2065.048591%20Z'%20id='path4'%20/%3e%3cpath%20style='display:none;fill:%23ff0000;fill-opacity:1;stroke:none;stroke-width:2;stroke-dasharray:none'%20d='m%2037.89693,99.396019%202.443296,-2.225144%20h%2029.843107%20l%201.919732,2.225144%20-1.919732,2.225141%20H%2040.340226%20Z'%20id='path5'%20/%3e%3cpath%20style='display:none;fill:%23ff0000;fill-opacity:1;stroke:none;stroke-width:2;stroke-dasharray:none'%20d='m%2035.999998,62.605295%202.225144,2.443296%20V%2094.891697%20L%2035.999998,96.81143%2033.774854,94.891697%20V%2065.048591%20Z'%20id='path6'%20/%3e%3cpath%20style='display:none;fill:%23ff0000;fill-opacity:1;stroke:none;stroke-width:2;stroke-dasharray:none'%20d='m%2035.999998,23.18857%202.225144,2.443296%20v%2029.843106%20l%20-2.225144,1.919732%20-2.225144,-1.919732%20V%2025.631866%20Z'%20id='path3'%20/%3e%3cpath%20style='display:none;fill:%23ff0000;fill-opacity:1;stroke:none;stroke-width:2;stroke-dasharray:none'%20d='m%2037.89693,59.979294%202.443296,-2.225144%20h%2029.843107%20l%201.919732,2.225144%20-1.919732,2.225144%20H%2040.340226%20Z'%20id='path2'%20/%3e%3cpath%20style='display:none;fill:none;fill-opacity:1;stroke:%23000000;stroke-width:2;stroke-dasharray:none;stroke-opacity:1'%20d='M%2020.942532,17%20H%200'%20id='path7'%20/%3e%3cpath%20style='display:none;fill:none;fill-opacity:1;stroke:%23000000;stroke-width:2;stroke-dasharray:none;stroke-opacity:1'%20d='M%2020.942532,31.333333%20H%200'%20id='path8'%20/%3e%3cpath%20style='display:none;fill:none;fill-opacity:1;stroke:%23000000;stroke-width:2;stroke-dasharray:none;stroke-opacity:1'%20d='M%2020.942532,45.666667%20H%200'%20id='path9'%20/%3e%3cpath%20style='display:none;fill:none;fill-opacity:1;stroke:%23000000;stroke-width:2;stroke-dasharray:none;stroke-opacity:1'%20d='M%2020.942532,60%20H%200'%20id='path10'%20/%3e%3cpath%20style='display:none;fill:none;fill-opacity:1;stroke:%23000000;stroke-width:2;stroke-dasharray:none;stroke-opacity:1'%20d='M%2020.942532,74.333333%20H%200'%20id='path11'%20/%3e%3cpath%20style='display:none;fill:none;fill-opacity:1;stroke:%23000000;stroke-width:2;stroke-dasharray:none;stroke-opacity:1'%20d='M%2020.942532,88.666667%20H%200'%20id='path12'%20/%3e%3cpath%20style='display:none;fill:none;fill-opacity:1;stroke:%23000000;stroke-width:2;stroke-dasharray:none;stroke-opacity:1'%20d='M%2020.942532,103%20H%200'%20id='path13'%20/%3e%3c/g%3e%3c/svg%3e",Me="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'%20standalone='no'?%3e%3c!--%20Created%20with%20Inkscape%20(http://www.inkscape.org/)%20--%3e%3csvg%20width='90'%20height='120'%20viewBox='0%200%2090%20120'%20version='1.1'%20id='svg1'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:svg='http://www.w3.org/2000/svg'%3e%3cdefs%20id='defs1'%20/%3e%3cg%20id='layer1'%3e%3crect%20style='display:none;fill:none;stroke:%23000000;stroke-width:1.98364;stroke-dasharray:none'%20id='rect1'%20width='68.016357'%20height='118.01637'%20x='20.991819'%20y='0.99181795'%20/%3e%3cpath%20style='display:none;fill:%23ff0000;fill-opacity:1;stroke:none;stroke-width:2;stroke-dasharray:none'%20d='m%2037.896931,20.60398%202.443296,-2.225144%20h%2029.843106%20l%201.919733,2.225144%20-1.919733,2.225144%20H%2040.340227%20Z'%20id='path1'%20/%3e%3cpath%20style='display:inline;fill:%23ff0000;fill-opacity:1;stroke:none;stroke-width:2;stroke-dasharray:none'%20d='m%2073.999998,23.18857%202.225144,2.443296%20v%2029.843106%20l%20-2.225144,1.919732%20-2.225144,-1.919732%20V%2025.631866%20Z'%20id='path1-5'%20/%3e%3cpath%20style='display:none;fill:%23ff0000;fill-opacity:1;stroke:none;stroke-width:2;stroke-dasharray:none'%20d='m%2073.999998,62.605295%202.225144,2.443296%20V%2094.891697%20L%2073.999998,96.81143%2071.774854,94.891697%20V%2065.048591%20Z'%20id='path4'%20/%3e%3cpath%20style='display:none;fill:%23ff0000;fill-opacity:1;stroke:none;stroke-width:2;stroke-dasharray:none'%20d='m%2037.89693,99.396019%202.443296,-2.225144%20h%2029.843107%20l%201.919732,2.225144%20-1.919732,2.225141%20H%2040.340226%20Z'%20id='path5'%20/%3e%3cpath%20style='display:none;fill:%23ff0000;fill-opacity:1;stroke:none;stroke-width:2;stroke-dasharray:none'%20d='m%2035.999998,62.605295%202.225144,2.443296%20V%2094.891697%20L%2035.999998,96.81143%2033.774854,94.891697%20V%2065.048591%20Z'%20id='path6'%20/%3e%3cpath%20style='display:none;fill:%23ff0000;fill-opacity:1;stroke:none;stroke-width:2;stroke-dasharray:none'%20d='m%2035.999998,23.18857%202.225144,2.443296%20v%2029.843106%20l%20-2.225144,1.919732%20-2.225144,-1.919732%20V%2025.631866%20Z'%20id='path3'%20/%3e%3cpath%20style='display:none;fill:%23ff0000;fill-opacity:1;stroke:none;stroke-width:2;stroke-dasharray:none'%20d='m%2037.89693,59.979294%202.443296,-2.225144%20h%2029.843107%20l%201.919732,2.225144%20-1.919732,2.225144%20H%2040.340226%20Z'%20id='path2'%20/%3e%3cpath%20style='display:none;fill:none;fill-opacity:1;stroke:%23000000;stroke-width:2;stroke-dasharray:none;stroke-opacity:1'%20d='M%2020.942532,17%20H%200'%20id='path7'%20/%3e%3cpath%20style='display:none;fill:none;fill-opacity:1;stroke:%23000000;stroke-width:2;stroke-dasharray:none;stroke-opacity:1'%20d='M%2020.942532,31.333333%20H%200'%20id='path8'%20/%3e%3cpath%20style='display:none;fill:none;fill-opacity:1;stroke:%23000000;stroke-width:2;stroke-dasharray:none;stroke-opacity:1'%20d='M%2020.942532,45.666667%20H%200'%20id='path9'%20/%3e%3cpath%20style='display:none;fill:none;fill-opacity:1;stroke:%23000000;stroke-width:2;stroke-dasharray:none;stroke-opacity:1'%20d='M%2020.942532,60%20H%200'%20id='path10'%20/%3e%3cpath%20style='display:none;fill:none;fill-opacity:1;stroke:%23000000;stroke-width:2;stroke-dasharray:none;stroke-opacity:1'%20d='M%2020.942532,74.333333%20H%200'%20id='path11'%20/%3e%3cpath%20style='display:none;fill:none;fill-opacity:1;stroke:%23000000;stroke-width:2;stroke-dasharray:none;stroke-opacity:1'%20d='M%2020.942532,88.666667%20H%200'%20id='path12'%20/%3e%3cpath%20style='display:none;fill:none;fill-opacity:1;stroke:%23000000;stroke-width:2;stroke-dasharray:none;stroke-opacity:1'%20d='M%2020.942532,103%20H%200'%20id='path13'%20/%3e%3c/g%3e%3c/svg%3e",_e="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'%20standalone='no'?%3e%3c!--%20Created%20with%20Inkscape%20(http://www.inkscape.org/)%20--%3e%3csvg%20width='90'%20height='120'%20viewBox='0%200%2090%20120'%20version='1.1'%20id='svg1'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:svg='http://www.w3.org/2000/svg'%3e%3cdefs%20id='defs1'%20/%3e%3cg%20id='layer1'%3e%3crect%20style='display:none;fill:none;stroke:%23000000;stroke-width:1.98364;stroke-dasharray:none'%20id='rect1'%20width='68.016357'%20height='118.01637'%20x='20.991819'%20y='0.99181795'%20/%3e%3cpath%20style='display:none;fill:%23ff0000;fill-opacity:1;stroke:none;stroke-width:2;stroke-dasharray:none'%20d='m%2037.896931,20.60398%202.443296,-2.225144%20h%2029.843106%20l%201.919733,2.225144%20-1.919733,2.225144%20H%2040.340227%20Z'%20id='path1'%20/%3e%3cpath%20style='display:none;fill:%23ff0000;fill-opacity:1;stroke:none;stroke-width:2;stroke-dasharray:none'%20d='m%2073.999998,23.18857%202.225144,2.443296%20v%2029.843106%20l%20-2.225144,1.919732%20-2.225144,-1.919732%20V%2025.631866%20Z'%20id='path1-5'%20/%3e%3cpath%20style='display:inline;fill:%23ff0000;fill-opacity:1;stroke:none;stroke-width:2;stroke-dasharray:none'%20d='m%2073.999998,62.605295%202.225144,2.443296%20V%2094.891697%20L%2073.999998,96.81143%2071.774854,94.891697%20V%2065.048591%20Z'%20id='path4'%20/%3e%3cpath%20style='display:none;fill:%23ff0000;fill-opacity:1;stroke:none;stroke-width:2;stroke-dasharray:none'%20d='m%2037.89693,99.396019%202.443296,-2.225144%20h%2029.843107%20l%201.919732,2.225144%20-1.919732,2.225141%20H%2040.340226%20Z'%20id='path5'%20/%3e%3cpath%20style='display:none;fill:%23ff0000;fill-opacity:1;stroke:none;stroke-width:2;stroke-dasharray:none'%20d='m%2035.999998,62.605295%202.225144,2.443296%20V%2094.891697%20L%2035.999998,96.81143%2033.774854,94.891697%20V%2065.048591%20Z'%20id='path6'%20/%3e%3cpath%20style='display:none;fill:%23ff0000;fill-opacity:1;stroke:none;stroke-width:2;stroke-dasharray:none'%20d='m%2035.999998,23.18857%202.225144,2.443296%20v%2029.843106%20l%20-2.225144,1.919732%20-2.225144,-1.919732%20V%2025.631866%20Z'%20id='path3'%20/%3e%3cpath%20style='display:none;fill:%23ff0000;fill-opacity:1;stroke:none;stroke-width:2;stroke-dasharray:none'%20d='m%2037.89693,59.979294%202.443296,-2.225144%20h%2029.843107%20l%201.919732,2.225144%20-1.919732,2.225144%20H%2040.340226%20Z'%20id='path2'%20/%3e%3cpath%20style='display:none;fill:none;fill-opacity:1;stroke:%23000000;stroke-width:2;stroke-dasharray:none;stroke-opacity:1'%20d='M%2020.942532,17%20H%200'%20id='path7'%20/%3e%3cpath%20style='display:none;fill:none;fill-opacity:1;stroke:%23000000;stroke-width:2;stroke-dasharray:none;stroke-opacity:1'%20d='M%2020.942532,31.333333%20H%200'%20id='path8'%20/%3e%3cpath%20style='display:none;fill:none;fill-opacity:1;stroke:%23000000;stroke-width:2;stroke-dasharray:none;stroke-opacity:1'%20d='M%2020.942532,45.666667%20H%200'%20id='path9'%20/%3e%3cpath%20style='display:none;fill:none;fill-opacity:1;stroke:%23000000;stroke-width:2;stroke-dasharray:none;stroke-opacity:1'%20d='M%2020.942532,60%20H%200'%20id='path10'%20/%3e%3cpath%20style='display:none;fill:none;fill-opacity:1;stroke:%23000000;stroke-width:2;stroke-dasharray:none;stroke-opacity:1'%20d='M%2020.942532,74.333333%20H%200'%20id='path11'%20/%3e%3cpath%20style='display:none;fill:none;fill-opacity:1;stroke:%23000000;stroke-width:2;stroke-dasharray:none;stroke-opacity:1'%20d='M%2020.942532,88.666667%20H%200'%20id='path12'%20/%3e%3cpath%20style='display:none;fill:none;fill-opacity:1;stroke:%23000000;stroke-width:2;stroke-dasharray:none;stroke-opacity:1'%20d='M%2020.942532,103%20H%200'%20id='path13'%20/%3e%3c/g%3e%3c/svg%3e",Ne="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'%20standalone='no'?%3e%3c!--%20Created%20with%20Inkscape%20(http://www.inkscape.org/)%20--%3e%3csvg%20width='90'%20height='120'%20viewBox='0%200%2090%20120'%20version='1.1'%20id='svg1'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:svg='http://www.w3.org/2000/svg'%3e%3cdefs%20id='defs1'%20/%3e%3cg%20id='layer1'%3e%3crect%20style='display:none;fill:none;stroke:%23000000;stroke-width:1.98364;stroke-dasharray:none'%20id='rect1'%20width='68.016357'%20height='118.01637'%20x='20.991819'%20y='0.99181795'%20/%3e%3cpath%20style='display:none;fill:%23ff0000;fill-opacity:1;stroke:none;stroke-width:2;stroke-dasharray:none'%20d='m%2037.896931,20.60398%202.443296,-2.225144%20h%2029.843106%20l%201.919733,2.225144%20-1.919733,2.225144%20H%2040.340227%20Z'%20id='path1'%20/%3e%3cpath%20style='display:none;fill:%23ff0000;fill-opacity:1;stroke:none;stroke-width:2;stroke-dasharray:none'%20d='m%2073.999998,23.18857%202.225144,2.443296%20v%2029.843106%20l%20-2.225144,1.919732%20-2.225144,-1.919732%20V%2025.631866%20Z'%20id='path1-5'%20/%3e%3cpath%20style='display:none;fill:%23ff0000;fill-opacity:1;stroke:none;stroke-width:2;stroke-dasharray:none'%20d='m%2073.999998,62.605295%202.225144,2.443296%20V%2094.891697%20L%2073.999998,96.81143%2071.774854,94.891697%20V%2065.048591%20Z'%20id='path4'%20/%3e%3cpath%20style='display:inline;fill:%23ff0000;fill-opacity:1;stroke:none;stroke-width:2;stroke-dasharray:none'%20d='m%2037.89693,99.396019%202.443296,-2.225144%20h%2029.843107%20l%201.919732,2.225144%20-1.919732,2.225141%20H%2040.340226%20Z'%20id='path5'%20/%3e%3cpath%20style='display:none;fill:%23ff0000;fill-opacity:1;stroke:none;stroke-width:2;stroke-dasharray:none'%20d='m%2035.999998,62.605295%202.225144,2.443296%20V%2094.891697%20L%2035.999998,96.81143%2033.774854,94.891697%20V%2065.048591%20Z'%20id='path6'%20/%3e%3cpath%20style='display:none;fill:%23ff0000;fill-opacity:1;stroke:none;stroke-width:2;stroke-dasharray:none'%20d='m%2035.999998,23.18857%202.225144,2.443296%20v%2029.843106%20l%20-2.225144,1.919732%20-2.225144,-1.919732%20V%2025.631866%20Z'%20id='path3'%20/%3e%3cpath%20style='display:none;fill:%23ff0000;fill-opacity:1;stroke:none;stroke-width:2;stroke-dasharray:none'%20d='m%2037.89693,59.979294%202.443296,-2.225144%20h%2029.843107%20l%201.919732,2.225144%20-1.919732,2.225144%20H%2040.340226%20Z'%20id='path2'%20/%3e%3cpath%20style='display:none;fill:none;fill-opacity:1;stroke:%23000000;stroke-width:2;stroke-dasharray:none;stroke-opacity:1'%20d='M%2020.942532,17%20H%200'%20id='path7'%20/%3e%3cpath%20style='display:none;fill:none;fill-opacity:1;stroke:%23000000;stroke-width:2;stroke-dasharray:none;stroke-opacity:1'%20d='M%2020.942532,31.333333%20H%200'%20id='path8'%20/%3e%3cpath%20style='display:none;fill:none;fill-opacity:1;stroke:%23000000;stroke-width:2;stroke-dasharray:none;stroke-opacity:1'%20d='M%2020.942532,45.666667%20H%200'%20id='path9'%20/%3e%3cpath%20style='display:none;fill:none;fill-opacity:1;stroke:%23000000;stroke-width:2;stroke-dasharray:none;stroke-opacity:1'%20d='M%2020.942532,60%20H%200'%20id='path10'%20/%3e%3cpath%20style='display:none;fill:none;fill-opacity:1;stroke:%23000000;stroke-width:2;stroke-dasharray:none;stroke-opacity:1'%20d='M%2020.942532,74.333333%20H%200'%20id='path11'%20/%3e%3cpath%20style='display:none;fill:none;fill-opacity:1;stroke:%23000000;stroke-width:2;stroke-dasharray:none;stroke-opacity:1'%20d='M%2020.942532,88.666667%20H%200'%20id='path12'%20/%3e%3cpath%20style='display:none;fill:none;fill-opacity:1;stroke:%23000000;stroke-width:2;stroke-dasharray:none;stroke-opacity:1'%20d='M%2020.942532,103%20H%200'%20id='path13'%20/%3e%3c/g%3e%3c/svg%3e",Ee="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'%20standalone='no'?%3e%3c!--%20Created%20with%20Inkscape%20(http://www.inkscape.org/)%20--%3e%3csvg%20width='90'%20height='120'%20viewBox='0%200%2090%20120'%20version='1.1'%20id='svg1'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:svg='http://www.w3.org/2000/svg'%3e%3cdefs%20id='defs1'%20/%3e%3cg%20id='layer1'%3e%3crect%20style='display:none;fill:none;stroke:%23000000;stroke-width:1.98364;stroke-dasharray:none'%20id='rect1'%20width='68.016357'%20height='118.01637'%20x='20.991819'%20y='0.99181795'%20/%3e%3cpath%20style='display:none;fill:%23ff0000;fill-opacity:1;stroke:none;stroke-width:2;stroke-dasharray:none'%20d='m%2037.896931,20.60398%202.443296,-2.225144%20h%2029.843106%20l%201.919733,2.225144%20-1.919733,2.225144%20H%2040.340227%20Z'%20id='path1'%20/%3e%3cpath%20style='display:none;fill:%23ff0000;fill-opacity:1;stroke:none;stroke-width:2;stroke-dasharray:none'%20d='m%2073.999998,23.18857%202.225144,2.443296%20v%2029.843106%20l%20-2.225144,1.919732%20-2.225144,-1.919732%20V%2025.631866%20Z'%20id='path1-5'%20/%3e%3cpath%20style='display:none;fill:%23ff0000;fill-opacity:1;stroke:none;stroke-width:2;stroke-dasharray:none'%20d='m%2073.999998,62.605295%202.225144,2.443296%20V%2094.891697%20L%2073.999998,96.81143%2071.774854,94.891697%20V%2065.048591%20Z'%20id='path4'%20/%3e%3cpath%20style='display:none;fill:%23ff0000;fill-opacity:1;stroke:none;stroke-width:2;stroke-dasharray:none'%20d='m%2037.89693,99.396019%202.443296,-2.225144%20h%2029.843107%20l%201.919732,2.225144%20-1.919732,2.225141%20H%2040.340226%20Z'%20id='path5'%20/%3e%3cpath%20style='display:inline;fill:%23ff0000;fill-opacity:1;stroke:none;stroke-width:2;stroke-dasharray:none'%20d='m%2035.999998,62.605295%202.225144,2.443296%20V%2094.891697%20L%2035.999998,96.81143%2033.774854,94.891697%20V%2065.048591%20Z'%20id='path6'%20/%3e%3cpath%20style='display:none;fill:%23ff0000;fill-opacity:1;stroke:none;stroke-width:2;stroke-dasharray:none'%20d='m%2035.999998,23.18857%202.225144,2.443296%20v%2029.843106%20l%20-2.225144,1.919732%20-2.225144,-1.919732%20V%2025.631866%20Z'%20id='path3'%20/%3e%3cpath%20style='display:none;fill:%23ff0000;fill-opacity:1;stroke:none;stroke-width:2;stroke-dasharray:none'%20d='m%2037.89693,59.979294%202.443296,-2.225144%20h%2029.843107%20l%201.919732,2.225144%20-1.919732,2.225144%20H%2040.340226%20Z'%20id='path2'%20/%3e%3cpath%20style='display:none;fill:none;fill-opacity:1;stroke:%23000000;stroke-width:2;stroke-dasharray:none;stroke-opacity:1'%20d='M%2020.942532,17%20H%200'%20id='path7'%20/%3e%3cpath%20style='display:none;fill:none;fill-opacity:1;stroke:%23000000;stroke-width:2;stroke-dasharray:none;stroke-opacity:1'%20d='M%2020.942532,31.333333%20H%200'%20id='path8'%20/%3e%3cpath%20style='display:none;fill:none;fill-opacity:1;stroke:%23000000;stroke-width:2;stroke-dasharray:none;stroke-opacity:1'%20d='M%2020.942532,45.666667%20H%200'%20id='path9'%20/%3e%3cpath%20style='display:none;fill:none;fill-opacity:1;stroke:%23000000;stroke-width:2;stroke-dasharray:none;stroke-opacity:1'%20d='M%2020.942532,60%20H%200'%20id='path10'%20/%3e%3cpath%20style='display:none;fill:none;fill-opacity:1;stroke:%23000000;stroke-width:2;stroke-dasharray:none;stroke-opacity:1'%20d='M%2020.942532,74.333333%20H%200'%20id='path11'%20/%3e%3cpath%20style='display:none;fill:none;fill-opacity:1;stroke:%23000000;stroke-width:2;stroke-dasharray:none;stroke-opacity:1'%20d='M%2020.942532,88.666667%20H%200'%20id='path12'%20/%3e%3cpath%20style='display:none;fill:none;fill-opacity:1;stroke:%23000000;stroke-width:2;stroke-dasharray:none;stroke-opacity:1'%20d='M%2020.942532,103%20H%200'%20id='path13'%20/%3e%3c/g%3e%3c/svg%3e",De="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'%20standalone='no'?%3e%3c!--%20Created%20with%20Inkscape%20(http://www.inkscape.org/)%20--%3e%3csvg%20width='90'%20height='120'%20viewBox='0%200%2090%20120'%20version='1.1'%20id='svg1'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:svg='http://www.w3.org/2000/svg'%3e%3cdefs%20id='defs1'%20/%3e%3cg%20id='layer1'%3e%3crect%20style='display:none;fill:none;stroke:%23000000;stroke-width:1.98364;stroke-dasharray:none'%20id='rect1'%20width='68.016357'%20height='118.01637'%20x='20.991819'%20y='0.99181795'%20/%3e%3cpath%20style='display:none;fill:%23ff0000;fill-opacity:1;stroke:none;stroke-width:2;stroke-dasharray:none'%20d='m%2037.896931,20.60398%202.443296,-2.225144%20h%2029.843106%20l%201.919733,2.225144%20-1.919733,2.225144%20H%2040.340227%20Z'%20id='path1'%20/%3e%3cpath%20style='display:none;fill:%23ff0000;fill-opacity:1;stroke:none;stroke-width:2;stroke-dasharray:none'%20d='m%2073.999998,23.18857%202.225144,2.443296%20v%2029.843106%20l%20-2.225144,1.919732%20-2.225144,-1.919732%20V%2025.631866%20Z'%20id='path1-5'%20/%3e%3cpath%20style='display:none;fill:%23ff0000;fill-opacity:1;stroke:none;stroke-width:2;stroke-dasharray:none'%20d='m%2073.999998,62.605295%202.225144,2.443296%20V%2094.891697%20L%2073.999998,96.81143%2071.774854,94.891697%20V%2065.048591%20Z'%20id='path4'%20/%3e%3cpath%20style='display:none;fill:%23ff0000;fill-opacity:1;stroke:none;stroke-width:2;stroke-dasharray:none'%20d='m%2037.89693,99.396019%202.443296,-2.225144%20h%2029.843107%20l%201.919732,2.225144%20-1.919732,2.225141%20H%2040.340226%20Z'%20id='path5'%20/%3e%3cpath%20style='display:none;fill:%23ff0000;fill-opacity:1;stroke:none;stroke-width:2;stroke-dasharray:none'%20d='m%2035.999998,62.605295%202.225144,2.443296%20V%2094.891697%20L%2035.999998,96.81143%2033.774854,94.891697%20V%2065.048591%20Z'%20id='path6'%20/%3e%3cpath%20style='display:inline;fill:%23ff0000;fill-opacity:1;stroke:none;stroke-width:2;stroke-dasharray:none'%20d='m%2035.999998,23.18857%202.225144,2.443296%20v%2029.843106%20l%20-2.225144,1.919732%20-2.225144,-1.919732%20V%2025.631866%20Z'%20id='path3'%20/%3e%3cpath%20style='display:none;fill:%23ff0000;fill-opacity:1;stroke:none;stroke-width:2;stroke-dasharray:none'%20d='m%2037.89693,59.979294%202.443296,-2.225144%20h%2029.843107%20l%201.919732,2.225144%20-1.919732,2.225144%20H%2040.340226%20Z'%20id='path2'%20/%3e%3cpath%20style='display:none;fill:none;fill-opacity:1;stroke:%23000000;stroke-width:2;stroke-dasharray:none;stroke-opacity:1'%20d='M%2020.942532,17%20H%200'%20id='path7'%20/%3e%3cpath%20style='display:none;fill:none;fill-opacity:1;stroke:%23000000;stroke-width:2;stroke-dasharray:none;stroke-opacity:1'%20d='M%2020.942532,31.333333%20H%200'%20id='path8'%20/%3e%3cpath%20style='display:none;fill:none;fill-opacity:1;stroke:%23000000;stroke-width:2;stroke-dasharray:none;stroke-opacity:1'%20d='M%2020.942532,45.666667%20H%200'%20id='path9'%20/%3e%3cpath%20style='display:none;fill:none;fill-opacity:1;stroke:%23000000;stroke-width:2;stroke-dasharray:none;stroke-opacity:1'%20d='M%2020.942532,60%20H%200'%20id='path10'%20/%3e%3cpath%20style='display:none;fill:none;fill-opacity:1;stroke:%23000000;stroke-width:2;stroke-dasharray:none;stroke-opacity:1'%20d='M%2020.942532,74.333333%20H%200'%20id='path11'%20/%3e%3cpath%20style='display:none;fill:none;fill-opacity:1;stroke:%23000000;stroke-width:2;stroke-dasharray:none;stroke-opacity:1'%20d='M%2020.942532,88.666667%20H%200'%20id='path12'%20/%3e%3cpath%20style='display:none;fill:none;fill-opacity:1;stroke:%23000000;stroke-width:2;stroke-dasharray:none;stroke-opacity:1'%20d='M%2020.942532,103%20H%200'%20id='path13'%20/%3e%3c/g%3e%3c/svg%3e",Le="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'%20standalone='no'?%3e%3c!--%20Created%20with%20Inkscape%20(http://www.inkscape.org/)%20--%3e%3csvg%20width='90'%20height='120'%20viewBox='0%200%2090%20120'%20version='1.1'%20id='svg1'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:svg='http://www.w3.org/2000/svg'%3e%3cdefs%20id='defs1'%20/%3e%3cg%20id='layer1'%3e%3crect%20style='display:none;fill:none;stroke:%23000000;stroke-width:1.98364;stroke-dasharray:none'%20id='rect1'%20width='68.016357'%20height='118.01637'%20x='20.991819'%20y='0.99181795'%20/%3e%3cpath%20style='display:none;fill:%23ff0000;fill-opacity:1;stroke:none;stroke-width:2;stroke-dasharray:none'%20d='m%2037.896931,20.60398%202.443296,-2.225144%20h%2029.843106%20l%201.919733,2.225144%20-1.919733,2.225144%20H%2040.340227%20Z'%20id='path1'%20/%3e%3cpath%20style='display:none;fill:%23ff0000;fill-opacity:1;stroke:none;stroke-width:2;stroke-dasharray:none'%20d='m%2073.999998,23.18857%202.225144,2.443296%20v%2029.843106%20l%20-2.225144,1.919732%20-2.225144,-1.919732%20V%2025.631866%20Z'%20id='path1-5'%20/%3e%3cpath%20style='display:none;fill:%23ff0000;fill-opacity:1;stroke:none;stroke-width:2;stroke-dasharray:none'%20d='m%2073.999998,62.605295%202.225144,2.443296%20V%2094.891697%20L%2073.999998,96.81143%2071.774854,94.891697%20V%2065.048591%20Z'%20id='path4'%20/%3e%3cpath%20style='display:none;fill:%23ff0000;fill-opacity:1;stroke:none;stroke-width:2;stroke-dasharray:none'%20d='m%2037.89693,99.396019%202.443296,-2.225144%20h%2029.843107%20l%201.919732,2.225144%20-1.919732,2.225141%20H%2040.340226%20Z'%20id='path5'%20/%3e%3cpath%20style='display:none;fill:%23ff0000;fill-opacity:1;stroke:none;stroke-width:2;stroke-dasharray:none'%20d='m%2035.999998,62.605295%202.225144,2.443296%20V%2094.891697%20L%2035.999998,96.81143%2033.774854,94.891697%20V%2065.048591%20Z'%20id='path6'%20/%3e%3cpath%20style='display:none;fill:%23ff0000;fill-opacity:1;stroke:none;stroke-width:2;stroke-dasharray:none'%20d='m%2035.999998,23.18857%202.225144,2.443296%20v%2029.843106%20l%20-2.225144,1.919732%20-2.225144,-1.919732%20V%2025.631866%20Z'%20id='path3'%20/%3e%3cpath%20style='display:inline;fill:%23ff0000;fill-opacity:1;stroke:none;stroke-width:2;stroke-dasharray:none'%20d='m%2037.89693,59.979294%202.443296,-2.225144%20h%2029.843107%20l%201.919732,2.225144%20-1.919732,2.225144%20H%2040.340226%20Z'%20id='path2'%20/%3e%3cpath%20style='display:none;fill:none;fill-opacity:1;stroke:%23000000;stroke-width:2;stroke-dasharray:none;stroke-opacity:1'%20d='M%2020.942532,17%20H%200'%20id='path7'%20/%3e%3cpath%20style='display:none;fill:none;fill-opacity:1;stroke:%23000000;stroke-width:2;stroke-dasharray:none;stroke-opacity:1'%20d='M%2020.942532,31.333333%20H%200'%20id='path8'%20/%3e%3cpath%20style='display:none;fill:none;fill-opacity:1;stroke:%23000000;stroke-width:2;stroke-dasharray:none;stroke-opacity:1'%20d='M%2020.942532,45.666667%20H%200'%20id='path9'%20/%3e%3cpath%20style='display:none;fill:none;fill-opacity:1;stroke:%23000000;stroke-width:2;stroke-dasharray:none;stroke-opacity:1'%20d='M%2020.942532,60%20H%200'%20id='path10'%20/%3e%3cpath%20style='display:none;fill:none;fill-opacity:1;stroke:%23000000;stroke-width:2;stroke-dasharray:none;stroke-opacity:1'%20d='M%2020.942532,74.333333%20H%200'%20id='path11'%20/%3e%3cpath%20style='display:none;fill:none;fill-opacity:1;stroke:%23000000;stroke-width:2;stroke-dasharray:none;stroke-opacity:1'%20d='M%2020.942532,88.666667%20H%200'%20id='path12'%20/%3e%3cpath%20style='display:none;fill:none;fill-opacity:1;stroke:%23000000;stroke-width:2;stroke-dasharray:none;stroke-opacity:1'%20d='M%2020.942532,103%20H%200'%20id='path13'%20/%3e%3c/g%3e%3c/svg%3e",ze={id:S.O_LED_RED,imgPath:[Ie,Pe],connectionSlot:[{id:0,in:!0,name:"In",localPos:new l(23,66)}]},Re={id:S.O_7_SEGMENTS,imgPath:[Te,Oe,Me,_e,Ne,Ee,De,Le],connectionSlot:[{id:0,in:!0,name:"A",localPos:new l(-4,17)},{id:1,in:!0,name:"B",localPos:new l(-4,32)},{id:2,in:!0,name:"C",localPos:new l(-4,46)},{id:3,in:!0,name:"D",localPos:new l(-4,60)},{id:4,in:!0,name:"E",localPos:new l(-4,75)},{id:5,in:!0,name:"F",localPos:new l(-4,89)},{id:6,in:!0,name:"G",localPos:new l(-4,103)}]};class Ci{constructor(t,e,s,n,o,a,h,f=!0){r(this,"id");r(this,"position");r(this,"componentType");r(this,"nodeType");r(this,"slots");r(this,"collisionShape");r(this,"_images");r(this,"imageSize");r(this,"halfImageSize");r(this,"imageMode","UP_LEFT");r(this,"_signalData");r(this,"selected");var m,c;if(this.id=t,this.position=e,this.componentType=R.OUTPUT,this.nodeType=ze,this._signalData=h[this.id],this.slots=o,this._images=gt(a,this.nodeType.imgPath),this.imageSize=new l(((m=this.image)==null?void 0:m.width)??100,((c=this.image)==null?void 0:c.height)??100),this.halfImageSize=l.div(this.imageSize,2),f){this.imageMode="CENTER",this.position.sub(this.halfImageSize);const p=new l(s,n).sub(this.imageSize);this.position.min(p).max(l.ZERO)}this.collisionShape=new ot(this.position,this.imageSize.x,this.imageSize.y),this.selected=!1}get image(){return Object.keys(this._images).length===0?null:this._images[this.state?1:0]}get state(){return this._signalData.output??!1}move(t,e=!0){e?this.position.add(t):this.imageMode==="CENTER"?l.sub(t,this.halfImageSize,this.position):this.position.copy(t),this.collisionShape.moveShape(this.position,!1)}draw(t){this.image&&(t.drawImage(this.image,this.position.x,this.position.y),this.collisionShape!==void 0&&this.collisionShape.draw(t,this.selected))}onEvent(t){switch(t){case _.FOCUS_IN:this.selected=!0;break;case _.FOCUS_OUT:this.selected=!1;break;default:return!1}return!0}toObject(){return{id:this.id,componentType:this.componentType,nodeType:this.nodeType.id,position:this.position.toPlainObject(),slotIds:this.slots.map(e=>e.id),state:this.state}}}class Ii{constructor(t,e,s,n,o,a,h,f=!0){r(this,"id");r(this,"position");r(this,"componentType");r(this,"nodeType");r(this,"slots");r(this,"collisionShape");r(this,"_images");r(this,"imageSize");r(this,"halfImageSize");r(this,"imageMode","UP_LEFT");r(this,"_signalData");r(this,"selected");var m,c;if(this.id=t,this.position=e,this.componentType=R.OUTPUT,this.nodeType=Re,this._signalData=h[this.id],this.slots=o,this._images=gt(a,this.nodeType.imgPath),this.imageSize=new l(((m=this.image)==null?void 0:m.width)??100,((c=this.image)==null?void 0:c.height)??100),this.halfImageSize=l.div(this.imageSize,2),f){this.imageMode="CENTER",this.position.sub(this.halfImageSize);const p=new l(s,n).sub(this.imageSize);this.position.min(p).max(l.ZERO)}this.collisionShape=new ot(this.position,this.imageSize.x,this.imageSize.y),this.selected=!1}get image(){return Object.keys(this._images).length===0?null:this._images[0]}get state(){return this._signalData.output??!1}move(t,e=!0){e?this.position.add(t):this.imageMode==="CENTER"?l.sub(t,this.halfImageSize,this.position):this.position.copy(t),this.collisionShape.moveShape(this.position,!1)}draw(t){if(this.image){if(t.drawImage(this.image,this.position.x,this.position.y),Object.keys(this._images).length>=8)for(const e of Object.values(this._signalData.signalFrom))e[1]&&t.drawImage(this._images[e[0]+1],this.position.x,this.position.y);this.collisionShape!==void 0&&this.collisionShape.draw(t,this.selected)}}onEvent(t){switch(t){case _.FOCUS_IN:this.selected=!0;break;case _.FOCUS_OUT:this.selected=!1;break;default:return!1}return!0}toObject(){return{id:this.id,componentType:this.componentType,nodeType:this.nodeType.id,position:this.position.toPlainObject(),slotIds:this.slots.map(e=>e.id),state:this.state}}}class Pi{constructor(t,e,s,n,o,a,h,f=!0){r(this,"id");r(this,"position");r(this,"componentType");r(this,"nodeType");r(this,"slots");r(this,"collisionShape");r(this,"_images");r(this,"imageSize");r(this,"halfImageSize");r(this,"imageMode","UP_LEFT");r(this,"_signalData");r(this,"selected");var m,c;if(this.id=t,this.position=e,this.componentType=R.INPUT,this.nodeType=be,this._signalData=h[this.id],this.slots=o,this._images=gt(a,this.nodeType.imgPath),this.imageSize=new l(((m=this.image)==null?void 0:m.width)??100,((c=this.image)==null?void 0:c.height)??100),this.halfImageSize=l.div(this.imageSize,2),f){this.imageMode="CENTER",this.position.sub(this.halfImageSize);const p=new l(s,n).sub(this.halfImageSize);this.position.min(p).max(l.ZERO)}this.collisionShape=new ot(this.position,this.imageSize.x,this.imageSize.y),this.selected=!1}get image(){return Object.keys(this._images).length===0?null:this._images[this.state?1:0]}get state(){return this._signalData.output??!1}set state(t){this._signalData.output=t}move(t,e=!0){e?this.position.add(t):this.imageMode==="CENTER"?l.sub(t,this.halfImageSize,this.position):this.position.copy(t),this.collisionShape.moveShape(this.position,!1)}draw(t){this.image&&(t.drawImage(this.image,this.position.x,this.position.y),this.collisionShape!==void 0&&this.collisionShape.draw(t,this.selected))}onEvent(t){switch(t){case _.MOUSE_CLICKED:this.state=!0;break;case _.MOUSE_RELEASED:this.state=!1;break;case _.FOCUS_IN:this.selected=!0;break;case _.FOCUS_OUT:this.selected=!1;break;default:return!1}return!0}toObject(){return{id:this.id,componentType:this.componentType,nodeType:this.nodeType.id,position:this.position.toPlainObject(),slotIds:this.slots.map(e=>e.id),state:this.state}}}class Ti{constructor(t,e,s,n,o,a,h,f=60,m=!0){r(this,"id");r(this,"position");r(this,"componentType");r(this,"nodeType");r(this,"slots");r(this,"collisionShape");r(this,"_images");r(this,"imageSize");r(this,"halfImageSize");r(this,"imageMode","UP_LEFT");r(this,"_signalData");r(this,"selected");r(this,"clockDelay");r(this,"currentClockStep",0);var c,p;if(this.id=t,this.position=e,this.componentType=R.INPUT,this.nodeType=Ce,this._signalData=h[this.id],this.slots=o,this.clockDelay=f,this._images=gt(a,this.nodeType.imgPath),this.imageSize=new l(((c=this.image)==null?void 0:c.width)??100,((p=this.image)==null?void 0:p.height)??100),this.halfImageSize=l.div(this.imageSize,2),m){this.imageMode="CENTER",this.position.sub(this.halfImageSize);const y=new l(s,n).sub(this.imageSize);this.position.min(y).max(l.ZERO)}this.collisionShape=new ot(this.position,this.imageSize.x,this.imageSize.y),this.selected=!1}get image(){return Object.keys(this._images).length===0?null:this._images[0]}get state(){return this._signalData.output??!1}set state(t){this._signalData.output=t}move(t,e=!0){e?this.position.add(t):this.imageMode==="CENTER"?l.sub(t,this.halfImageSize,this.position):this.position.copy(t),this.collisionShape.moveShape(this.position,!1)}draw(t){this.image&&(t.drawImage(this.image,this.position.x,this.position.y),this.collisionShape!==void 0&&this.collisionShape.draw(t,this.selected))}onEvent(t){switch(t){case _.FOCUS_IN:this.selected=!0;break;case _.FOCUS_OUT:this.selected=!1;break;case _.CLOCK_FINISHED:this.state=!this.state,this.currentClockStep=0;break;case _.PHYSICS_ENGINE_CYCLE:this.currentClockStep++,this.currentClockStep>this.clockDelay&&this.onEvent(_.CLOCK_FINISHED);break;default:return!1}return!0}toObject(){return{id:this.id,componentType:this.componentType,nodeType:this.nodeType.id,position:this.position.toPlainObject(),slotIds:this.slots.map(e=>e.id),state:this.state}}}const K={node(i=-1,t,e,s,n,o,a,h=[],f=!0,m=!1){const c=i>=0?i:t.nextComponentId;if(n<0||n>=100)return console.error("O tipo de node passado como parâmetro é inválido!",n),-1;nt.vertex.add(t.signalGraph,c,n,It.getNodeModel(n),m);const p=new It(c,new l(o,a),n,e,s,[],t.nodeImageList,t.signalGraph,f);t.nodes.set(c,p);const y=t.nodes.get(c);if(t.updateComponentId(i>=0?i:void 0),h.length===0){const I=It.getNodeModel(n).connectionSlot;for(const T of Object.values(I)){const v=this.slot(void 0,t,T.localPos.x,T.localPos.y,y,T.id,T.in);if(!y.slots.find(M=>M.id===v)){const M=t.slots.get(v);M&&y.slots.push(M)}}}else for(const I of h){const T=t.slots.get(I);T&&y.slots.push(T)}return c},input(i=-1,t,e,s,n,o,a,h=[],f=!0,m=!1){const c=i>=0?i:t.nextComponentId;let p,y;switch(n){case S.I_SWITCH:y=Se,nt.vertex.add(t.signalGraph,c,n,y,m),p=new bi(c,new l(o,a),e,s,[],t.nodeImageList,t.signalGraph,f);break;case S.I_BUTTON:y=be,nt.vertex.add(t.signalGraph,c,n,y,m),p=new Pi(c,new l(o,a),e,s,[],t.nodeImageList,t.signalGraph,f);break;case S.I_CLOCK:y=Ce,nt.vertex.add(t.signalGraph,c,n,y,m),p=new Ti(c,new l(o,a),e,s,[],t.nodeImageList,t.signalGraph,void 0,f);break;default:return console.error("O tipo de node de entrada passado como parâmetro é inválido!",n),-1}t.nodes.set(c,p);const I=t.nodes.get(c);if(t.updateComponentId(i>=0?i:void 0),h.length===0){const T=y.connectionSlot;for(const v of Object.values(T)){const M=this.slot(void 0,t,v.localPos.x,v.localPos.y,I,v.id,v.in);if(!I.slots.find(d=>d.id===M)){const d=t.slots.get(M);d&&I.slots.push(d)}}}else for(const T of h){const v=t.slots.get(T);v&&I.slots.push(v)}return c},output(i=-1,t,e,s,n,o,a,h=[],f=!0,m=!1){const c=i>=0?i:t.nextComponentId;let p,y;switch(n){case S.O_LED_RED:y=ze,nt.vertex.add(t.signalGraph,c,n,y,m),p=new Ci(c,new l(o,a),e,s,[],t.nodeImageList,t.signalGraph,f);break;case S.O_7_SEGMENTS:y=Re,nt.vertex.add(t.signalGraph,c,n,y,m),p=new Ii(c,new l(o,a),e,s,[],t.nodeImageList,t.signalGraph,f);break;default:return console.error("O tipo de node de saída passado como parâmetro é inválido!",n),-1}t.nodes.set(c,p);const I=t.nodes.get(c);if(t.updateComponentId(i>=0?i:void 0),h.length===0){const T=y.connectionSlot;for(const v of Object.values(T)){const M=this.slot(void 0,t,v.localPos.x,v.localPos.y,I,v.id,v.in);if(!I.slots.find(d=>d.id===M)){const d=t.slots.get(M);d&&I.slots.push(d)}}}else for(const T of h){const v=t.slots.get(T);v&&I.slots.push(v)}return c},slot(i=-1,t,e,s,n,o,a,h,f,m,c){const p=i>=0?i:t.nextComponentId,y=new xi(p,new l(e,s),n,o,void 0,a,h,f,m,c);return t.slots.set(p,y),(n.componentType===R.INPUT||n.componentType===R.OUTPUT||n.componentType===R.NODE)&&n.slots.push(t.slots.get(p)),t.updateComponentId(i>=0?i:void 0)},connection(i=-1,t,e,s,n,o,a,h,f){const m=i>=0?i:t.nextComponentId,c=new pi(m,new l(e,s),new l(n,o),{start:a,end:h},f);return t.connections.set(m,c),t.updateComponentId(i>=0?i:void 0)},text(i=-1,t,e,s,n,o,a,h){const f=i>=0?i:t.nextComponentId,m=new Si(f,new l(n,o),s,a,h?{id:h.id,type:h.componentType}:null,e);return t.texts.set(f,m),t.updateComponentId(i>=0?i:void 0)}};class Ot{constructor(t,e=0,s,n={},o=new Map,a=new Map,h=new Map,f=new Map){r(this,"documentId");r(this,"_nextComponentId");r(this,"nodes");r(this,"slots");r(this,"connections");r(this,"texts");r(this,"nodeImageList");r(this,"signalGraph");this.documentId=t,this._nextComponentId=e,this.nodes=o,this.slots=a,this.connections=h,this.texts=f,this.signalGraph=n,this.nodeImageList=s}getDocumentId(){return this.documentId}get components(){return{nodes:this.nodes,slots:this.slots,connections:this.connections,texts:this.texts}}get nextComponentId(){return this._nextComponentId}updateComponentId(t){const e=this._nextComponentId;return this._nextComponentId=t?Math.max(this._nextComponentId,t+1):this._nextComponentId+1,e}removeComponent(t=this._nextComponentId-1,e){if(e)switch(e){case R.NODE:case R.INPUT:case R.OUTPUT:return ut.node(this,t);case R.SLOT:return ut.slot(this,t);case R.LINE:return ut.connection(this,t);case R.TEXT:return ut.text(this,t)}else{const s=this.connections.get(t)??this.nodes.get(t)??this.slots.get(t)??this.texts.get(t);if(s!==void 0)return this.removeComponent(s.id,s.componentType)}return!1}saveAsJson(){const t={id:this.documentId,data:{nodes:[],connections:[],slots:[],texts:[]},signal:{}};for(const[e,s]of Object.entries(this.components))for(const n of s.values())switch(e){case"nodes":t.data.nodes.push(n.toObject());break;case"slots":t.data.slots.push(n.toObject());break;case"connections":t.data.connections.push(n.toObject());break;case"texts":t.data.texts.push(n.toObject());break}for(const[e,s]of Object.entries(this.signalGraph)){const n=parseInt(e);t.signal[n]={output:s.output,signalFrom:[...s.signalFrom.entries()],signalTo:[...s.signalTo.values()],nodeType:s.nodeType}}return JSON.stringify(t)}static createFromJson(t,e,s){const n={};for(const[a,h]of Object.entries(t.signal)){const f=parseInt(a);n[f]={output:h.output,signalFrom:new Map(h.signalFrom),signalTo:new Set(h.signalTo),nodeType:h.nodeType}}const o=new Ot(t.id,0,structuredClone(s),n);for(const a of t.data.nodes)a.nodeType>=0&&a.nodeType<100?K.node(a.id,o,e.canvas.width,e.canvas.height,a.nodeType,a.position.x,a.position.y,a.slotIds,!1):a.nodeType>=100&&a.nodeType<200?K.input(a.id,o,e.canvas.width,e.canvas.height,a.nodeType,a.position.x,a.position.y,a.slotIds,!1):a.nodeType>=200&&a.nodeType<300&&K.output(a.id,o,e.canvas.width,e.canvas.height,a.nodeType,a.position.x,a.position.y,a.slotIds,!1);for(const a of t.data.slots)K.slot(a.id,o,a.position.x,a.position.y,o.nodes.get(a.parentId),a.slotIdAtParent,a.inSlot,a.radius,a.attractionRadius,a.color,a.colorActive);for(const a of t.data.connections)K.connection(a.id,o,a.position.x,a.position.y,a.endPosition.x,a.endPosition.y,a.connectedTo.start,a.connectedTo.end,a.anchors.map(h=>new w(h.x,h.y))),a.connectedTo.start&&o.slots.get(a.connectedTo.start.slotId).slotConnections.push(o.connections.get(a.id)),a.connectedTo.end&&o.slots.get(a.connectedTo.end.slotId).slotConnections.push(o.connections.get(a.id));for(const a of t.data.texts){K.text(a.id,o,e,a.text,a.position.x,a.position.y,a.style);break}return o}}const $t={checkComponentClick(i,t){const e=[];for(const[s,n]of t.entries()){if(n.collisionShape instanceof Array)return console.warn("Não utilize a função checkComponentClick para checar colisões com conexões!"),[];n.collisionShape.collisionWithPoint(i)&&e.push(s)}return e}},Ae={checkSlotClick(i,t){return $t.checkComponentClick(t,i)}},vt={editingLine:void 0,startSlot:void 0,endSlot:void 0,oldStartSlot:void 0,oldEndSlot:void 0,movePoint:st.NONE,reset:function(){this.editingLine=void 0,this.startSlot=void 0,this.endSlot=void 0,this.oldStartSlot=void 0,this.oldEndSlot=void 0,this.movePoint=st.NONE},checkConnectionClick:function(i,t){const e=new Set;for(const[s,n]of i.entries())n.collisionShape.find(a=>a.collisionWithPoint(t))!==void 0&&e.add(s);return[...e.values()]},newConnection:function(i,t){if(this.editingLine!==void 0||B.movingObject!=="none")return!1;const e=i.slots.get(t);if(e===void 0)return!1;this.movePoint=e.inSlot?st.START:st.END,[this.startSlot,this.endSlot]=e.inSlot?[void 0,e]:[e,void 0];const s=K.connection(void 0,i,e.globalPosition.x,e.globalPosition.y,e.globalPosition.x,e.globalPosition.y,e.inSlot?void 0:{nodeId:e.parent.id,slotId:e.id},e.inSlot?{nodeId:e.parent.id,slotId:e.id}:void 0);return this.editingLine=i.connections.get(s),B.movingObject="connection",!0},move:function(i,t){return!(B.movingObject==="connection"||B.movingObject==="none")||this.editingLine===void 0?!1:(B.movingObject="connection",this.editingLine.move(t,!1,this.movePoint,!0,i.nodes),!0)},setConnectionProps:function(i){return this.startSlot===void 0||this.endSlot===void 0||this.editingLine===void 0?!1:(this.editingLine.position=this.startSlot.globalPosition.clone(),this.editingLine.endPosition=this.endSlot.globalPosition.clone(),this.editingLine.anchors=this.editingLine.generateAnchors(i.nodes),this.editingLine.changeConnection(this.startSlot.id,this.startSlot.parent.id,!1),this.editingLine.changeConnection(this.endSlot.id,this.endSlot.parent.id,!0),this.startSlot.slotConnections.push(this.editingLine),this.endSlot.slotConnections.push(this.editingLine),nt.edge.add(i.signalGraph,this.editingLine,this.startSlot,this.endSlot),this.reset(),!0)},isValidPosition:function(i,t){var n,o;const e=Ae.checkSlotClick(i.slots,t);if(e.length===0||this.movePoint===st.START&&e[0]===((n=this.endSlot)==null?void 0:n.id)||this.movePoint===st.END&&e[0]===((o=this.startSlot)==null?void 0:o.id))return!1;const s=i.slots.get(e[0]);if(s===void 0)return!1;if(this.movePoint===st.START){if(this.endSlot===void 0||s.inSlot===this.endSlot.inSlot)return!1;this.startSlot=s}if(this.movePoint===st.END){if(this.startSlot===void 0||s.inSlot===this.startSlot.inSlot)return!1;this.endSlot=s}return!0},bindLine:function(i,t){return this.editingLine===void 0?!1:!this.isValidPosition(i,t)||this.startSlot===void 0||this.endSlot===void 0?(ut.connection(i,this.editingLine.id),!1):this.removeOldInputConnections(i)&&this.setConnectionProps(i)},removeOldInputConnections:function(i){if(this.startSlot===void 0||this.endSlot===void 0||this.editingLine===void 0||!this.endSlot.inSlot)return!1;for(const t of this.endSlot.slotConnections)t.id!==this.editingLine.id&&ut.connection(i,t.id);return!0}},Gt={checkNodeClick(i,t){return $t.checkComponentClick(t,i)},move(i,t,e,s=!0){const n=t.getCollisionList().nodes;if(n.length===0||!(B.movingObject==="none"||B.movingObject==="node"))return!1;B.movingObject="node";const o=i.nodes.get(n[0]);return o===void 0?!1:(o.move(e,s),this.moveLinkedElements(o,i.nodes),!0)},moveLinkedElements(i,t){var e,s;for(const n of i.slots)if(n){n.move();for(let o=0;o<n.slotConnections.length;o++){const a=n.slotConnections[o];((e=a.connectedTo.start)==null?void 0:e.slotId)===n.id?a.move(n.globalPosition,!1,0,!0,t):((s=a.connectedTo.end)==null?void 0:s.slotId)===n.id&&a.move(n.globalPosition,!1,1,!0,t)}}},onPhysicsEngineUpdate(i,t){const e=[];for(const s of i.values())s.nodeType.id===S.I_CLOCK&&s.onEvent(_.PHYSICS_ENGINE_CYCLE)&&e.push(s.id);for(const s of e)yt.updateGraph(t,s)}},ie={checkTextClick(i,t){return $t.checkComponentClick(t,i)},move(i,t,e,s=!0){const n=t.getCollisionList().texts;if(n.length===0||!(B.movingObject==="none"||B.movingObject==="text"))return!1;B.movingObject="text";const o=i.get(n[0]);return o===void 0?!1:(o.move(e,s),!0)}},Pt=class Pt{constructor(t){r(this,"collisionList");r(this,"_mouse");this._mouse=t,this.collisionList={nodes:[],slots:[],connections:[],texts:[]},Pt.movingObject="none"}onMouseClick(t){if(this._mouse.stateChanged&&this._mouse.clicked){this.clearAllCollisions(t);const e=Gt.checkNodeClick(t.nodes,this._mouse.position),s=Ae.checkSlotClick(t.slots,this._mouse.position),n=vt.checkConnectionClick(t.connections,this._mouse.position),o=ie.checkTextClick(t.texts,this._mouse.position);this.collisionList={nodes:e,slots:s,connections:n,texts:o},s.length>0&&vt.newConnection(t,s[0]);const a=t.nodes.get(this.collisionList.nodes[0]);a!==void 0&&a.nodeType.id===S.I_BUTTON&&(a.onEvent(_.MOUSE_CLICKED),yt.updateGraph(t.signalGraph,this.collisionList.nodes[0])),this.displaySelectedComponents(t),this._mouse.stateChanged=!1}}onMouseRelease(t){if(!this._mouse.clicked&&this._mouse.stateChanged){if(!this._mouse.dragged)for(const e of this.collisionList.nodes){const s=t.nodes.get(e);s!==void 0&&s.componentType===R.INPUT&&s.onEvent(_.MOUSE_RELEASED)&&yt.updateGraph(t.signalGraph,e)}vt.bindLine(t,this._mouse.position),vt.reset(),this._mouse.stateChanged=!1}Pt.movingObject="none"}onMouseMove(t){return this._mouse.clicked&&this._mouse.dragged?vt.move(t,this._mouse.position)||Gt.move(t,this,this._mouse.position,!1)||ie.move(t.texts,this,this._mouse.position,!1):!1}displaySelectedComponents(t){var e;for(const[s,n]of Object.entries(this.collisionList))(e=t.components[s].get(n[0]))==null||e.onEvent(_.FOCUS_IN)}clearSelectedComponents(t){var e;for(const[s,n]of Object.entries(this.collisionList))for(const o of n)(e=t.components[s].get(o))==null||e.onEvent(_.FOCUS_OUT)}getCollisionList(){return this.collisionList}clearAllCollisions(t){this.clearSelectedComponents(t),this.collisionList.nodes=[],this.collisionList.slots=[],this.collisionList.connections=[],this.collisionList.texts=[]}};r(Pt,"movingObject","none");let B=Pt;class Oi{constructor(){r(this,"position",new l);r(this,"mouseClicked",!1);r(this,"doubleClicked",!1);r(this,"clickStartPosition",new l);r(this,"mouseStateChanged",!1);r(this,"clickToDragThreshold",6);r(this,"doubleClickTimer",300);r(this,"alreadyClicked",!1);r(this,"mouseDragged",!1)}get clicked(){return this.mouseClicked}set clicked(t){this.mouseClicked=t,this.mouseStateChanged=!0,t?this.clickStartPosition.copy(this.position):this.mouseDragged=!1}get dragged(){const t=l.sub(this.position,this.clickStartPosition);return this.mouseDragged=this.mouseDragged||t.x>this.clickToDragThreshold||t.x<-this.clickToDragThreshold||t.y>this.clickToDragThreshold||t.y<-this.clickToDragThreshold,this.mouseDragged}get stateChanged(){return this.mouseStateChanged}set stateChanged(t){this.mouseStateChanged=t,this.alreadyClicked?this.doubleClicked=this.mouseClicked:(this.alreadyClicked=!0,setTimeout(()=>this.alreadyClicked=!1,this.doubleClickTimer))}}var Z=Uint8Array,$=Uint16Array,Qt=Int32Array,Lt=new Z([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),zt=new Z([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),jt=new Z([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),He=function(i,t){for(var e=new $(31),s=0;s<31;++s)e[s]=t+=1<<i[s-1];for(var n=new Qt(e[30]),s=1;s<30;++s)for(var o=e[s];o<e[s+1];++o)n[o]=o-e[s]<<5|s;return{b:e,r:n}},Ue=He(Lt,2),Ze=Ue.b,Bt=Ue.r;Ze[28]=258,Bt[258]=28;var Fe=He(zt,0),Mi=Fe.b,se=Fe.r,Wt=new $(32768);for(var D=0;D<32768;++D){var lt=(D&43690)>>1|(D&21845)<<1;lt=(lt&52428)>>2|(lt&13107)<<2,lt=(lt&61680)>>4|(lt&3855)<<4,Wt[D]=((lt&65280)>>8|(lt&255)<<8)>>1}var tt=function(i,t,e){for(var s=i.length,n=0,o=new $(t);n<s;++n)i[n]&&++o[i[n]-1];var a=new $(t);for(n=1;n<t;++n)a[n]=a[n-1]+o[n-1]<<1;var h;if(e){h=new $(1<<t);var f=15-t;for(n=0;n<s;++n)if(i[n])for(var m=n<<4|i[n],c=t-i[n],p=a[i[n]-1]++<<c,y=p|(1<<c)-1;p<=y;++p)h[Wt[p]>>f]=m}else for(h=new $(s),n=0;n<s;++n)i[n]&&(h[n]=Wt[a[i[n]-1]++]>>15-i[n]);return h},ht=new Z(288);for(var D=0;D<144;++D)ht[D]=8;for(var D=144;D<256;++D)ht[D]=9;for(var D=256;D<280;++D)ht[D]=7;for(var D=280;D<288;++D)ht[D]=8;var Tt=new Z(32);for(var D=0;D<32;++D)Tt[D]=5;var _i=tt(ht,9,0),Ni=tt(ht,9,1),Ei=tt(Tt,5,0),Di=tt(Tt,5,1),Ht=function(i){for(var t=i[0],e=1;e<i.length;++e)i[e]>t&&(t=i[e]);return t},Y=function(i,t,e){var s=t/8|0;return(i[s]|i[s+1]<<8)>>(t&7)&e},Ut=function(i,t){var e=t/8|0;return(i[e]|i[e+1]<<8|i[e+2]<<16)>>(t&7)},Yt=function(i){return(i+7)/8|0},Ge=function(i,t,e){return(e==null||e>i.length)&&(e=i.length),new Z(i.subarray(t,e))},Li=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],J=function(i,t,e){var s=new Error(t||Li[i]);if(s.code=i,Error.captureStackTrace&&Error.captureStackTrace(s,J),!e)throw s;return s},zi=function(i,t,e,s){var n=i.length,o=0;if(!n||t.f&&!t.l)return e||new Z(0);var a=!e,h=a||t.i!=2,f=t.i;a&&(e=new Z(n*3));var m=function(wt){var kt=e.length;if(wt>kt){var ft=new Z(Math.max(kt*2,wt));ft.set(e),e=ft}},c=t.f||0,p=t.p||0,y=t.b||0,I=t.l,T=t.d,v=t.m,M=t.n,d=n*8;do{if(!I){c=Y(i,p,1);var g=Y(i,p+1,3);if(p+=3,g)if(g==1)I=Ni,T=Di,v=9,M=5;else if(g==2){var b=Y(i,p,31)+257,O=Y(i,p+10,15)+4,C=b+Y(i,p+5,31)+1;p+=14;for(var x=new Z(C),N=new Z(19),E=0;E<O;++E)N[jt[E]]=Y(i,p+E*3,7);p+=O*3;for(var A=Ht(N),at=(1<<A)-1,W=tt(N,A,1),E=0;E<C;){var G=W[Y(i,p,at)];p+=G&15;var u=G>>4;if(u<16)x[E++]=u;else{var H=0,L=0;for(u==16?(L=3+Y(i,p,3),p+=2,H=x[E-1]):u==17?(L=3+Y(i,p,7),p+=3):u==18&&(L=11+Y(i,p,127),p+=7);L--;)x[E++]=H}}var j=x.subarray(0,b),U=x.subarray(b);v=Ht(j),M=Ht(U),I=tt(j,v,1),T=tt(U,M,1)}else J(1);else{var u=Yt(p)+4,k=i[u-4]|i[u-3]<<8,P=u+k;if(P>n){f&&J(0);break}h&&m(y+k),e.set(i.subarray(u,P),y),t.b=y+=k,t.p=p=P*8,t.f=c;continue}if(p>d){f&&J(0);break}}h&&m(y+131072);for(var mt=(1<<v)-1,Q=(1<<M)-1,et=p;;et=p){var H=I[Ut(i,p)&mt],q=H>>4;if(p+=H&15,p>d){f&&J(0);break}if(H||J(2),q<256)e[y++]=q;else if(q==256){et=p,I=null;break}else{var X=q-254;if(q>264){var E=q-257,z=Lt[E];X=Y(i,p,(1<<z)-1)+Ze[E],p+=z}var V=T[Ut(i,p)&Q],dt=V>>4;V||J(3),p+=V&15;var U=Mi[dt];if(dt>3){var z=zt[dt];U+=Ut(i,p)&(1<<z)-1,p+=z}if(p>d){f&&J(0);break}h&&m(y+131072);var pt=y+X;if(y<U){var Mt=o-U,_t=Math.min(U,pt);for(Mt+y<0&&J(3);y<_t;++y)e[y]=s[Mt+y]}for(;y<pt;++y)e[y]=e[y-U]}}t.l=I,t.p=et,t.b=y,t.f=c,I&&(c=1,t.m=v,t.d=T,t.n=M)}while(!c);return y!=e.length&&a?Ge(e,0,y):e.subarray(0,y)},it=function(i,t,e){e<<=t&7;var s=t/8|0;i[s]|=e,i[s+1]|=e>>8},xt=function(i,t,e){e<<=t&7;var s=t/8|0;i[s]|=e,i[s+1]|=e>>8,i[s+2]|=e>>16},Zt=function(i,t){for(var e=[],s=0;s<i.length;++s)i[s]&&e.push({s,f:i[s]});var n=e.length,o=e.slice();if(!n)return{t:Be,l:0};if(n==1){var a=new Z(e[0].s+1);return a[e[0].s]=1,{t:a,l:1}}e.sort(function(P,b){return P.f-b.f}),e.push({s:-1,f:25001});var h=e[0],f=e[1],m=0,c=1,p=2;for(e[0]={s:-1,f:h.f+f.f,l:h,r:f};c!=n-1;)h=e[e[m].f<e[p].f?m++:p++],f=e[m!=c&&e[m].f<e[p].f?m++:p++],e[c++]={s:-1,f:h.f+f.f,l:h,r:f};for(var y=o[0].s,s=1;s<n;++s)o[s].s>y&&(y=o[s].s);var I=new $(y+1),T=qt(e[c-1],I,0);if(T>t){var s=0,v=0,M=T-t,d=1<<M;for(o.sort(function(b,O){return I[O.s]-I[b.s]||b.f-O.f});s<n;++s){var g=o[s].s;if(I[g]>t)v+=d-(1<<T-I[g]),I[g]=t;else break}for(v>>=M;v>0;){var u=o[s].s;I[u]<t?v-=1<<t-I[u]++-1:++s}for(;s>=0&&v;--s){var k=o[s].s;I[k]==t&&(--I[k],++v)}T=t}return{t:new Z(I),l:T}},qt=function(i,t,e){return i.s==-1?Math.max(qt(i.l,t,e+1),qt(i.r,t,e+1)):t[i.s]=e},ne=function(i){for(var t=i.length;t&&!i[--t];);for(var e=new $(++t),s=0,n=i[0],o=1,a=function(f){e[s++]=f},h=1;h<=t;++h)if(i[h]==n&&h!=t)++o;else{if(!n&&o>2){for(;o>138;o-=138)a(32754);o>2&&(a(o>10?o-11<<5|28690:o-3<<5|12305),o=0)}else if(o>3){for(a(n),--o;o>6;o-=6)a(8304);o>2&&(a(o-3<<5|8208),o=0)}for(;o--;)a(n);o=1,n=i[h]}return{c:e.subarray(0,s),n:t}},St=function(i,t){for(var e=0,s=0;s<t.length;++s)e+=i[s]*t[s];return e},je=function(i,t,e){var s=e.length,n=Yt(t+2);i[n]=s&255,i[n+1]=s>>8,i[n+2]=i[n]^255,i[n+3]=i[n+1]^255;for(var o=0;o<s;++o)i[n+o+4]=e[o];return(n+4+s)*8},oe=function(i,t,e,s,n,o,a,h,f,m,c){it(t,c++,e),++n[256];for(var p=Zt(n,15),y=p.t,I=p.l,T=Zt(o,15),v=T.t,M=T.l,d=ne(y),g=d.c,u=d.n,k=ne(v),P=k.c,b=k.n,O=new $(19),C=0;C<g.length;++C)++O[g[C]&31];for(var C=0;C<P.length;++C)++O[P[C]&31];for(var x=Zt(O,7),N=x.t,E=x.l,A=19;A>4&&!N[jt[A-1]];--A);var at=m+5<<3,W=St(n,ht)+St(o,Tt)+a,G=St(n,y)+St(o,v)+a+14+3*A+St(O,N)+2*O[16]+3*O[17]+7*O[18];if(f>=0&&at<=W&&at<=G)return je(t,c,i.subarray(f,f+m));var H,L,j,U;if(it(t,c,1+(G<W)),c+=2,G<W){H=tt(y,I,0),L=y,j=tt(v,M,0),U=v;var mt=tt(N,E,0);it(t,c,u-257),it(t,c+5,b-1),it(t,c+10,A-4),c+=14;for(var C=0;C<A;++C)it(t,c+3*C,N[jt[C]]);c+=3*A;for(var Q=[g,P],et=0;et<2;++et)for(var q=Q[et],C=0;C<q.length;++C){var X=q[C]&31;it(t,c,mt[X]),c+=N[X],X>15&&(it(t,c,q[C]>>5&127),c+=q[C]>>12)}}else H=_i,L=ht,j=Ei,U=Tt;for(var C=0;C<h;++C){var z=s[C];if(z>255){var X=z>>18&31;xt(t,c,H[X+257]),c+=L[X+257],X>7&&(it(t,c,z>>23&31),c+=Lt[X]);var V=z&31;xt(t,c,j[V]),c+=U[V],V>3&&(xt(t,c,z>>5&8191),c+=zt[V])}else xt(t,c,H[z]),c+=L[z]}return xt(t,c,H[256]),c+L[256]},Ri=new Qt([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),Be=new Z(0),Ai=function(i,t,e,s,n,o){var a=o.z||i.length,h=new Z(s+a+5*(1+Math.ceil(a/7e3))+n),f=h.subarray(s,h.length-n),m=o.l,c=(o.r||0)&7;if(t){c&&(f[0]=o.r>>3);for(var p=Ri[t-1],y=p>>13,I=p&8191,T=(1<<e)-1,v=o.p||new $(32768),M=o.h||new $(T+1),d=Math.ceil(e/3),g=2*d,u=function(Rt){return(i[Rt]^i[Rt+1]<<d^i[Rt+2]<<g)&T},k=new Qt(25e3),P=new $(288),b=new $(32),O=0,C=0,x=o.i||0,N=0,E=o.w||0,A=0;x+2<a;++x){var at=u(x),W=x&32767,G=M[at];if(v[W]=G,M[at]=W,E<=x){var H=a-x;if((O>7e3||N>24576)&&(H>423||!m)){c=oe(i,f,0,k,P,b,C,N,A,x-A,c),N=O=C=0,A=x;for(var L=0;L<286;++L)P[L]=0;for(var L=0;L<30;++L)b[L]=0}var j=2,U=0,mt=I,Q=W-G&32767;if(H>2&&at==u(x-Q))for(var et=Math.min(y,H)-1,q=Math.min(32767,x),X=Math.min(258,H);Q<=q&&--mt&&W!=G;){if(i[x+j]==i[x+j-Q]){for(var z=0;z<X&&i[x+z]==i[x+z-Q];++z);if(z>j){if(j=z,U=Q,z>et)break;for(var V=Math.min(Q,z-2),dt=0,L=0;L<V;++L){var pt=x-Q+L&32767,Mt=v[pt],_t=pt-Mt&32767;_t>dt&&(dt=_t,G=pt)}}}W=G,G=v[W],Q+=W-G&32767}if(U){k[N++]=268435456|Bt[j]<<18|se[U];var wt=Bt[j]&31,kt=se[U]&31;C+=Lt[wt]+zt[kt],++P[257+wt],++b[kt],E=x+j,++O}else k[N++]=i[x],++P[i[x]]}}for(x=Math.max(x,E);x<a;++x)k[N++]=i[x],++P[i[x]];c=oe(i,f,m,k,P,b,C,N,A,x-A,c),m||(o.r=c&7|f[c/8|0]<<3,c-=7,o.h=M,o.p=v,o.i=x,o.w=E)}else{for(var x=o.w||0;x<a+m;x+=65535){var ft=x+65535;ft>=a&&(f[c/8|0]=m,ft=a),c=je(f,c+1,i.subarray(x,ft))}o.i=a}return Ge(h,0,s+Yt(c)+n)},Hi=function(){for(var i=new Int32Array(256),t=0;t<256;++t){for(var e=t,s=9;--s;)e=(e&1&&-306674912)^e>>>1;i[t]=e}return i}(),Ui=function(){var i=-1;return{p:function(t){for(var e=i,s=0;s<t.length;++s)e=Hi[e&255^t[s]]^e>>>8;i=e},d:function(){return~i}}},Zi=function(i,t,e,s,n){if(!n&&(n={l:1},t.dictionary)){var o=t.dictionary.subarray(-32768),a=new Z(o.length+i.length);a.set(o),a.set(i,o.length),i=a,n.w=o.length}return Ai(i,t.level==null?6:t.level,t.mem==null?n.l?Math.ceil(Math.max(8,Math.min(13,Math.log(i.length)))*1.5):20:12+t.mem,e,s,n)},Xt=function(i,t,e){for(;e;++t)i[t]=e,e>>>=8},Fi=function(i,t){var e=t.filename;if(i[0]=31,i[1]=139,i[2]=8,i[8]=t.level<2?4:t.level==9?2:0,i[9]=3,t.mtime!=0&&Xt(i,4,Math.floor(new Date(t.mtime||Date.now())/1e3)),e){i[3]=8;for(var s=0;s<=e.length;++s)i[s+10]=e.charCodeAt(s)}},Gi=function(i){(i[0]!=31||i[1]!=139||i[2]!=8)&&J(6,"invalid gzip data");var t=i[3],e=10;t&4&&(e+=(i[10]|i[11]<<8)+2);for(var s=(t>>3&1)+(t>>4&1);s>0;s-=!i[e++]);return e+(t&2)},ji=function(i){var t=i.length;return(i[t-4]|i[t-3]<<8|i[t-2]<<16|i[t-1]<<24)>>>0},Bi=function(i){return 10+(i.filename?i.filename.length+1:0)};function Wi(i,t){t||(t={});var e=Ui(),s=i.length;e.p(i);var n=Zi(i,t,Bi(t),8),o=n.length;return Fi(n,t),Xt(n,o-8,e.d()),Xt(n,o-4,s),n}function qi(i,t){var e=Gi(i);return e+8>i.length&&J(6,"invalid gzip data"),zi(i.subarray(e,-8),{i:2},new Z(ji(i)),t)}var Xi=typeof TextDecoder<"u"&&new TextDecoder,Ki=0;try{Xi.decode(Be,{stream:!0}),Ki=1}catch{}function $i(i,t,e){if(!e.target){console.error("Falha ao tentar carregar os dados da entrada de dados");return}const s=e.target;if(!s.files||!s.files[0])return;const n=new FileReader;n.readAsArrayBuffer(s.files[0]),n.onload=()=>{if(!n.result||typeof n.result=="string")return;const o=qi(new Uint8Array(n.result)),a=JSON.parse(new TextDecoder().decode(o));if(typeof a.id!="string"&&typeof a.data.nodes!="object"&&Number.isInteger(a.data.nodes.length)&&typeof a.data.connections!="object"&&Number.isInteger(a.data.connections.length)&&typeof a.data.slots!="object"&&Number.isInteger(a.data.slots.length)&&typeof a.data.texts!="object"&&Number.isInteger(a.data.texts.length)&&typeof a.signal!="object"){window.alert("Falha ao carregar projeto! Arquivo inválido ou corrompido."),console.error("Falha ao carregar projeto! Arquivo inválido ou corrompido.");return}i.editorEnv=Ot.createFromJson(a,t,i.editorEnv.nodeImageList)}}function We(i){const t=window.prompt("Salvar projeto como:",`${i.documentId}-${Date.now()}`);if(t===null)return;const e=document.createElement("a"),s=new TextEncoder().encode(i.saveAsJson()),n=Wi(s,{level:6});e.href=URL.createObjectURL(new Blob([n],{type:"application/gzip"})),e.download=`${t}.simulation`,e.click()}function Qi(i){return confirm(`Deseja limpar o editor?
Qualquer progresso não salvo será perdido!`)===!0?new Ot(i.documentId,0,i.nodeImageList):null}class Yi{constructor(t){r(this,"_keyboard");this._keyboard=t}onKeyDown(t){this._keyboard.nKeysPressed!==0&&(this._keyboard.keyPressed?this._keyboard.keyHold=!0:(this._keyboard.keyPressed=!0,this._keyboard.keyHold=!1),this._keyboard.keyHold||this.handleKeyPressed(t))}handleKeyPressed(t){const e=this._keyboard.getKeysPressed();e[F.ADD]||e[F.ADD_u]?t.node(S.G_AND):e[F.NAND]||e[F.NAND_u]?t.node(S.G_NAND):e[F.NOR]||e[F.NOR_u]?t.node(S.G_NOR):e[F.NOT]||e[F.NOT_u]?t.node(S.G_NOT):e[F.OR]||e[F.OR_u]?t.node(S.G_OR):e[F.XNOR]||e[F.XNOR_u]?t.node(S.G_XNOR):e[F.XOR]||e[F.XOR_u]?t.node(S.G_XOR):e[ct.SWITCH]||e[ct.SWITCH_u]?t.input(S.I_SWITCH):e[ct.BUTTON]||e[ct.BUTTON_u]?t.input(S.I_BUTTON):e[ct.CLOCK]||e[ct.CLOCK_u]?t.input(S.I_CLOCK):e[bt.LED_RED]||e[bt.LED_RED_u]?t.output(S.O_LED_RED):e[bt.SEGMENTS]||e[bt.SEGMENTS_u]?t.output(S.O_7_SEGMENTS):e[Ft.DELETE]?t.remove():e[Ft.INSERT]&&We(t.editorEnv)}onKeyUp(){this._keyboard.keyPressed&&this._keyboard.nKeysPressed===0&&(this._keyboard.keyPressed=!1,this._keyboard.keyHold=!1)}}class Ji{constructor(){r(this,"keys",{});r(this,"keyPressed",!1);r(this,"keyHold",!1);r(this,"stateChange",!1);r(this,"_nKeysPressed",0)}get nKeysPressed(){return this._nKeysPressed}set nKeysPressed(t){t<0&&console.warn("Número de teclas pressionadas é menor que 0!"),this._nKeysPressed=Math.max(0,t)}setKeyPressed(t,e){this.keys[t]=e,this.nKeysPressed+=e?1:-1}getKeysPressed(){return this.keys}}const Vi=[ce,de,pe,fe,ue,ye,ge,me,we,ke,ve,xe,Ie,Pe,Te,Oe,Me,_e,Ne,Ee,De,Le];function ts(){const i={};for(const t of Vi)fi(t).then(e=>{i[t]=e});return i}function es(i,t,e){var s,n,o,a;if(!window){console.error("Variável window é nula! Não será possível iniciar o editor");return}window.onload=()=>{i.resize(),setInterval(i.compute,1e3/i.tickRate),i.update(),setTimeout(()=>{document.getElementById("app").style.visibility="visible",document.getElementById("app-toolbar").style.visibility="visible",document.getElementById("app").className="animate-show",document.getElementById("app-toolbar").className="animate-show",document.getElementById("loading-div").style.visibility="hidden"},1e3)},window.onresize=()=>i.resize(),t.onmousedown=()=>i.mouse.clicked=!0,t.onmouseup=t.onmouseout=()=>i.mouse.clicked=!1,window.onmousemove=({x:h,y:f})=>i.setLocalMousePosition(h,f),window.onkeydown=h=>i.keyboard.setKeyPressed(h.key,!0),window.onkeyup=h=>i.keyboard.setKeyPressed(h.key,!1),(s=document.getElementById("save-editor"))==null||s.addEventListener("click",()=>We(i.editorEnv)),(n=document.getElementById("load-editor"))==null||n.addEventListener("click",()=>{var h;(h=document.getElementById("load-editor-file"))==null||h.click()}),(o=document.getElementById("load-editor-file"))==null||o.addEventListener("change",h=>$i(i,i.canvasCtx,h)),(a=document.getElementById("clear-editor"))==null||a.addEventListener("click",()=>{i.editorEnv=Qi(i.editorEnv)??i.editorEnv})}class is{constructor(t,e,s,n=60){r(this,"editorEnv");r(this,"mouse");r(this,"keyboard");r(this,"mouseEvents");r(this,"keyboardEvents");r(this,"canvasId");r(this,"canvasCtx");r(this,"backgroundCtx");r(this,"backgroundPattern");r(this,"windowResized");r(this,"tickRate");r(this,"update",()=>{Qe(this.canvasCtx,this.editorEnv.components),this.windowResized&&(Ye(this.backgroundCtx,this.backgroundPattern),this.windowResized=!1),requestAnimationFrame(this.update)});r(this,"compute",()=>{this.keyboardEvents.onKeyDown(this),this.keyboardEvents.onKeyUp(),this.mouseEvents.onMouseClick(this.editorEnv),this.mouseEvents.onMouseMove(this.editorEnv),this.mouseEvents.onMouseRelease(this.editorEnv),Gt.onPhysicsEngineUpdate(this.editorEnv.nodes,this.editorEnv.signalGraph)});this.editorEnv=new Ot(t,0,ts()),this.mouse=new Oi,this.keyboard=new Ji,this.mouseEvents=new B(this.mouse),this.keyboardEvents=new Yi(this.keyboard);const o=document.getElementById(e),a=document.getElementById(s);this.canvasId=e,this.canvasCtx=this.createContext(o),this.backgroundCtx=this.createContext(a),this.backgroundPattern=null,this.loadBackgroundPattern(Ke),this.windowResized=!0,this.tickRate=n,es(this,o)}createContext(t){return t.getContext("2d",{desynchronized:!0})}loadBackgroundPattern(t){const e=new Image;e.onload=()=>{this.backgroundPattern=this.backgroundCtx.createPattern(e,"repeat")},e.src=t}getEditorArea(){var s;const t=(s=document.getElementById(this.canvasId))==null?void 0:s.parentElement,e=new l(0,0);if(t){const n=window.getComputedStyle(t);e.x=parseFloat(n.width.substring(0,n.length-2)),e.y=parseFloat(n.height.substring(0,n.length-2))}else e.x=window.innerWidth,e.y=window.innerHeight;return e}setLocalMousePosition(t,e){const s=this.canvasCtx.canvas.getBoundingClientRect();this.mouse.position=new l(t-s.left,e-s.top)}resize(){const t=this.getEditorArea();this.canvasCtx.canvas.width=t.x,this.canvasCtx.canvas.height=t.y,this.backgroundCtx.canvas.width=t.x,this.backgroundCtx.canvas.height=t.y,this.windowResized=!0}node(t=S.G_AND,e=this.mouse.position.x,s=this.mouse.position.y){return K.node(void 0,this.editorEnv,this.canvasCtx.canvas.width,this.canvasCtx.canvas.height,t,e,s)}input(t=S.I_SWITCH,e=this.mouse.position.x,s=this.mouse.position.y){return K.input(void 0,this.editorEnv,this.canvasCtx.canvas.width,this.canvasCtx.canvas.height,t,e,s)}output(t=S.O_LED_RED,e=this.mouse.position.x,s=this.mouse.position.y){return K.output(void 0,this.editorEnv,this.canvasCtx.canvas.width,this.canvasCtx.canvas.height,t,e,s)}line(t,e,s,n,o,a){return K.connection(void 0,this.editorEnv,t,e,s,n,o,a)}text(t,e,s,n,o){return K.text(void 0,this.editorEnv,this.canvasCtx,t,e,s,n,o)}slot(t,e,s,n,o,a,h,f,m){return K.slot(void 0,this.editorEnv,t,e,s,n,o,a,h,f,m)}remove(){return this.mouseEvents.getCollisionList().nodes.length!==0?this.editorEnv.removeComponent(this.mouseEvents.getCollisionList().nodes[0]):this.mouseEvents.getCollisionList().connections.length!==0?this.editorEnv.removeComponent(this.mouseEvents.getCollisionList().connections[0]):this.mouseEvents.getCollisionList().texts.length!==0?this.editorEnv.removeComponent(this.mouseEvents.getCollisionList().texts[0]):!1}}const ss=new is("teste","editor-canvas","editor-background");ss.text("Olá mundo",500,200,"32px sans-serif");
