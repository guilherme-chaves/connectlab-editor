(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const r of i)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function s(i){const r={};return i.integrity&&(r.integrity=i.integrity),i.referrerPolicy&&(r.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?r.credentials="include":i.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function n(i){if(i.ep)return;i.ep=!0;const r=s(i);fetch(i.href,r)}})();const he=[];for(let t=0;t<256;++t)he.push((t+256).toString(16).slice(1));function ir(t,e=0){return(he[t[e+0]]+he[t[e+1]]+he[t[e+2]]+he[t[e+3]]+"-"+he[t[e+4]]+he[t[e+5]]+"-"+he[t[e+6]]+he[t[e+7]]+"-"+he[t[e+8]]+he[t[e+9]]+"-"+he[t[e+10]]+he[t[e+11]]+he[t[e+12]]+he[t[e+13]]+he[t[e+14]]+he[t[e+15]]).toLowerCase()}let ls;const rr=new Uint8Array(16);function or(){if(!ls){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");ls=crypto.getRandomValues.bind(crypto)}return ls(rr)}const ar=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),qs={randomUUID:ar};function lr(t,e,s){t=t||{};const n=t.random??t.rng?.()??or();if(n.length<16)throw new Error("Random bytes length must be >= 16");return n[6]=n[6]&15|64,n[8]=n[8]&63|128,ir(n)}function cr(t,e,s){return qs.randomUUID&&!t?qs.randomUUID():lr(t)}var me=(t=>(t.ADD="a",t.ADD_u="A",t.NAND="d",t.NAND_u="D",t.NOR="r",t.NOR_u="R",t.NOT="n",t.NOT_u="N",t.OR="o",t.OR_u="O",t.XNOR="v",t.XNOR_u="V",t.XOR="x",t.XOR_u="X",t))(me||{}),Be=(t=>(t.SWITCH="s",t.SWITCH_u="S",t.BUTTON="b",t.BUTTON_u="B",t.CLOCK="k",t.CLOCK_u="K",t))(Be||{}),rt=(t=>(t.LED_RED="l",t.LED_RED_u="L",t.SEGMENTS="e",t.SEGMENTS_u="E",t))(rt||{}),$s=(t=>(t.DELETE="Delete",t.BACKSPACE="Backspace",t.INSERT="Insert",t))($s||{}),le=(t=>(t[t.LINE=1]="LINE",t[t.NODE=2]="NODE",t[t.TEXT=3]="TEXT",t[t.SLOT=4]="SLOT",t[t.INPUT=5]="INPUT",t[t.OUTPUT=6]="OUTPUT",t))(le||{}),z=(t=>(t[t.G_AND=0]="G_AND",t[t.G_NAND=1]="G_NAND",t[t.G_NOR=2]="G_NOR",t[t.G_NOT=3]="G_NOT",t[t.G_OR=4]="G_OR",t[t.G_XNOR=5]="G_XNOR",t[t.G_XOR=6]="G_XOR",t[t.I_SWITCH=100]="I_SWITCH",t[t.I_BUTTON=101]="I_BUTTON",t[t.I_CLOCK=102]="I_CLOCK",t[t.O_LED_RED=200]="O_LED_RED",t[t.O_7_SEGMENTS=201]="O_7_SEGMENTS",t))(z||{}),ne=(t=>(t[t.MOUSE_CLICKED=0]="MOUSE_CLICKED",t[t.MOUSE_RELEASED=1]="MOUSE_RELEASED",t[t.MOUSE_DRAGGED=2]="MOUSE_DRAGGED",t[t.KEY_PRESSED=10]="KEY_PRESSED",t[t.KEY_RELEASED=11]="KEY_RELEASED",t[t.KEY_HOLDED=12]="KEY_HOLDED",t[t.FOCUS_IN=20]="FOCUS_IN",t[t.FOCUS_OUT=21]="FOCUS_OUT",t[t.CLOCK_TRIGGERED=30]="CLOCK_TRIGGERED",t[t.CLOCK_FINISHED=31]="CLOCK_FINISHED",t[t.ENGINE_UPDATE=40]="ENGINE_UPDATE",t))(ne||{});const dr="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'?%3e%3csvg%20width='64'%20height='64'%20version='1.1'%20viewBox='0%200%2016%2016'%20xmlns='http://www.w3.org/2000/svg'%3e%3cg%20fill='none'%20stroke='%23289fac'%20stroke-linejoin='round'%20stroke-opacity='.5'%20stroke-width='.3'%3e%3cpath%20d='m0%2010.82h16'/%3e%3cpath%20d='m0%205.482h16'/%3e%3cpath%20d='m0%200.0675h16'/%3e%3cpath%20d='m10.82%200v16'/%3e%3cpath%20d='m16.06%200v16'/%3e%3cpath%20d='m0.0675%200v16'/%3e%3cpath%20d='m5.482%200v16'/%3e%3cpath%20d='m0%2016.06h16'/%3e%3c/g%3e%3c/svg%3e",ur=["connections","nodes","slots","texts"];function ci(t){t.save(),t.setTransform(1,0,0,1,0,0),t.clearRect(0,0,t.canvas.width,t.canvas.height),t.restore()}function hr(t,e){ci(t);for(const s of ur)for(const n of e[s].values())n.draw(t)}function fr(t,e){ci(t),t.rect(0,0,t.canvas.width,t.canvas.height),t.fillStyle=e??"#ff0000",t.fill()}function pr(t){return t=t-(t>>1&1431655765),t=(t&858993459)+(t>>2&858993459),(t+(t>>4)&252645135)*16843009>>24}const mr=(t,e)=>Ns(t),di=(t,e)=>{const s=(1<<e)-1;return(t&s)===s},yr=(t,e)=>!di(t,e),ui=(t,e)=>!Ns(t),gr=(t,e)=>e>1?ui(t):(t&1)!==1,Ns=(t,e)=>(t|0)!==0,vr=(t,e)=>!hi(t),hi=(t,e)=>pr(t)%2===1,je={input_output:mr,and:di,nand:yr,nor:ui,not:gr,or:Ns,xnor:vr,xor:hi},We={updateGraph(t,e){const s=new Set,n=[e];let i=n.shift();for(;i!==void 0;)!s.has(i)&&t[i]!==void 0&&((t[i].nodeType<z.I_SWITCH||t[i].nodeType>=z.O_LED_RED)&&this.computeState(t,t[i]),n.push(...t[i].signalTo.values())),s.add(i),i=n.shift()},computeState(t,e){const s=this.getComputeFunction(e.nodeType);let n=0,i=0;for(const r of e.signalFrom.values()){if(r>=-1){const o=t[r]?.output?1:0;i+=o<<n}n++}e.output=s(i,n)},getComputeFunction(t){switch(t){case z.G_AND:return je.and;case z.G_NAND:return je.nand;case z.G_NOR:return je.nor;case z.G_NOT:return je.not;case z.G_OR:return je.or;case z.G_XNOR:return je.xnor;case z.G_XOR:return je.xor;default:return je.input_output}}},Me={vertex:{add(t,e,s,n,i=!1,r=new Map,o=new Set){if(t[e]===void 0){if(r.size===0)for(const d of Object.values(n.connectionSlot))d.in&&r.set(d.id,-1);t[e]={id:e,output:i,signalFrom:r,signalTo:o,nodeType:s,signalGraph:t},We.updateGraph(t,e)}},remove(t,e){const s=t[e];if(s===void 0){console.warn(`Node ${e} não encontrado no grafo de sinal lógico ao ser removido!`);return}for(const n of s.signalTo.values())t[n]!==void 0&&t[n].signalFrom.forEach((i,r,o)=>{i===e&&o.set(r,-1)});delete t[e]},getState(t,e){return t[e].output??!1},setState(t,e,s){t[e]&&(t[e].output=s)}},edge:{add(t,e,s,n){const i=s.parent.id,r=n.parent.id;t[i]!==void 0?t[i].signalTo.add(r):console.warn(`Node inicial com ID ${r} não encontrado no grafo de sinal, isso poderá acarretar em bugs`,e),t[r]!==void 0?t[r].signalFrom.set(n.slotIdAtParent,i):console.warn(`Node final com ID ${r} não encontrado no grafo de sinal, isso poderá acarretar em bugs`,e),We.updateGraph(t,i)},remove(t,e){if(e===void 0)return;const s=e.connectedTo.start?.nodeId??-1,n=e.connectedTo.end?.nodeId??-1;n>=0&&t[n]!==void 0&&t[n].signalFrom.forEach((i,r,o)=>{i===s&&o.set(r,-1)}),s>=0&&t[s]!==void 0&&t[s].signalTo.delete(e.connectedTo.end?.nodeId??-1),n!==-1&&We.updateGraph(t,n)}}},Ke={node(t,e){const s=t.nodes.get(e);if(s===void 0)return!1;for(let n=0;n<s.slots.length;n++)t.removeComponent(s.slots[n].id,le.SLOT);return Me.vertex.remove(t.signalGraph,e),t.nodes.delete(e)},slot(t,e){const s=t.slots.get(e);if(s===void 0)return!1;for(const n of Object.values(s.slotConnections))t.removeComponent(n.id,le.LINE);return t.slots.delete(e)},connection(t,e){const s=t.connections.get(e);if(s===void 0)return!1;const n=t.slots.get(s.connectedTo.start?.slotId??-1),i=t.slots.get(s.connectedTo.end?.slotId??-1);if(n){const r=n.slotConnections.findIndex(o=>o.id===e);r!==-1&&n.slotConnections.splice(r,1)}if(i){const r=i.slotConnections.findIndex(o=>o.id===e);r!==-1&&i.slotConnections.splice(r,1)}return Me.edge.remove(t.signalGraph,s),t.connections.delete(e)},text(t,e){return t.texts.delete(e)}};class H{type="float";_x=0;_y=0;static get ZERO(){return new H}static get ONE(){return new H(1,1)}static get UP(){return new H(0,-1)}static get DOWN(){return new H(0,1)}static get LEFT(){return new H(-1,-0)}static get RIGHT(){return new H(1,0)}get x(){return this._x}set x(e){this._x=e}get y(){return this._y}set y(e){this._y=e}constructor(e=0,s=0){typeof e=="number"?(this.x=e,this.y=s):H.isVector2(e)&&(this.x=e.x,this.y=e.y)}static isVector2(e){return typeof e=="object"&&e!==null&&"_x"in e&&"_y"in e&&"type"in e&&(e.type==="int"||e.type==="float")}add(e){return H.isVector2(e)?(this.x+=e.x,this.y+=e.y):(this.x+=e,this.y+=e),this}static add(e,s,n){return n??=H.ZERO,H.isVector2(s)?(n.x=e.x+s.x,n.y=e.y+s.y):(n.x=e.x+s,n.y=e.y+s),n}sub(e){return H.isVector2(e)?(this.x-=e.x,this.y-=e.y):(this.x-=e,this.y-=e),this}static sub(e,s,n){return n??=H.ZERO,H.isVector2(s)?(n.x=e.x-s.x,n.y=e.y-s.y):(n.x=e.x-s,n.y=e.y-s),n}mul(e){return H.isVector2(e)?(this.x*=e.x,this.y*=e.y):(this.x*=e,this.y*=e),this}static mul(e,s,n){return n??=H.ZERO,H.isVector2(s)?(n.x=e.x*s.x,n.y=e.y*s.y):(n.x=e.x*s,n.y=e.y*s),n}div(e){return H.isVector2(e)?(this.x/=e.x,this.y/=e.y):(this.x/=e,this.y/=e),this}static div(e,s,n){return n??=H.ZERO,H.isVector2(s)?(n.x=e.x/s.x,n.y=e.y/s.y):(n.x=e.x/s,n.y=e.y/s),n}dot(e){return this.x*e.x+this.y*e.y}static dot(e,s){return e.x*s.x+e.y*s.y}cross(e){return this.x*e.y-this.y*e.x}static cross(e,s){return e.x*s.y-e.y*s.x}len(){return Math.sqrt(this.lenSquared())}static len(e){return Math.sqrt(H.lenSquared(e))}lenSquared(){return this.dot(this)}static lenSquared(e){return H.dot(e,e)}madd(e,s){return this.x+=e.x*s,this.y+=e.y*s,this}static madd(e,s,n,i){return i??=new H(0,0),i.x=e.x+s.x*n,i.y=e.y+s.y*n,i}lerp(e,s){return this.madd(H.sub(e,this),s)}static lerp(e,s,n,i){return H.madd(e,H.sub(s,e),n,i)}bilinear(e,s){return this.x=H.lerp(this,e,s.x).x,this.y=H.lerp(this,e,s.y).y,this}static bilinear(e,s,n,i){return i??=new H(0,0),i.x=H.lerp(e,s,n.x,void 0).x,i.y=H.lerp(e,s,n.y,void 0).y,i}equals(e,s=1e-4){return Math.abs(this.x-e.x)<s&&Math.abs(this.y-e.y)<s}static equals(e,s,n=1e-4){return Math.abs(e.x-s.x)<n&&Math.abs(e.y-s.y)<n}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}static min(e,s,n){return n??=new H(0,0),n.x=Math.min(e.x,s.x),n.y=Math.min(e.y,s.y),n}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}static max(e,s,n){return n??=new H(0,0),n.x=Math.max(e.x,s.x),n.y=Math.max(e.y,s.y),n}rotate(e){const s=Math.sin(e),n=Math.cos(e);return this.x=this.x*n-this.y*s,this.y=this.x*s+this.y*n,this}static rotate(e,s,n){n??=new H(0,0);const i=Math.sin(s),r=Math.cos(s);return n.x=e.x*r-e.y*i,n.y=e.x*i+e.y*r,n}atan2(e){return Math.atan2(e.y-this.y,e.x-this.x)}static atan2(e,s){return Math.atan2(s.y-e.y,s.x-e.x)}normalize(){return this.div(this.len())}static normalize(e,s){return H.div(e,e.len(),s)}abs(){return this.x=Math.abs(this.x),this.y=Math.abs(this.y),this}static abs(e,s){return s??=new H(0,0),s.x=Math.abs(e.x),s.y=Math.abs(e.y),s}copy(e){return this.x=e.x,this.y=e.y,this}static copy(e,s){return s.x=e.x,s.y=e.y,s}clone(){return new H(this)}static clone(e){return new H(e)}toPlainObject(){return{x:this.x,y:this.y}}}class O{type="int";_x=0;_y=0;static get ZERO(){return new O}static get ONE(){return new O(1,1)}static get UP(){return new O(0,-1)}static get DOWN(){return new O(0,1)}static get LEFT(){return new O(-1,-0)}static get RIGHT(){return new O(1,0)}get x(){return this._x}set x(e){this._x=Math.round(e)}get y(){return this._y}set y(e){this._y=Math.round(e)}constructor(e=0,s=0){typeof e=="number"?(this.x=e,this.y=s):O.isVector2(e)&&(this.x=e.x,this.y=e.y)}static isVector2(e){return typeof e=="object"&&e!==null&&"_x"in e&&"_y"in e&&"type"in e&&(e.type==="int"||e.type==="float")}add(e){return O.isVector2(e)?(this.x+=e.x,this.y+=e.y):(this.x+=e,this.y+=e),this}static add(e,s,n){return n??=O.ZERO,O.isVector2(s)?(n.x=e.x+s.x,n.y=e.y+s.y):(n.x=e.x+s,n.y=e.y+s),n}sub(e){return O.isVector2(e)?(this.x-=e.x,this.y-=e.y):(this.x-=e,this.y-=e),this}static sub(e,s,n){return n??=O.ZERO,O.isVector2(s)?(n.x=e.x-s.x,n.y=e.y-s.y):(n.x=e.x-s,n.y=e.y-s),n}mul(e){return O.isVector2(e)?(this.x*=e.x,this.y*=e.y):(this.x*=e,this.y*=e),this}static mul(e,s,n){return n??=O.ZERO,O.isVector2(s)?(n.x=e.x*s.x,n.y=e.y*s.y):(n.x=e.x*s,n.y=e.y*s),n}div(e){return O.isVector2(e)?(this.x/=e.x,this.y/=e.y):(this.x/=e,this.y/=e),this}static div(e,s,n){return n??=O.ZERO,O.isVector2(s)?(n.x=e.x/s.x,n.y=e.y/s.y):(n.x=e.x/s,n.y=e.y/s),n}dot(e){return this.x*e.x+this.y*e.y}static dot(e,s){return e.x*s.x+e.y*s.y}cross(e){return this.x*e.y-this.y*e.x}static cross(e,s){return e.x*s.y-e.y*s.x}len(){return Math.sqrt(this.lenSquared())}static len(e){return Math.sqrt(O.lenSquared(e))}lenSquared(){return this.dot(this)}static lenSquared(e){return O.dot(e,e)}madd(e,s){return this.x+=e.x*s,this.y+=e.y*s,this}static madd(e,s,n,i){return i??=O.ZERO,i.x=e.x+s.x*n,i.y=e.y+s.y*n,i}lerp(e,s){return this.madd(O.sub(e,this),s)}static lerp(e,s,n,i){return O.madd(e,O.sub(s,e),n,i)}bilinear(e,s){return this.x=O.lerp(this,e,s.x).x,this.y=O.lerp(this,e,s.y).y,this}static bilinear(e,s,n,i){return i??=O.ZERO,i.x=O.lerp(e,s,n.x).x,i.y=O.lerp(e,s,n.y).y,i}equals(e,s=0){return s===0?this.x===e.x&&this.y===e.y:Math.abs(this.x-e.x)<s&&Math.abs(this.y-e.y)<s}static equals(e,s,n=0){return n===0?e.x===s.x&&e.y===s.y:Math.abs(e.x-s.x)<n&&Math.abs(e.y-s.y)<n}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}static min(e,s,n){return n??=O.ZERO,n.x=Math.min(e.x,s.x),n.y=Math.min(e.y,s.y),n}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}static max(e,s,n){return n??=O.ZERO,n.x=Math.max(e.x,s.x),n.y=Math.max(e.y,s.y),n}rotate(e){const s=Math.sin(e),n=Math.cos(e);return this.x=this.x*n-this.y*s,this.y=this.x*s+this.y*n,this}static rotate(e,s,n){n??=O.ZERO;const i=Math.sin(s),r=Math.cos(s);return n.x=e.x*r-e.y*i,n.y=e.x*i+e.y*r,n}atan2(e){return Math.atan2(e.y-this.y,e.x-this.x)}static atan2(e,s){return Math.atan2(s.y-e.y,s.x-e.x)}normalize(){return H.div(this,this.len())}static normalize(e,s){return H.div(e,e.len(),s)}abs(){return this.x=Math.abs(this.x),this.y=Math.abs(this.y),this}static abs(e,s){return s??=O.ZERO,s.x=Math.abs(e.x),s.y=Math.abs(e.y),s}copy(e){return this.x=e.x,this.y=e.y,this}static copy(e,s){return s.x=e.x,s.y=e.y,s}clone(){return new O(this)}static clone(e){return new O(e)}toPlainObject(){return{x:this.x,y:this.y}}}class ot{position;endPosition;borderColor;drawPath;regenPath;lineLength;constructor(e,s,n="#FF8008DC",i=!0){this.position=e,this.endPosition=s,this.lineLength=this.computeLineLength(),this.borderColor=n,this.regenPath=!0,this.drawPath=i?this.generatePath():null}generatePath(){const e=new Path2D;return e.moveTo(this.position.x,this.position.y),e.lineTo(this.endPosition.x,this.endPosition.y),this.regenPath=!1,e}computeLineLength(){return O.sub(this.endPosition,this.position).len()}draw(e,s){s&&((!this.drawPath||this.regenPath)&&(this.drawPath=this.generatePath()),e.save(),e.strokeStyle=this.borderColor,e.stroke(this.drawPath),e.restore())}moveShape(e,s){s?(this.position.add(e),this.endPosition.add(e)):(this.position.add(O.sub(this.position,e)),this.endPosition.add(O.sub(this.position,e)))}collisionWithPoint(e){const s=O.sub(this.position,e).len(),n=O.sub(this.endPosition,e).len();return s+n-this.lineLength<1e-4}collisionWithBox(e){return e.collisionWithLine(this)}collisionWithCircle(e){if(e.collisionWithPoint(this.position)||e.collisionWithPoint(this.endPosition))return!0;const s=((e.position.x-this.position.x)*(this.endPosition.x-this.position.x)+(e.position.y-this.position.y)*(this.endPosition.y-this.position.y))/Math.pow(this.lineLength,2),n=new O(this.position.x+s*(this.endPosition.x-this.position.x),this.position.y+s*(this.endPosition.y-this.position.y));return this.collisionWithPoint(n)?O.sub(n,e.position).len()<e.radius:!1}collisionWithLine(e){const s=(this.position.x-this.endPosition.x)*(e.position.y-e.endPosition.y)-(this.position.y-this.endPosition.y)*(e.position.x-e.endPosition.x);if(s===0)return!!(this.collisionWithPoint(e.position)||this.collisionWithPoint(e.endPosition)||e.collisionWithPoint(this.position));const n=(this.position.x-e.position.x)*(e.position.y-e.endPosition.y)-(this.position.y-e.position.y)*(e.position.x-e.endPosition.x),i=(this.position.x-this.endPosition.x)*(this.position.y-e.position.y)-(this.position.y-this.endPosition.y)*(this.position.x-e.position.x),r=n/s,o=-(i/s);return r>=0&&r<=1&&o>=0&&o<=1}}class De{position;localVertices;vertices;width;height;drawPath;regenPath;borderColor;lines=[];constructor(e,s=2,n=2,i="#FF8008DC"){this.position=e,this.width=s,this.height=n,this.borderColor=i,this.localVertices=this.setLocalVertices(),this.regenPath=!1,this.vertices={a:O.add(this.position,this.localVertices.a),b:O.add(this.position,this.localVertices.b),c:O.add(this.position,this.localVertices.c),d:O.add(this.position,this.localVertices.d)},this.lines.push(new ot(this.vertices.a,this.vertices.d,void 0,!1),new ot(this.vertices.a,this.vertices.b,void 0,!1),new ot(this.vertices.b,this.vertices.c,void 0,!1),new ot(this.vertices.c,this.vertices.d,void 0,!1))}setVertices(){O.add(this.position,this.localVertices.a,this.vertices.a),O.add(this.position,this.localVertices.b,this.vertices.b),O.add(this.position,this.localVertices.c,this.vertices.c),O.add(this.position,this.localVertices.d,this.vertices.d)}setLocalVertices(){return Object.freeze({a:new O,b:new O(this.width,0),c:new O(this.width,this.height),d:new O(0,this.height)})}generatePath(){const e=new Path2D;return e.rect(this.vertices.a.x,this.vertices.a.y,this.width,this.height),this.regenPath=!1,e}draw(e,s){s&&((!this.drawPath||this.regenPath)&&(this.drawPath=this.generatePath()),e.save(),e.strokeStyle=this.borderColor,e.stroke(this.drawPath),e.restore())}moveShape(e,s=!0){s?this.position.add(e):this.position.copy(e),this.setVertices(),this.regenPath=!0}collisionWithPoint(e){return e.x>this.vertices.a.x&&e.x<this.vertices.c.x&&e.y>this.vertices.a.y&&e.y<this.vertices.c.y}collisionWithBox(e){return!(this.vertices.c.x<e.vertices.a.x||this.vertices.c.y<e.vertices.a.y||this.vertices.a.x>e.vertices.c.x||this.vertices.a.y>e.vertices.c.y)}collisionWithCircle(e){return e.collisionWithBox(this)}collisionWithLine(e){return this.collisionWithPoint(e.position)||this.collisionWithPoint(e.endPosition)||e.collisionWithLine(this.lines[0])||e.collisionWithLine(this.lines[1])||e.collisionWithLine(this.lines[2])||e.collisionWithLine(this.lines[3])}}const wr={setCollisionShapeSize(t,e,s=0,n=0,i=0,r=0,o=1e-4){return new H(Math.abs(t.x-e.x)<o?s:n,Math.abs(t.y-e.y)<o?i:r)},generateCollisionShapes(t,e,s){if(s.length===0)return[];const n=[],i=new O(6,6),r=t.clone(),o=new O;for(let d=0;d<=s.length;d++){d<s.length?O.bilinear(t,e,s[d],o):o.copy(e);const f=this.setCollisionShapeSize(r,o,12,o.x-r.x,12,o.y-r.y);n.push(new De(r.sub(i),f.x,f.y)),r.copy(o)}return n}},zs=Math.PI*.5,_r=Math.PI*1.5,dt=Math.PI*.25,ut=Math.PI*.75;function fi(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Jt={exports:{}},kr=Jt.exports,Us;function br(){return Us||(Us=1,function(t,e){(function(){var s,n,i,r,o,d,f,w,p,$,v,_,k,b,h;i=Math.floor,$=Math.min,n=function(l,a){return l<a?-1:l>a?1:0},p=function(l,a,c,y,u){var m;if(c==null&&(c=0),u==null&&(u=n),c<0)throw new Error("lo must be non-negative");for(y==null&&(y=l.length);c<y;)m=i((c+y)/2),u(a,l[m])<0?y=m:c=m+1;return[].splice.apply(l,[c,c-c].concat(a)),a},d=function(l,a,c){return c==null&&(c=n),l.push(a),b(l,0,l.length-1,c)},o=function(l,a){var c,y;return a==null&&(a=n),c=l.pop(),l.length?(y=l[0],l[0]=c,h(l,0,a)):y=c,y},w=function(l,a,c){var y;return c==null&&(c=n),y=l[0],l[0]=a,h(l,0,c),y},f=function(l,a,c){var y;return c==null&&(c=n),l.length&&c(l[0],a)<0&&(y=[l[0],a],a=y[0],l[0]=y[1],h(l,0,c)),a},r=function(l,a){var c,y,u,m,S,I;for(a==null&&(a=n),m=(function(){I=[];for(var x=0,j=i(l.length/2);0<=j?x<j:x>j;0<=j?x++:x--)I.push(x);return I}).apply(this).reverse(),S=[],y=0,u=m.length;y<u;y++)c=m[y],S.push(h(l,c,a));return S},k=function(l,a,c){var y;if(c==null&&(c=n),y=l.indexOf(a),y!==-1)return b(l,0,y,c),h(l,y,c)},v=function(l,a,c){var y,u,m,S,I;if(c==null&&(c=n),u=l.slice(0,a),!u.length)return u;for(r(u,c),I=l.slice(a),m=0,S=I.length;m<S;m++)y=I[m],f(u,y,c);return u.sort(c).reverse()},_=function(l,a,c){var y,u,m,S,I,x,j,L,U;if(c==null&&(c=n),a*10<=l.length){if(m=l.slice(0,a).sort(c),!m.length)return m;for(u=m[m.length-1],j=l.slice(a),S=0,x=j.length;S<x;S++)y=j[S],c(y,u)<0&&(p(m,y,0,null,c),m.pop(),u=m[m.length-1]);return m}for(r(l,c),U=[],I=0,L=$(a,l.length);0<=L?I<L:I>L;0<=L?++I:--I)U.push(o(l,c));return U},b=function(l,a,c,y){var u,m,S;for(y==null&&(y=n),u=l[c];c>a;){if(S=c-1>>1,m=l[S],y(u,m)<0){l[c]=m,c=S;continue}break}return l[c]=u},h=function(l,a,c){var y,u,m,S,I;for(c==null&&(c=n),u=l.length,I=a,m=l[a],y=2*a+1;y<u;)S=y+1,S<u&&!(c(l[y],l[S])<0)&&(y=S),l[a]=l[y],a=y,y=2*a+1;return l[a]=m,b(l,I,a,c)},s=function(){l.push=d,l.pop=o,l.replace=w,l.pushpop=f,l.heapify=r,l.updateItem=k,l.nlargest=v,l.nsmallest=_;function l(a){this.cmp=a??n,this.nodes=[]}return l.prototype.push=function(a){return d(this.nodes,a,this.cmp)},l.prototype.pop=function(){return o(this.nodes,this.cmp)},l.prototype.peek=function(){return this.nodes[0]},l.prototype.contains=function(a){return this.nodes.indexOf(a)!==-1},l.prototype.replace=function(a){return w(this.nodes,a,this.cmp)},l.prototype.pushpop=function(a){return f(this.nodes,a,this.cmp)},l.prototype.heapify=function(){return r(this.nodes,this.cmp)},l.prototype.updateItem=function(a){return k(this.nodes,a,this.cmp)},l.prototype.clear=function(){return this.nodes=[]},l.prototype.empty=function(){return this.nodes.length===0},l.prototype.size=function(){return this.nodes.length},l.prototype.clone=function(){var a;return a=new l,a.nodes=this.nodes.slice(0),a},l.prototype.toArray=function(){return this.nodes.slice(0)},l.prototype.insert=l.prototype.push,l.prototype.top=l.prototype.peek,l.prototype.front=l.prototype.peek,l.prototype.has=l.prototype.contains,l.prototype.copy=l.prototype.clone,l}(),function(l,a){return t.exports=a()}(this,function(){return s})}).call(kr)}(Jt)),Jt.exports}var cs,Fs;function $r(){return Fs||(Fs=1,cs=br()),cs}var Sr=$r();const Pr=fi(Sr),Er={collisionList:new Map,currentLineCollisions:new Map,stepDirectionFromAtan2(t){const e=new H;return t<=dt&&t>=-dt&&(e.x=1),t>dt&&t<ut&&(e.y=1),(t>=ut||t<=-ut)&&(e.x=-1),t<-dt&&t>-ut&&(e.y=-1),e},getSearchArea(t,e,s=3){const i=H.sub(t,e).abs().mul(s),r=O.min(t,e),o=O.max(t,e),d=H.add(r,o).div(2);return O.sub(d,H.div(i,2),r),new De(r,i.x,i.y)},getCollisionsInArea(t,e){this.currentLineCollisions.clear();for(const s of t.values())s.collisionShape.collisionWithBox(e)&&this.currentLineCollisions.set(s.id,s);return this.currentLineCollisions},floatEquals(t,e,s){return Math.abs(t-e)<s},currentDirection(t,e,s){const n=H.sub(e,t),i=n.len();if(n.equals(H.ZERO)&&i===0)return"e";const r=t.atan2(e);return this.floatEquals(r,zs,s)?"y":this.floatEquals(r,0,s)?"x":"c"},optimizePath(t,e=1e-5){const s=[];let n="c";for(let i=0;i<t.length;i++){const r=this.currentDirection(t[Math.max(0,i-1)],t[Math.min(i,t.length-1)],e);r==="c"||r!==n&&n!=="e"?s.push(t[i]):r==="x"?s[s.length-1].x=t[i].x:r==="y"&&(s[s.length-1].y=t[i].y),n=r}return s.filter(i=>!i.equals(H.ONE))},simplePathFinder(t,e,s=new H(.5,1)){const n=[];if(t.equals(e))return n;const i=t.clone(),r=H.ZERO;let o=0;for(;!i.equals(e)&&!(o>15);){o++;const d=e.atan2(i),w=this.stepDirectionFromAtan2(d).abs().mul(s).add(r);n.push(w),O.bilinear(t,e,w,i),r.copy(w)}return n},stepCollisionExists(t,e,s,n,i){const r=O.bilinear(t,e,n),o=new ot(s,r,void 0,!1);for(const d of i.values())if(d.collisionShape.collisionWithLine(o))return!0;return!1},manhattanDistance(t,e){return Math.abs(t.x-e.x)+Math.abs(t.y-e.y)},computeStepScore(t,e,s){return this.manhattanDistance(t,e)+this.manhattanDistance(e,s)},createPathFromScores(t,e){let s=t.get(`${e.x}::${e.y}`);const n=[];for(;s!==void 0;)n.push(s.t.clone()),s=s.from!==void 0?t.get(`${s.from.x}::${s.from.y}`):void 0;return t.clear(),n.reverse()},setNodeScore(t,e,s,n,i,r,o){const d=t.get(i)?.score??1/0;if(isNaN(d))return 3;const f=t.get(o??"");if(f!==void 0){if(n.x===f.position.x&&n.y===f.position.y)return 2;if(f.from!==void 0&&n.x===f.from.x&&n.y===f.from.y)return 4}const w=this.computeStepScore(e,n,s);return w<d?(t.set(i,{position:n,t:r,from:f?.position,score:w}),1):0},testStep(t,e,s,n,i,r,o,d){const f=H.mul(i,d).add(n),w=O.bilinear(t,e,f);for(;d.x>=o.x&&d.y>=o.y;){if(this.stepCollisionExists(t,e,s,f,r)){d.sub(.075);continue}return[!0,w,f]}return[!1,O.ZERO,H.ZERO]},getPossibleNextSteps(t,e,s,n,i,r,o){const d=[],f=this.stepDirectionFromAtan2(s.atan2(e)),w=r.clone(),p=[f,H.rotate(f,zs),H.rotate(f,_r)];for(const $ of p){const[v,_,k]=this.testStep(t,e,s,n,$,i,o,w);v&&d.push([_,k]),w.copy(r)}return d},complexPathFinder(t,e,s){const n=new Map;this.setNodeScore(n,t,e,t,`${t.x}::${t.y}`,new H(0,0),void 0);const i=new Pr((f,w)=>f.score-w.score);i.push({key:t,score:n.get(`${t.x}::${t.y}`).score});const r=new H(.5,.5),o=new H(.001,.001);let d=0;for(;d<=512&&i.size()>0;){d++;const f=i.pop(),w=`${f.key.x}::${f.key.y}`,p=n.get(w),$=p.position,v=p.t,_=p.from!==void 0?`${p.from.x}::${p.from.y}`:void 0;if($.equals(e,16))return this.setNodeScore(n,t,e,e,w,new H(1,1),_),[!0,this.createPathFromScores(n,e)];const k=this.getPossibleNextSteps(t,e,$,v,s,r,o);if(k.length===0){n.set(w,{position:$,t:v,from:p.from,score:NaN}),p.from!==void 0&&i.push({key:p.from,score:n.get(w).score});continue}for(const b of k){const h=`${b[0].x}::${b[0].y}`;switch(this.setNodeScore(n,t,e,b[0],h,b[1],w)){case 1:i.push({key:b[0],score:n.get(h).score});break;case 2:case 4:p.from!==void 0&&i.push({key:p.from,score:n.get(_??"")?.score??1/0}),p.score=NaN;break}}}return[!1,[]]},find(t,e,s){if(t.equals(e,8))return[];const n=this.getSearchArea(t,e,1);if(this.collisionList=this.getCollisionsInArea(s,n),this.collisionList.size===0)return this.simplePathFinder(t,e);{const i=this.getSearchArea(t,e,3);this.collisionList=this.getCollisionsInArea(s,i);const[r,o]=this.complexPathFinder(t,e,this.collisionList);return r?o:this.simplePathFinder(t,e)}}};var Te=(t=>(t[t.START=0]="START",t[t.END=1]="END",t[t.BOTH=2]="BOTH",t[t.NONE=-1]="NONE",t))(Te||{});class Ir{id;position;componentType;endPosition;anchors;connectedTo;drawPath;regenPath;collisionShape;selected;constructor(e,s,n,i={start:void 0,end:void 0},r){this.id=e,this.position=s,this.componentType=le.LINE,this.endPosition=n,this.anchors=r??[new H(.25,0),new H(.25,.5),new H(.5,.5),new H(.5,1)],this.connectedTo=i,this.regenPath=!0,this.collisionShape=this.generateCollisionShapes(),this.selected=!1}generatePath(){const e=new Path2D;e.moveTo(this.position.x,this.position.y);const s=new O;for(let n=0;n<this.anchors.length;n++)O.bilinear(this.position,this.endPosition,this.anchors[n],s),e.lineTo(s.x,s.y);return e.lineTo(this.endPosition.x,this.endPosition.y),this.regenPath=!1,e}generateCollisionShapes(){return wr.generateCollisionShapes(this.position,this.endPosition,this.anchors)}generateAnchors(e){return Er.find(this.position,this.endPosition,e)}draw(e){if(this.endPosition!==this.position){(this.regenPath||!this.drawPath)&&(this.drawPath=this.generatePath()),e.save(),e.strokeStyle="#101010",e.lineWidth=2,e.lineJoin="round",e.stroke(this.drawPath),e.restore();for(let s=0;s<this.collisionShape.length;s++)this.collisionShape[s].draw(e,this.selected)}}addAnchor(e,s=this.anchors.length){this.anchors.splice(s,0,e),this.regenPath=!0}removePoint(e=this.anchors.length-1){if(e<0||e>=this.anchors.length){console.error("ConnectionComponent.removePoint - index is out of bounds!");return}this.anchors.splice(e,1),this.regenPath=!0}move(e,s=!0,n=2,i=!0,r=new Map){s?(n!==1&&this.position.add(e),n!==0&&this.endPosition.add(e)):(n!==1&&this.position.copy(e),n!==0&&this.endPosition.copy(e)),this.anchors=this.generateAnchors(r),i&&(this.collisionShape=this.generateCollisionShapes()),this.regenPath=!0}changeAnchor(e,s=this.anchors.length-1){if(s<0||s>=this.anchors.length){console.error("ConnectionComponent.changePosition - index is out of bounds!");return}this.anchors[s]=H.sub(e,this.position).div(H.sub(this.endPosition,this.position)),this.regenPath=!0}changeConnection(e,s,n=!1){e!==void 0&&s!==void 0?n?this.connectedTo.end={slotId:e,nodeId:s}:this.connectedTo.start={slotId:e,nodeId:s}:n?this.connectedTo.end=void 0:this.connectedTo.start=void 0}onEvent(e){switch(e){case ne.FOCUS_IN:this.selected=!0;break;case ne.FOCUS_OUT:this.selected=!1;break;default:return!1}return!0}toObject(){const e={id:this.id,componentType:this.componentType,position:this.position.toPlainObject(),endPosition:this.endPosition.toPlainObject(),anchors:[],connectedTo:this.connectedTo};return this.anchors.forEach(s=>e.anchors.push(s.toPlainObject())),e}}async function Tr(t){const e=new Image;return e.src=t,await e.decode(),window.createImageBitmap(e)}function Xe(t,e){const s={};let n=0;for(const i of e)Object.keys(t).includes(i)&&(s[n]=t[i],n++);return s}const pi="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'?%3e%3csvg%20width='88'%20height='50'%20version='1.1'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='m64%2025h25m-64-10h-26m27%2020h-27'%20fill='none'%20stroke='%23000'%20stroke-width='2'/%3e%3cpath%20d='m26.857%207.8571h17.619c9.7607%200%2016.667%207.64%2016.667%2017.143s-7.3822%2017.143-17.143%2017.143h-17.143z'%20fill='%23fff'/%3e%3cpath%20d='m24%205v40h20.476c11.268%200%2020-9%2020-20s-8.7321-20-20-20zm2.8571%202.8571h17.619c9.7607%200%2016.667%207.64%2016.667%2017.143s-7.3822%2017.143-17.143%2017.143h-17.143z'/%3e%3c/svg%3e",mi="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'?%3e%3csvg%20width='88'%20height='50'%20version='1.1'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='m73%2025h16m-64-10h-26m27%2020h-27'%20fill='none'%20stroke='%23000'%20stroke-width='2'/%3e%3cpath%20d='m26.857%207.8571h17.619c9.7607%200%2016.667%207.64%2016.667%2017.143s-7.3822%2017.143-17.143%2017.143h-17.143z'%20fill='%23fff'/%3e%3cpath%20d='m24%205v40h20.476c11.268%200%2020-9%2020-20s-8.7321-20-20-20zm2.8571%202.8571h17.619c9.7607%200%2016.667%207.64%2016.667%2017.143s-7.3822%2017.143-17.143%2017.143h-17.143z'/%3e%3cpath%20d='m73%2025a4%204%200%201%201-8%200%204%204%200%201%201%208%200z'%20fill='%23fff'%20stroke='%23000'%20stroke-width='3'/%3e%3c/svg%3e",yi="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'?%3e%3csvg%20width='88'%20height='50'%20version='1.1'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='m73%2025h16m-64-10h-26m27%2020h-27'%20fill='none'%20stroke='%23000'%20stroke-width='2'/%3e%3cpath%20d='m23.969%208h11.281c4.6842%200%2018.287-0.13021%2027.969%2017-4.7668%208.4291-10.521%2012.684-15.719%2014.812-5.3607%202.1954-9.8419%202.1875-12.25%202.1875h-11.25c1.8736-3.1084%204.75-9.0494%204.75-17%200-7.9734-2.9085-13.9-4.7812-17z'%20fill='%23fff'%20fill-rule='evenodd'/%3e%3cpath%20d='m18.094%205%202%202.4375s5.6562%207%205.6562%2017.562-5.6562%2017.562-5.6562%2017.562l-2%202.4375h17.156c2.4081%201e-6%207.6897%200.02451%2013.625-2.4062%205.9353-2.4308%2012.537-7.3433%2017.688-16.875l-1.3125-0.71875%201.3125-0.71875c-10.303-19.066-26.556-19.281-31.312-19.281zm5.875%203h11.281c4.6842%200%2018.287-0.13021%2027.969%2017-4.7668%208.4291-10.521%2012.684-15.719%2014.812-5.3607%202.1954-9.8419%202.1875-12.25%202.1875h-11.25c1.8736-3.1084%204.75-9.0494%204.75-17%200-7.9734-2.9085-13.9-4.7812-17z'%20fill-rule='evenodd'/%3e%3cpath%20d='m73%2025a4%204%200%201%201-8%200%204%204%200%201%201%208%200z'%20fill='%23fff'%20stroke='%23000'%20stroke-width='3'/%3e%3c/svg%3e",gi="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'?%3e%3csvg%20width='88'%20height='50'%20version='1.1'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='m73.135%2025h15.843m-65.957%200h-24'%20fill='none'%20stroke='%23000'%20stroke-width='2'/%3e%3cpath%20d='m25.947%207.4063%2036.125%2017.594-36.125%2017.594z'%20fill='%23fff'/%3e%3cpath%20d='m72.978%2025a4%204%200%201%201-8%200%204%204%200%201%201%208%200z'%20fill='%23fff'%20stroke='%23000'%20stroke-width='3'/%3e%3cpath%20d='m22.947%202.5938v44.812l2.1562-1.0625%2041.031-20v-2.6875l-41.031-20zm3%204.8125%2036.125%2017.594-36.125%2017.594z'/%3e%3c/svg%3e",vi="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'?%3e%3csvg%20width='88'%20height='50'%20version='1.1'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='m64%2025h25m-64-10h-26m27%2020h-27'%20fill='none'%20stroke='%23000'%20stroke-width='2'/%3e%3cpath%20d='m23.969%208h11.281c4.6842%200%2018.287-0.13021%2027.969%2017-4.7668%208.4291-10.521%2012.684-15.719%2014.812-5.3607%202.1954-9.8419%202.1875-12.25%202.1875h-11.25c1.8736-3.1084%204.75-9.0494%204.75-17%200-7.9734-2.9085-13.9-4.7812-17z'%20fill='%23fff'%20fill-rule='evenodd'/%3e%3cpath%20d='m18.094%205%202%202.4375s5.6562%207%205.6562%2017.562-5.6562%2017.562-5.6562%2017.562l-2%202.4375h17.156c2.4081%201e-6%207.6897%200.02451%2013.625-2.4062%205.9353-2.4308%2012.537-7.3433%2017.688-16.875l-1.3125-0.71875%201.3125-0.71875c-10.303-19.066-26.556-19.281-31.312-19.281zm5.875%203h11.281c4.6842%200%2018.287-0.13021%2027.969%2017-4.7668%208.4291-10.521%2012.684-15.719%2014.812-5.3607%202.1954-9.8419%202.1875-12.25%202.1875h-11.25c1.8736-3.1084%204.75-9.0494%204.75-17%200-7.9734-2.9085-13.9-4.7812-17z'%20fill-rule='evenodd'/%3e%3c/svg%3e",wi="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'?%3e%3csvg%20width='88'%20height='50'%20version='1.1'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='m72.333%2025h16.667m-64.614-10h-25.386m26.362%2020h-26.362'%20fill='none'%20stroke='%23000'%20stroke-width='2'/%3e%3cg%20transform='translate(-6)'%20fill-rule='evenodd'%3e%3cpath%20d='m24.25%2042c-1.5974%202.6444-2.25%203-2.25%203h-3.6562l2-2.4375s5.6562-7.0001%205.6562-17.563-5.6562-17.562-5.6562-17.562l-2-2.4375h3.6562c0.78125%200.9375%201.4219%201.6562%202.2188%203%201.8727%203.0998%204.7812%209.0266%204.7812%2017%200%207.9506-2.8967%2013.879-4.75%2017z'/%3e%3cpath%20d='m29.969%208h11.281c4.6842%200%2018.287-0.13021%2027.969%2017-4.7668%208.4291-10.521%2012.684-15.719%2014.812-5.3607%202.1954-9.8419%202.1875-12.25%202.1875h-11.25c1.8736-3.1084%204.75-9.0494%204.75-17%200-7.9734-2.9085-13.9-4.7812-17z'%20fill='%23fff'/%3e%3cpath%20d='m24.094%205%202%202.4375s5.6562%207%205.6562%2017.562-5.6562%2017.562-5.6562%2017.562l-2%202.4375h17.156c2.4081%201e-6%207.6897%200.02451%2013.625-2.4062%205.9353-2.4308%2012.537-7.3433%2017.688-16.875l-1.3125-0.71875%201.3125-0.71875c-10.303-19.066-26.556-19.281-31.312-19.281zm5.875%203h11.281c4.6842%200%2018.287-0.13021%2027.969%2017-4.7668%208.4291-10.521%2012.684-15.719%2014.812-5.3607%202.1954-9.8419%202.1875-12.25%202.1875h-11.25c1.8736-3.1084%204.75-9.0494%204.75-17%200-7.9734-2.9085-13.9-4.7812-17z'/%3e%3c/g%3e%3cpath%20d='m73%2025a4%204%200%201%201-8%200%204%204%200%201%201%208%200z'%20fill='%23fff'%20stroke='%23000'%20stroke-width='3'/%3e%3c/svg%3e",_i="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'?%3e%3csvg%20width='88'%20height='50'%20version='1.1'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='m64%2025h25m-64.614-10h-25.386m26.362%2020h-26.362'%20fill='none'%20stroke='%23000'%20stroke-width='2'/%3e%3cg%20transform='translate(-6)'%20fill-rule='evenodd'%3e%3cpath%20d='m24.25%2042c-1.5974%202.6444-2.25%203-2.25%203h-3.6562l2-2.4375s5.6562-7%205.6562-17.562-5.6562-17.562-5.6562-17.562l-2-2.4375h3.6562c0.78125%200.9375%201.4219%201.6562%202.2188%203%201.8727%203.0998%204.7812%209.0266%204.7812%2017%200%207.9506-2.8967%2013.879-4.75%2017z'/%3e%3cpath%20d='m29.969%208h11.281c4.6842%200%2018.287-0.1302%2027.969%2017-4.7668%208.4291-10.521%2012.684-15.719%2014.812-5.3607%202.1954-9.8419%202.1875-12.25%202.1875h-11.25c1.8736-3.1084%204.75-9.0494%204.75-17%200-7.9734-2.9085-13.9-4.7812-17z'%20fill='%23fff'/%3e%3cpath%20d='m24.094%205%202%202.4375s5.6562%207%205.6562%2017.562-5.6562%2017.562-5.6562%2017.562l-2%202.4375h17.156c2.4081%200%207.6897%200.02451%2013.625-2.4062s12.537-7.3433%2017.688-16.875l-1.3125-0.71875%201.3125-0.71875c-10.303-19.066-26.556-19.281-31.312-19.281zm5.875%203h11.281c4.6842%200%2018.287-0.1302%2027.969%2017-4.7668%208.4291-10.521%2012.684-15.719%2014.812-5.3607%202.1954-9.8419%202.1875-12.25%202.1875h-11.25c1.8736-3.1084%204.75-9.0494%204.75-17%200-7.9734-2.9085-13.9-4.7812-17z'/%3e%3c/g%3e%3c/svg%3e",Or={id:z.G_AND,imgPath:[pi],connectionSlot:[{id:0,name:"A",in:!0,localPos:new O(-4,15)},{id:1,name:"B",in:!0,localPos:new O(-4,35)},{id:2,name:"C",in:!1,localPos:new O(92,25)}]},Nr={id:z.G_NAND,imgPath:[mi],connectionSlot:[{id:0,name:"A",in:!0,localPos:new O(-4,15)},{id:1,name:"B",in:!0,localPos:new O(-4,35)},{id:2,name:"C",in:!1,localPos:new O(92,25)}]},Cr={id:z.G_NOR,imgPath:[yi],connectionSlot:[{id:0,name:"A",in:!0,localPos:new O(-4,15)},{id:1,name:"B",in:!0,localPos:new O(-4,35)},{id:2,name:"C",in:!1,localPos:new O(92,25)}]},Hs={id:z.G_NOT,imgPath:[gi],connectionSlot:[{id:0,name:"In",in:!0,localPos:new O(-4,25)},{id:1,name:"Out",in:!1,localPos:new O(92,25)}]},xr={id:z.G_OR,imgPath:[vi],connectionSlot:[{id:0,name:"A",in:!0,localPos:new O(-4,15)},{id:1,name:"B",in:!0,localPos:new O(-4,35)},{id:2,name:"C",in:!1,localPos:new O(92,25)}]},Rr={id:z.G_XNOR,imgPath:[wi],connectionSlot:[{id:0,name:"A",in:!0,localPos:new O(-4,15)},{id:1,name:"B",in:!0,localPos:new O(-4,35)},{id:2,name:"C",in:!1,localPos:new O(92,25)}]},Mr={id:z.G_XOR,imgPath:[_i],connectionSlot:[{id:0,name:"A",in:!0,localPos:new O(-4,15)},{id:1,name:"B",in:!0,localPos:new O(-4,35)},{id:2,name:"C",in:!1,localPos:new O(92,25)}]};class at{id;position;componentType;nodeType;slots;collisionShape;_images;imageSize;halfImageSize;imageMode="UP_LEFT";_signalData;selected;get image(){return Object.keys(this._images).length===0?null:this._images[0]}get state(){return this._signalData.output??!1}constructor(e,s,n,i,r,o,d,f,w=!0){if(this.id=e,this.position=s,this.componentType=le.NODE,this.nodeType=at.getNodeModel(n),this._signalData=f[this.id],this.slots=o,this._images=Xe(d,this.nodeType.imgPath),this.imageSize=new O(this.image?.width??100,this.image?.height??100),this.halfImageSize=O.div(this.imageSize,2),w){this.imageMode="CENTER",this.position.sub(this.halfImageSize);const p=new O(i,r).sub(this.imageSize);this.position.min(p).max(O.ZERO)}this.collisionShape=new De(this.position,this.imageSize.x,this.imageSize.y),this.selected=!1}static getNodeModel(e){switch(e){case z.G_AND:return Or;case z.G_NAND:return Nr;case z.G_NOR:return Cr;case z.G_NOT:return Hs;case z.G_OR:return xr;case z.G_XNOR:return Rr;case z.G_XOR:return Mr;default:return Hs}}move(e,s=!0){s?this.position.add(e):this.imageMode==="CENTER"?O.sub(e,this.halfImageSize,this.position):this.position.copy(e),this.collisionShape.moveShape(this.position,!1)}draw(e){this.image&&(e.drawImage(this.image,this.position.x,this.position.y),this.collisionShape!==void 0&&this.collisionShape.draw(e,this.selected))}onEvent(e){switch(e){case ne.FOCUS_IN:this.selected=!0;break;case ne.FOCUS_OUT:this.selected=!1;break;default:return!1}return!0}toObject(){return{id:this.id,componentType:this.componentType,nodeType:this.nodeType.id,position:this.position.toPlainObject(),slotIds:this.slots.map(s=>s.id),state:this.state}}}class Dr{position;radius;radiusSquared;drawPath;regenPath;borderColor;constructor(e,s,n="#FF8008DC"){this.position=e,this.radius=s,this.radiusSquared=s*s,this.borderColor=n,this.regenPath=!1}generatePath(){const e=new Path2D;return e.arc(this.position.x,this.position.y,this.radius,0,Math.PI*2),this.regenPath=!1,e}draw(e,s){s&&((!this.drawPath||this.regenPath)&&(this.drawPath=this.generatePath()),e.save(),e.strokeStyle=this.borderColor,e.stroke(this.drawPath),e.restore())}moveShape(e,s=!0){s?this.position.add(e):this.position.copy(e),this.drawPath=this.generatePath()}collisionWithPoint(e){return O.sub(this.position,e).lenSquared()<this.radiusSquared}collisionWithBox(e){if(e.collisionWithPoint(this.position))return!0;const s=O.max(e.vertices.a,O.min(e.vertices.c,this.position));return O.sub(this.position,s).lenSquared()<this.radiusSquared}collisionWithCircle(e){return O.sub(this.position,e.position).len()<this.radius+e.radius}collisionWithLine(e){return e.collisionWithCircle(this)}}class jr{id;position;globalPosition;componentType;parent;slotIdAtParent;_slotConnections;drawPath;regenPath;selected;inSlot;color;colorActive;radius;attractionRadius;collisionShape;get slotConnections(){return this._slotConnections}set slotConnections(e){this.inSlot?(this._slotConnections.splice(0,this._slotConnections.length),this._slotConnections.push(e[0])):this._slotConnections=e}constructor(e,s,n,i,r=[],o=!0,d=4,f=12,w="#0880FF",p="#FF0000"){this.id=e,this.position=s,this.globalPosition=O.add(s,n.position),this.componentType=le.SLOT,this.parent=n,this.slotIdAtParent=i,this._slotConnections=r,this.color=w,this.colorActive=p,this.selected=!1,this.inSlot=o,this.radius=d,this.attractionRadius=f,this.collisionShape=new Dr(this.globalPosition,this.attractionRadius),this.regenPath=!1}move(e,s=!0){O.add(this.position,this.parent.position,this.globalPosition),this.collisionShape.moveShape(this.globalPosition,!1),this.regenPath=!0}generatePath(){const e=new Path2D;return e.arc(this.globalPosition.x,this.globalPosition.y,this.radius,0,Math.PI*2),e}draw(e){(!this.drawPath||this.regenPath)&&(this.drawPath=this.generatePath()),e.save(),e.fillStyle=this.selected?this.colorActive:this.color,e.fill(this.drawPath),e.restore(),this.collisionShape.draw(e,this.selected)}onEvent(e){switch(e){case ne.FOCUS_IN:this.selected=!0;break;case ne.FOCUS_OUT:this.selected=!1;break;default:return!1}return!0}toObject(){return{id:this.id,componentType:this.componentType,position:this.position.toPlainObject(),parentId:this.parent.id,slotIdAtParent:this.slotIdAtParent,connectionIds:this.slotConnections.map(s=>s.id),inSlot:this.inSlot,color:this.color,colorActive:this.colorActive,radius:this.radius,attractionRadius:this.attractionRadius}}}class Ar{id;position;componentType;text;parent;style;textSize;collisionShape;canvasContext;selected;constructor(e,s,n="",i="12px sans-serif",r,o){this.id=e,this.position=s,this.componentType=le.TEXT,this.text=n,this.style=i,this.parent=r,this.canvasContext=o,this.textSize=this.measureText(n,i),this.position.sub(O.div(this.textSize,2)),this.collisionShape=new De(this.position,this.textSize.x,this.textSize.y),this.selected=!1}measureText(e,s){this.canvasContext.font=s,this.canvasContext.textBaseline="top",this.canvasContext.textAlign="left";const n=this.canvasContext.measureText(e);return new O(n.width,n.actualBoundingBoxDescent-n.actualBoundingBoxAscent).max(new O(16,16))}draw(e){e.save(),e.font=this.style,e.textBaseline="top",e.textAlign="left",e.fillText(this.text,this.position.x,this.position.y),e.restore(),this.collisionShape.draw(e,this.selected)}move(e,s=!0){s?this.position.add(e):O.sub(e,O.div(this.textSize,2),this.position),this.collisionShape.moveShape(this.position,!1)}onEvent(e){switch(e){case ne.FOCUS_IN:this.selected=!0;break;case ne.FOCUS_OUT:this.selected=!1;break;default:return!1}return!0}toObject(){return{id:this.id,componentType:this.componentType,position:this.position.toPlainObject(),text:this.text,parent:this.parent,style:this.style}}}const ki="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB3aWR0aD0iNzAiIGhlaWdodD0iNTAiIHZlcnNpb249IjEuMSIgdmlld0JveD0iMCAwIDcwIDUwIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIj4KIDxnPgogIDxyZWN0IHg9IjEiIHk9IjEiIHdpZHRoPSI0OCIgaGVpZ2h0PSI0OCIgZmlsbD0iI2ZmZiIgc3Ryb2tlPSIjMDAwIiBzdHJva2Utd2lkdGg9IjIiLz4KICA8cGF0aCBkPSJtNDkuNSAyNS4wNDRoMjEuNSIgZmlsbD0iI2ZmZiIgc3Ryb2tlPSIjMDAwIiBzdHJva2Utd2lkdGg9IjIuMTEzNiIvPgogIDx0ZXh0IHg9IjE1Ljg0OCIgeT0iMzYuNDM5OTk5IiBmaWxsPSIjMDAwMDAwIiBmb250LXNpemU9IjMycHgiIHN0cm9rZT0iIzAwMDAwMCIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+PHRzcGFuIHg9IjE1Ljg0OCIgeT0iMzYuNDM5OTk5IiBmaWxsPSIjMDAwMDAwIiBmb250LXNpemU9IjMycHgiIHN0cm9rZT0iIzAwMDAwMCI+MDwvdHNwYW4+PC90ZXh0PgogPC9nPgo8L3N2Zz4K",bi="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB3aWR0aD0iNzAiIGhlaWdodD0iNTAiIHZlcnNpb249IjEuMSIgdmlld0JveD0iMCAwIDcwIDUwIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPgogPGc+CiAgPHJlY3QgeD0iMSIgeT0iMSIgd2lkdGg9IjQ4IiBoZWlnaHQ9IjQ4IiBmaWxsPSIjZmZmIiBzdHJva2U9IiMwMDAiIHN0cm9rZS13aWR0aD0iMiIvPgogIDxwYXRoIGQ9Im00OS41IDI1LjA0NGgyMS41IiBmaWxsPSIjZmZmIiBzdHJva2U9IiMwMDAiIHN0cm9rZS13aWR0aD0iMi4xMTM2Ii8+CiAgPHRleHQgeD0iMTUuODQ4IiB5PSIzNi40Mzk5OTkiIGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjMycHgiIHN0cm9rZT0iIzAwMDAwMCIgc3R5bGU9ImZvbnQtdmFyaWFudC1jYXBzOm5vcm1hbDtmb250LXZhcmlhbnQtZWFzdC1hc2lhbjpub3JtYWw7Zm9udC12YXJpYW50LWxpZ2F0dXJlczpub3JtYWw7Zm9udC12YXJpYW50LW51bWVyaWM6bm9ybWFsIiB4bWw6c3BhY2U9InByZXNlcnZlIj48dHNwYW4+MTwvdHNwYW4+PC90ZXh0PgogPC9nPgo8L3N2Zz4K",$i="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'%20standalone='no'?%3e%3csvg%20width='70'%20height='50'%20version='1.1'%20viewBox='0%200%2070%2050'%20id='svg1'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:svg='http://www.w3.org/2000/svg'%3e%3cdefs%20id='defs1'%20/%3e%3cg%20id='g1'%20transform='translate(-0.96743465)'%3e%3cpath%20d='M%2049.5,25.044%20H%2071'%20fill='%23ffffff'%20stroke='%23000000'%20stroke-width='2.1136'%20id='path1'%20/%3e%3c/g%3e%3ccircle%20style='fill:%23ffffff;stroke:%23000000;stroke-width:2'%20id='path3'%20cx='25'%20cy='25'%20r='24'%20/%3e%3ccircle%20style='fill:%23b3b3b3;stroke:%23000000;stroke-width:1;stroke-dasharray:none'%20id='path4'%20cx='25'%20cy='25'%20r='20'%20/%3e%3c/svg%3e",Si="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'%20standalone='no'?%3e%3csvg%20width='70'%20height='50'%20version='1.1'%20viewBox='0%200%2070%2050'%20id='svg1'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:svg='http://www.w3.org/2000/svg'%3e%3cdefs%20id='defs1'%20/%3e%3cg%20id='g4'%3e%3cpath%20d='M%2049.5,25.044%20H%2071'%20fill='%23ffffff'%20stroke='%23000000'%20stroke-width='2.1136'%20id='path1'%20transform='translate(-0.96743465)'%20/%3e%3ccircle%20style='fill:%23ffffff;stroke:%23000000;stroke-width:2'%20id='path3'%20cx='25'%20cy='25'%20r='24'%20/%3e%3ccircle%20style='fill:%23ff0000;stroke:%23000000;stroke-width:1;stroke-dasharray:none'%20id='path4'%20cx='25'%20cy='25'%20r='20'%20/%3e%3c/g%3e%3c/svg%3e",Pi="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'?%3e%3c!--%20Created%20with%20Inkscape%20(http://www.inkscape.org/)%20--%3e%3csvg%20width='60'%20height='50'%20version='1.1'%20viewBox='0%200%2060%2050'%20xmlns='http://www.w3.org/2000/svg'%3e%3cg%20stroke='%23000'%3e%3crect%20x='1'%20y='1'%20width='48'%20height='48'%20fill='%23fff'%20stroke-width='2'/%3e%3cpath%20d='m4.8716%2042.094h5.9456v-34.435h13.13v34.683h12.015v-34.683h9.1662'%20fill='none'/%3e%3cpath%20d='m49.671%2025h10.529'%20fill='none'%20stroke-width='2'/%3e%3c/g%3e%3c/svg%3e",Ei={id:z.I_SWITCH,imgPath:[ki,bi],connectionSlot:[{id:0,in:!1,name:"Out",localPos:new O(74,25)}]},Ii={id:z.I_BUTTON,imgPath:[$i,Si],connectionSlot:[{id:0,in:!1,name:"Out",localPos:new O(74,25)}]},Ti={id:z.I_CLOCK,imgPath:[Pi],connectionSlot:[{id:0,in:!1,name:"Out",localPos:new O(64,25)}]};class Lr{id;position;componentType;nodeType;slots;collisionShape;_images;imageSize;halfImageSize;imageMode="UP_LEFT";_signalData;selected;get image(){return Object.keys(this._images).length===0?null:this._images[this.state?1:0]}get state(){return this._signalData.output??!1}set state(e){this._signalData.output=e}constructor(e,s,n,i,r,o,d,f=!0){if(this.id=e,this.position=s,this.componentType=le.INPUT,this.nodeType=Ei,this._signalData=d[this.id],this.slots=r,this._images=Xe(o,this.nodeType.imgPath),this.imageSize=new O(this.image?.width??100,this.image?.height??100),this.halfImageSize=O.div(this.imageSize,2),f){this.imageMode="CENTER",this.position.sub(this.halfImageSize);const w=new O(n,i).sub(this.imageSize);this.position.min(w).max(O.ZERO)}this.collisionShape=new De(this.position,this.imageSize.x,this.imageSize.y),this.selected=!1}move(e,s=!0){s?this.position.add(e):this.imageMode==="CENTER"?O.sub(e,this.halfImageSize,this.position):this.position.copy(e),this.collisionShape.moveShape(this.position,!1)}draw(e){this.image&&(e.drawImage(this.image,this.position.x,this.position.y),this.collisionShape!==void 0&&this.collisionShape.draw(e,this.selected))}onEvent(e){switch(e){case ne.MOUSE_RELEASED:this.state=!this.state;break;case ne.FOCUS_IN:this.selected=!0;break;case ne.FOCUS_OUT:this.selected=!1;break;default:return!1}return!0}toObject(){return{id:this.id,componentType:this.componentType,nodeType:this.nodeType.id,position:this.position.toPlainObject(),slotIds:this.slots.map(s=>s.id),state:this.state}}}const Oi="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'?%3e%3csvg%20width='46.08'%20height='64'%20version='1.1'%20viewBox='0%200%2046.08%2064'%20xmlns='http://www.w3.org/2000/svg'%3e%3cg%20stroke='%23000'%20stroke-linejoin='round'%3e%3cpath%20d='m23.041%202.5131c-6.8934%200-12.445%204.8028-12.445%2010.768v18.825%202.7066h-7.2638v9.2635h39.415v-9.2635h-7.2638v-2.7066-18.825c0-5.9654-5.5488-10.768-12.442-10.768z'%20fill='%23d9d9d9'%20stroke-width='2.5854'/%3e%3cpath%20d='m9.619%2035.474h26.424'%20fill='%23fdfdfd'%20stroke-width='1.2927'/%3e%3cpath%20d='m23.04%2044.39v21.976'%20fill='%23fdfdfd'%20stroke-width='2.8546'/%3e%3c/g%3e%3c/svg%3e",Ni="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'?%3e%3csvg%20width='46.08'%20height='64'%20version='1.1'%20viewBox='0%200%2046.08%2064'%20xmlns='http://www.w3.org/2000/svg'%3e%3cg%20stroke='%23000'%20stroke-linejoin='round'%3e%3cpath%20d='m23.041%202.5131c-6.8934%200-12.445%204.8028-12.445%2010.768v18.825%202.7066h-7.2638v9.2635h39.415v-9.2635h-7.2638v-2.7066-18.825c0-5.9654-5.5488-10.768-12.442-10.768z'%20fill='%23ff4949'%20stroke-width='2.5854'/%3e%3cpath%20d='m9.619%2035.474h26.424'%20fill='%23fdfdfd'%20stroke-width='1.2927'/%3e%3cpath%20d='m23.04%2044.39v21.976'%20fill='%23fdfdfd'%20stroke-width='2.8546'/%3e%3c/g%3e%3c/svg%3e",Ci="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'%20standalone='no'?%3e%3c!--%20Created%20with%20Inkscape%20(http://www.inkscape.org/)%20--%3e%3csvg%20width='90'%20height='120'%20viewBox='0%200%2090%20120'%20version='1.1'%20id='svg1'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:svg='http://www.w3.org/2000/svg'%3e%3cdefs%20id='defs1'%20/%3e%3cg%20id='layer1'%3e%3crect%20style='fill:%23ffffff;stroke:%23000000;stroke-width:1.98364;stroke-dasharray:none;fill-opacity:1'%20id='rect1'%20width='68.016357'%20height='118.01637'%20x='20.991819'%20y='0.99181795'%20/%3e%3cpath%20style='fill:%23b3b3b3;fill-opacity:1;stroke:none;stroke-width:2;stroke-dasharray:none'%20d='m%2037.896931,20.60398%202.443296,-2.225144%20h%2029.843106%20l%201.919733,2.225144%20-1.919733,2.225144%20H%2040.340227%20Z'%20id='path1'%20/%3e%3cpath%20style='fill:%23b3b3b3;fill-opacity:1;stroke:none;stroke-width:2;stroke-dasharray:none'%20d='m%2073.999998,23.18857%202.225144,2.443296%20v%2029.843106%20l%20-2.225144,1.919732%20-2.225144,-1.919732%20V%2025.631866%20Z'%20id='path1-5'%20/%3e%3cpath%20style='fill:%23b3b3b3;fill-opacity:1;stroke:none;stroke-width:2;stroke-dasharray:none'%20d='m%2037.89693,59.979294%202.443296,-2.225144%20h%2029.843107%20l%201.919732,2.225144%20-1.919732,2.225144%20H%2040.340226%20Z'%20id='path2'%20/%3e%3cpath%20style='fill:%23b3b3b3;fill-opacity:1;stroke:none;stroke-width:2;stroke-dasharray:none'%20d='m%2035.999998,23.18857%202.225144,2.443296%20v%2029.843106%20l%20-2.225144,1.919732%20-2.225144,-1.919732%20V%2025.631866%20Z'%20id='path3'%20/%3e%3cpath%20style='fill:%23b3b3b3;fill-opacity:1;stroke:none;stroke-width:2;stroke-dasharray:none'%20d='m%2073.999998,62.605295%202.225144,2.443296%20V%2094.891697%20L%2073.999998,96.81143%2071.774854,94.891697%20V%2065.048591%20Z'%20id='path4'%20/%3e%3cpath%20style='fill:%23b3b3b3;fill-opacity:1;stroke:none;stroke-width:2;stroke-dasharray:none'%20d='m%2037.89693,99.396019%202.443296,-2.225144%20h%2029.843107%20l%201.919732,2.225144%20-1.919732,2.225141%20H%2040.340226%20Z'%20id='path5'%20/%3e%3cpath%20style='fill:%23b3b3b3;fill-opacity:1;stroke:none;stroke-width:2;stroke-dasharray:none'%20d='m%2035.999998,62.605295%202.225144,2.443296%20V%2094.891697%20L%2035.999998,96.81143%2033.774854,94.891697%20V%2065.048591%20Z'%20id='path6'%20/%3e%3cpath%20style='fill:none;fill-opacity:1;stroke:%23000000;stroke-width:2;stroke-dasharray:none;stroke-opacity:1'%20d='M%2020.942532,17%20H%200'%20id='path7'%20/%3e%3cpath%20style='fill:none;fill-opacity:1;stroke:%23000000;stroke-width:2;stroke-dasharray:none;stroke-opacity:1'%20d='M%2020.942532,31.333333%20H%200'%20id='path8'%20/%3e%3cpath%20style='fill:none;fill-opacity:1;stroke:%23000000;stroke-width:2;stroke-dasharray:none;stroke-opacity:1'%20d='M%2020.942532,45.666667%20H%200'%20id='path9'%20/%3e%3cpath%20style='fill:none;fill-opacity:1;stroke:%23000000;stroke-width:2;stroke-dasharray:none;stroke-opacity:1'%20d='M%2020.942532,60%20H%200'%20id='path10'%20/%3e%3cpath%20style='fill:none;fill-opacity:1;stroke:%23000000;stroke-width:2;stroke-dasharray:none;stroke-opacity:1'%20d='M%2020.942532,74.333333%20H%200'%20id='path11'%20/%3e%3cpath%20style='fill:none;fill-opacity:1;stroke:%23000000;stroke-width:2;stroke-dasharray:none;stroke-opacity:1'%20d='M%2020.942532,88.666667%20H%200'%20id='path12'%20/%3e%3cpath%20style='fill:none;fill-opacity:1;stroke:%23000000;stroke-width:2;stroke-dasharray:none;stroke-opacity:1'%20d='M%2020.942532,103%20H%200'%20id='path13'%20/%3e%3c/g%3e%3c/svg%3e",xi="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'%20standalone='no'?%3e%3c!--%20Created%20with%20Inkscape%20(http://www.inkscape.org/)%20--%3e%3csvg%20width='90'%20height='120'%20viewBox='0%200%2090%20120'%20version='1.1'%20id='svg1'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:svg='http://www.w3.org/2000/svg'%3e%3cdefs%20id='defs1'%20/%3e%3cg%20id='layer1'%3e%3crect%20style='display:none;fill:none;stroke:%23000000;stroke-width:1.98364;stroke-dasharray:none'%20id='rect1'%20width='68.016357'%20height='118.01637'%20x='20.991819'%20y='0.99181795'%20/%3e%3cpath%20style='fill:%23ff0000;fill-opacity:1;stroke:none;stroke-width:2;stroke-dasharray:none'%20d='m%2037.896931,20.60398%202.443296,-2.225144%20h%2029.843106%20l%201.919733,2.225144%20-1.919733,2.225144%20H%2040.340227%20Z'%20id='path1'%20/%3e%3cpath%20style='display:none;fill:%23ff0000;fill-opacity:1;stroke:none;stroke-width:2;stroke-dasharray:none'%20d='m%2073.999998,23.18857%202.225144,2.443296%20v%2029.843106%20l%20-2.225144,1.919732%20-2.225144,-1.919732%20V%2025.631866%20Z'%20id='path1-5'%20/%3e%3cpath%20style='display:none;fill:%23ff0000;fill-opacity:1;stroke:none;stroke-width:2;stroke-dasharray:none'%20d='m%2073.999998,62.605295%202.225144,2.443296%20V%2094.891697%20L%2073.999998,96.81143%2071.774854,94.891697%20V%2065.048591%20Z'%20id='path4'%20/%3e%3cpath%20style='display:none;fill:%23ff0000;fill-opacity:1;stroke:none;stroke-width:2;stroke-dasharray:none'%20d='m%2037.89693,99.396019%202.443296,-2.225144%20h%2029.843107%20l%201.919732,2.225144%20-1.919732,2.225141%20H%2040.340226%20Z'%20id='path5'%20/%3e%3cpath%20style='display:none;fill:%23ff0000;fill-opacity:1;stroke:none;stroke-width:2;stroke-dasharray:none'%20d='m%2035.999998,62.605295%202.225144,2.443296%20V%2094.891697%20L%2035.999998,96.81143%2033.774854,94.891697%20V%2065.048591%20Z'%20id='path6'%20/%3e%3cpath%20style='display:none;fill:%23ff0000;fill-opacity:1;stroke:none;stroke-width:2;stroke-dasharray:none'%20d='m%2035.999998,23.18857%202.225144,2.443296%20v%2029.843106%20l%20-2.225144,1.919732%20-2.225144,-1.919732%20V%2025.631866%20Z'%20id='path3'%20/%3e%3cpath%20style='display:none;fill:%23ff0000;fill-opacity:1;stroke:none;stroke-width:2;stroke-dasharray:none'%20d='m%2037.89693,59.979294%202.443296,-2.225144%20h%2029.843107%20l%201.919732,2.225144%20-1.919732,2.225144%20H%2040.340226%20Z'%20id='path2'%20/%3e%3cpath%20style='display:none;fill:none;fill-opacity:1;stroke:%23000000;stroke-width:2;stroke-dasharray:none;stroke-opacity:1'%20d='M%2020.942532,17%20H%200'%20id='path7'%20/%3e%3cpath%20style='display:none;fill:none;fill-opacity:1;stroke:%23000000;stroke-width:2;stroke-dasharray:none;stroke-opacity:1'%20d='M%2020.942532,31.333333%20H%200'%20id='path8'%20/%3e%3cpath%20style='display:none;fill:none;fill-opacity:1;stroke:%23000000;stroke-width:2;stroke-dasharray:none;stroke-opacity:1'%20d='M%2020.942532,45.666667%20H%200'%20id='path9'%20/%3e%3cpath%20style='display:none;fill:none;fill-opacity:1;stroke:%23000000;stroke-width:2;stroke-dasharray:none;stroke-opacity:1'%20d='M%2020.942532,60%20H%200'%20id='path10'%20/%3e%3cpath%20style='display:none;fill:none;fill-opacity:1;stroke:%23000000;stroke-width:2;stroke-dasharray:none;stroke-opacity:1'%20d='M%2020.942532,74.333333%20H%200'%20id='path11'%20/%3e%3cpath%20style='display:none;fill:none;fill-opacity:1;stroke:%23000000;stroke-width:2;stroke-dasharray:none;stroke-opacity:1'%20d='M%2020.942532,88.666667%20H%200'%20id='path12'%20/%3e%3cpath%20style='display:none;fill:none;fill-opacity:1;stroke:%23000000;stroke-width:2;stroke-dasharray:none;stroke-opacity:1'%20d='M%2020.942532,103%20H%200'%20id='path13'%20/%3e%3c/g%3e%3c/svg%3e",Ri="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'%20standalone='no'?%3e%3c!--%20Created%20with%20Inkscape%20(http://www.inkscape.org/)%20--%3e%3csvg%20width='90'%20height='120'%20viewBox='0%200%2090%20120'%20version='1.1'%20id='svg1'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:svg='http://www.w3.org/2000/svg'%3e%3cdefs%20id='defs1'%20/%3e%3cg%20id='layer1'%3e%3crect%20style='display:none;fill:none;stroke:%23000000;stroke-width:1.98364;stroke-dasharray:none'%20id='rect1'%20width='68.016357'%20height='118.01637'%20x='20.991819'%20y='0.99181795'%20/%3e%3cpath%20style='display:none;fill:%23ff0000;fill-opacity:1;stroke:none;stroke-width:2;stroke-dasharray:none'%20d='m%2037.896931,20.60398%202.443296,-2.225144%20h%2029.843106%20l%201.919733,2.225144%20-1.919733,2.225144%20H%2040.340227%20Z'%20id='path1'%20/%3e%3cpath%20style='display:inline;fill:%23ff0000;fill-opacity:1;stroke:none;stroke-width:2;stroke-dasharray:none'%20d='m%2073.999998,23.18857%202.225144,2.443296%20v%2029.843106%20l%20-2.225144,1.919732%20-2.225144,-1.919732%20V%2025.631866%20Z'%20id='path1-5'%20/%3e%3cpath%20style='display:none;fill:%23ff0000;fill-opacity:1;stroke:none;stroke-width:2;stroke-dasharray:none'%20d='m%2073.999998,62.605295%202.225144,2.443296%20V%2094.891697%20L%2073.999998,96.81143%2071.774854,94.891697%20V%2065.048591%20Z'%20id='path4'%20/%3e%3cpath%20style='display:none;fill:%23ff0000;fill-opacity:1;stroke:none;stroke-width:2;stroke-dasharray:none'%20d='m%2037.89693,99.396019%202.443296,-2.225144%20h%2029.843107%20l%201.919732,2.225144%20-1.919732,2.225141%20H%2040.340226%20Z'%20id='path5'%20/%3e%3cpath%20style='display:none;fill:%23ff0000;fill-opacity:1;stroke:none;stroke-width:2;stroke-dasharray:none'%20d='m%2035.999998,62.605295%202.225144,2.443296%20V%2094.891697%20L%2035.999998,96.81143%2033.774854,94.891697%20V%2065.048591%20Z'%20id='path6'%20/%3e%3cpath%20style='display:none;fill:%23ff0000;fill-opacity:1;stroke:none;stroke-width:2;stroke-dasharray:none'%20d='m%2035.999998,23.18857%202.225144,2.443296%20v%2029.843106%20l%20-2.225144,1.919732%20-2.225144,-1.919732%20V%2025.631866%20Z'%20id='path3'%20/%3e%3cpath%20style='display:none;fill:%23ff0000;fill-opacity:1;stroke:none;stroke-width:2;stroke-dasharray:none'%20d='m%2037.89693,59.979294%202.443296,-2.225144%20h%2029.843107%20l%201.919732,2.225144%20-1.919732,2.225144%20H%2040.340226%20Z'%20id='path2'%20/%3e%3cpath%20style='display:none;fill:none;fill-opacity:1;stroke:%23000000;stroke-width:2;stroke-dasharray:none;stroke-opacity:1'%20d='M%2020.942532,17%20H%200'%20id='path7'%20/%3e%3cpath%20style='display:none;fill:none;fill-opacity:1;stroke:%23000000;stroke-width:2;stroke-dasharray:none;stroke-opacity:1'%20d='M%2020.942532,31.333333%20H%200'%20id='path8'%20/%3e%3cpath%20style='display:none;fill:none;fill-opacity:1;stroke:%23000000;stroke-width:2;stroke-dasharray:none;stroke-opacity:1'%20d='M%2020.942532,45.666667%20H%200'%20id='path9'%20/%3e%3cpath%20style='display:none;fill:none;fill-opacity:1;stroke:%23000000;stroke-width:2;stroke-dasharray:none;stroke-opacity:1'%20d='M%2020.942532,60%20H%200'%20id='path10'%20/%3e%3cpath%20style='display:none;fill:none;fill-opacity:1;stroke:%23000000;stroke-width:2;stroke-dasharray:none;stroke-opacity:1'%20d='M%2020.942532,74.333333%20H%200'%20id='path11'%20/%3e%3cpath%20style='display:none;fill:none;fill-opacity:1;stroke:%23000000;stroke-width:2;stroke-dasharray:none;stroke-opacity:1'%20d='M%2020.942532,88.666667%20H%200'%20id='path12'%20/%3e%3cpath%20style='display:none;fill:none;fill-opacity:1;stroke:%23000000;stroke-width:2;stroke-dasharray:none;stroke-opacity:1'%20d='M%2020.942532,103%20H%200'%20id='path13'%20/%3e%3c/g%3e%3c/svg%3e",Mi="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'%20standalone='no'?%3e%3c!--%20Created%20with%20Inkscape%20(http://www.inkscape.org/)%20--%3e%3csvg%20width='90'%20height='120'%20viewBox='0%200%2090%20120'%20version='1.1'%20id='svg1'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:svg='http://www.w3.org/2000/svg'%3e%3cdefs%20id='defs1'%20/%3e%3cg%20id='layer1'%3e%3crect%20style='display:none;fill:none;stroke:%23000000;stroke-width:1.98364;stroke-dasharray:none'%20id='rect1'%20width='68.016357'%20height='118.01637'%20x='20.991819'%20y='0.99181795'%20/%3e%3cpath%20style='display:none;fill:%23ff0000;fill-opacity:1;stroke:none;stroke-width:2;stroke-dasharray:none'%20d='m%2037.896931,20.60398%202.443296,-2.225144%20h%2029.843106%20l%201.919733,2.225144%20-1.919733,2.225144%20H%2040.340227%20Z'%20id='path1'%20/%3e%3cpath%20style='display:none;fill:%23ff0000;fill-opacity:1;stroke:none;stroke-width:2;stroke-dasharray:none'%20d='m%2073.999998,23.18857%202.225144,2.443296%20v%2029.843106%20l%20-2.225144,1.919732%20-2.225144,-1.919732%20V%2025.631866%20Z'%20id='path1-5'%20/%3e%3cpath%20style='display:inline;fill:%23ff0000;fill-opacity:1;stroke:none;stroke-width:2;stroke-dasharray:none'%20d='m%2073.999998,62.605295%202.225144,2.443296%20V%2094.891697%20L%2073.999998,96.81143%2071.774854,94.891697%20V%2065.048591%20Z'%20id='path4'%20/%3e%3cpath%20style='display:none;fill:%23ff0000;fill-opacity:1;stroke:none;stroke-width:2;stroke-dasharray:none'%20d='m%2037.89693,99.396019%202.443296,-2.225144%20h%2029.843107%20l%201.919732,2.225144%20-1.919732,2.225141%20H%2040.340226%20Z'%20id='path5'%20/%3e%3cpath%20style='display:none;fill:%23ff0000;fill-opacity:1;stroke:none;stroke-width:2;stroke-dasharray:none'%20d='m%2035.999998,62.605295%202.225144,2.443296%20V%2094.891697%20L%2035.999998,96.81143%2033.774854,94.891697%20V%2065.048591%20Z'%20id='path6'%20/%3e%3cpath%20style='display:none;fill:%23ff0000;fill-opacity:1;stroke:none;stroke-width:2;stroke-dasharray:none'%20d='m%2035.999998,23.18857%202.225144,2.443296%20v%2029.843106%20l%20-2.225144,1.919732%20-2.225144,-1.919732%20V%2025.631866%20Z'%20id='path3'%20/%3e%3cpath%20style='display:none;fill:%23ff0000;fill-opacity:1;stroke:none;stroke-width:2;stroke-dasharray:none'%20d='m%2037.89693,59.979294%202.443296,-2.225144%20h%2029.843107%20l%201.919732,2.225144%20-1.919732,2.225144%20H%2040.340226%20Z'%20id='path2'%20/%3e%3cpath%20style='display:none;fill:none;fill-opacity:1;stroke:%23000000;stroke-width:2;stroke-dasharray:none;stroke-opacity:1'%20d='M%2020.942532,17%20H%200'%20id='path7'%20/%3e%3cpath%20style='display:none;fill:none;fill-opacity:1;stroke:%23000000;stroke-width:2;stroke-dasharray:none;stroke-opacity:1'%20d='M%2020.942532,31.333333%20H%200'%20id='path8'%20/%3e%3cpath%20style='display:none;fill:none;fill-opacity:1;stroke:%23000000;stroke-width:2;stroke-dasharray:none;stroke-opacity:1'%20d='M%2020.942532,45.666667%20H%200'%20id='path9'%20/%3e%3cpath%20style='display:none;fill:none;fill-opacity:1;stroke:%23000000;stroke-width:2;stroke-dasharray:none;stroke-opacity:1'%20d='M%2020.942532,60%20H%200'%20id='path10'%20/%3e%3cpath%20style='display:none;fill:none;fill-opacity:1;stroke:%23000000;stroke-width:2;stroke-dasharray:none;stroke-opacity:1'%20d='M%2020.942532,74.333333%20H%200'%20id='path11'%20/%3e%3cpath%20style='display:none;fill:none;fill-opacity:1;stroke:%23000000;stroke-width:2;stroke-dasharray:none;stroke-opacity:1'%20d='M%2020.942532,88.666667%20H%200'%20id='path12'%20/%3e%3cpath%20style='display:none;fill:none;fill-opacity:1;stroke:%23000000;stroke-width:2;stroke-dasharray:none;stroke-opacity:1'%20d='M%2020.942532,103%20H%200'%20id='path13'%20/%3e%3c/g%3e%3c/svg%3e",Di="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'%20standalone='no'?%3e%3c!--%20Created%20with%20Inkscape%20(http://www.inkscape.org/)%20--%3e%3csvg%20width='90'%20height='120'%20viewBox='0%200%2090%20120'%20version='1.1'%20id='svg1'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:svg='http://www.w3.org/2000/svg'%3e%3cdefs%20id='defs1'%20/%3e%3cg%20id='layer1'%3e%3crect%20style='display:none;fill:none;stroke:%23000000;stroke-width:1.98364;stroke-dasharray:none'%20id='rect1'%20width='68.016357'%20height='118.01637'%20x='20.991819'%20y='0.99181795'%20/%3e%3cpath%20style='display:none;fill:%23ff0000;fill-opacity:1;stroke:none;stroke-width:2;stroke-dasharray:none'%20d='m%2037.896931,20.60398%202.443296,-2.225144%20h%2029.843106%20l%201.919733,2.225144%20-1.919733,2.225144%20H%2040.340227%20Z'%20id='path1'%20/%3e%3cpath%20style='display:none;fill:%23ff0000;fill-opacity:1;stroke:none;stroke-width:2;stroke-dasharray:none'%20d='m%2073.999998,23.18857%202.225144,2.443296%20v%2029.843106%20l%20-2.225144,1.919732%20-2.225144,-1.919732%20V%2025.631866%20Z'%20id='path1-5'%20/%3e%3cpath%20style='display:none;fill:%23ff0000;fill-opacity:1;stroke:none;stroke-width:2;stroke-dasharray:none'%20d='m%2073.999998,62.605295%202.225144,2.443296%20V%2094.891697%20L%2073.999998,96.81143%2071.774854,94.891697%20V%2065.048591%20Z'%20id='path4'%20/%3e%3cpath%20style='display:inline;fill:%23ff0000;fill-opacity:1;stroke:none;stroke-width:2;stroke-dasharray:none'%20d='m%2037.89693,99.396019%202.443296,-2.225144%20h%2029.843107%20l%201.919732,2.225144%20-1.919732,2.225141%20H%2040.340226%20Z'%20id='path5'%20/%3e%3cpath%20style='display:none;fill:%23ff0000;fill-opacity:1;stroke:none;stroke-width:2;stroke-dasharray:none'%20d='m%2035.999998,62.605295%202.225144,2.443296%20V%2094.891697%20L%2035.999998,96.81143%2033.774854,94.891697%20V%2065.048591%20Z'%20id='path6'%20/%3e%3cpath%20style='display:none;fill:%23ff0000;fill-opacity:1;stroke:none;stroke-width:2;stroke-dasharray:none'%20d='m%2035.999998,23.18857%202.225144,2.443296%20v%2029.843106%20l%20-2.225144,1.919732%20-2.225144,-1.919732%20V%2025.631866%20Z'%20id='path3'%20/%3e%3cpath%20style='display:none;fill:%23ff0000;fill-opacity:1;stroke:none;stroke-width:2;stroke-dasharray:none'%20d='m%2037.89693,59.979294%202.443296,-2.225144%20h%2029.843107%20l%201.919732,2.225144%20-1.919732,2.225144%20H%2040.340226%20Z'%20id='path2'%20/%3e%3cpath%20style='display:none;fill:none;fill-opacity:1;stroke:%23000000;stroke-width:2;stroke-dasharray:none;stroke-opacity:1'%20d='M%2020.942532,17%20H%200'%20id='path7'%20/%3e%3cpath%20style='display:none;fill:none;fill-opacity:1;stroke:%23000000;stroke-width:2;stroke-dasharray:none;stroke-opacity:1'%20d='M%2020.942532,31.333333%20H%200'%20id='path8'%20/%3e%3cpath%20style='display:none;fill:none;fill-opacity:1;stroke:%23000000;stroke-width:2;stroke-dasharray:none;stroke-opacity:1'%20d='M%2020.942532,45.666667%20H%200'%20id='path9'%20/%3e%3cpath%20style='display:none;fill:none;fill-opacity:1;stroke:%23000000;stroke-width:2;stroke-dasharray:none;stroke-opacity:1'%20d='M%2020.942532,60%20H%200'%20id='path10'%20/%3e%3cpath%20style='display:none;fill:none;fill-opacity:1;stroke:%23000000;stroke-width:2;stroke-dasharray:none;stroke-opacity:1'%20d='M%2020.942532,74.333333%20H%200'%20id='path11'%20/%3e%3cpath%20style='display:none;fill:none;fill-opacity:1;stroke:%23000000;stroke-width:2;stroke-dasharray:none;stroke-opacity:1'%20d='M%2020.942532,88.666667%20H%200'%20id='path12'%20/%3e%3cpath%20style='display:none;fill:none;fill-opacity:1;stroke:%23000000;stroke-width:2;stroke-dasharray:none;stroke-opacity:1'%20d='M%2020.942532,103%20H%200'%20id='path13'%20/%3e%3c/g%3e%3c/svg%3e",ji="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'%20standalone='no'?%3e%3c!--%20Created%20with%20Inkscape%20(http://www.inkscape.org/)%20--%3e%3csvg%20width='90'%20height='120'%20viewBox='0%200%2090%20120'%20version='1.1'%20id='svg1'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:svg='http://www.w3.org/2000/svg'%3e%3cdefs%20id='defs1'%20/%3e%3cg%20id='layer1'%3e%3crect%20style='display:none;fill:none;stroke:%23000000;stroke-width:1.98364;stroke-dasharray:none'%20id='rect1'%20width='68.016357'%20height='118.01637'%20x='20.991819'%20y='0.99181795'%20/%3e%3cpath%20style='display:none;fill:%23ff0000;fill-opacity:1;stroke:none;stroke-width:2;stroke-dasharray:none'%20d='m%2037.896931,20.60398%202.443296,-2.225144%20h%2029.843106%20l%201.919733,2.225144%20-1.919733,2.225144%20H%2040.340227%20Z'%20id='path1'%20/%3e%3cpath%20style='display:none;fill:%23ff0000;fill-opacity:1;stroke:none;stroke-width:2;stroke-dasharray:none'%20d='m%2073.999998,23.18857%202.225144,2.443296%20v%2029.843106%20l%20-2.225144,1.919732%20-2.225144,-1.919732%20V%2025.631866%20Z'%20id='path1-5'%20/%3e%3cpath%20style='display:none;fill:%23ff0000;fill-opacity:1;stroke:none;stroke-width:2;stroke-dasharray:none'%20d='m%2073.999998,62.605295%202.225144,2.443296%20V%2094.891697%20L%2073.999998,96.81143%2071.774854,94.891697%20V%2065.048591%20Z'%20id='path4'%20/%3e%3cpath%20style='display:none;fill:%23ff0000;fill-opacity:1;stroke:none;stroke-width:2;stroke-dasharray:none'%20d='m%2037.89693,99.396019%202.443296,-2.225144%20h%2029.843107%20l%201.919732,2.225144%20-1.919732,2.225141%20H%2040.340226%20Z'%20id='path5'%20/%3e%3cpath%20style='display:inline;fill:%23ff0000;fill-opacity:1;stroke:none;stroke-width:2;stroke-dasharray:none'%20d='m%2035.999998,62.605295%202.225144,2.443296%20V%2094.891697%20L%2035.999998,96.81143%2033.774854,94.891697%20V%2065.048591%20Z'%20id='path6'%20/%3e%3cpath%20style='display:none;fill:%23ff0000;fill-opacity:1;stroke:none;stroke-width:2;stroke-dasharray:none'%20d='m%2035.999998,23.18857%202.225144,2.443296%20v%2029.843106%20l%20-2.225144,1.919732%20-2.225144,-1.919732%20V%2025.631866%20Z'%20id='path3'%20/%3e%3cpath%20style='display:none;fill:%23ff0000;fill-opacity:1;stroke:none;stroke-width:2;stroke-dasharray:none'%20d='m%2037.89693,59.979294%202.443296,-2.225144%20h%2029.843107%20l%201.919732,2.225144%20-1.919732,2.225144%20H%2040.340226%20Z'%20id='path2'%20/%3e%3cpath%20style='display:none;fill:none;fill-opacity:1;stroke:%23000000;stroke-width:2;stroke-dasharray:none;stroke-opacity:1'%20d='M%2020.942532,17%20H%200'%20id='path7'%20/%3e%3cpath%20style='display:none;fill:none;fill-opacity:1;stroke:%23000000;stroke-width:2;stroke-dasharray:none;stroke-opacity:1'%20d='M%2020.942532,31.333333%20H%200'%20id='path8'%20/%3e%3cpath%20style='display:none;fill:none;fill-opacity:1;stroke:%23000000;stroke-width:2;stroke-dasharray:none;stroke-opacity:1'%20d='M%2020.942532,45.666667%20H%200'%20id='path9'%20/%3e%3cpath%20style='display:none;fill:none;fill-opacity:1;stroke:%23000000;stroke-width:2;stroke-dasharray:none;stroke-opacity:1'%20d='M%2020.942532,60%20H%200'%20id='path10'%20/%3e%3cpath%20style='display:none;fill:none;fill-opacity:1;stroke:%23000000;stroke-width:2;stroke-dasharray:none;stroke-opacity:1'%20d='M%2020.942532,74.333333%20H%200'%20id='path11'%20/%3e%3cpath%20style='display:none;fill:none;fill-opacity:1;stroke:%23000000;stroke-width:2;stroke-dasharray:none;stroke-opacity:1'%20d='M%2020.942532,88.666667%20H%200'%20id='path12'%20/%3e%3cpath%20style='display:none;fill:none;fill-opacity:1;stroke:%23000000;stroke-width:2;stroke-dasharray:none;stroke-opacity:1'%20d='M%2020.942532,103%20H%200'%20id='path13'%20/%3e%3c/g%3e%3c/svg%3e",Ai="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'%20standalone='no'?%3e%3c!--%20Created%20with%20Inkscape%20(http://www.inkscape.org/)%20--%3e%3csvg%20width='90'%20height='120'%20viewBox='0%200%2090%20120'%20version='1.1'%20id='svg1'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:svg='http://www.w3.org/2000/svg'%3e%3cdefs%20id='defs1'%20/%3e%3cg%20id='layer1'%3e%3crect%20style='display:none;fill:none;stroke:%23000000;stroke-width:1.98364;stroke-dasharray:none'%20id='rect1'%20width='68.016357'%20height='118.01637'%20x='20.991819'%20y='0.99181795'%20/%3e%3cpath%20style='display:none;fill:%23ff0000;fill-opacity:1;stroke:none;stroke-width:2;stroke-dasharray:none'%20d='m%2037.896931,20.60398%202.443296,-2.225144%20h%2029.843106%20l%201.919733,2.225144%20-1.919733,2.225144%20H%2040.340227%20Z'%20id='path1'%20/%3e%3cpath%20style='display:none;fill:%23ff0000;fill-opacity:1;stroke:none;stroke-width:2;stroke-dasharray:none'%20d='m%2073.999998,23.18857%202.225144,2.443296%20v%2029.843106%20l%20-2.225144,1.919732%20-2.225144,-1.919732%20V%2025.631866%20Z'%20id='path1-5'%20/%3e%3cpath%20style='display:none;fill:%23ff0000;fill-opacity:1;stroke:none;stroke-width:2;stroke-dasharray:none'%20d='m%2073.999998,62.605295%202.225144,2.443296%20V%2094.891697%20L%2073.999998,96.81143%2071.774854,94.891697%20V%2065.048591%20Z'%20id='path4'%20/%3e%3cpath%20style='display:none;fill:%23ff0000;fill-opacity:1;stroke:none;stroke-width:2;stroke-dasharray:none'%20d='m%2037.89693,99.396019%202.443296,-2.225144%20h%2029.843107%20l%201.919732,2.225144%20-1.919732,2.225141%20H%2040.340226%20Z'%20id='path5'%20/%3e%3cpath%20style='display:none;fill:%23ff0000;fill-opacity:1;stroke:none;stroke-width:2;stroke-dasharray:none'%20d='m%2035.999998,62.605295%202.225144,2.443296%20V%2094.891697%20L%2035.999998,96.81143%2033.774854,94.891697%20V%2065.048591%20Z'%20id='path6'%20/%3e%3cpath%20style='display:inline;fill:%23ff0000;fill-opacity:1;stroke:none;stroke-width:2;stroke-dasharray:none'%20d='m%2035.999998,23.18857%202.225144,2.443296%20v%2029.843106%20l%20-2.225144,1.919732%20-2.225144,-1.919732%20V%2025.631866%20Z'%20id='path3'%20/%3e%3cpath%20style='display:none;fill:%23ff0000;fill-opacity:1;stroke:none;stroke-width:2;stroke-dasharray:none'%20d='m%2037.89693,59.979294%202.443296,-2.225144%20h%2029.843107%20l%201.919732,2.225144%20-1.919732,2.225144%20H%2040.340226%20Z'%20id='path2'%20/%3e%3cpath%20style='display:none;fill:none;fill-opacity:1;stroke:%23000000;stroke-width:2;stroke-dasharray:none;stroke-opacity:1'%20d='M%2020.942532,17%20H%200'%20id='path7'%20/%3e%3cpath%20style='display:none;fill:none;fill-opacity:1;stroke:%23000000;stroke-width:2;stroke-dasharray:none;stroke-opacity:1'%20d='M%2020.942532,31.333333%20H%200'%20id='path8'%20/%3e%3cpath%20style='display:none;fill:none;fill-opacity:1;stroke:%23000000;stroke-width:2;stroke-dasharray:none;stroke-opacity:1'%20d='M%2020.942532,45.666667%20H%200'%20id='path9'%20/%3e%3cpath%20style='display:none;fill:none;fill-opacity:1;stroke:%23000000;stroke-width:2;stroke-dasharray:none;stroke-opacity:1'%20d='M%2020.942532,60%20H%200'%20id='path10'%20/%3e%3cpath%20style='display:none;fill:none;fill-opacity:1;stroke:%23000000;stroke-width:2;stroke-dasharray:none;stroke-opacity:1'%20d='M%2020.942532,74.333333%20H%200'%20id='path11'%20/%3e%3cpath%20style='display:none;fill:none;fill-opacity:1;stroke:%23000000;stroke-width:2;stroke-dasharray:none;stroke-opacity:1'%20d='M%2020.942532,88.666667%20H%200'%20id='path12'%20/%3e%3cpath%20style='display:none;fill:none;fill-opacity:1;stroke:%23000000;stroke-width:2;stroke-dasharray:none;stroke-opacity:1'%20d='M%2020.942532,103%20H%200'%20id='path13'%20/%3e%3c/g%3e%3c/svg%3e",Li="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'%20standalone='no'?%3e%3c!--%20Created%20with%20Inkscape%20(http://www.inkscape.org/)%20--%3e%3csvg%20width='90'%20height='120'%20viewBox='0%200%2090%20120'%20version='1.1'%20id='svg1'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:svg='http://www.w3.org/2000/svg'%3e%3cdefs%20id='defs1'%20/%3e%3cg%20id='layer1'%3e%3crect%20style='display:none;fill:none;stroke:%23000000;stroke-width:1.98364;stroke-dasharray:none'%20id='rect1'%20width='68.016357'%20height='118.01637'%20x='20.991819'%20y='0.99181795'%20/%3e%3cpath%20style='display:none;fill:%23ff0000;fill-opacity:1;stroke:none;stroke-width:2;stroke-dasharray:none'%20d='m%2037.896931,20.60398%202.443296,-2.225144%20h%2029.843106%20l%201.919733,2.225144%20-1.919733,2.225144%20H%2040.340227%20Z'%20id='path1'%20/%3e%3cpath%20style='display:none;fill:%23ff0000;fill-opacity:1;stroke:none;stroke-width:2;stroke-dasharray:none'%20d='m%2073.999998,23.18857%202.225144,2.443296%20v%2029.843106%20l%20-2.225144,1.919732%20-2.225144,-1.919732%20V%2025.631866%20Z'%20id='path1-5'%20/%3e%3cpath%20style='display:none;fill:%23ff0000;fill-opacity:1;stroke:none;stroke-width:2;stroke-dasharray:none'%20d='m%2073.999998,62.605295%202.225144,2.443296%20V%2094.891697%20L%2073.999998,96.81143%2071.774854,94.891697%20V%2065.048591%20Z'%20id='path4'%20/%3e%3cpath%20style='display:none;fill:%23ff0000;fill-opacity:1;stroke:none;stroke-width:2;stroke-dasharray:none'%20d='m%2037.89693,99.396019%202.443296,-2.225144%20h%2029.843107%20l%201.919732,2.225144%20-1.919732,2.225141%20H%2040.340226%20Z'%20id='path5'%20/%3e%3cpath%20style='display:none;fill:%23ff0000;fill-opacity:1;stroke:none;stroke-width:2;stroke-dasharray:none'%20d='m%2035.999998,62.605295%202.225144,2.443296%20V%2094.891697%20L%2035.999998,96.81143%2033.774854,94.891697%20V%2065.048591%20Z'%20id='path6'%20/%3e%3cpath%20style='display:none;fill:%23ff0000;fill-opacity:1;stroke:none;stroke-width:2;stroke-dasharray:none'%20d='m%2035.999998,23.18857%202.225144,2.443296%20v%2029.843106%20l%20-2.225144,1.919732%20-2.225144,-1.919732%20V%2025.631866%20Z'%20id='path3'%20/%3e%3cpath%20style='display:inline;fill:%23ff0000;fill-opacity:1;stroke:none;stroke-width:2;stroke-dasharray:none'%20d='m%2037.89693,59.979294%202.443296,-2.225144%20h%2029.843107%20l%201.919732,2.225144%20-1.919732,2.225144%20H%2040.340226%20Z'%20id='path2'%20/%3e%3cpath%20style='display:none;fill:none;fill-opacity:1;stroke:%23000000;stroke-width:2;stroke-dasharray:none;stroke-opacity:1'%20d='M%2020.942532,17%20H%200'%20id='path7'%20/%3e%3cpath%20style='display:none;fill:none;fill-opacity:1;stroke:%23000000;stroke-width:2;stroke-dasharray:none;stroke-opacity:1'%20d='M%2020.942532,31.333333%20H%200'%20id='path8'%20/%3e%3cpath%20style='display:none;fill:none;fill-opacity:1;stroke:%23000000;stroke-width:2;stroke-dasharray:none;stroke-opacity:1'%20d='M%2020.942532,45.666667%20H%200'%20id='path9'%20/%3e%3cpath%20style='display:none;fill:none;fill-opacity:1;stroke:%23000000;stroke-width:2;stroke-dasharray:none;stroke-opacity:1'%20d='M%2020.942532,60%20H%200'%20id='path10'%20/%3e%3cpath%20style='display:none;fill:none;fill-opacity:1;stroke:%23000000;stroke-width:2;stroke-dasharray:none;stroke-opacity:1'%20d='M%2020.942532,74.333333%20H%200'%20id='path11'%20/%3e%3cpath%20style='display:none;fill:none;fill-opacity:1;stroke:%23000000;stroke-width:2;stroke-dasharray:none;stroke-opacity:1'%20d='M%2020.942532,88.666667%20H%200'%20id='path12'%20/%3e%3cpath%20style='display:none;fill:none;fill-opacity:1;stroke:%23000000;stroke-width:2;stroke-dasharray:none;stroke-opacity:1'%20d='M%2020.942532,103%20H%200'%20id='path13'%20/%3e%3c/g%3e%3c/svg%3e",qi={id:z.O_LED_RED,imgPath:[Oi,Ni],connectionSlot:[{id:0,in:!0,name:"In",localPos:new O(23,66)}]},zi={id:z.O_7_SEGMENTS,imgPath:[Ci,xi,Ri,Mi,Di,ji,Ai,Li],connectionSlot:[{id:0,in:!0,name:"A",localPos:new O(-4,17)},{id:1,in:!0,name:"B",localPos:new O(-4,32)},{id:2,in:!0,name:"C",localPos:new O(-4,46)},{id:3,in:!0,name:"D",localPos:new O(-4,60)},{id:4,in:!0,name:"E",localPos:new O(-4,75)},{id:5,in:!0,name:"F",localPos:new O(-4,89)},{id:6,in:!0,name:"G",localPos:new O(-4,103)}]};class qr{id;position;componentType;nodeType;slots;collisionShape;_images;imageSize;halfImageSize;imageMode="UP_LEFT";_signalData;selected;get image(){return Object.keys(this._images).length===0?null:this._images[this.state?1:0]}get state(){return this._signalData.output??!1}constructor(e,s,n,i,r,o,d,f=!0){if(this.id=e,this.position=s,this.componentType=le.OUTPUT,this.nodeType=qi,this._signalData=d[this.id],this.slots=r,this._images=Xe(o,this.nodeType.imgPath),this.imageSize=new O(this.image?.width??100,this.image?.height??100),this.halfImageSize=O.div(this.imageSize,2),f){this.imageMode="CENTER",this.position.sub(this.halfImageSize);const w=new O(n,i).sub(this.imageSize);this.position.min(w).max(O.ZERO)}this.collisionShape=new De(this.position,this.imageSize.x,this.imageSize.y),this.selected=!1}move(e,s=!0){s?this.position.add(e):this.imageMode==="CENTER"?O.sub(e,this.halfImageSize,this.position):this.position.copy(e),this.collisionShape.moveShape(this.position,!1)}draw(e){this.image&&(e.drawImage(this.image,this.position.x,this.position.y),this.collisionShape!==void 0&&this.collisionShape.draw(e,this.selected))}onEvent(e){switch(e){case ne.FOCUS_IN:this.selected=!0;break;case ne.FOCUS_OUT:this.selected=!1;break;default:return!1}return!0}toObject(){return{id:this.id,componentType:this.componentType,nodeType:this.nodeType.id,position:this.position.toPlainObject(),slotIds:this.slots.map(s=>s.id),state:this.state}}}class zr{id;position;componentType;nodeType;slots;collisionShape;_images;imageSize;halfImageSize;imageMode="UP_LEFT";_signalData;selected;get image(){return Object.keys(this._images).length===0?null:this._images[0]}get state(){return this._signalData.output??!1}constructor(e,s,n,i,r,o,d,f=!0){if(this.id=e,this.position=s,this.componentType=le.OUTPUT,this.nodeType=zi,this._signalData=d[this.id],this.slots=r,this._images=Xe(o,this.nodeType.imgPath),this.imageSize=new O(this.image?.width??100,this.image?.height??100),this.halfImageSize=O.div(this.imageSize,2),f){this.imageMode="CENTER",this.position.sub(this.halfImageSize);const w=new O(n,i).sub(this.imageSize);this.position.min(w).max(O.ZERO)}this.collisionShape=new De(this.position,this.imageSize.x,this.imageSize.y),this.selected=!1}move(e,s=!0){s?this.position.add(e):this.imageMode==="CENTER"?O.sub(e,this.halfImageSize,this.position):this.position.copy(e),this.collisionShape.moveShape(this.position,!1)}draw(e){if(this.image){if(e.drawImage(this.image,this.position.x,this.position.y),Object.keys(this._images).length>=8)for(const[s,n]of this._signalData.signalFrom)n>=0&&this._signalData.signalGraph[n].output===!0&&e.drawImage(this._images[s+1],this.position.x,this.position.y);this.collisionShape!==void 0&&this.collisionShape.draw(e,this.selected)}}onEvent(e){switch(e){case ne.FOCUS_IN:this.selected=!0;break;case ne.FOCUS_OUT:this.selected=!1;break;default:return!1}return!0}toObject(){return{id:this.id,componentType:this.componentType,nodeType:this.nodeType.id,position:this.position.toPlainObject(),slotIds:this.slots.map(s=>s.id),state:this.state}}}class Ur{id;position;componentType;nodeType;slots;collisionShape;_images;imageSize;halfImageSize;imageMode="UP_LEFT";_signalData;selected;get image(){return Object.keys(this._images).length===0?null:this._images[this.state?1:0]}get state(){return this._signalData.output??!1}set state(e){this._signalData.output=e}constructor(e,s,n,i,r,o,d,f=!0){if(this.id=e,this.position=s,this.componentType=le.INPUT,this.nodeType=Ii,this._signalData=d[this.id],this.slots=r,this._images=Xe(o,this.nodeType.imgPath),this.imageSize=new O(this.image?.width??100,this.image?.height??100),this.halfImageSize=O.div(this.imageSize,2),f){this.imageMode="CENTER",this.position.sub(this.halfImageSize);const w=new O(n,i).sub(this.halfImageSize);this.position.min(w).max(O.ZERO)}this.collisionShape=new De(this.position,this.imageSize.x,this.imageSize.y),this.selected=!1}move(e,s=!0){s?this.position.add(e):this.imageMode==="CENTER"?O.sub(e,this.halfImageSize,this.position):this.position.copy(e),this.collisionShape.moveShape(this.position,!1)}draw(e){this.image&&(e.drawImage(this.image,this.position.x,this.position.y),this.collisionShape!==void 0&&this.collisionShape.draw(e,this.selected))}onEvent(e){switch(e){case ne.MOUSE_CLICKED:this.state=!0;break;case ne.MOUSE_RELEASED:this.state=!1;break;case ne.FOCUS_IN:this.selected=!0;break;case ne.FOCUS_OUT:this.selected=!1;break;default:return!1}return!0}toObject(){return{id:this.id,componentType:this.componentType,nodeType:this.nodeType.id,position:this.position.toPlainObject(),slotIds:this.slots.map(s=>s.id),state:this.state}}}class Fr{id;position;componentType;nodeType;slots;collisionShape;_images;imageSize;halfImageSize;imageMode="UP_LEFT";_signalData;selected;clockDelay;currentClockStep=0;get image(){return Object.keys(this._images).length===0?null:this._images[0]}get state(){return this._signalData.output??!1}set state(e){this._signalData.output=e}constructor(e,s,n,i,r,o,d,f=60,w=!0){if(this.id=e,this.position=s,this.componentType=le.INPUT,this.nodeType=Ti,this._signalData=d[this.id],this.slots=r,this.clockDelay=f,this._images=Xe(o,this.nodeType.imgPath),this.imageSize=new O(this.image?.width??100,this.image?.height??100),this.halfImageSize=O.div(this.imageSize,2),w){this.imageMode="CENTER",this.position.sub(this.halfImageSize);const p=new O(n,i).sub(this.imageSize);this.position.min(p).max(O.ZERO)}this.collisionShape=new De(this.position,this.imageSize.x,this.imageSize.y),this.selected=!1}move(e,s=!0){s?this.position.add(e):this.imageMode==="CENTER"?O.sub(e,this.halfImageSize,this.position):this.position.copy(e),this.collisionShape.moveShape(this.position,!1)}draw(e){this.image&&(e.drawImage(this.image,this.position.x,this.position.y),this.collisionShape!==void 0&&this.collisionShape.draw(e,this.selected))}onEvent(e){switch(e){case ne.FOCUS_IN:this.selected=!0;break;case ne.FOCUS_OUT:this.selected=!1;break;case ne.CLOCK_FINISHED:this.state=!this.state,this.currentClockStep=0;break;case ne.ENGINE_UPDATE:this.currentClockStep++,this.currentClockStep>this.clockDelay&&this.onEvent(ne.CLOCK_FINISHED);break;default:return!1}return!0}toObject(){return{id:this.id,componentType:this.componentType,nodeType:this.nodeType.id,position:this.position.toPlainObject(),slotIds:this.slots.map(s=>s.id),state:this.state}}}const _e={node(t=-1,e,s,n,i,r,o,d=[],f=!0,w=!1){const p=t>=0?t:e.nextComponentId;if(i<z.G_AND||i>=z.I_SWITCH)return console.error("O tipo de node passado como parâmetro é inválido!",i),-1;Me.vertex.add(e.signalGraph,p,i,at.getNodeModel(i),w);const $=new at(p,new O(r,o),i,s,n,[],e.nodeImageList,e.signalGraph,f);e.nodes.set(p,$);const v=e.nodes.get(p);if(e.updateComponentId(t>=0?t:void 0),d.length===0){const _=at.getNodeModel(i).connectionSlot;for(const k of Object.values(_)){const b=this.slot(void 0,e,k.localPos.x,k.localPos.y,v,k.id,k.in);if(!v.slots.find(h=>h.id===b)){const h=e.slots.get(b);h&&v.slots.push(h)}}}else for(const _ of d){const k=e.slots.get(_);k&&v.slots.push(k)}return p},input(t=-1,e,s,n,i,r,o,d=[],f=!0,w=!1){const p=t>=0?t:e.nextComponentId;let $,v;switch(i){case z.I_SWITCH:v=Ei,Me.vertex.add(e.signalGraph,p,i,v,w),$=new Lr(p,new O(r,o),s,n,[],e.nodeImageList,e.signalGraph,f);break;case z.I_BUTTON:v=Ii,Me.vertex.add(e.signalGraph,p,i,v,w),$=new Ur(p,new O(r,o),s,n,[],e.nodeImageList,e.signalGraph,f);break;case z.I_CLOCK:v=Ti,Me.vertex.add(e.signalGraph,p,i,v,w),$=new Fr(p,new O(r,o),s,n,[],e.nodeImageList,e.signalGraph,void 0,f);break;default:return console.error("O tipo de node de entrada passado como parâmetro é inválido!",i),-1}e.nodes.set(p,$);const _=e.nodes.get(p);if(e.updateComponentId(t>=0?t:void 0),d.length===0){const k=v.connectionSlot;for(const b of Object.values(k)){const h=this.slot(void 0,e,b.localPos.x,b.localPos.y,_,b.id,b.in);if(!_.slots.find(l=>l.id===h)){const l=e.slots.get(h);l&&_.slots.push(l)}}}else for(const k of d){const b=e.slots.get(k);b&&_.slots.push(b)}return p},output(t=-1,e,s,n,i,r,o,d=[],f=!0,w=!1){const p=t>=0?t:e.nextComponentId;let $,v;switch(i){case z.O_LED_RED:v=qi,Me.vertex.add(e.signalGraph,p,i,v,w),$=new qr(p,new O(r,o),s,n,[],e.nodeImageList,e.signalGraph,f);break;case z.O_7_SEGMENTS:v=zi,Me.vertex.add(e.signalGraph,p,i,v,w),$=new zr(p,new O(r,o),s,n,[],e.nodeImageList,e.signalGraph,f);break;default:return console.error("O tipo de node de saída passado como parâmetro é inválido!",i),-1}e.nodes.set(p,$);const _=e.nodes.get(p);if(e.updateComponentId(t>=0?t:void 0),d.length===0){const k=v.connectionSlot;for(const b of Object.values(k)){const h=this.slot(void 0,e,b.localPos.x,b.localPos.y,_,b.id,b.in);if(!_.slots.find(l=>l.id===h)){const l=e.slots.get(h);l&&_.slots.push(l)}}}else for(const k of d){const b=e.slots.get(k);b&&_.slots.push(b)}return p},slot(t=-1,e,s,n,i,r,o,d,f,w,p){const $=t>=0?t:e.nextComponentId,v=new jr($,new O(s,n),i,r,void 0,o,d,f,w,p);return e.slots.set($,v),(i.componentType===le.INPUT||i.componentType===le.OUTPUT||i.componentType===le.NODE)&&i.slots.push(e.slots.get($)),e.updateComponentId(t>=0?t:void 0)},connection(t=-1,e,s,n,i,r,o,d,f){const w=t>=0?t:e.nextComponentId,p=new Ir(w,new O(s,n),new O(i,r),{start:o,end:d},f);return e.connections.set(w,p),e.updateComponentId(t>=0?t:void 0)},text(t=-1,e,s,n,i,r,o,d){const f=t>=0?t:e.nextComponentId,w=new Ar(f,new O(i,r),n,o,d?{id:d.id,type:d.componentType}:void 0,s);return e.texts.set(f,w),e.updateComponentId(t>=0?t:void 0)}};class ct{simulationId;simulationTitle;_nextComponentId;nodes;slots;connections;texts;nodeImageList;signalGraph;constructor(e,s,n=0,i,r={},o=new Map,d=new Map,f=new Map,w=new Map){this.simulationId=e,this.simulationTitle=s,this._nextComponentId=n,this.nodes=o,this.slots=d,this.connections=f,this.texts=w,this.signalGraph=r,this.nodeImageList=i}get components(){return{nodes:this.nodes,slots:this.slots,connections:this.connections,texts:this.texts}}get nextComponentId(){return this._nextComponentId}updateComponentId(e){const s=this._nextComponentId;return this._nextComponentId=e?Math.max(this._nextComponentId,e+1):this._nextComponentId+1,s}removeComponent(e=this._nextComponentId-1,s){if(s)switch(s){case le.NODE:case le.INPUT:case le.OUTPUT:return Ke.node(this,e);case le.SLOT:return Ke.slot(this,e);case le.LINE:return Ke.connection(this,e);case le.TEXT:return Ke.text(this,e)}else{const n=this.connections.get(e)??this.nodes.get(e)??this.slots.get(e)??this.texts.get(e);if(n!==void 0)return this.removeComponent(n.id,n.componentType)}return!1}saveAsJson(){const e={id:this.simulationId,title:this.simulationTitle,data:{nodes:[],connections:[],slots:[],texts:[]},signal:[]};for(const[s,n]of Object.entries(this.components))for(const i of n.values())switch(s){case"nodes":e.data.nodes.push(i.toObject());break;case"slots":e.data.slots.push(i.toObject());break;case"connections":e.data.connections.push(i.toObject());break;case"texts":e.data.texts.push(i.toObject());break}for(const[s,n]of Object.entries(this.signalGraph)){const i=parseInt(s);e.signal.push({id:i,data:{output:n.output,signalFrom:[...n.signalFrom.entries()],signalTo:[...n.signalTo.values()],nodeType:n.nodeType}})}return JSON.stringify(e)}static createFromJson(e,s,n){const i={};for(const o of Object.values(e.signal))i[o.id]={id:o.id,output:o.data.output,signalFrom:new Map(o.data.signalFrom.map(d=>[d[0],d[1]])),signalTo:new Set(o.data.signalTo),nodeType:o.data.nodeType,signalGraph:i};const r=new ct(e.id,e.title,0,structuredClone(n),i);for(const o of e.data.nodes)o.nodeType>=z.G_AND&&o.nodeType<z.I_SWITCH?_e.node(o.id,r,s.canvas.width,s.canvas.height,o.nodeType,o.position.x,o.position.y,o.slotIds,!1):o.nodeType>=z.I_SWITCH&&o.nodeType<z.O_LED_RED?_e.input(o.id,r,s.canvas.width,s.canvas.height,o.nodeType,o.position.x,o.position.y,o.slotIds,!1):o.nodeType>=z.O_LED_RED&&_e.output(o.id,r,s.canvas.width,s.canvas.height,o.nodeType,o.position.x,o.position.y,o.slotIds,!1);for(const o of e.data.slots)_e.slot(o.id,r,o.position.x,o.position.y,r.nodes.get(o.parentId),o.slotIdAtParent,o.inSlot,o.radius,o.attractionRadius,o.color,o.colorActive);for(const o of e.data.connections)_e.connection(o.id,r,o.position.x,o.position.y,o.endPosition.x,o.endPosition.y,o.connectedTo.start,o.connectedTo.end,o.anchors.map(d=>new H(d.x,d.y))),o.connectedTo.start&&r.slots.get(o.connectedTo.start.slotId).slotConnections.push(r.connections.get(o.id)),o.connectedTo.end&&r.slots.get(o.connectedTo.end.slotId).slotConnections.push(r.connections.get(o.id));for(const o of e.data.texts){_e.text(o.id,r,s,o.text,o.position.x,o.position.y,o.style);break}return r}}const Cs={checkComponentClick(t,e){const s=[];for(const[n,i]of e.entries()){if(i.collisionShape instanceof Array)return console.warn("Não utilize a função checkComponentClick para checar colisões com conexões!"),[];i.collisionShape.collisionWithPoint(t)&&s.push(n)}return s}},Ui={checkSlotClick(t,e){return Cs.checkComponentClick(e,t)}},Qe={editingLine:void 0,startSlot:void 0,endSlot:void 0,oldStartSlot:void 0,oldEndSlot:void 0,movePoint:Te.NONE,reset:function(){this.editingLine=void 0,this.startSlot=void 0,this.endSlot=void 0,this.oldStartSlot=void 0,this.oldEndSlot=void 0,this.movePoint=Te.NONE},checkConnectionClick:function(t,e){const s=new Set;for(const[n,i]of t.entries())i.collisionShape.find(o=>o.collisionWithPoint(e))!==void 0&&s.add(n);return[...s.values()]},newConnection:function(t,e){if(this.editingLine!==void 0||ye.movingObject!=="none")return!1;const s=t.slots.get(e);if(s===void 0)return!1;this.movePoint=s.inSlot?Te.START:Te.END,[this.startSlot,this.endSlot]=s.inSlot?[void 0,s]:[s,void 0];const n=_e.connection(void 0,t,s.globalPosition.x,s.globalPosition.y,s.globalPosition.x,s.globalPosition.y,s.inSlot?void 0:{nodeId:s.parent.id,slotId:s.id},s.inSlot?{nodeId:s.parent.id,slotId:s.id}:void 0);return this.editingLine=t.connections.get(n),ye.movingObject="connection",!0},move:function(t,e){return!(ye.movingObject==="connection"||ye.movingObject==="none")||this.editingLine===void 0?!1:(ye.movingObject="connection",this.editingLine.move(e,!1,this.movePoint,!0,t.nodes),!0)},setConnectionProps:function(t){return this.startSlot===void 0||this.endSlot===void 0||this.editingLine===void 0?!1:(this.editingLine.position=this.startSlot.globalPosition.clone(),this.editingLine.endPosition=this.endSlot.globalPosition.clone(),this.editingLine.anchors=this.editingLine.generateAnchors(t.nodes),this.editingLine.changeConnection(this.startSlot.id,this.startSlot.parent.id,!1),this.editingLine.changeConnection(this.endSlot.id,this.endSlot.parent.id,!0),this.startSlot.slotConnections.push(this.editingLine),this.endSlot.slotConnections.push(this.editingLine),Me.edge.add(t.signalGraph,this.editingLine,this.startSlot,this.endSlot),this.editingLine.move(O.ZERO,!0,Te.START,!1),this.reset(),!0)},isValidPosition:function(t,e){const s=Ui.checkSlotClick(t.slots,e);if(s.length===0||this.movePoint===Te.START&&s[0]===this.endSlot?.id||this.movePoint===Te.END&&s[0]===this.startSlot?.id)return!1;const n=t.slots.get(s[0]);if(n===void 0)return!1;if(this.movePoint===Te.START){if(this.endSlot===void 0||n.inSlot===this.endSlot.inSlot)return!1;this.startSlot=n}if(this.movePoint===Te.END){if(this.startSlot===void 0||n.inSlot===this.startSlot.inSlot)return!1;this.endSlot=n}return!0},bindLine:function(t,e){return this.editingLine===void 0?!1:!this.isValidPosition(t,e)||this.startSlot===void 0||this.endSlot===void 0?(Ke.connection(t,this.editingLine.id),!1):this.removeOldInputConnections(t)&&this.setConnectionProps(t)},removeOldInputConnections:function(t){if(this.startSlot===void 0||this.endSlot===void 0||this.editingLine===void 0||!this.endSlot.inSlot)return!1;for(const e of this.endSlot.slotConnections)e.id!==this.editingLine.id&&Ke.connection(t,e.id);return!0}},Ss={checkNodeClick(t,e){return Cs.checkComponentClick(e,t)},move(t,e,s,n=!0){const i=e.getCollisionList().nodes;if(i.length===0||!(ye.movingObject==="none"||ye.movingObject==="node"))return!1;ye.movingObject="node";const r=t.nodes.get(i[0]);return r===void 0?!1:(r.move(s,n),this.moveLinkedElements(r,t.nodes),!0)},moveLinkedElements(t,e){for(const s of t.slots)if(s){s.move();for(let n=0;n<s.slotConnections.length;n++){const i=s.slotConnections[n];i.connectedTo.start?.slotId===s.id?i.move(s.globalPosition,!1,0,!0,e):i.connectedTo.end?.slotId===s.id&&i.move(s.globalPosition,!1,1,!0,e)}}},onTick(t,e){const s=[];for(const n of t.values())n.nodeType.id===z.I_CLOCK&&n.onEvent(ne.ENGINE_UPDATE)&&s.push(n.id);for(const n of s)We.updateGraph(e,n)}},Bs={checkTextClick(t,e){return Cs.checkComponentClick(e,t)},move(t,e,s,n=!0){const i=e.getCollisionList().texts;if(i.length===0||!(ye.movingObject==="none"||ye.movingObject==="text"))return!1;ye.movingObject="text";const r=t.get(i[0]);return r===void 0?!1:(r.move(s,n),!0)}};class ye{collisionList;_mouse;static movingObject="none";constructor(e){this._mouse=e,this.collisionList={nodes:[],slots:[],connections:[],texts:[]},ye.movingObject="none"}onMouseClick(e){if(this._mouse.stateChanged&&this._mouse.clicked){this.clearAllCollisions(e);const s=Ss.checkNodeClick(e.nodes,this._mouse.position),n=Ui.checkSlotClick(e.slots,this._mouse.position),i=Qe.checkConnectionClick(e.connections,this._mouse.position),r=Bs.checkTextClick(e.texts,this._mouse.position);this.collisionList={nodes:s,slots:n,connections:i,texts:r},n.length>0&&Qe.newConnection(e,n[0]);const o=e.nodes.get(this.collisionList.nodes[0]);o!==void 0&&o.nodeType.id===z.I_BUTTON&&(o.onEvent(ne.MOUSE_CLICKED),We.updateGraph(e.signalGraph,this.collisionList.nodes[0])),this.displaySelectedComponents(e),this._mouse.stateChanged=!1}}onMouseRelease(e){if(!this._mouse.clicked&&this._mouse.stateChanged){if(!this._mouse.dragged)for(const s of this.collisionList.nodes){const n=e.nodes.get(s);n!==void 0&&n.componentType===le.INPUT&&n.onEvent(ne.MOUSE_RELEASED)&&We.updateGraph(e.signalGraph,s)}Qe.bindLine(e,this._mouse.position),Qe.reset(),this._mouse.stateChanged=!1}ye.movingObject="none"}onMouseMove(e){return this._mouse.clicked&&this._mouse.dragged?Qe.move(e,this._mouse.position)||Ss.move(e,this,this._mouse.position,!1)||Bs.move(e.texts,this,this._mouse.position,!1):!1}displaySelectedComponents(e){for(const[s,n]of Object.entries(this.collisionList))e.components[s].get(n[0])?.onEvent(ne.FOCUS_IN)}clearSelectedComponents(e){for(const[s,n]of Object.entries(this.collisionList))for(const i of n)e.components[s].get(i)?.onEvent(ne.FOCUS_OUT)}getCollisionList(){return this.collisionList}clearAllCollisions(e){this.clearSelectedComponents(e),this.collisionList.nodes=[],this.collisionList.slots=[],this.collisionList.connections=[],this.collisionList.texts=[]}}class Hr{position=new O;mouseClicked=!1;doubleClicked=!1;clickStartPosition=new O;mouseStateChanged=!1;clickToDragThreshold=6;doubleClickTimer=300;alreadyClicked=!1;mouseDragged=!1;get clicked(){return this.mouseClicked}set clicked(e){this.mouseClicked=e,this.mouseStateChanged=!0,e?this.clickStartPosition.copy(this.position):this.mouseDragged=!1}get dragged(){const e=O.sub(this.position,this.clickStartPosition);return this.mouseDragged=this.mouseDragged||e.x>this.clickToDragThreshold||e.x<-this.clickToDragThreshold||e.y>this.clickToDragThreshold||e.y<-this.clickToDragThreshold,this.mouseDragged}get stateChanged(){return this.mouseStateChanged}set stateChanged(e){this.mouseStateChanged=e,this.alreadyClicked?this.doubleClicked=this.mouseClicked:(this.alreadyClicked=!0,setTimeout(()=>this.alreadyClicked=!1,this.doubleClickTimer))}}var fe=Uint8Array,ke=Uint16Array,xs=Int32Array,Qt=new fe([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),es=new fe([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),Ps=new fe([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Fi=function(t,e){for(var s=new ke(31),n=0;n<31;++n)s[n]=e+=1<<t[n-1];for(var i=new xs(s[30]),n=1;n<30;++n)for(var r=s[n];r<s[n+1];++r)i[r]=r-s[n]<<5|n;return{b:s,r:i}},Hi=Fi(Qt,2),Bi=Hi.b,Es=Hi.r;Bi[28]=258,Es[258]=28;var Gi=Fi(es,0),Br=Gi.b,Gs=Gi.r,Is=new ke(32768);for(var ae=0;ae<32768;++ae){var Ae=(ae&43690)>>1|(ae&21845)<<1;Ae=(Ae&52428)>>2|(Ae&13107)<<2,Ae=(Ae&61680)>>4|(Ae&3855)<<4,Is[ae]=((Ae&65280)>>8|(Ae&255)<<8)>>1}var Oe=function(t,e,s){for(var n=t.length,i=0,r=new ke(e);i<n;++i)t[i]&&++r[t[i]-1];var o=new ke(e);for(i=1;i<e;++i)o[i]=o[i-1]+r[i-1]<<1;var d;if(s){d=new ke(1<<e);var f=15-e;for(i=0;i<n;++i)if(t[i])for(var w=i<<4|t[i],p=e-t[i],$=o[t[i]-1]++<<p,v=$|(1<<p)-1;$<=v;++$)d[Is[$]>>f]=w}else for(d=new ke(n),i=0;i<n;++i)t[i]&&(d[i]=Is[o[t[i]-1]++]>>15-t[i]);return d},qe=new fe(288);for(var ae=0;ae<144;++ae)qe[ae]=8;for(var ae=144;ae<256;++ae)qe[ae]=9;for(var ae=256;ae<280;++ae)qe[ae]=7;for(var ae=280;ae<288;++ae)qe[ae]=8;var lt=new fe(32);for(var ae=0;ae<32;++ae)lt[ae]=5;var Gr=Oe(qe,9,0),Vr=Oe(qe,9,1),Zr=Oe(lt,5,0),Kr=Oe(lt,5,1),ds=function(t){for(var e=t[0],s=1;s<t.length;++s)t[s]>e&&(e=t[s]);return e},Se=function(t,e,s){var n=e/8|0;return(t[n]|t[n+1]<<8)>>(e&7)&s},us=function(t,e){var s=e/8|0;return(t[s]|t[s+1]<<8|t[s+2]<<16)>>(e&7)},Rs=function(t){return(t+7)/8|0},Vi=function(t,e,s){return(s==null||s>t.length)&&(s=t.length),new fe(t.subarray(e,s))},Wr=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],Ee=function(t,e,s){var n=new Error(e||Wr[t]);if(n.code=t,Error.captureStackTrace&&Error.captureStackTrace(n,Ee),!s)throw n;return n},Jr=function(t,e,s,n){var i=t.length,r=0;if(!i||e.f&&!e.l)return s||new fe(0);var o=!s,d=o||e.i!=2,f=e.i;o&&(s=new fe(i*3));var w=function(E){var C=s.length;if(E>C){var M=new fe(Math.max(C*2,E));M.set(s),s=M}},p=e.f||0,$=e.p||0,v=e.b||0,_=e.l,k=e.d,b=e.m,h=e.n,l=i*8;do{if(!_){p=Se(t,$,1);var a=Se(t,$+1,3);if($+=3,a)if(a==1)_=Vr,k=Kr,b=9,h=5;else if(a==2){var m=Se(t,$,31)+257,S=Se(t,$+10,15)+4,I=m+Se(t,$+5,31)+1;$+=14;for(var x=new fe(I),j=new fe(19),L=0;L<S;++L)j[Ps[L]]=Se(t,$+L*3,7);$+=S*3;for(var U=ds(j),G=(1<<U)-1,Z=Oe(j,U,1),L=0;L<I;){var ee=Z[Se(t,$,G)];$+=ee&15;var c=ee>>4;if(c<16)x[L++]=c;else{var re=0,te=0;for(c==16?(te=3+Se(t,$,3),$+=2,re=x[L-1]):c==17?(te=3+Se(t,$,7),$+=3):c==18&&(te=11+Se(t,$,127),$+=7);te--;)x[L++]=re}}var K=x.subarray(0,m),oe=x.subarray(m);b=ds(K),h=ds(oe),_=Oe(K,b,1),k=Oe(oe,h,1)}else Ee(1);else{var c=Rs($)+4,y=t[c-4]|t[c-3]<<8,u=c+y;if(u>i){f&&Ee(0);break}d&&w(v+y),s.set(t.subarray(c,u),v),e.b=v+=y,e.p=$=u*8,e.f=p;continue}if($>l){f&&Ee(0);break}}d&&w(v+131072);for(var A=(1<<b)-1,T=(1<<h)-1,D=$;;D=$){var re=_[us(t,$)&A],N=re>>4;if($+=re&15,$>l){f&&Ee(0);break}if(re||Ee(2),N<256)s[v++]=N;else if(N==256){D=$,_=null;break}else{var g=N-254;if(N>264){var L=N-257,P=Qt[L];g=Se(t,$,(1<<P)-1)+Bi[L],$+=P}var R=k[us(t,$)&T],F=R>>4;R||Ee(3),$+=R&15;var oe=Br[F];if(F>3){var P=es[F];oe+=us(t,$)&(1<<P)-1,$+=P}if($>l){f&&Ee(0);break}d&&w(v+131072);var B=v+g;if(v<oe){var Q=r-oe,W=Math.min(oe,B);for(Q+v<0&&Ee(3);v<W;++v)s[v]=n[Q+v]}for(;v<B;++v)s[v]=s[v-oe]}}e.l=_,e.p=D,e.b=v,e.f=p,_&&(p=1,e.m=b,e.d=k,e.n=h)}while(!p);return v!=s.length&&o?Vi(s,0,v):s.subarray(0,v)},Ne=function(t,e,s){s<<=e&7;var n=e/8|0;t[n]|=s,t[n+1]|=s>>8},et=function(t,e,s){s<<=e&7;var n=e/8|0;t[n]|=s,t[n+1]|=s>>8,t[n+2]|=s>>16},hs=function(t,e){for(var s=[],n=0;n<t.length;++n)t[n]&&s.push({s:n,f:t[n]});var i=s.length,r=s.slice();if(!i)return{t:Ki,l:0};if(i==1){var o=new fe(s[0].s+1);return o[s[0].s]=1,{t:o,l:1}}s.sort(function(u,m){return u.f-m.f}),s.push({s:-1,f:25001});var d=s[0],f=s[1],w=0,p=1,$=2;for(s[0]={s:-1,f:d.f+f.f,l:d,r:f};p!=i-1;)d=s[s[w].f<s[$].f?w++:$++],f=s[w!=p&&s[w].f<s[$].f?w++:$++],s[p++]={s:-1,f:d.f+f.f,l:d,r:f};for(var v=r[0].s,n=1;n<i;++n)r[n].s>v&&(v=r[n].s);var _=new ke(v+1),k=Ts(s[p-1],_,0);if(k>e){var n=0,b=0,h=k-e,l=1<<h;for(r.sort(function(m,S){return _[S.s]-_[m.s]||m.f-S.f});n<i;++n){var a=r[n].s;if(_[a]>e)b+=l-(1<<k-_[a]),_[a]=e;else break}for(b>>=h;b>0;){var c=r[n].s;_[c]<e?b-=1<<e-_[c]++-1:++n}for(;n>=0&&b;--n){var y=r[n].s;_[y]==e&&(--_[y],++b)}k=e}return{t:new fe(_),l:k}},Ts=function(t,e,s){return t.s==-1?Math.max(Ts(t.l,e,s+1),Ts(t.r,e,s+1)):e[t.s]=s},Vs=function(t){for(var e=t.length;e&&!t[--e];);for(var s=new ke(++e),n=0,i=t[0],r=1,o=function(f){s[n++]=f},d=1;d<=e;++d)if(t[d]==i&&d!=e)++r;else{if(!i&&r>2){for(;r>138;r-=138)o(32754);r>2&&(o(r>10?r-11<<5|28690:r-3<<5|12305),r=0)}else if(r>3){for(o(i),--r;r>6;r-=6)o(8304);r>2&&(o(r-3<<5|8208),r=0)}for(;r--;)o(i);r=1,i=t[d]}return{c:s.subarray(0,n),n:e}},tt=function(t,e){for(var s=0,n=0;n<e.length;++n)s+=t[n]*e[n];return s},Zi=function(t,e,s){var n=s.length,i=Rs(e+2);t[i]=n&255,t[i+1]=n>>8,t[i+2]=t[i]^255,t[i+3]=t[i+1]^255;for(var r=0;r<n;++r)t[i+r+4]=s[r];return(i+4+n)*8},Zs=function(t,e,s,n,i,r,o,d,f,w,p){Ne(e,p++,s),++i[256];for(var $=hs(i,15),v=$.t,_=$.l,k=hs(r,15),b=k.t,h=k.l,l=Vs(v),a=l.c,c=l.n,y=Vs(b),u=y.c,m=y.n,S=new ke(19),I=0;I<a.length;++I)++S[a[I]&31];for(var I=0;I<u.length;++I)++S[u[I]&31];for(var x=hs(S,7),j=x.t,L=x.l,U=19;U>4&&!j[Ps[U-1]];--U);var G=w+5<<3,Z=tt(i,qe)+tt(r,lt)+o,ee=tt(i,v)+tt(r,b)+o+14+3*U+tt(S,j)+2*S[16]+3*S[17]+7*S[18];if(f>=0&&G<=Z&&G<=ee)return Zi(e,p,t.subarray(f,f+w));var re,te,K,oe;if(Ne(e,p,1+(ee<Z)),p+=2,ee<Z){re=Oe(v,_,0),te=v,K=Oe(b,h,0),oe=b;var A=Oe(j,L,0);Ne(e,p,c-257),Ne(e,p+5,m-1),Ne(e,p+10,U-4),p+=14;for(var I=0;I<U;++I)Ne(e,p+3*I,j[Ps[I]]);p+=3*U;for(var T=[a,u],D=0;D<2;++D)for(var N=T[D],I=0;I<N.length;++I){var g=N[I]&31;Ne(e,p,A[g]),p+=j[g],g>15&&(Ne(e,p,N[I]>>5&127),p+=N[I]>>12)}}else re=Gr,te=qe,K=Zr,oe=lt;for(var I=0;I<d;++I){var P=n[I];if(P>255){var g=P>>18&31;et(e,p,re[g+257]),p+=te[g+257],g>7&&(Ne(e,p,P>>23&31),p+=Qt[g]);var R=P&31;et(e,p,K[R]),p+=oe[R],R>3&&(et(e,p,P>>5&8191),p+=es[R])}else et(e,p,re[P]),p+=te[P]}return et(e,p,re[256]),p+te[256]},Xr=new xs([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),Ki=new fe(0),Yr=function(t,e,s,n,i,r){var o=r.z||t.length,d=new fe(n+o+5*(1+Math.ceil(o/7e3))+i),f=d.subarray(n,d.length-i),w=r.l,p=(r.r||0)&7;if(e){p&&(f[0]=r.r>>3);for(var $=Xr[e-1],v=$>>13,_=$&8191,k=(1<<s)-1,b=r.p||new ke(32768),h=r.h||new ke(k+1),l=Math.ceil(s/3),a=2*l,c=function(q){return(t[q]^t[q+1]<<l^t[q+2]<<a)&k},y=new xs(25e3),u=new ke(288),m=new ke(32),S=0,I=0,x=r.i||0,j=0,L=r.w||0,U=0;x+2<o;++x){var G=c(x),Z=x&32767,ee=h[G];if(b[Z]=ee,h[G]=Z,L<=x){var re=o-x;if((S>7e3||j>24576)&&(re>423||!w)){p=Zs(t,f,0,y,u,m,I,j,U,x-U,p),j=S=I=0,U=x;for(var te=0;te<286;++te)u[te]=0;for(var te=0;te<30;++te)m[te]=0}var K=2,oe=0,A=_,T=Z-ee&32767;if(re>2&&G==c(x-T))for(var D=Math.min(v,re)-1,N=Math.min(32767,x),g=Math.min(258,re);T<=N&&--A&&Z!=ee;){if(t[x+K]==t[x+K-T]){for(var P=0;P<g&&t[x+P]==t[x+P-T];++P);if(P>K){if(K=P,oe=T,P>D)break;for(var R=Math.min(T,P-2),F=0,te=0;te<R;++te){var B=x-T+te&32767,Q=b[B],W=B-Q&32767;W>F&&(F=W,ee=B)}}}Z=ee,ee=b[Z],T+=Z-ee&32767}if(oe){y[j++]=268435456|Es[K]<<18|Gs[oe];var E=Es[K]&31,C=Gs[oe]&31;I+=Qt[E]+es[C],++u[257+E],++m[C],L=x+K,++S}else y[j++]=t[x],++u[t[x]]}}for(x=Math.max(x,L);x<o;++x)y[j++]=t[x],++u[t[x]];p=Zs(t,f,w,y,u,m,I,j,U,x-U,p),w||(r.r=p&7|f[p/8|0]<<3,p-=7,r.h=h,r.p=b,r.i=x,r.w=L)}else{for(var x=r.w||0;x<o+w;x+=65535){var M=x+65535;M>=o&&(f[p/8|0]=w,M=o),p=Zi(f,p+1,t.subarray(x,M))}r.i=o}return Vi(d,0,n+Rs(p)+i)},Qr=function(){for(var t=new Int32Array(256),e=0;e<256;++e){for(var s=e,n=9;--n;)s=(s&1&&-306674912)^s>>>1;t[e]=s}return t}(),eo=function(){var t=-1;return{p:function(e){for(var s=t,n=0;n<e.length;++n)s=Qr[s&255^e[n]]^s>>>8;t=s},d:function(){return~t}}},to=function(t,e,s,n,i){if(!i&&(i={l:1},e.dictionary)){var r=e.dictionary.subarray(-32768),o=new fe(r.length+t.length);o.set(r),o.set(t,r.length),t=o,i.w=r.length}return Yr(t,e.level==null?6:e.level,e.mem==null?i.l?Math.ceil(Math.max(8,Math.min(13,Math.log(t.length)))*1.5):20:12+e.mem,s,n,i)},Os=function(t,e,s){for(;s;++e)t[e]=s,s>>>=8},so=function(t,e){var s=e.filename;if(t[0]=31,t[1]=139,t[2]=8,t[8]=e.level<2?4:e.level==9?2:0,t[9]=3,e.mtime!=0&&Os(t,4,Math.floor(new Date(e.mtime||Date.now())/1e3)),s){t[3]=8;for(var n=0;n<=s.length;++n)t[n+10]=s.charCodeAt(n)}},no=function(t){(t[0]!=31||t[1]!=139||t[2]!=8)&&Ee(6,"invalid gzip data");var e=t[3],s=10;e&4&&(s+=(t[10]|t[11]<<8)+2);for(var n=(e>>3&1)+(e>>4&1);n>0;n-=!t[s++]);return s+(e&2)},io=function(t){var e=t.length;return(t[e-4]|t[e-3]<<8|t[e-2]<<16|t[e-1]<<24)>>>0},ro=function(t){return 10+(t.filename?t.filename.length+1:0)};function oo(t,e){e||(e={});var s=eo(),n=t.length;s.p(t);var i=to(t,e,ro(e),8),r=i.length;return so(i,e),Os(i,r-8,s.d()),Os(i,r-4,n),i}function ao(t,e){var s=no(t);return s+8>t.length&&Ee(6,"invalid gzip data"),Jr(t.subarray(s,-8),{i:2},new fe(io(t)),e)}var lo=typeof TextDecoder<"u"&&new TextDecoder,co=0;try{lo.decode(Ki,{stream:!0}),co=1}catch{}var ht={exports:{}},fs={},Ce={},Ue={},ps={},ms={},ys={},Ks;function Xt(){return Ks||(Ks=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.regexpCode=t.getEsmExportName=t.getProperty=t.safeStringify=t.stringify=t.strConcat=t.addCodeArg=t.str=t._=t.nil=t._Code=t.Name=t.IDENTIFIER=t._CodeOrName=void 0;class e{}t._CodeOrName=e,t.IDENTIFIER=/^[a-z$_][a-z$_0-9]*$/i;class s extends e{constructor(a){if(super(),!t.IDENTIFIER.test(a))throw new Error("CodeGen: name must be a valid identifier");this.str=a}toString(){return this.str}emptyStr(){return!1}get names(){return{[this.str]:1}}}t.Name=s;class n extends e{constructor(a){super(),this._items=typeof a=="string"?[a]:a}toString(){return this.str}emptyStr(){if(this._items.length>1)return!1;const a=this._items[0];return a===""||a==='""'}get str(){var a;return(a=this._str)!==null&&a!==void 0?a:this._str=this._items.reduce((c,y)=>`${c}${y}`,"")}get names(){var a;return(a=this._names)!==null&&a!==void 0?a:this._names=this._items.reduce((c,y)=>(y instanceof s&&(c[y.str]=(c[y.str]||0)+1),c),{})}}t._Code=n,t.nil=new n("");function i(l,...a){const c=[l[0]];let y=0;for(;y<a.length;)d(c,a[y]),c.push(l[++y]);return new n(c)}t._=i;const r=new n("+");function o(l,...a){const c=[_(l[0])];let y=0;for(;y<a.length;)c.push(r),d(c,a[y]),c.push(r,_(l[++y]));return f(c),new n(c)}t.str=o;function d(l,a){a instanceof n?l.push(...a._items):a instanceof s?l.push(a):l.push($(a))}t.addCodeArg=d;function f(l){let a=1;for(;a<l.length-1;){if(l[a]===r){const c=w(l[a-1],l[a+1]);if(c!==void 0){l.splice(a-1,3,c);continue}l[a++]="+"}a++}}function w(l,a){if(a==='""')return l;if(l==='""')return a;if(typeof l=="string")return a instanceof s||l[l.length-1]!=='"'?void 0:typeof a!="string"?`${l.slice(0,-1)}${a}"`:a[0]==='"'?l.slice(0,-1)+a.slice(1):void 0;if(typeof a=="string"&&a[0]==='"'&&!(l instanceof s))return`"${l}${a.slice(1)}`}function p(l,a){return a.emptyStr()?l:l.emptyStr()?a:o`${l}${a}`}t.strConcat=p;function $(l){return typeof l=="number"||typeof l=="boolean"||l===null?l:_(Array.isArray(l)?l.join(","):l)}function v(l){return new n(_(l))}t.stringify=v;function _(l){return JSON.stringify(l).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}t.safeStringify=_;function k(l){return typeof l=="string"&&t.IDENTIFIER.test(l)?new n(`.${l}`):i`[${l}]`}t.getProperty=k;function b(l){if(typeof l=="string"&&t.IDENTIFIER.test(l))return new n(`${l}`);throw new Error(`CodeGen: invalid export name: ${l}, use explicit $id name mapping`)}t.getEsmExportName=b;function h(l){return new n(l.toString())}t.regexpCode=h}(ys)),ys}var gs={},Ws;function Js(){return Ws||(Ws=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.ValueScope=t.ValueScopeName=t.Scope=t.varKinds=t.UsedValueState=void 0;const e=Xt();class s extends Error{constructor(w){super(`CodeGen: "code" for ${w} not defined`),this.value=w.value}}var n;(function(f){f[f.Started=0]="Started",f[f.Completed=1]="Completed"})(n||(t.UsedValueState=n={})),t.varKinds={const:new e.Name("const"),let:new e.Name("let"),var:new e.Name("var")};class i{constructor({prefixes:w,parent:p}={}){this._names={},this._prefixes=w,this._parent=p}toName(w){return w instanceof e.Name?w:this.name(w)}name(w){return new e.Name(this._newName(w))}_newName(w){const p=this._names[w]||this._nameGroup(w);return`${w}${p.index++}`}_nameGroup(w){var p,$;if(!(($=(p=this._parent)===null||p===void 0?void 0:p._prefixes)===null||$===void 0)&&$.has(w)||this._prefixes&&!this._prefixes.has(w))throw new Error(`CodeGen: prefix "${w}" is not allowed in this scope`);return this._names[w]={prefix:w,index:0}}}t.Scope=i;class r extends e.Name{constructor(w,p){super(p),this.prefix=w}setValue(w,{property:p,itemIndex:$}){this.value=w,this.scopePath=(0,e._)`.${new e.Name(p)}[${$}]`}}t.ValueScopeName=r;const o=(0,e._)`\n`;class d extends i{constructor(w){super(w),this._values={},this._scope=w.scope,this.opts={...w,_n:w.lines?o:e.nil}}get(){return this._scope}name(w){return new r(w,this._newName(w))}value(w,p){var $;if(p.ref===void 0)throw new Error("CodeGen: ref must be passed in value");const v=this.toName(w),{prefix:_}=v,k=($=p.key)!==null&&$!==void 0?$:p.ref;let b=this._values[_];if(b){const a=b.get(k);if(a)return a}else b=this._values[_]=new Map;b.set(k,v);const h=this._scope[_]||(this._scope[_]=[]),l=h.length;return h[l]=p.ref,v.setValue(p,{property:_,itemIndex:l}),v}getValue(w,p){const $=this._values[w];if($)return $.get(p)}scopeRefs(w,p=this._values){return this._reduceValues(p,$=>{if($.scopePath===void 0)throw new Error(`CodeGen: name "${$}" has no value`);return(0,e._)`${w}${$.scopePath}`})}scopeCode(w=this._values,p,$){return this._reduceValues(w,v=>{if(v.value===void 0)throw new Error(`CodeGen: name "${v}" has no value`);return v.value.code},p,$)}_reduceValues(w,p,$={},v){let _=e.nil;for(const k in w){const b=w[k];if(!b)continue;const h=$[k]=$[k]||new Map;b.forEach(l=>{if(h.has(l))return;h.set(l,n.Started);let a=p(l);if(a){const c=this.opts.es5?t.varKinds.var:t.varKinds.const;_=(0,e._)`${_}${c} ${l} = ${a};${this.opts._n}`}else if(a=v?.(l))_=(0,e._)`${_}${a}${this.opts._n}`;else throw new s(l);h.set(l,n.Completed)})}return _}}t.ValueScope=d}(gs)),gs}var Xs;function Y(){return Xs||(Xs=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.or=t.and=t.not=t.CodeGen=t.operators=t.varKinds=t.ValueScopeName=t.ValueScope=t.Scope=t.Name=t.regexpCode=t.stringify=t.getProperty=t.nil=t.strConcat=t.str=t._=void 0;const e=Xt(),s=Js();var n=Xt();Object.defineProperty(t,"_",{enumerable:!0,get:function(){return n._}}),Object.defineProperty(t,"str",{enumerable:!0,get:function(){return n.str}}),Object.defineProperty(t,"strConcat",{enumerable:!0,get:function(){return n.strConcat}}),Object.defineProperty(t,"nil",{enumerable:!0,get:function(){return n.nil}}),Object.defineProperty(t,"getProperty",{enumerable:!0,get:function(){return n.getProperty}}),Object.defineProperty(t,"stringify",{enumerable:!0,get:function(){return n.stringify}}),Object.defineProperty(t,"regexpCode",{enumerable:!0,get:function(){return n.regexpCode}}),Object.defineProperty(t,"Name",{enumerable:!0,get:function(){return n.Name}});var i=Js();Object.defineProperty(t,"Scope",{enumerable:!0,get:function(){return i.Scope}}),Object.defineProperty(t,"ValueScope",{enumerable:!0,get:function(){return i.ValueScope}}),Object.defineProperty(t,"ValueScopeName",{enumerable:!0,get:function(){return i.ValueScopeName}}),Object.defineProperty(t,"varKinds",{enumerable:!0,get:function(){return i.varKinds}}),t.operators={GT:new e._Code(">"),GTE:new e._Code(">="),LT:new e._Code("<"),LTE:new e._Code("<="),EQ:new e._Code("==="),NEQ:new e._Code("!=="),NOT:new e._Code("!"),OR:new e._Code("||"),AND:new e._Code("&&"),ADD:new e._Code("+")};class r{optimizeNodes(){return this}optimizeNames(g,P){return this}}class o extends r{constructor(g,P,R){super(),this.varKind=g,this.name=P,this.rhs=R}render({es5:g,_n:P}){const R=g?s.varKinds.var:this.varKind,F=this.rhs===void 0?"":` = ${this.rhs}`;return`${R} ${this.name}${F};`+P}optimizeNames(g,P){if(g[this.name.str])return this.rhs&&(this.rhs=Z(this.rhs,g,P)),this}get names(){return this.rhs instanceof e._CodeOrName?this.rhs.names:{}}}class d extends r{constructor(g,P,R){super(),this.lhs=g,this.rhs=P,this.sideEffects=R}render({_n:g}){return`${this.lhs} = ${this.rhs};`+g}optimizeNames(g,P){if(!(this.lhs instanceof e.Name&&!g[this.lhs.str]&&!this.sideEffects))return this.rhs=Z(this.rhs,g,P),this}get names(){const g=this.lhs instanceof e.Name?{}:{...this.lhs.names};return G(g,this.rhs)}}class f extends d{constructor(g,P,R,F){super(g,R,F),this.op=P}render({_n:g}){return`${this.lhs} ${this.op}= ${this.rhs};`+g}}class w extends r{constructor(g){super(),this.label=g,this.names={}}render({_n:g}){return`${this.label}:`+g}}class p extends r{constructor(g){super(),this.label=g,this.names={}}render({_n:g}){return`break${this.label?` ${this.label}`:""};`+g}}class $ extends r{constructor(g){super(),this.error=g}render({_n:g}){return`throw ${this.error};`+g}get names(){return this.error.names}}class v extends r{constructor(g){super(),this.code=g}render({_n:g}){return`${this.code};`+g}optimizeNodes(){return`${this.code}`?this:void 0}optimizeNames(g,P){return this.code=Z(this.code,g,P),this}get names(){return this.code instanceof e._CodeOrName?this.code.names:{}}}class _ extends r{constructor(g=[]){super(),this.nodes=g}render(g){return this.nodes.reduce((P,R)=>P+R.render(g),"")}optimizeNodes(){const{nodes:g}=this;let P=g.length;for(;P--;){const R=g[P].optimizeNodes();Array.isArray(R)?g.splice(P,1,...R):R?g[P]=R:g.splice(P,1)}return g.length>0?this:void 0}optimizeNames(g,P){const{nodes:R}=this;let F=R.length;for(;F--;){const B=R[F];B.optimizeNames(g,P)||(ee(g,B.names),R.splice(F,1))}return R.length>0?this:void 0}get names(){return this.nodes.reduce((g,P)=>U(g,P.names),{})}}class k extends _{render(g){return"{"+g._n+super.render(g)+"}"+g._n}}class b extends _{}class h extends k{}h.kind="else";class l extends k{constructor(g,P){super(P),this.condition=g}render(g){let P=`if(${this.condition})`+super.render(g);return this.else&&(P+="else "+this.else.render(g)),P}optimizeNodes(){super.optimizeNodes();const g=this.condition;if(g===!0)return this.nodes;let P=this.else;if(P){const R=P.optimizeNodes();P=this.else=Array.isArray(R)?new h(R):R}if(P)return g===!1?P instanceof l?P:P.nodes:this.nodes.length?this:new l(re(g),P instanceof l?[P]:P.nodes);if(!(g===!1||!this.nodes.length))return this}optimizeNames(g,P){var R;if(this.else=(R=this.else)===null||R===void 0?void 0:R.optimizeNames(g,P),!!(super.optimizeNames(g,P)||this.else))return this.condition=Z(this.condition,g,P),this}get names(){const g=super.names;return G(g,this.condition),this.else&&U(g,this.else.names),g}}l.kind="if";class a extends k{}a.kind="for";class c extends a{constructor(g){super(),this.iteration=g}render(g){return`for(${this.iteration})`+super.render(g)}optimizeNames(g,P){if(super.optimizeNames(g,P))return this.iteration=Z(this.iteration,g,P),this}get names(){return U(super.names,this.iteration.names)}}class y extends a{constructor(g,P,R,F){super(),this.varKind=g,this.name=P,this.from=R,this.to=F}render(g){const P=g.es5?s.varKinds.var:this.varKind,{name:R,from:F,to:B}=this;return`for(${P} ${R}=${F}; ${R}<${B}; ${R}++)`+super.render(g)}get names(){const g=G(super.names,this.from);return G(g,this.to)}}class u extends a{constructor(g,P,R,F){super(),this.loop=g,this.varKind=P,this.name=R,this.iterable=F}render(g){return`for(${this.varKind} ${this.name} ${this.loop} ${this.iterable})`+super.render(g)}optimizeNames(g,P){if(super.optimizeNames(g,P))return this.iterable=Z(this.iterable,g,P),this}get names(){return U(super.names,this.iterable.names)}}class m extends k{constructor(g,P,R){super(),this.name=g,this.args=P,this.async=R}render(g){return`${this.async?"async ":""}function ${this.name}(${this.args})`+super.render(g)}}m.kind="func";class S extends _{render(g){return"return "+super.render(g)}}S.kind="return";class I extends k{render(g){let P="try"+super.render(g);return this.catch&&(P+=this.catch.render(g)),this.finally&&(P+=this.finally.render(g)),P}optimizeNodes(){var g,P;return super.optimizeNodes(),(g=this.catch)===null||g===void 0||g.optimizeNodes(),(P=this.finally)===null||P===void 0||P.optimizeNodes(),this}optimizeNames(g,P){var R,F;return super.optimizeNames(g,P),(R=this.catch)===null||R===void 0||R.optimizeNames(g,P),(F=this.finally)===null||F===void 0||F.optimizeNames(g,P),this}get names(){const g=super.names;return this.catch&&U(g,this.catch.names),this.finally&&U(g,this.finally.names),g}}class x extends k{constructor(g){super(),this.error=g}render(g){return`catch(${this.error})`+super.render(g)}}x.kind="catch";class j extends k{render(g){return"finally"+super.render(g)}}j.kind="finally";class L{constructor(g,P={}){this._values={},this._blockStarts=[],this._constants={},this.opts={...P,_n:P.lines?`
`:""},this._extScope=g,this._scope=new s.Scope({parent:g}),this._nodes=[new b]}toString(){return this._root.render(this.opts)}name(g){return this._scope.name(g)}scopeName(g){return this._extScope.name(g)}scopeValue(g,P){const R=this._extScope.value(g,P);return(this._values[R.prefix]||(this._values[R.prefix]=new Set)).add(R),R}getScopeValue(g,P){return this._extScope.getValue(g,P)}scopeRefs(g){return this._extScope.scopeRefs(g,this._values)}scopeCode(){return this._extScope.scopeCode(this._values)}_def(g,P,R,F){const B=this._scope.toName(P);return R!==void 0&&F&&(this._constants[B.str]=R),this._leafNode(new o(g,B,R)),B}const(g,P,R){return this._def(s.varKinds.const,g,P,R)}let(g,P,R){return this._def(s.varKinds.let,g,P,R)}var(g,P,R){return this._def(s.varKinds.var,g,P,R)}assign(g,P,R){return this._leafNode(new d(g,P,R))}add(g,P){return this._leafNode(new f(g,t.operators.ADD,P))}code(g){return typeof g=="function"?g():g!==e.nil&&this._leafNode(new v(g)),this}object(...g){const P=["{"];for(const[R,F]of g)P.length>1&&P.push(","),P.push(R),(R!==F||this.opts.es5)&&(P.push(":"),(0,e.addCodeArg)(P,F));return P.push("}"),new e._Code(P)}if(g,P,R){if(this._blockNode(new l(g)),P&&R)this.code(P).else().code(R).endIf();else if(P)this.code(P).endIf();else if(R)throw new Error('CodeGen: "else" body without "then" body');return this}elseIf(g){return this._elseNode(new l(g))}else(){return this._elseNode(new h)}endIf(){return this._endBlockNode(l,h)}_for(g,P){return this._blockNode(g),P&&this.code(P).endFor(),this}for(g,P){return this._for(new c(g),P)}forRange(g,P,R,F,B=this.opts.es5?s.varKinds.var:s.varKinds.let){const Q=this._scope.toName(g);return this._for(new y(B,Q,P,R),()=>F(Q))}forOf(g,P,R,F=s.varKinds.const){const B=this._scope.toName(g);if(this.opts.es5){const Q=P instanceof e.Name?P:this.var("_arr",P);return this.forRange("_i",0,(0,e._)`${Q}.length`,W=>{this.var(B,(0,e._)`${Q}[${W}]`),R(B)})}return this._for(new u("of",F,B,P),()=>R(B))}forIn(g,P,R,F=this.opts.es5?s.varKinds.var:s.varKinds.const){if(this.opts.ownProperties)return this.forOf(g,(0,e._)`Object.keys(${P})`,R);const B=this._scope.toName(g);return this._for(new u("in",F,B,P),()=>R(B))}endFor(){return this._endBlockNode(a)}label(g){return this._leafNode(new w(g))}break(g){return this._leafNode(new p(g))}return(g){const P=new S;if(this._blockNode(P),this.code(g),P.nodes.length!==1)throw new Error('CodeGen: "return" should have one node');return this._endBlockNode(S)}try(g,P,R){if(!P&&!R)throw new Error('CodeGen: "try" without "catch" and "finally"');const F=new I;if(this._blockNode(F),this.code(g),P){const B=this.name("e");this._currNode=F.catch=new x(B),P(B)}return R&&(this._currNode=F.finally=new j,this.code(R)),this._endBlockNode(x,j)}throw(g){return this._leafNode(new $(g))}block(g,P){return this._blockStarts.push(this._nodes.length),g&&this.code(g).endBlock(P),this}endBlock(g){const P=this._blockStarts.pop();if(P===void 0)throw new Error("CodeGen: not in self-balancing block");const R=this._nodes.length-P;if(R<0||g!==void 0&&R!==g)throw new Error(`CodeGen: wrong number of nodes: ${R} vs ${g} expected`);return this._nodes.length=P,this}func(g,P=e.nil,R,F){return this._blockNode(new m(g,P,R)),F&&this.code(F).endFunc(),this}endFunc(){return this._endBlockNode(m)}optimize(g=1){for(;g-- >0;)this._root.optimizeNodes(),this._root.optimizeNames(this._root.names,this._constants)}_leafNode(g){return this._currNode.nodes.push(g),this}_blockNode(g){this._currNode.nodes.push(g),this._nodes.push(g)}_endBlockNode(g,P){const R=this._currNode;if(R instanceof g||P&&R instanceof P)return this._nodes.pop(),this;throw new Error(`CodeGen: not in block "${P?`${g.kind}/${P.kind}`:g.kind}"`)}_elseNode(g){const P=this._currNode;if(!(P instanceof l))throw new Error('CodeGen: "else" without "if"');return this._currNode=P.else=g,this}get _root(){return this._nodes[0]}get _currNode(){const g=this._nodes;return g[g.length-1]}set _currNode(g){const P=this._nodes;P[P.length-1]=g}}t.CodeGen=L;function U(N,g){for(const P in g)N[P]=(N[P]||0)+(g[P]||0);return N}function G(N,g){return g instanceof e._CodeOrName?U(N,g.names):N}function Z(N,g,P){if(N instanceof e.Name)return R(N);if(!F(N))return N;return new e._Code(N._items.reduce((B,Q)=>(Q instanceof e.Name&&(Q=R(Q)),Q instanceof e._Code?B.push(...Q._items):B.push(Q),B),[]));function R(B){const Q=P[B.str];return Q===void 0||g[B.str]!==1?B:(delete g[B.str],Q)}function F(B){return B instanceof e._Code&&B._items.some(Q=>Q instanceof e.Name&&g[Q.str]===1&&P[Q.str]!==void 0)}}function ee(N,g){for(const P in g)N[P]=(N[P]||0)-(g[P]||0)}function re(N){return typeof N=="boolean"||typeof N=="number"||N===null?!N:(0,e._)`!${D(N)}`}t.not=re;const te=T(t.operators.AND);function K(...N){return N.reduce(te)}t.and=K;const oe=T(t.operators.OR);function A(...N){return N.reduce(oe)}t.or=A;function T(N){return(g,P)=>g===e.nil?P:P===e.nil?g:(0,e._)`${D(g)} ${N} ${D(P)}`}function D(N){return N instanceof e.Name?N:(0,e._)`(${N})`}}(ms)),ms}var J={},Ys;function se(){if(Ys)return J;Ys=1,Object.defineProperty(J,"__esModule",{value:!0}),J.checkStrictMode=J.getErrorPath=J.Type=J.useFunc=J.setEvaluated=J.evaluatedPropsToName=J.mergeEvaluated=J.eachItem=J.unescapeJsonPointer=J.escapeJsonPointer=J.escapeFragment=J.unescapeFragment=J.schemaRefOrVal=J.schemaHasRulesButRef=J.schemaHasRules=J.checkUnknownRules=J.alwaysValidSchema=J.toHash=void 0;const t=Y(),e=Xt();function s(u){const m={};for(const S of u)m[S]=!0;return m}J.toHash=s;function n(u,m){return typeof m=="boolean"?m:Object.keys(m).length===0?!0:(i(u,m),!r(m,u.self.RULES.all))}J.alwaysValidSchema=n;function i(u,m=u.schema){const{opts:S,self:I}=u;if(!S.strictSchema||typeof m=="boolean")return;const x=I.RULES.keywords;for(const j in m)x[j]||y(u,`unknown keyword: "${j}"`)}J.checkUnknownRules=i;function r(u,m){if(typeof u=="boolean")return!u;for(const S in u)if(m[S])return!0;return!1}J.schemaHasRules=r;function o(u,m){if(typeof u=="boolean")return!u;for(const S in u)if(S!=="$ref"&&m.all[S])return!0;return!1}J.schemaHasRulesButRef=o;function d({topSchemaRef:u,schemaPath:m},S,I,x){if(!x){if(typeof S=="number"||typeof S=="boolean")return S;if(typeof S=="string")return(0,t._)`${S}`}return(0,t._)`${u}${m}${(0,t.getProperty)(I)}`}J.schemaRefOrVal=d;function f(u){return $(decodeURIComponent(u))}J.unescapeFragment=f;function w(u){return encodeURIComponent(p(u))}J.escapeFragment=w;function p(u){return typeof u=="number"?`${u}`:u.replace(/~/g,"~0").replace(/\//g,"~1")}J.escapeJsonPointer=p;function $(u){return u.replace(/~1/g,"/").replace(/~0/g,"~")}J.unescapeJsonPointer=$;function v(u,m){if(Array.isArray(u))for(const S of u)m(S);else m(u)}J.eachItem=v;function _({mergeNames:u,mergeToName:m,mergeValues:S,resultToName:I}){return(x,j,L,U)=>{const G=L===void 0?j:L instanceof t.Name?(j instanceof t.Name?u(x,j,L):m(x,j,L),L):j instanceof t.Name?(m(x,L,j),j):S(j,L);return U===t.Name&&!(G instanceof t.Name)?I(x,G):G}}J.mergeEvaluated={props:_({mergeNames:(u,m,S)=>u.if((0,t._)`${S} !== true && ${m} !== undefined`,()=>{u.if((0,t._)`${m} === true`,()=>u.assign(S,!0),()=>u.assign(S,(0,t._)`${S} || {}`).code((0,t._)`Object.assign(${S}, ${m})`))}),mergeToName:(u,m,S)=>u.if((0,t._)`${S} !== true`,()=>{m===!0?u.assign(S,!0):(u.assign(S,(0,t._)`${S} || {}`),b(u,S,m))}),mergeValues:(u,m)=>u===!0?!0:{...u,...m},resultToName:k}),items:_({mergeNames:(u,m,S)=>u.if((0,t._)`${S} !== true && ${m} !== undefined`,()=>u.assign(S,(0,t._)`${m} === true ? true : ${S} > ${m} ? ${S} : ${m}`)),mergeToName:(u,m,S)=>u.if((0,t._)`${S} !== true`,()=>u.assign(S,m===!0?!0:(0,t._)`${S} > ${m} ? ${S} : ${m}`)),mergeValues:(u,m)=>u===!0?!0:Math.max(u,m),resultToName:(u,m)=>u.var("items",m)})};function k(u,m){if(m===!0)return u.var("props",!0);const S=u.var("props",(0,t._)`{}`);return m!==void 0&&b(u,S,m),S}J.evaluatedPropsToName=k;function b(u,m,S){Object.keys(S).forEach(I=>u.assign((0,t._)`${m}${(0,t.getProperty)(I)}`,!0))}J.setEvaluated=b;const h={};function l(u,m){return u.scopeValue("func",{ref:m,code:h[m.code]||(h[m.code]=new e._Code(m.code))})}J.useFunc=l;var a;(function(u){u[u.Num=0]="Num",u[u.Str=1]="Str"})(a||(J.Type=a={}));function c(u,m,S){if(u instanceof t.Name){const I=m===a.Num;return S?I?(0,t._)`"[" + ${u} + "]"`:(0,t._)`"['" + ${u} + "']"`:I?(0,t._)`"/" + ${u}`:(0,t._)`"/" + ${u}.replace(/~/g, "~0").replace(/\\//g, "~1")`}return S?(0,t.getProperty)(u).toString():"/"+p(u)}J.getErrorPath=c;function y(u,m,S=u.opts.strictSchema){if(S){if(m=`strict mode: ${m}`,S===!0)throw new Error(m);u.self.logger.warn(m)}}return J.checkStrictMode=y,J}var ft={},Qs;function ze(){if(Qs)return ft;Qs=1,Object.defineProperty(ft,"__esModule",{value:!0});const t=Y(),e={data:new t.Name("data"),valCxt:new t.Name("valCxt"),instancePath:new t.Name("instancePath"),parentData:new t.Name("parentData"),parentDataProperty:new t.Name("parentDataProperty"),rootData:new t.Name("rootData"),dynamicAnchors:new t.Name("dynamicAnchors"),vErrors:new t.Name("vErrors"),errors:new t.Name("errors"),this:new t.Name("this"),self:new t.Name("self"),scope:new t.Name("scope"),json:new t.Name("json"),jsonPos:new t.Name("jsonPos"),jsonLen:new t.Name("jsonLen"),jsonPart:new t.Name("jsonPart")};return ft.default=e,ft}var en;function ts(){return en||(en=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.extendErrors=t.resetErrorsCount=t.reportExtraError=t.reportError=t.keyword$DataError=t.keywordError=void 0;const e=Y(),s=se(),n=ze();t.keywordError={message:({keyword:h})=>(0,e.str)`must pass "${h}" keyword validation`},t.keyword$DataError={message:({keyword:h,schemaType:l})=>l?(0,e.str)`"${h}" keyword must be ${l} ($data)`:(0,e.str)`"${h}" keyword is invalid ($data)`};function i(h,l=t.keywordError,a,c){const{it:y}=h,{gen:u,compositeRule:m,allErrors:S}=y,I=$(h,l,a);c??(m||S)?f(u,I):w(y,(0,e._)`[${I}]`)}t.reportError=i;function r(h,l=t.keywordError,a){const{it:c}=h,{gen:y,compositeRule:u,allErrors:m}=c,S=$(h,l,a);f(y,S),u||m||w(c,n.default.vErrors)}t.reportExtraError=r;function o(h,l){h.assign(n.default.errors,l),h.if((0,e._)`${n.default.vErrors} !== null`,()=>h.if(l,()=>h.assign((0,e._)`${n.default.vErrors}.length`,l),()=>h.assign(n.default.vErrors,null)))}t.resetErrorsCount=o;function d({gen:h,keyword:l,schemaValue:a,data:c,errsCount:y,it:u}){if(y===void 0)throw new Error("ajv implementation error");const m=h.name("err");h.forRange("i",y,n.default.errors,S=>{h.const(m,(0,e._)`${n.default.vErrors}[${S}]`),h.if((0,e._)`${m}.instancePath === undefined`,()=>h.assign((0,e._)`${m}.instancePath`,(0,e.strConcat)(n.default.instancePath,u.errorPath))),h.assign((0,e._)`${m}.schemaPath`,(0,e.str)`${u.errSchemaPath}/${l}`),u.opts.verbose&&(h.assign((0,e._)`${m}.schema`,a),h.assign((0,e._)`${m}.data`,c))})}t.extendErrors=d;function f(h,l){const a=h.const("err",l);h.if((0,e._)`${n.default.vErrors} === null`,()=>h.assign(n.default.vErrors,(0,e._)`[${a}]`),(0,e._)`${n.default.vErrors}.push(${a})`),h.code((0,e._)`${n.default.errors}++`)}function w(h,l){const{gen:a,validateName:c,schemaEnv:y}=h;y.$async?a.throw((0,e._)`new ${h.ValidationError}(${l})`):(a.assign((0,e._)`${c}.errors`,l),a.return(!1))}const p={keyword:new e.Name("keyword"),schemaPath:new e.Name("schemaPath"),params:new e.Name("params"),propertyName:new e.Name("propertyName"),message:new e.Name("message"),schema:new e.Name("schema"),parentSchema:new e.Name("parentSchema")};function $(h,l,a){const{createErrors:c}=h.it;return c===!1?(0,e._)`{}`:v(h,l,a)}function v(h,l,a={}){const{gen:c,it:y}=h,u=[_(y,a),k(h,a)];return b(h,l,u),c.object(...u)}function _({errorPath:h},{instancePath:l}){const a=l?(0,e.str)`${h}${(0,s.getErrorPath)(l,s.Type.Str)}`:h;return[n.default.instancePath,(0,e.strConcat)(n.default.instancePath,a)]}function k({keyword:h,it:{errSchemaPath:l}},{schemaPath:a,parentSchema:c}){let y=c?l:(0,e.str)`${l}/${h}`;return a&&(y=(0,e.str)`${y}${(0,s.getErrorPath)(a,s.Type.Str)}`),[p.schemaPath,y]}function b(h,{params:l,message:a},c){const{keyword:y,data:u,schemaValue:m,it:S}=h,{opts:I,propertyName:x,topSchemaRef:j,schemaPath:L}=S;c.push([p.keyword,y],[p.params,typeof l=="function"?l(h):l||(0,e._)`{}`]),I.messages&&c.push([p.message,typeof a=="function"?a(h):a]),I.verbose&&c.push([p.schema,m],[p.parentSchema,(0,e._)`${j}${L}`],[n.default.data,u]),x&&c.push([p.propertyName,x])}}(ps)),ps}var tn;function uo(){if(tn)return Ue;tn=1,Object.defineProperty(Ue,"__esModule",{value:!0}),Ue.boolOrEmptySchema=Ue.topBoolOrEmptySchema=void 0;const t=ts(),e=Y(),s=ze(),n={message:"boolean schema is false"};function i(d){const{gen:f,schema:w,validateName:p}=d;w===!1?o(d,!1):typeof w=="object"&&w.$async===!0?f.return(s.default.data):(f.assign((0,e._)`${p}.errors`,null),f.return(!0))}Ue.topBoolOrEmptySchema=i;function r(d,f){const{gen:w,schema:p}=d;p===!1?(w.var(f,!1),o(d)):w.var(f,!0)}Ue.boolOrEmptySchema=r;function o(d,f){const{gen:w,data:p}=d,$={gen:w,keyword:"false schema",data:p,schema:!1,schemaCode:!1,schemaValue:!1,params:{},it:d};(0,t.reportError)($,n,void 0,f)}return Ue}var ue={},Fe={},sn;function Wi(){if(sn)return Fe;sn=1,Object.defineProperty(Fe,"__esModule",{value:!0}),Fe.getRules=Fe.isJSONType=void 0;const t=["string","number","integer","boolean","null","object","array"],e=new Set(t);function s(i){return typeof i=="string"&&e.has(i)}Fe.isJSONType=s;function n(){const i={number:{type:"number",rules:[]},string:{type:"string",rules:[]},array:{type:"array",rules:[]},object:{type:"object",rules:[]}};return{types:{...i,integer:!0,boolean:!0,null:!0},rules:[{rules:[]},i.number,i.string,i.array,i.object],post:{rules:[]},all:{},keywords:{}}}return Fe.getRules=n,Fe}var xe={},nn;function Ji(){if(nn)return xe;nn=1,Object.defineProperty(xe,"__esModule",{value:!0}),xe.shouldUseRule=xe.shouldUseGroup=xe.schemaHasRulesForType=void 0;function t({schema:n,self:i},r){const o=i.RULES.types[r];return o&&o!==!0&&e(n,o)}xe.schemaHasRulesForType=t;function e(n,i){return i.rules.some(r=>s(n,r))}xe.shouldUseGroup=e;function s(n,i){var r;return n[i.keyword]!==void 0||((r=i.definition.implements)===null||r===void 0?void 0:r.some(o=>n[o]!==void 0))}return xe.shouldUseRule=s,xe}var rn;function Yt(){if(rn)return ue;rn=1,Object.defineProperty(ue,"__esModule",{value:!0}),ue.reportTypeError=ue.checkDataTypes=ue.checkDataType=ue.coerceAndCheckDataType=ue.getJSONTypes=ue.getSchemaTypes=ue.DataType=void 0;const t=Wi(),e=Ji(),s=ts(),n=Y(),i=se();var r;(function(a){a[a.Correct=0]="Correct",a[a.Wrong=1]="Wrong"})(r||(ue.DataType=r={}));function o(a){const c=d(a.type);if(c.includes("null")){if(a.nullable===!1)throw new Error("type: null contradicts nullable: false")}else{if(!c.length&&a.nullable!==void 0)throw new Error('"nullable" cannot be used without "type"');a.nullable===!0&&c.push("null")}return c}ue.getSchemaTypes=o;function d(a){const c=Array.isArray(a)?a:a?[a]:[];if(c.every(t.isJSONType))return c;throw new Error("type must be JSONType or JSONType[]: "+c.join(","))}ue.getJSONTypes=d;function f(a,c){const{gen:y,data:u,opts:m}=a,S=p(c,m.coerceTypes),I=c.length>0&&!(S.length===0&&c.length===1&&(0,e.schemaHasRulesForType)(a,c[0]));if(I){const x=k(c,u,m.strictNumbers,r.Wrong);y.if(x,()=>{S.length?$(a,c,S):h(a)})}return I}ue.coerceAndCheckDataType=f;const w=new Set(["string","number","integer","boolean","null"]);function p(a,c){return c?a.filter(y=>w.has(y)||c==="array"&&y==="array"):[]}function $(a,c,y){const{gen:u,data:m,opts:S}=a,I=u.let("dataType",(0,n._)`typeof ${m}`),x=u.let("coerced",(0,n._)`undefined`);S.coerceTypes==="array"&&u.if((0,n._)`${I} == 'object' && Array.isArray(${m}) && ${m}.length == 1`,()=>u.assign(m,(0,n._)`${m}[0]`).assign(I,(0,n._)`typeof ${m}`).if(k(c,m,S.strictNumbers),()=>u.assign(x,m))),u.if((0,n._)`${x} !== undefined`);for(const L of y)(w.has(L)||L==="array"&&S.coerceTypes==="array")&&j(L);u.else(),h(a),u.endIf(),u.if((0,n._)`${x} !== undefined`,()=>{u.assign(m,x),v(a,x)});function j(L){switch(L){case"string":u.elseIf((0,n._)`${I} == "number" || ${I} == "boolean"`).assign(x,(0,n._)`"" + ${m}`).elseIf((0,n._)`${m} === null`).assign(x,(0,n._)`""`);return;case"number":u.elseIf((0,n._)`${I} == "boolean" || ${m} === null
              || (${I} == "string" && ${m} && ${m} == +${m})`).assign(x,(0,n._)`+${m}`);return;case"integer":u.elseIf((0,n._)`${I} === "boolean" || ${m} === null
              || (${I} === "string" && ${m} && ${m} == +${m} && !(${m} % 1))`).assign(x,(0,n._)`+${m}`);return;case"boolean":u.elseIf((0,n._)`${m} === "false" || ${m} === 0 || ${m} === null`).assign(x,!1).elseIf((0,n._)`${m} === "true" || ${m} === 1`).assign(x,!0);return;case"null":u.elseIf((0,n._)`${m} === "" || ${m} === 0 || ${m} === false`),u.assign(x,null);return;case"array":u.elseIf((0,n._)`${I} === "string" || ${I} === "number"
              || ${I} === "boolean" || ${m} === null`).assign(x,(0,n._)`[${m}]`)}}}function v({gen:a,parentData:c,parentDataProperty:y},u){a.if((0,n._)`${c} !== undefined`,()=>a.assign((0,n._)`${c}[${y}]`,u))}function _(a,c,y,u=r.Correct){const m=u===r.Correct?n.operators.EQ:n.operators.NEQ;let S;switch(a){case"null":return(0,n._)`${c} ${m} null`;case"array":S=(0,n._)`Array.isArray(${c})`;break;case"object":S=(0,n._)`${c} && typeof ${c} == "object" && !Array.isArray(${c})`;break;case"integer":S=I((0,n._)`!(${c} % 1) && !isNaN(${c})`);break;case"number":S=I();break;default:return(0,n._)`typeof ${c} ${m} ${a}`}return u===r.Correct?S:(0,n.not)(S);function I(x=n.nil){return(0,n.and)((0,n._)`typeof ${c} == "number"`,x,y?(0,n._)`isFinite(${c})`:n.nil)}}ue.checkDataType=_;function k(a,c,y,u){if(a.length===1)return _(a[0],c,y,u);let m;const S=(0,i.toHash)(a);if(S.array&&S.object){const I=(0,n._)`typeof ${c} != "object"`;m=S.null?I:(0,n._)`!${c} || ${I}`,delete S.null,delete S.array,delete S.object}else m=n.nil;S.number&&delete S.integer;for(const I in S)m=(0,n.and)(m,_(I,c,y,u));return m}ue.checkDataTypes=k;const b={message:({schema:a})=>`must be ${a}`,params:({schema:a,schemaValue:c})=>typeof a=="string"?(0,n._)`{type: ${a}}`:(0,n._)`{type: ${c}}`};function h(a){const c=l(a);(0,s.reportError)(c,b)}ue.reportTypeError=h;function l(a){const{gen:c,data:y,schema:u}=a,m=(0,i.schemaRefOrVal)(a,u,"type");return{gen:c,keyword:"type",data:y,schema:u.type,schemaCode:m,schemaValue:m,parentSchema:u,params:{},it:a}}return ue}var st={},on;function ho(){if(on)return st;on=1,Object.defineProperty(st,"__esModule",{value:!0}),st.assignDefaults=void 0;const t=Y(),e=se();function s(i,r){const{properties:o,items:d}=i.schema;if(r==="object"&&o)for(const f in o)n(i,f,o[f].default);else r==="array"&&Array.isArray(d)&&d.forEach((f,w)=>n(i,w,f.default))}st.assignDefaults=s;function n(i,r,o){const{gen:d,compositeRule:f,data:w,opts:p}=i;if(o===void 0)return;const $=(0,t._)`${w}${(0,t.getProperty)(r)}`;if(f){(0,e.checkStrictMode)(i,`default is ignored for: ${$}`);return}let v=(0,t._)`${$} === undefined`;p.useDefaults==="empty"&&(v=(0,t._)`${v} || ${$} === null || ${$} === ""`),d.if(v,(0,t._)`${$} = ${(0,t.stringify)(o)}`)}return st}var Pe={},ie={},an;function Ie(){if(an)return ie;an=1,Object.defineProperty(ie,"__esModule",{value:!0}),ie.validateUnion=ie.validateArray=ie.usePattern=ie.callValidateCode=ie.schemaProperties=ie.allSchemaProperties=ie.noPropertyInData=ie.propertyInData=ie.isOwnProperty=ie.hasPropFunc=ie.reportMissingProp=ie.checkMissingProp=ie.checkReportMissingProp=void 0;const t=Y(),e=se(),s=ze(),n=se();function i(a,c){const{gen:y,data:u,it:m}=a;y.if(p(y,u,c,m.opts.ownProperties),()=>{a.setParams({missingProperty:(0,t._)`${c}`},!0),a.error()})}ie.checkReportMissingProp=i;function r({gen:a,data:c,it:{opts:y}},u,m){return(0,t.or)(...u.map(S=>(0,t.and)(p(a,c,S,y.ownProperties),(0,t._)`${m} = ${S}`)))}ie.checkMissingProp=r;function o(a,c){a.setParams({missingProperty:c},!0),a.error()}ie.reportMissingProp=o;function d(a){return a.scopeValue("func",{ref:Object.prototype.hasOwnProperty,code:(0,t._)`Object.prototype.hasOwnProperty`})}ie.hasPropFunc=d;function f(a,c,y){return(0,t._)`${d(a)}.call(${c}, ${y})`}ie.isOwnProperty=f;function w(a,c,y,u){const m=(0,t._)`${c}${(0,t.getProperty)(y)} !== undefined`;return u?(0,t._)`${m} && ${f(a,c,y)}`:m}ie.propertyInData=w;function p(a,c,y,u){const m=(0,t._)`${c}${(0,t.getProperty)(y)} === undefined`;return u?(0,t.or)(m,(0,t.not)(f(a,c,y))):m}ie.noPropertyInData=p;function $(a){return a?Object.keys(a).filter(c=>c!=="__proto__"):[]}ie.allSchemaProperties=$;function v(a,c){return $(c).filter(y=>!(0,e.alwaysValidSchema)(a,c[y]))}ie.schemaProperties=v;function _({schemaCode:a,data:c,it:{gen:y,topSchemaRef:u,schemaPath:m,errorPath:S},it:I},x,j,L){const U=L?(0,t._)`${a}, ${c}, ${u}${m}`:c,G=[[s.default.instancePath,(0,t.strConcat)(s.default.instancePath,S)],[s.default.parentData,I.parentData],[s.default.parentDataProperty,I.parentDataProperty],[s.default.rootData,s.default.rootData]];I.opts.dynamicRef&&G.push([s.default.dynamicAnchors,s.default.dynamicAnchors]);const Z=(0,t._)`${U}, ${y.object(...G)}`;return j!==t.nil?(0,t._)`${x}.call(${j}, ${Z})`:(0,t._)`${x}(${Z})`}ie.callValidateCode=_;const k=(0,t._)`new RegExp`;function b({gen:a,it:{opts:c}},y){const u=c.unicodeRegExp?"u":"",{regExp:m}=c.code,S=m(y,u);return a.scopeValue("pattern",{key:S.toString(),ref:S,code:(0,t._)`${m.code==="new RegExp"?k:(0,n.useFunc)(a,m)}(${y}, ${u})`})}ie.usePattern=b;function h(a){const{gen:c,data:y,keyword:u,it:m}=a,S=c.name("valid");if(m.allErrors){const x=c.let("valid",!0);return I(()=>c.assign(x,!1)),x}return c.var(S,!0),I(()=>c.break()),S;function I(x){const j=c.const("len",(0,t._)`${y}.length`);c.forRange("i",0,j,L=>{a.subschema({keyword:u,dataProp:L,dataPropType:e.Type.Num},S),c.if((0,t.not)(S),x)})}}ie.validateArray=h;function l(a){const{gen:c,schema:y,keyword:u,it:m}=a;if(!Array.isArray(y))throw new Error("ajv implementation error");if(y.some(j=>(0,e.alwaysValidSchema)(m,j))&&!m.opts.unevaluated)return;const I=c.let("valid",!1),x=c.name("_valid");c.block(()=>y.forEach((j,L)=>{const U=a.subschema({keyword:u,schemaProp:L,compositeRule:!0},x);c.assign(I,(0,t._)`${I} || ${x}`),a.mergeValidEvaluated(U,x)||c.if((0,t.not)(I))})),a.result(I,()=>a.reset(),()=>a.error(!0))}return ie.validateUnion=l,ie}var ln;function fo(){if(ln)return Pe;ln=1,Object.defineProperty(Pe,"__esModule",{value:!0}),Pe.validateKeywordUsage=Pe.validSchemaType=Pe.funcKeywordCode=Pe.macroKeywordCode=void 0;const t=Y(),e=ze(),s=Ie(),n=ts();function i(v,_){const{gen:k,keyword:b,schema:h,parentSchema:l,it:a}=v,c=_.macro.call(a.self,h,l,a),y=w(k,b,c);a.opts.validateSchema!==!1&&a.self.validateSchema(c,!0);const u=k.name("valid");v.subschema({schema:c,schemaPath:t.nil,errSchemaPath:`${a.errSchemaPath}/${b}`,topSchemaRef:y,compositeRule:!0},u),v.pass(u,()=>v.error(!0))}Pe.macroKeywordCode=i;function r(v,_){var k;const{gen:b,keyword:h,schema:l,parentSchema:a,$data:c,it:y}=v;f(y,_);const u=!c&&_.compile?_.compile.call(y.self,l,a,y):_.validate,m=w(b,h,u),S=b.let("valid");v.block$data(S,I),v.ok((k=_.valid)!==null&&k!==void 0?k:S);function I(){if(_.errors===!1)L(),_.modifying&&o(v),U(()=>v.error());else{const G=_.async?x():j();_.modifying&&o(v),U(()=>d(v,G))}}function x(){const G=b.let("ruleErrs",null);return b.try(()=>L((0,t._)`await `),Z=>b.assign(S,!1).if((0,t._)`${Z} instanceof ${y.ValidationError}`,()=>b.assign(G,(0,t._)`${Z}.errors`),()=>b.throw(Z))),G}function j(){const G=(0,t._)`${m}.errors`;return b.assign(G,null),L(t.nil),G}function L(G=_.async?(0,t._)`await `:t.nil){const Z=y.opts.passContext?e.default.this:e.default.self,ee=!("compile"in _&&!c||_.schema===!1);b.assign(S,(0,t._)`${G}${(0,s.callValidateCode)(v,m,Z,ee)}`,_.modifying)}function U(G){var Z;b.if((0,t.not)((Z=_.valid)!==null&&Z!==void 0?Z:S),G)}}Pe.funcKeywordCode=r;function o(v){const{gen:_,data:k,it:b}=v;_.if(b.parentData,()=>_.assign(k,(0,t._)`${b.parentData}[${b.parentDataProperty}]`))}function d(v,_){const{gen:k}=v;k.if((0,t._)`Array.isArray(${_})`,()=>{k.assign(e.default.vErrors,(0,t._)`${e.default.vErrors} === null ? ${_} : ${e.default.vErrors}.concat(${_})`).assign(e.default.errors,(0,t._)`${e.default.vErrors}.length`),(0,n.extendErrors)(v)},()=>v.error())}function f({schemaEnv:v},_){if(_.async&&!v.$async)throw new Error("async keyword in sync schema")}function w(v,_,k){if(k===void 0)throw new Error(`keyword "${_}" failed to compile`);return v.scopeValue("keyword",typeof k=="function"?{ref:k}:{ref:k,code:(0,t.stringify)(k)})}function p(v,_,k=!1){return!_.length||_.some(b=>b==="array"?Array.isArray(v):b==="object"?v&&typeof v=="object"&&!Array.isArray(v):typeof v==b||k&&typeof v>"u")}Pe.validSchemaType=p;function $({schema:v,opts:_,self:k,errSchemaPath:b},h,l){if(Array.isArray(h.keyword)?!h.keyword.includes(l):h.keyword!==l)throw new Error("ajv implementation error");const a=h.dependencies;if(a?.some(c=>!Object.prototype.hasOwnProperty.call(v,c)))throw new Error(`parent schema must have dependencies of ${l}: ${a.join(",")}`);if(h.validateSchema&&!h.validateSchema(v[l])){const y=`keyword "${l}" value is invalid at path "${b}": `+k.errorsText(h.validateSchema.errors);if(_.validateSchema==="log")k.logger.error(y);else throw new Error(y)}}return Pe.validateKeywordUsage=$,Pe}var Re={},cn;function po(){if(cn)return Re;cn=1,Object.defineProperty(Re,"__esModule",{value:!0}),Re.extendSubschemaMode=Re.extendSubschemaData=Re.getSubschema=void 0;const t=Y(),e=se();function s(r,{keyword:o,schemaProp:d,schema:f,schemaPath:w,errSchemaPath:p,topSchemaRef:$}){if(o!==void 0&&f!==void 0)throw new Error('both "keyword" and "schema" passed, only one allowed');if(o!==void 0){const v=r.schema[o];return d===void 0?{schema:v,schemaPath:(0,t._)`${r.schemaPath}${(0,t.getProperty)(o)}`,errSchemaPath:`${r.errSchemaPath}/${o}`}:{schema:v[d],schemaPath:(0,t._)`${r.schemaPath}${(0,t.getProperty)(o)}${(0,t.getProperty)(d)}`,errSchemaPath:`${r.errSchemaPath}/${o}/${(0,e.escapeFragment)(d)}`}}if(f!==void 0){if(w===void 0||p===void 0||$===void 0)throw new Error('"schemaPath", "errSchemaPath" and "topSchemaRef" are required with "schema"');return{schema:f,schemaPath:w,topSchemaRef:$,errSchemaPath:p}}throw new Error('either "keyword" or "schema" must be passed')}Re.getSubschema=s;function n(r,o,{dataProp:d,dataPropType:f,data:w,dataTypes:p,propertyName:$}){if(w!==void 0&&d!==void 0)throw new Error('both "data" and "dataProp" passed, only one allowed');const{gen:v}=o;if(d!==void 0){const{errorPath:k,dataPathArr:b,opts:h}=o,l=v.let("data",(0,t._)`${o.data}${(0,t.getProperty)(d)}`,!0);_(l),r.errorPath=(0,t.str)`${k}${(0,e.getErrorPath)(d,f,h.jsPropertySyntax)}`,r.parentDataProperty=(0,t._)`${d}`,r.dataPathArr=[...b,r.parentDataProperty]}if(w!==void 0){const k=w instanceof t.Name?w:v.let("data",w,!0);_(k),$!==void 0&&(r.propertyName=$)}p&&(r.dataTypes=p);function _(k){r.data=k,r.dataLevel=o.dataLevel+1,r.dataTypes=[],o.definedProperties=new Set,r.parentData=o.data,r.dataNames=[...o.dataNames,k]}}Re.extendSubschemaData=n;function i(r,{jtdDiscriminator:o,jtdMetadata:d,compositeRule:f,createErrors:w,allErrors:p}){f!==void 0&&(r.compositeRule=f),w!==void 0&&(r.createErrors=w),p!==void 0&&(r.allErrors=p),r.jtdDiscriminator=o,r.jtdMetadata=d}return Re.extendSubschemaMode=i,Re}var pe={},vs,dn;function Xi(){return dn||(dn=1,vs=function t(e,s){if(e===s)return!0;if(e&&s&&typeof e=="object"&&typeof s=="object"){if(e.constructor!==s.constructor)return!1;var n,i,r;if(Array.isArray(e)){if(n=e.length,n!=s.length)return!1;for(i=n;i--!==0;)if(!t(e[i],s[i]))return!1;return!0}if(e.constructor===RegExp)return e.source===s.source&&e.flags===s.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===s.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===s.toString();if(r=Object.keys(e),n=r.length,n!==Object.keys(s).length)return!1;for(i=n;i--!==0;)if(!Object.prototype.hasOwnProperty.call(s,r[i]))return!1;for(i=n;i--!==0;){var o=r[i];if(!t(e[o],s[o]))return!1}return!0}return e!==e&&s!==s}),vs}var ws={exports:{}},un;function mo(){if(un)return ws.exports;un=1;var t=ws.exports=function(n,i,r){typeof i=="function"&&(r=i,i={}),r=i.cb||r;var o=typeof r=="function"?r:r.pre||function(){},d=r.post||function(){};e(i,o,d,n,"",n)};t.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0,if:!0,then:!0,else:!0},t.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0},t.propsKeywords={$defs:!0,definitions:!0,properties:!0,patternProperties:!0,dependencies:!0},t.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0};function e(n,i,r,o,d,f,w,p,$,v){if(o&&typeof o=="object"&&!Array.isArray(o)){i(o,d,f,w,p,$,v);for(var _ in o){var k=o[_];if(Array.isArray(k)){if(_ in t.arrayKeywords)for(var b=0;b<k.length;b++)e(n,i,r,k[b],d+"/"+_+"/"+b,f,d,_,o,b)}else if(_ in t.propsKeywords){if(k&&typeof k=="object")for(var h in k)e(n,i,r,k[h],d+"/"+_+"/"+s(h),f,d,_,o,h)}else(_ in t.keywords||n.allKeys&&!(_ in t.skipKeywords))&&e(n,i,r,k,d+"/"+_,f,d,_,o)}r(o,d,f,w,p,$,v)}}function s(n){return n.replace(/~/g,"~0").replace(/\//g,"~1")}return ws.exports}var hn;function ss(){if(hn)return pe;hn=1,Object.defineProperty(pe,"__esModule",{value:!0}),pe.getSchemaRefs=pe.resolveUrl=pe.normalizeId=pe._getFullPath=pe.getFullPath=pe.inlineRef=void 0;const t=se(),e=Xi(),s=mo(),n=new Set(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum","const"]);function i(b,h=!0){return typeof b=="boolean"?!0:h===!0?!o(b):h?d(b)<=h:!1}pe.inlineRef=i;const r=new Set(["$ref","$recursiveRef","$recursiveAnchor","$dynamicRef","$dynamicAnchor"]);function o(b){for(const h in b){if(r.has(h))return!0;const l=b[h];if(Array.isArray(l)&&l.some(o)||typeof l=="object"&&o(l))return!0}return!1}function d(b){let h=0;for(const l in b){if(l==="$ref")return 1/0;if(h++,!n.has(l)&&(typeof b[l]=="object"&&(0,t.eachItem)(b[l],a=>h+=d(a)),h===1/0))return 1/0}return h}function f(b,h="",l){l!==!1&&(h=$(h));const a=b.parse(h);return w(b,a)}pe.getFullPath=f;function w(b,h){return b.serialize(h).split("#")[0]+"#"}pe._getFullPath=w;const p=/#\/?$/;function $(b){return b?b.replace(p,""):""}pe.normalizeId=$;function v(b,h,l){return l=$(l),b.resolve(h,l)}pe.resolveUrl=v;const _=/^[a-z_][-a-z0-9._]*$/i;function k(b,h){if(typeof b=="boolean")return{};const{schemaId:l,uriResolver:a}=this.opts,c=$(b[l]||h),y={"":c},u=f(a,c,!1),m={},S=new Set;return s(b,{allKeys:!0},(j,L,U,G)=>{if(G===void 0)return;const Z=u+L;let ee=y[G];typeof j[l]=="string"&&(ee=re.call(this,j[l])),te.call(this,j.$anchor),te.call(this,j.$dynamicAnchor),y[L]=ee;function re(K){const oe=this.opts.uriResolver.resolve;if(K=$(ee?oe(ee,K):K),S.has(K))throw x(K);S.add(K);let A=this.refs[K];return typeof A=="string"&&(A=this.refs[A]),typeof A=="object"?I(j,A.schema,K):K!==$(Z)&&(K[0]==="#"?(I(j,m[K],K),m[K]=j):this.refs[K]=Z),K}function te(K){if(typeof K=="string"){if(!_.test(K))throw new Error(`invalid anchor "${K}"`);re.call(this,`#${K}`)}}}),m;function I(j,L,U){if(L!==void 0&&!e(j,L))throw x(U)}function x(j){return new Error(`reference "${j}" resolves to more than one schema`)}}return pe.getSchemaRefs=k,pe}var fn;function ns(){if(fn)return Ce;fn=1,Object.defineProperty(Ce,"__esModule",{value:!0}),Ce.getData=Ce.KeywordCxt=Ce.validateFunctionCode=void 0;const t=uo(),e=Yt(),s=Ji(),n=Yt(),i=ho(),r=fo(),o=po(),d=Y(),f=ze(),w=ss(),p=se(),$=ts();function v(E){if(u(E)&&(S(E),y(E))){h(E);return}_(E,()=>(0,t.topBoolOrEmptySchema)(E))}Ce.validateFunctionCode=v;function _({gen:E,validateName:C,schema:M,schemaEnv:q,opts:V},X){V.code.es5?E.func(C,(0,d._)`${f.default.data}, ${f.default.valCxt}`,q.$async,()=>{E.code((0,d._)`"use strict"; ${a(M,V)}`),b(E,V),E.code(X)}):E.func(C,(0,d._)`${f.default.data}, ${k(V)}`,q.$async,()=>E.code(a(M,V)).code(X))}function k(E){return(0,d._)`{${f.default.instancePath}="", ${f.default.parentData}, ${f.default.parentDataProperty}, ${f.default.rootData}=${f.default.data}${E.dynamicRef?(0,d._)`, ${f.default.dynamicAnchors}={}`:d.nil}}={}`}function b(E,C){E.if(f.default.valCxt,()=>{E.var(f.default.instancePath,(0,d._)`${f.default.valCxt}.${f.default.instancePath}`),E.var(f.default.parentData,(0,d._)`${f.default.valCxt}.${f.default.parentData}`),E.var(f.default.parentDataProperty,(0,d._)`${f.default.valCxt}.${f.default.parentDataProperty}`),E.var(f.default.rootData,(0,d._)`${f.default.valCxt}.${f.default.rootData}`),C.dynamicRef&&E.var(f.default.dynamicAnchors,(0,d._)`${f.default.valCxt}.${f.default.dynamicAnchors}`)},()=>{E.var(f.default.instancePath,(0,d._)`""`),E.var(f.default.parentData,(0,d._)`undefined`),E.var(f.default.parentDataProperty,(0,d._)`undefined`),E.var(f.default.rootData,f.default.data),C.dynamicRef&&E.var(f.default.dynamicAnchors,(0,d._)`{}`)})}function h(E){const{schema:C,opts:M,gen:q}=E;_(E,()=>{M.$comment&&C.$comment&&G(E),j(E),q.let(f.default.vErrors,null),q.let(f.default.errors,0),M.unevaluated&&l(E),I(E),Z(E)})}function l(E){const{gen:C,validateName:M}=E;E.evaluated=C.const("evaluated",(0,d._)`${M}.evaluated`),C.if((0,d._)`${E.evaluated}.dynamicProps`,()=>C.assign((0,d._)`${E.evaluated}.props`,(0,d._)`undefined`)),C.if((0,d._)`${E.evaluated}.dynamicItems`,()=>C.assign((0,d._)`${E.evaluated}.items`,(0,d._)`undefined`))}function a(E,C){const M=typeof E=="object"&&E[C.schemaId];return M&&(C.code.source||C.code.process)?(0,d._)`/*# sourceURL=${M} */`:d.nil}function c(E,C){if(u(E)&&(S(E),y(E))){m(E,C);return}(0,t.boolOrEmptySchema)(E,C)}function y({schema:E,self:C}){if(typeof E=="boolean")return!E;for(const M in E)if(C.RULES.all[M])return!0;return!1}function u(E){return typeof E.schema!="boolean"}function m(E,C){const{schema:M,gen:q,opts:V}=E;V.$comment&&M.$comment&&G(E),L(E),U(E);const X=q.const("_errs",f.default.errors);I(E,X),q.var(C,(0,d._)`${X} === ${f.default.errors}`)}function S(E){(0,p.checkUnknownRules)(E),x(E)}function I(E,C){if(E.opts.jtd)return re(E,[],!1,C);const M=(0,e.getSchemaTypes)(E.schema),q=(0,e.coerceAndCheckDataType)(E,M);re(E,M,!q,C)}function x(E){const{schema:C,errSchemaPath:M,opts:q,self:V}=E;C.$ref&&q.ignoreKeywordsWithRef&&(0,p.schemaHasRulesButRef)(C,V.RULES)&&V.logger.warn(`$ref: keywords ignored in schema at path "${M}"`)}function j(E){const{schema:C,opts:M}=E;C.default!==void 0&&M.useDefaults&&M.strictSchema&&(0,p.checkStrictMode)(E,"default is ignored in the schema root")}function L(E){const C=E.schema[E.opts.schemaId];C&&(E.baseId=(0,w.resolveUrl)(E.opts.uriResolver,E.baseId,C))}function U(E){if(E.schema.$async&&!E.schemaEnv.$async)throw new Error("async schema in sync schema")}function G({gen:E,schemaEnv:C,schema:M,errSchemaPath:q,opts:V}){const X=M.$comment;if(V.$comment===!0)E.code((0,d._)`${f.default.self}.logger.log(${X})`);else if(typeof V.$comment=="function"){const ce=(0,d.str)`${q}/$comment`,$e=E.scopeValue("root",{ref:C.root});E.code((0,d._)`${f.default.self}.opts.$comment(${X}, ${ce}, ${$e}.schema)`)}}function Z(E){const{gen:C,schemaEnv:M,validateName:q,ValidationError:V,opts:X}=E;M.$async?C.if((0,d._)`${f.default.errors} === 0`,()=>C.return(f.default.data),()=>C.throw((0,d._)`new ${V}(${f.default.vErrors})`)):(C.assign((0,d._)`${q}.errors`,f.default.vErrors),X.unevaluated&&ee(E),C.return((0,d._)`${f.default.errors} === 0`))}function ee({gen:E,evaluated:C,props:M,items:q}){M instanceof d.Name&&E.assign((0,d._)`${C}.props`,M),q instanceof d.Name&&E.assign((0,d._)`${C}.items`,q)}function re(E,C,M,q){const{gen:V,schema:X,data:ce,allErrors:$e,opts:ge,self:ve}=E,{RULES:de}=ve;if(X.$ref&&(ge.ignoreKeywordsWithRef||!(0,p.schemaHasRulesButRef)(X,de))){V.block(()=>F(E,"$ref",de.all.$ref.definition));return}ge.jtd||K(E,C),V.block(()=>{for(const be of de.rules)Ge(be);Ge(de.post)});function Ge(be){(0,s.shouldUseGroup)(X,be)&&(be.type?(V.if((0,n.checkDataType)(be.type,ce,ge.strictNumbers)),te(E,be),C.length===1&&C[0]===be.type&&M&&(V.else(),(0,n.reportTypeError)(E)),V.endIf()):te(E,be),$e||V.if((0,d._)`${f.default.errors} === ${q||0}`))}}function te(E,C){const{gen:M,schema:q,opts:{useDefaults:V}}=E;V&&(0,i.assignDefaults)(E,C.type),M.block(()=>{for(const X of C.rules)(0,s.shouldUseRule)(q,X)&&F(E,X.keyword,X.definition,C.type)})}function K(E,C){E.schemaEnv.meta||!E.opts.strictTypes||(oe(E,C),E.opts.allowUnionTypes||A(E,C),T(E,E.dataTypes))}function oe(E,C){if(C.length){if(!E.dataTypes.length){E.dataTypes=C;return}C.forEach(M=>{N(E.dataTypes,M)||P(E,`type "${M}" not allowed by context "${E.dataTypes.join(",")}"`)}),g(E,C)}}function A(E,C){C.length>1&&!(C.length===2&&C.includes("null"))&&P(E,"use allowUnionTypes to allow union type keyword")}function T(E,C){const M=E.self.RULES.all;for(const q in M){const V=M[q];if(typeof V=="object"&&(0,s.shouldUseRule)(E.schema,V)){const{type:X}=V.definition;X.length&&!X.some(ce=>D(C,ce))&&P(E,`missing type "${X.join(",")}" for keyword "${q}"`)}}}function D(E,C){return E.includes(C)||C==="number"&&E.includes("integer")}function N(E,C){return E.includes(C)||C==="integer"&&E.includes("number")}function g(E,C){const M=[];for(const q of E.dataTypes)N(C,q)?M.push(q):C.includes("integer")&&q==="number"&&M.push("integer");E.dataTypes=M}function P(E,C){const M=E.schemaEnv.baseId+E.errSchemaPath;C+=` at "${M}" (strictTypes)`,(0,p.checkStrictMode)(E,C,E.opts.strictTypes)}class R{constructor(C,M,q){if((0,r.validateKeywordUsage)(C,M,q),this.gen=C.gen,this.allErrors=C.allErrors,this.keyword=q,this.data=C.data,this.schema=C.schema[q],this.$data=M.$data&&C.opts.$data&&this.schema&&this.schema.$data,this.schemaValue=(0,p.schemaRefOrVal)(C,this.schema,q,this.$data),this.schemaType=M.schemaType,this.parentSchema=C.schema,this.params={},this.it=C,this.def=M,this.$data)this.schemaCode=C.gen.const("vSchema",W(this.$data,C));else if(this.schemaCode=this.schemaValue,!(0,r.validSchemaType)(this.schema,M.schemaType,M.allowUndefined))throw new Error(`${q} value must be ${JSON.stringify(M.schemaType)}`);("code"in M?M.trackErrors:M.errors!==!1)&&(this.errsCount=C.gen.const("_errs",f.default.errors))}result(C,M,q){this.failResult((0,d.not)(C),M,q)}failResult(C,M,q){this.gen.if(C),q?q():this.error(),M?(this.gen.else(),M(),this.allErrors&&this.gen.endIf()):this.allErrors?this.gen.endIf():this.gen.else()}pass(C,M){this.failResult((0,d.not)(C),void 0,M)}fail(C){if(C===void 0){this.error(),this.allErrors||this.gen.if(!1);return}this.gen.if(C),this.error(),this.allErrors?this.gen.endIf():this.gen.else()}fail$data(C){if(!this.$data)return this.fail(C);const{schemaCode:M}=this;this.fail((0,d._)`${M} !== undefined && (${(0,d.or)(this.invalid$data(),C)})`)}error(C,M,q){if(M){this.setParams(M),this._error(C,q),this.setParams({});return}this._error(C,q)}_error(C,M){(C?$.reportExtraError:$.reportError)(this,this.def.error,M)}$dataError(){(0,$.reportError)(this,this.def.$dataError||$.keyword$DataError)}reset(){if(this.errsCount===void 0)throw new Error('add "trackErrors" to keyword definition');(0,$.resetErrorsCount)(this.gen,this.errsCount)}ok(C){this.allErrors||this.gen.if(C)}setParams(C,M){M?Object.assign(this.params,C):this.params=C}block$data(C,M,q=d.nil){this.gen.block(()=>{this.check$data(C,q),M()})}check$data(C=d.nil,M=d.nil){if(!this.$data)return;const{gen:q,schemaCode:V,schemaType:X,def:ce}=this;q.if((0,d.or)((0,d._)`${V} === undefined`,M)),C!==d.nil&&q.assign(C,!0),(X.length||ce.validateSchema)&&(q.elseIf(this.invalid$data()),this.$dataError(),C!==d.nil&&q.assign(C,!1)),q.else()}invalid$data(){const{gen:C,schemaCode:M,schemaType:q,def:V,it:X}=this;return(0,d.or)(ce(),$e());function ce(){if(q.length){if(!(M instanceof d.Name))throw new Error("ajv implementation error");const ge=Array.isArray(q)?q:[q];return(0,d._)`${(0,n.checkDataTypes)(ge,M,X.opts.strictNumbers,n.DataType.Wrong)}`}return d.nil}function $e(){if(V.validateSchema){const ge=C.scopeValue("validate$data",{ref:V.validateSchema});return(0,d._)`!${ge}(${M})`}return d.nil}}subschema(C,M){const q=(0,o.getSubschema)(this.it,C);(0,o.extendSubschemaData)(q,this.it,C),(0,o.extendSubschemaMode)(q,C);const V={...this.it,...q,items:void 0,props:void 0};return c(V,M),V}mergeEvaluated(C,M){const{it:q,gen:V}=this;q.opts.unevaluated&&(q.props!==!0&&C.props!==void 0&&(q.props=p.mergeEvaluated.props(V,C.props,q.props,M)),q.items!==!0&&C.items!==void 0&&(q.items=p.mergeEvaluated.items(V,C.items,q.items,M)))}mergeValidEvaluated(C,M){const{it:q,gen:V}=this;if(q.opts.unevaluated&&(q.props!==!0||q.items!==!0))return V.if(M,()=>this.mergeEvaluated(C,d.Name)),!0}}Ce.KeywordCxt=R;function F(E,C,M,q){const V=new R(E,M,C);"code"in M?M.code(V,q):V.$data&&M.validate?(0,r.funcKeywordCode)(V,M):"macro"in M?(0,r.macroKeywordCode)(V,M):(M.compile||M.validate)&&(0,r.funcKeywordCode)(V,M)}const B=/^\/(?:[^~]|~0|~1)*$/,Q=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function W(E,{dataLevel:C,dataNames:M,dataPathArr:q}){let V,X;if(E==="")return f.default.rootData;if(E[0]==="/"){if(!B.test(E))throw new Error(`Invalid JSON-pointer: ${E}`);V=E,X=f.default.rootData}else{const ve=Q.exec(E);if(!ve)throw new Error(`Invalid JSON-pointer: ${E}`);const de=+ve[1];if(V=ve[2],V==="#"){if(de>=C)throw new Error(ge("property/index",de));return q[C-de]}if(de>C)throw new Error(ge("data",de));if(X=M[C-de],!V)return X}let ce=X;const $e=V.split("/");for(const ve of $e)ve&&(X=(0,d._)`${X}${(0,d.getProperty)((0,p.unescapeJsonPointer)(ve))}`,ce=(0,d._)`${ce} && ${X}`);return ce;function ge(ve,de){return`Cannot access ${ve} ${de} levels up, current level is ${C}`}}return Ce.getData=W,Ce}var pt={},pn;function Ms(){if(pn)return pt;pn=1,Object.defineProperty(pt,"__esModule",{value:!0});class t extends Error{constructor(s){super("validation failed"),this.errors=s,this.ajv=this.validation=!0}}return pt.default=t,pt}var mt={},mn;function is(){if(mn)return mt;mn=1,Object.defineProperty(mt,"__esModule",{value:!0});const t=ss();class e extends Error{constructor(n,i,r,o){super(o||`can't resolve reference ${r} from id ${i}`),this.missingRef=(0,t.resolveUrl)(n,i,r),this.missingSchema=(0,t.normalizeId)((0,t.getFullPath)(n,this.missingRef))}}return mt.default=e,mt}var we={},yn;function Ds(){if(yn)return we;yn=1,Object.defineProperty(we,"__esModule",{value:!0}),we.resolveSchema=we.getCompilingSchema=we.resolveRef=we.compileSchema=we.SchemaEnv=void 0;const t=Y(),e=Ms(),s=ze(),n=ss(),i=se(),r=ns();class o{constructor(l){var a;this.refs={},this.dynamicAnchors={};let c;typeof l.schema=="object"&&(c=l.schema),this.schema=l.schema,this.schemaId=l.schemaId,this.root=l.root||this,this.baseId=(a=l.baseId)!==null&&a!==void 0?a:(0,n.normalizeId)(c?.[l.schemaId||"$id"]),this.schemaPath=l.schemaPath,this.localRefs=l.localRefs,this.meta=l.meta,this.$async=c?.$async,this.refs={}}}we.SchemaEnv=o;function d(h){const l=p.call(this,h);if(l)return l;const a=(0,n.getFullPath)(this.opts.uriResolver,h.root.baseId),{es5:c,lines:y}=this.opts.code,{ownProperties:u}=this.opts,m=new t.CodeGen(this.scope,{es5:c,lines:y,ownProperties:u});let S;h.$async&&(S=m.scopeValue("Error",{ref:e.default,code:(0,t._)`require("ajv/dist/runtime/validation_error").default`}));const I=m.scopeName("validate");h.validateName=I;const x={gen:m,allErrors:this.opts.allErrors,data:s.default.data,parentData:s.default.parentData,parentDataProperty:s.default.parentDataProperty,dataNames:[s.default.data],dataPathArr:[t.nil],dataLevel:0,dataTypes:[],definedProperties:new Set,topSchemaRef:m.scopeValue("schema",this.opts.code.source===!0?{ref:h.schema,code:(0,t.stringify)(h.schema)}:{ref:h.schema}),validateName:I,ValidationError:S,schema:h.schema,schemaEnv:h,rootId:a,baseId:h.baseId||a,schemaPath:t.nil,errSchemaPath:h.schemaPath||(this.opts.jtd?"":"#"),errorPath:(0,t._)`""`,opts:this.opts,self:this};let j;try{this._compilations.add(h),(0,r.validateFunctionCode)(x),m.optimize(this.opts.code.optimize);const L=m.toString();j=`${m.scopeRefs(s.default.scope)}return ${L}`,this.opts.code.process&&(j=this.opts.code.process(j,h));const G=new Function(`${s.default.self}`,`${s.default.scope}`,j)(this,this.scope.get());if(this.scope.value(I,{ref:G}),G.errors=null,G.schema=h.schema,G.schemaEnv=h,h.$async&&(G.$async=!0),this.opts.code.source===!0&&(G.source={validateName:I,validateCode:L,scopeValues:m._values}),this.opts.unevaluated){const{props:Z,items:ee}=x;G.evaluated={props:Z instanceof t.Name?void 0:Z,items:ee instanceof t.Name?void 0:ee,dynamicProps:Z instanceof t.Name,dynamicItems:ee instanceof t.Name},G.source&&(G.source.evaluated=(0,t.stringify)(G.evaluated))}return h.validate=G,h}catch(L){throw delete h.validate,delete h.validateName,j&&this.logger.error("Error compiling schema, function code:",j),L}finally{this._compilations.delete(h)}}we.compileSchema=d;function f(h,l,a){var c;a=(0,n.resolveUrl)(this.opts.uriResolver,l,a);const y=h.refs[a];if(y)return y;let u=v.call(this,h,a);if(u===void 0){const m=(c=h.localRefs)===null||c===void 0?void 0:c[a],{schemaId:S}=this.opts;m&&(u=new o({schema:m,schemaId:S,root:h,baseId:l}))}if(u!==void 0)return h.refs[a]=w.call(this,u)}we.resolveRef=f;function w(h){return(0,n.inlineRef)(h.schema,this.opts.inlineRefs)?h.schema:h.validate?h:d.call(this,h)}function p(h){for(const l of this._compilations)if($(l,h))return l}we.getCompilingSchema=p;function $(h,l){return h.schema===l.schema&&h.root===l.root&&h.baseId===l.baseId}function v(h,l){let a;for(;typeof(a=this.refs[l])=="string";)l=a;return a||this.schemas[l]||_.call(this,h,l)}function _(h,l){const a=this.opts.uriResolver.parse(l),c=(0,n._getFullPath)(this.opts.uriResolver,a);let y=(0,n.getFullPath)(this.opts.uriResolver,h.baseId,void 0);if(Object.keys(h.schema).length>0&&c===y)return b.call(this,a,h);const u=(0,n.normalizeId)(c),m=this.refs[u]||this.schemas[u];if(typeof m=="string"){const S=_.call(this,h,m);return typeof S?.schema!="object"?void 0:b.call(this,a,S)}if(typeof m?.schema=="object"){if(m.validate||d.call(this,m),u===(0,n.normalizeId)(l)){const{schema:S}=m,{schemaId:I}=this.opts,x=S[I];return x&&(y=(0,n.resolveUrl)(this.opts.uriResolver,y,x)),new o({schema:S,schemaId:I,root:h,baseId:y})}return b.call(this,a,m)}}we.resolveSchema=_;const k=new Set(["properties","patternProperties","enum","dependencies","definitions"]);function b(h,{baseId:l,schema:a,root:c}){var y;if(((y=h.fragment)===null||y===void 0?void 0:y[0])!=="/")return;for(const S of h.fragment.slice(1).split("/")){if(typeof a=="boolean")return;const I=a[(0,i.unescapeFragment)(S)];if(I===void 0)return;a=I;const x=typeof a=="object"&&a[this.opts.schemaId];!k.has(S)&&x&&(l=(0,n.resolveUrl)(this.opts.uriResolver,l,x))}let u;if(typeof a!="boolean"&&a.$ref&&!(0,i.schemaHasRulesButRef)(a,this.RULES)){const S=(0,n.resolveUrl)(this.opts.uriResolver,l,a.$ref);u=_.call(this,c,S)}const{schemaId:m}=this.opts;if(u=u||new o({schema:a,schemaId:m,root:c,baseId:l}),u.schema!==u.root.schema)return u}return we}const yo="https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#",go="Meta-schema for $data reference (JSON AnySchema extension proposal)",vo="object",wo=["$data"],_o={$data:{type:"string",anyOf:[{format:"relative-json-pointer"},{format:"json-pointer"}]}},ko=!1,bo={$id:yo,description:go,type:vo,required:wo,properties:_o,additionalProperties:ko};var yt={},nt={exports:{}},_s,gn;function Yi(){if(gn)return _s;gn=1;const t=RegExp.prototype.test.bind(/^[\da-f]{8}-[\da-f]{4}-[\da-f]{4}-[\da-f]{4}-[\da-f]{12}$/iu),e=RegExp.prototype.test.bind(/^(?:(?:25[0-5]|2[0-4]\d|1\d{2}|[1-9]\d|\d)\.){3}(?:25[0-5]|2[0-4]\d|1\d{2}|[1-9]\d|\d)$/u);function s(v){let _="",k=0,b=0;for(b=0;b<v.length;b++)if(k=v[b].charCodeAt(0),k!==48){if(!(k>=48&&k<=57||k>=65&&k<=70||k>=97&&k<=102))return"";_+=v[b];break}for(b+=1;b<v.length;b++){if(k=v[b].charCodeAt(0),!(k>=48&&k<=57||k>=65&&k<=70||k>=97&&k<=102))return"";_+=v[b]}return _}const n=RegExp.prototype.test.bind(/[^!"$&'()*+,\-.;=_`a-z{}~]/u);function i(v){return v.length=0,!0}function r(v,_,k){if(v.length){const b=s(v);if(b!=="")_.push(b);else return k.error=!0,!1;v.length=0}return!0}function o(v){let _=0;const k={error:!1,address:"",zone:""},b=[],h=[];let l=!1,a=!1,c=r;for(let y=0;y<v.length;y++){const u=v[y];if(!(u==="["||u==="]"))if(u===":"){if(l===!0&&(a=!0),!c(h,b,k))break;if(++_>7){k.error=!0;break}y>0&&v[y-1]===":"&&(l=!0),b.push(":");continue}else if(u==="%"){if(!c(h,b,k))break;c=i}else{h.push(u);continue}}return h.length&&(c===i?k.zone=h.join(""):a?b.push(h.join("")):b.push(s(h))),k.address=b.join(""),k}function d(v){if(f(v,":")<2)return{host:v,isIPV6:!1};const _=o(v);if(_.error)return{host:v,isIPV6:!1};{let k=_.address,b=_.address;return _.zone&&(k+="%"+_.zone,b+="%25"+_.zone),{host:k,isIPV6:!0,escapedHost:b}}}function f(v,_){let k=0;for(let b=0;b<v.length;b++)v[b]===_&&k++;return k}function w(v){let _=v;const k=[];let b=-1,h=0;for(;h=_.length;){if(h===1){if(_===".")break;if(_==="/"){k.push("/");break}else{k.push(_);break}}else if(h===2){if(_[0]==="."){if(_[1]===".")break;if(_[1]==="/"){_=_.slice(2);continue}}else if(_[0]==="/"&&(_[1]==="."||_[1]==="/")){k.push("/");break}}else if(h===3&&_==="/.."){k.length!==0&&k.pop(),k.push("/");break}if(_[0]==="."){if(_[1]==="."){if(_[2]==="/"){_=_.slice(3);continue}}else if(_[1]==="/"){_=_.slice(2);continue}}else if(_[0]==="/"&&_[1]==="."){if(_[2]==="/"){_=_.slice(2);continue}else if(_[2]==="."&&_[3]==="/"){_=_.slice(3),k.length!==0&&k.pop();continue}}if((b=_.indexOf("/",1))===-1){k.push(_);break}else k.push(_.slice(0,b)),_=_.slice(b)}return k.join("")}function p(v,_){const k=_!==!0?escape:unescape;return v.scheme!==void 0&&(v.scheme=k(v.scheme)),v.userinfo!==void 0&&(v.userinfo=k(v.userinfo)),v.host!==void 0&&(v.host=k(v.host)),v.path!==void 0&&(v.path=k(v.path)),v.query!==void 0&&(v.query=k(v.query)),v.fragment!==void 0&&(v.fragment=k(v.fragment)),v}function $(v){const _=[];if(v.userinfo!==void 0&&(_.push(v.userinfo),_.push("@")),v.host!==void 0){let k=unescape(v.host);if(!e(k)){const b=d(k);b.isIPV6===!0?k=`[${b.escapedHost}]`:k=v.host}_.push(k)}return(typeof v.port=="number"||typeof v.port=="string")&&(_.push(":"),_.push(String(v.port))),_.length?_.join(""):void 0}return _s={nonSimpleDomain:n,recomposeAuthority:$,normalizeComponentEncoding:p,removeDotSegments:w,isIPv4:e,isUUID:t,normalizeIPv6:d,stringArrayToHexStripped:s},_s}var ks,vn;function $o(){if(vn)return ks;vn=1;const{isUUID:t}=Yi(),e=/([\da-z][\d\-a-z]{0,31}):((?:[\w!$'()*+,\-.:;=@]|%[\da-f]{2})+)/iu,s=["http","https","ws","wss","urn","urn:uuid"];function n(u){return s.indexOf(u)!==-1}function i(u){return u.secure===!0?!0:u.secure===!1?!1:u.scheme?u.scheme.length===3&&(u.scheme[0]==="w"||u.scheme[0]==="W")&&(u.scheme[1]==="s"||u.scheme[1]==="S")&&(u.scheme[2]==="s"||u.scheme[2]==="S"):!1}function r(u){return u.host||(u.error=u.error||"HTTP URIs must have a host."),u}function o(u){const m=String(u.scheme).toLowerCase()==="https";return(u.port===(m?443:80)||u.port==="")&&(u.port=void 0),u.path||(u.path="/"),u}function d(u){return u.secure=i(u),u.resourceName=(u.path||"/")+(u.query?"?"+u.query:""),u.path=void 0,u.query=void 0,u}function f(u){if((u.port===(i(u)?443:80)||u.port==="")&&(u.port=void 0),typeof u.secure=="boolean"&&(u.scheme=u.secure?"wss":"ws",u.secure=void 0),u.resourceName){const[m,S]=u.resourceName.split("?");u.path=m&&m!=="/"?m:void 0,u.query=S,u.resourceName=void 0}return u.fragment=void 0,u}function w(u,m){if(!u.path)return u.error="URN can not be parsed",u;const S=u.path.match(e);if(S){const I=m.scheme||u.scheme||"urn";u.nid=S[1].toLowerCase(),u.nss=S[2];const x=`${I}:${m.nid||u.nid}`,j=y(x);u.path=void 0,j&&(u=j.parse(u,m))}else u.error=u.error||"URN can not be parsed.";return u}function p(u,m){if(u.nid===void 0)throw new Error("URN without nid cannot be serialized");const S=m.scheme||u.scheme||"urn",I=u.nid.toLowerCase(),x=`${S}:${m.nid||I}`,j=y(x);j&&(u=j.serialize(u,m));const L=u,U=u.nss;return L.path=`${I||m.nid}:${U}`,m.skipEscape=!0,L}function $(u,m){const S=u;return S.uuid=S.nss,S.nss=void 0,!m.tolerant&&(!S.uuid||!t(S.uuid))&&(S.error=S.error||"UUID is not valid."),S}function v(u){const m=u;return m.nss=(u.uuid||"").toLowerCase(),m}const _={scheme:"http",domainHost:!0,parse:r,serialize:o},k={scheme:"https",domainHost:_.domainHost,parse:r,serialize:o},b={scheme:"ws",domainHost:!0,parse:d,serialize:f},h={scheme:"wss",domainHost:b.domainHost,parse:b.parse,serialize:b.serialize},c={http:_,https:k,ws:b,wss:h,urn:{scheme:"urn",parse:w,serialize:p,skipNormalize:!0},"urn:uuid":{scheme:"urn:uuid",parse:$,serialize:v,skipNormalize:!0}};Object.setPrototypeOf(c,null);function y(u){return u&&(c[u]||c[u.toLowerCase()])||void 0}return ks={wsIsSecure:i,SCHEMES:c,isValidSchemeName:n,getSchemeHandler:y},ks}var wn;function So(){if(wn)return nt.exports;wn=1;const{normalizeIPv6:t,removeDotSegments:e,recomposeAuthority:s,normalizeComponentEncoding:n,isIPv4:i,nonSimpleDomain:r}=Yi(),{SCHEMES:o,getSchemeHandler:d}=$o();function f(h,l){return typeof h=="string"?h=v(k(h,l),l):typeof h=="object"&&(h=k(v(h,l),l)),h}function w(h,l,a){const c=a?Object.assign({scheme:"null"},a):{scheme:"null"},y=p(k(h,c),k(l,c),c,!0);return c.skipEscape=!0,v(y,c)}function p(h,l,a,c){const y={};return c||(h=k(v(h,a),a),l=k(v(l,a),a)),a=a||{},!a.tolerant&&l.scheme?(y.scheme=l.scheme,y.userinfo=l.userinfo,y.host=l.host,y.port=l.port,y.path=e(l.path||""),y.query=l.query):(l.userinfo!==void 0||l.host!==void 0||l.port!==void 0?(y.userinfo=l.userinfo,y.host=l.host,y.port=l.port,y.path=e(l.path||""),y.query=l.query):(l.path?(l.path[0]==="/"?y.path=e(l.path):((h.userinfo!==void 0||h.host!==void 0||h.port!==void 0)&&!h.path?y.path="/"+l.path:h.path?y.path=h.path.slice(0,h.path.lastIndexOf("/")+1)+l.path:y.path=l.path,y.path=e(y.path)),y.query=l.query):(y.path=h.path,l.query!==void 0?y.query=l.query:y.query=h.query),y.userinfo=h.userinfo,y.host=h.host,y.port=h.port),y.scheme=h.scheme),y.fragment=l.fragment,y}function $(h,l,a){return typeof h=="string"?(h=unescape(h),h=v(n(k(h,a),!0),{...a,skipEscape:!0})):typeof h=="object"&&(h=v(n(h,!0),{...a,skipEscape:!0})),typeof l=="string"?(l=unescape(l),l=v(n(k(l,a),!0),{...a,skipEscape:!0})):typeof l=="object"&&(l=v(n(l,!0),{...a,skipEscape:!0})),h.toLowerCase()===l.toLowerCase()}function v(h,l){const a={host:h.host,scheme:h.scheme,userinfo:h.userinfo,port:h.port,path:h.path,query:h.query,nid:h.nid,nss:h.nss,uuid:h.uuid,fragment:h.fragment,reference:h.reference,resourceName:h.resourceName,secure:h.secure,error:""},c=Object.assign({},l),y=[],u=d(c.scheme||a.scheme);u&&u.serialize&&u.serialize(a,c),a.path!==void 0&&(c.skipEscape?a.path=unescape(a.path):(a.path=escape(a.path),a.scheme!==void 0&&(a.path=a.path.split("%3A").join(":")))),c.reference!=="suffix"&&a.scheme&&y.push(a.scheme,":");const m=s(a);if(m!==void 0&&(c.reference!=="suffix"&&y.push("//"),y.push(m),a.path&&a.path[0]!=="/"&&y.push("/")),a.path!==void 0){let S=a.path;!c.absolutePath&&(!u||!u.absolutePath)&&(S=e(S)),m===void 0&&S[0]==="/"&&S[1]==="/"&&(S="/%2F"+S.slice(2)),y.push(S)}return a.query!==void 0&&y.push("?",a.query),a.fragment!==void 0&&y.push("#",a.fragment),y.join("")}const _=/^(?:([^#/:?]+):)?(?:\/\/((?:([^#/?@]*)@)?(\[[^#/?\]]+\]|[^#/:?]*)(?::(\d*))?))?([^#?]*)(?:\?([^#]*))?(?:#((?:.|[\n\r])*))?/u;function k(h,l){const a=Object.assign({},l),c={scheme:void 0,userinfo:void 0,host:"",port:void 0,path:"",query:void 0,fragment:void 0};let y=!1;a.reference==="suffix"&&(a.scheme?h=a.scheme+":"+h:h="//"+h);const u=h.match(_);if(u){if(c.scheme=u[1],c.userinfo=u[3],c.host=u[4],c.port=parseInt(u[5],10),c.path=u[6]||"",c.query=u[7],c.fragment=u[8],isNaN(c.port)&&(c.port=u[5]),c.host)if(i(c.host)===!1){const I=t(c.host);c.host=I.host.toLowerCase(),y=I.isIPV6}else y=!0;c.scheme===void 0&&c.userinfo===void 0&&c.host===void 0&&c.port===void 0&&c.query===void 0&&!c.path?c.reference="same-document":c.scheme===void 0?c.reference="relative":c.fragment===void 0?c.reference="absolute":c.reference="uri",a.reference&&a.reference!=="suffix"&&a.reference!==c.reference&&(c.error=c.error||"URI is not a "+a.reference+" reference.");const m=d(a.scheme||c.scheme);if(!a.unicodeSupport&&(!m||!m.unicodeSupport)&&c.host&&(a.domainHost||m&&m.domainHost)&&y===!1&&r(c.host))try{c.host=URL.domainToASCII(c.host.toLowerCase())}catch(S){c.error=c.error||"Host's domain name can not be converted to ASCII: "+S}(!m||m&&!m.skipNormalize)&&(h.indexOf("%")!==-1&&(c.scheme!==void 0&&(c.scheme=unescape(c.scheme)),c.host!==void 0&&(c.host=unescape(c.host))),c.path&&(c.path=escape(unescape(c.path))),c.fragment&&(c.fragment=encodeURI(decodeURIComponent(c.fragment)))),m&&m.parse&&m.parse(c,a)}else c.error=c.error||"URI can not be parsed.";return c}const b={SCHEMES:o,normalize:f,resolve:w,resolveComponent:p,equal:$,serialize:v,parse:k};return nt.exports=b,nt.exports.default=b,nt.exports.fastUri=b,nt.exports}var _n;function Po(){if(_n)return yt;_n=1,Object.defineProperty(yt,"__esModule",{value:!0});const t=So();return t.code='require("ajv/dist/runtime/uri").default',yt.default=t,yt}var kn;function Eo(){return kn||(kn=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.CodeGen=t.Name=t.nil=t.stringify=t.str=t._=t.KeywordCxt=void 0;var e=ns();Object.defineProperty(t,"KeywordCxt",{enumerable:!0,get:function(){return e.KeywordCxt}});var s=Y();Object.defineProperty(t,"_",{enumerable:!0,get:function(){return s._}}),Object.defineProperty(t,"str",{enumerable:!0,get:function(){return s.str}}),Object.defineProperty(t,"stringify",{enumerable:!0,get:function(){return s.stringify}}),Object.defineProperty(t,"nil",{enumerable:!0,get:function(){return s.nil}}),Object.defineProperty(t,"Name",{enumerable:!0,get:function(){return s.Name}}),Object.defineProperty(t,"CodeGen",{enumerable:!0,get:function(){return s.CodeGen}});const n=Ms(),i=is(),r=Wi(),o=Ds(),d=Y(),f=ss(),w=Yt(),p=se(),$=bo,v=Po(),_=(A,T)=>new RegExp(A,T);_.code="new RegExp";const k=["removeAdditional","useDefaults","coerceTypes"],b=new Set(["validate","serialize","parse","wrapper","root","schema","keyword","pattern","formats","validate$data","func","obj","Error"]),h={errorDataPath:"",format:"`validateFormats: false` can be used instead.",nullable:'"nullable" keyword is supported by default.',jsonPointers:"Deprecated jsPropertySyntax can be used instead.",extendRefs:"Deprecated ignoreKeywordsWithRef can be used instead.",missingRefs:"Pass empty schema with $id that should be ignored to ajv.addSchema.",processCode:"Use option `code: {process: (code, schemaEnv: object) => string}`",sourceCode:"Use option `code: {source: true}`",strictDefaults:"It is default now, see option `strict`.",strictKeywords:"It is default now, see option `strict`.",uniqueItems:'"uniqueItems" keyword is always validated.',unknownFormats:"Disable strict mode or pass `true` to `ajv.addFormat` (or `formats` option).",cache:"Map is used as cache, schema object as key.",serialize:"Map is used as cache, schema object as key.",ajvErrors:"It is default now."},l={ignoreKeywordsWithRef:"",jsPropertySyntax:"",unicode:'"minLength"/"maxLength" account for unicode characters by default.'},a=200;function c(A){var T,D,N,g,P,R,F,B,Q,W,E,C,M,q,V,X,ce,$e,ge,ve,de,Ge,be,rs,os;const Ye=A.strict,as=(T=A.code)===null||T===void 0?void 0:T.optimize,As=as===!0||as===void 0?1:as||0,Ls=(N=(D=A.code)===null||D===void 0?void 0:D.regExp)!==null&&N!==void 0?N:_,nr=(g=A.uriResolver)!==null&&g!==void 0?g:v.default;return{strictSchema:(R=(P=A.strictSchema)!==null&&P!==void 0?P:Ye)!==null&&R!==void 0?R:!0,strictNumbers:(B=(F=A.strictNumbers)!==null&&F!==void 0?F:Ye)!==null&&B!==void 0?B:!0,strictTypes:(W=(Q=A.strictTypes)!==null&&Q!==void 0?Q:Ye)!==null&&W!==void 0?W:"log",strictTuples:(C=(E=A.strictTuples)!==null&&E!==void 0?E:Ye)!==null&&C!==void 0?C:"log",strictRequired:(q=(M=A.strictRequired)!==null&&M!==void 0?M:Ye)!==null&&q!==void 0?q:!1,code:A.code?{...A.code,optimize:As,regExp:Ls}:{optimize:As,regExp:Ls},loopRequired:(V=A.loopRequired)!==null&&V!==void 0?V:a,loopEnum:(X=A.loopEnum)!==null&&X!==void 0?X:a,meta:(ce=A.meta)!==null&&ce!==void 0?ce:!0,messages:($e=A.messages)!==null&&$e!==void 0?$e:!0,inlineRefs:(ge=A.inlineRefs)!==null&&ge!==void 0?ge:!0,schemaId:(ve=A.schemaId)!==null&&ve!==void 0?ve:"$id",addUsedSchema:(de=A.addUsedSchema)!==null&&de!==void 0?de:!0,validateSchema:(Ge=A.validateSchema)!==null&&Ge!==void 0?Ge:!0,validateFormats:(be=A.validateFormats)!==null&&be!==void 0?be:!0,unicodeRegExp:(rs=A.unicodeRegExp)!==null&&rs!==void 0?rs:!0,int32range:(os=A.int32range)!==null&&os!==void 0?os:!0,uriResolver:nr}}class y{constructor(T={}){this.schemas={},this.refs={},this.formats={},this._compilations=new Set,this._loading={},this._cache=new Map,T=this.opts={...T,...c(T)};const{es5:D,lines:N}=this.opts.code;this.scope=new d.ValueScope({scope:{},prefixes:b,es5:D,lines:N}),this.logger=U(T.logger);const g=T.validateFormats;T.validateFormats=!1,this.RULES=(0,r.getRules)(),u.call(this,h,T,"NOT SUPPORTED"),u.call(this,l,T,"DEPRECATED","warn"),this._metaOpts=j.call(this),T.formats&&I.call(this),this._addVocabularies(),this._addDefaultMetaSchema(),T.keywords&&x.call(this,T.keywords),typeof T.meta=="object"&&this.addMetaSchema(T.meta),S.call(this),T.validateFormats=g}_addVocabularies(){this.addKeyword("$async")}_addDefaultMetaSchema(){const{$data:T,meta:D,schemaId:N}=this.opts;let g=$;N==="id"&&(g={...$},g.id=g.$id,delete g.$id),D&&T&&this.addMetaSchema(g,g[N],!1)}defaultMeta(){const{meta:T,schemaId:D}=this.opts;return this.opts.defaultMeta=typeof T=="object"?T[D]||T:void 0}validate(T,D){let N;if(typeof T=="string"){if(N=this.getSchema(T),!N)throw new Error(`no schema with key or ref "${T}"`)}else N=this.compile(T);const g=N(D);return"$async"in N||(this.errors=N.errors),g}compile(T,D){const N=this._addSchema(T,D);return N.validate||this._compileSchemaEnv(N)}compileAsync(T,D){if(typeof this.opts.loadSchema!="function")throw new Error("options.loadSchema should be a function");const{loadSchema:N}=this.opts;return g.call(this,T,D);async function g(W,E){await P.call(this,W.$schema);const C=this._addSchema(W,E);return C.validate||R.call(this,C)}async function P(W){W&&!this.getSchema(W)&&await g.call(this,{$ref:W},!0)}async function R(W){try{return this._compileSchemaEnv(W)}catch(E){if(!(E instanceof i.default))throw E;return F.call(this,E),await B.call(this,E.missingSchema),R.call(this,W)}}function F({missingSchema:W,missingRef:E}){if(this.refs[W])throw new Error(`AnySchema ${W} is loaded but ${E} cannot be resolved`)}async function B(W){const E=await Q.call(this,W);this.refs[W]||await P.call(this,E.$schema),this.refs[W]||this.addSchema(E,W,D)}async function Q(W){const E=this._loading[W];if(E)return E;try{return await(this._loading[W]=N(W))}finally{delete this._loading[W]}}}addSchema(T,D,N,g=this.opts.validateSchema){if(Array.isArray(T)){for(const R of T)this.addSchema(R,void 0,N,g);return this}let P;if(typeof T=="object"){const{schemaId:R}=this.opts;if(P=T[R],P!==void 0&&typeof P!="string")throw new Error(`schema ${R} must be string`)}return D=(0,f.normalizeId)(D||P),this._checkUnique(D),this.schemas[D]=this._addSchema(T,N,D,g,!0),this}addMetaSchema(T,D,N=this.opts.validateSchema){return this.addSchema(T,D,!0,N),this}validateSchema(T,D){if(typeof T=="boolean")return!0;let N;if(N=T.$schema,N!==void 0&&typeof N!="string")throw new Error("$schema must be a string");if(N=N||this.opts.defaultMeta||this.defaultMeta(),!N)return this.logger.warn("meta-schema not available"),this.errors=null,!0;const g=this.validate(N,T);if(!g&&D){const P="schema is invalid: "+this.errorsText();if(this.opts.validateSchema==="log")this.logger.error(P);else throw new Error(P)}return g}getSchema(T){let D;for(;typeof(D=m.call(this,T))=="string";)T=D;if(D===void 0){const{schemaId:N}=this.opts,g=new o.SchemaEnv({schema:{},schemaId:N});if(D=o.resolveSchema.call(this,g,T),!D)return;this.refs[T]=D}return D.validate||this._compileSchemaEnv(D)}removeSchema(T){if(T instanceof RegExp)return this._removeAllSchemas(this.schemas,T),this._removeAllSchemas(this.refs,T),this;switch(typeof T){case"undefined":return this._removeAllSchemas(this.schemas),this._removeAllSchemas(this.refs),this._cache.clear(),this;case"string":{const D=m.call(this,T);return typeof D=="object"&&this._cache.delete(D.schema),delete this.schemas[T],delete this.refs[T],this}case"object":{const D=T;this._cache.delete(D);let N=T[this.opts.schemaId];return N&&(N=(0,f.normalizeId)(N),delete this.schemas[N],delete this.refs[N]),this}default:throw new Error("ajv.removeSchema: invalid parameter")}}addVocabulary(T){for(const D of T)this.addKeyword(D);return this}addKeyword(T,D){let N;if(typeof T=="string")N=T,typeof D=="object"&&(this.logger.warn("these parameters are deprecated, see docs for addKeyword"),D.keyword=N);else if(typeof T=="object"&&D===void 0){if(D=T,N=D.keyword,Array.isArray(N)&&!N.length)throw new Error("addKeywords: keyword must be string or non-empty array")}else throw new Error("invalid addKeywords parameters");if(Z.call(this,N,D),!D)return(0,p.eachItem)(N,P=>ee.call(this,P)),this;te.call(this,D);const g={...D,type:(0,w.getJSONTypes)(D.type),schemaType:(0,w.getJSONTypes)(D.schemaType)};return(0,p.eachItem)(N,g.type.length===0?P=>ee.call(this,P,g):P=>g.type.forEach(R=>ee.call(this,P,g,R))),this}getKeyword(T){const D=this.RULES.all[T];return typeof D=="object"?D.definition:!!D}removeKeyword(T){const{RULES:D}=this;delete D.keywords[T],delete D.all[T];for(const N of D.rules){const g=N.rules.findIndex(P=>P.keyword===T);g>=0&&N.rules.splice(g,1)}return this}addFormat(T,D){return typeof D=="string"&&(D=new RegExp(D)),this.formats[T]=D,this}errorsText(T=this.errors,{separator:D=", ",dataVar:N="data"}={}){return!T||T.length===0?"No errors":T.map(g=>`${N}${g.instancePath} ${g.message}`).reduce((g,P)=>g+D+P)}$dataMetaSchema(T,D){const N=this.RULES.all;T=JSON.parse(JSON.stringify(T));for(const g of D){const P=g.split("/").slice(1);let R=T;for(const F of P)R=R[F];for(const F in N){const B=N[F];if(typeof B!="object")continue;const{$data:Q}=B.definition,W=R[F];Q&&W&&(R[F]=oe(W))}}return T}_removeAllSchemas(T,D){for(const N in T){const g=T[N];(!D||D.test(N))&&(typeof g=="string"?delete T[N]:g&&!g.meta&&(this._cache.delete(g.schema),delete T[N]))}}_addSchema(T,D,N,g=this.opts.validateSchema,P=this.opts.addUsedSchema){let R;const{schemaId:F}=this.opts;if(typeof T=="object")R=T[F];else{if(this.opts.jtd)throw new Error("schema must be object");if(typeof T!="boolean")throw new Error("schema must be object or boolean")}let B=this._cache.get(T);if(B!==void 0)return B;N=(0,f.normalizeId)(R||N);const Q=f.getSchemaRefs.call(this,T,N);return B=new o.SchemaEnv({schema:T,schemaId:F,meta:D,baseId:N,localRefs:Q}),this._cache.set(B.schema,B),P&&!N.startsWith("#")&&(N&&this._checkUnique(N),this.refs[N]=B),g&&this.validateSchema(T,!0),B}_checkUnique(T){if(this.schemas[T]||this.refs[T])throw new Error(`schema with key or id "${T}" already exists`)}_compileSchemaEnv(T){if(T.meta?this._compileMetaSchema(T):o.compileSchema.call(this,T),!T.validate)throw new Error("ajv implementation error");return T.validate}_compileMetaSchema(T){const D=this.opts;this.opts=this._metaOpts;try{o.compileSchema.call(this,T)}finally{this.opts=D}}}y.ValidationError=n.default,y.MissingRefError=i.default,t.default=y;function u(A,T,D,N="error"){for(const g in A){const P=g;P in T&&this.logger[N](`${D}: option ${g}. ${A[P]}`)}}function m(A){return A=(0,f.normalizeId)(A),this.schemas[A]||this.refs[A]}function S(){const A=this.opts.schemas;if(A)if(Array.isArray(A))this.addSchema(A);else for(const T in A)this.addSchema(A[T],T)}function I(){for(const A in this.opts.formats){const T=this.opts.formats[A];T&&this.addFormat(A,T)}}function x(A){if(Array.isArray(A)){this.addVocabulary(A);return}this.logger.warn("keywords option as map is deprecated, pass array");for(const T in A){const D=A[T];D.keyword||(D.keyword=T),this.addKeyword(D)}}function j(){const A={...this.opts};for(const T of k)delete A[T];return A}const L={log(){},warn(){},error(){}};function U(A){if(A===!1)return L;if(A===void 0)return console;if(A.log&&A.warn&&A.error)return A;throw new Error("logger must implement log, warn and error methods")}const G=/^[a-z_$][a-z0-9_$:-]*$/i;function Z(A,T){const{RULES:D}=this;if((0,p.eachItem)(A,N=>{if(D.keywords[N])throw new Error(`Keyword ${N} is already defined`);if(!G.test(N))throw new Error(`Keyword ${N} has invalid name`)}),!!T&&T.$data&&!("code"in T||"validate"in T))throw new Error('$data keyword must have "code" or "validate" function')}function ee(A,T,D){var N;const g=T?.post;if(D&&g)throw new Error('keyword with "post" flag cannot have "type"');const{RULES:P}=this;let R=g?P.post:P.rules.find(({type:B})=>B===D);if(R||(R={type:D,rules:[]},P.rules.push(R)),P.keywords[A]=!0,!T)return;const F={keyword:A,definition:{...T,type:(0,w.getJSONTypes)(T.type),schemaType:(0,w.getJSONTypes)(T.schemaType)}};T.before?re.call(this,R,F,T.before):R.rules.push(F),P.all[A]=F,(N=T.implements)===null||N===void 0||N.forEach(B=>this.addKeyword(B))}function re(A,T,D){const N=A.rules.findIndex(g=>g.keyword===D);N>=0?A.rules.splice(N,0,T):(A.rules.push(T),this.logger.warn(`rule ${D} is not defined`))}function te(A){let{metaSchema:T}=A;T!==void 0&&(A.$data&&this.opts.$data&&(T=oe(T)),A.validateSchema=this.compile(T,!0))}const K={$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"};function oe(A){return{anyOf:[A,K]}}}(fs)),fs}var gt={},vt={},wt={},bn;function Io(){if(bn)return wt;bn=1,Object.defineProperty(wt,"__esModule",{value:!0});const t={keyword:"id",code(){throw new Error('NOT SUPPORTED: keyword "id", use "$id" for schema ID')}};return wt.default=t,wt}var Le={},$n;function To(){if($n)return Le;$n=1,Object.defineProperty(Le,"__esModule",{value:!0}),Le.callRef=Le.getValidate=void 0;const t=is(),e=Ie(),s=Y(),n=ze(),i=Ds(),r=se(),o={keyword:"$ref",schemaType:"string",code(w){const{gen:p,schema:$,it:v}=w,{baseId:_,schemaEnv:k,validateName:b,opts:h,self:l}=v,{root:a}=k;if(($==="#"||$==="#/")&&_===a.baseId)return y();const c=i.resolveRef.call(l,a,_,$);if(c===void 0)throw new t.default(v.opts.uriResolver,_,$);if(c instanceof i.SchemaEnv)return u(c);return m(c);function y(){if(k===a)return f(w,b,k,k.$async);const S=p.scopeValue("root",{ref:a});return f(w,(0,s._)`${S}.validate`,a,a.$async)}function u(S){const I=d(w,S);f(w,I,S,S.$async)}function m(S){const I=p.scopeValue("schema",h.code.source===!0?{ref:S,code:(0,s.stringify)(S)}:{ref:S}),x=p.name("valid"),j=w.subschema({schema:S,dataTypes:[],schemaPath:s.nil,topSchemaRef:I,errSchemaPath:$},x);w.mergeEvaluated(j),w.ok(x)}}};function d(w,p){const{gen:$}=w;return p.validate?$.scopeValue("validate",{ref:p.validate}):(0,s._)`${$.scopeValue("wrapper",{ref:p})}.validate`}Le.getValidate=d;function f(w,p,$,v){const{gen:_,it:k}=w,{allErrors:b,schemaEnv:h,opts:l}=k,a=l.passContext?n.default.this:s.nil;v?c():y();function c(){if(!h.$async)throw new Error("async schema referenced by sync schema");const S=_.let("valid");_.try(()=>{_.code((0,s._)`await ${(0,e.callValidateCode)(w,p,a)}`),m(p),b||_.assign(S,!0)},I=>{_.if((0,s._)`!(${I} instanceof ${k.ValidationError})`,()=>_.throw(I)),u(I),b||_.assign(S,!1)}),w.ok(S)}function y(){w.result((0,e.callValidateCode)(w,p,a),()=>m(p),()=>u(p))}function u(S){const I=(0,s._)`${S}.errors`;_.assign(n.default.vErrors,(0,s._)`${n.default.vErrors} === null ? ${I} : ${n.default.vErrors}.concat(${I})`),_.assign(n.default.errors,(0,s._)`${n.default.vErrors}.length`)}function m(S){var I;if(!k.opts.unevaluated)return;const x=(I=$?.validate)===null||I===void 0?void 0:I.evaluated;if(k.props!==!0)if(x&&!x.dynamicProps)x.props!==void 0&&(k.props=r.mergeEvaluated.props(_,x.props,k.props));else{const j=_.var("props",(0,s._)`${S}.evaluated.props`);k.props=r.mergeEvaluated.props(_,j,k.props,s.Name)}if(k.items!==!0)if(x&&!x.dynamicItems)x.items!==void 0&&(k.items=r.mergeEvaluated.items(_,x.items,k.items));else{const j=_.var("items",(0,s._)`${S}.evaluated.items`);k.items=r.mergeEvaluated.items(_,j,k.items,s.Name)}}}return Le.callRef=f,Le.default=o,Le}var Sn;function Oo(){if(Sn)return vt;Sn=1,Object.defineProperty(vt,"__esModule",{value:!0});const t=Io(),e=To(),s=["$schema","$id","$defs","$vocabulary",{keyword:"$comment"},"definitions",t.default,e.default];return vt.default=s,vt}var _t={},kt={},Pn;function No(){if(Pn)return kt;Pn=1,Object.defineProperty(kt,"__esModule",{value:!0});const t=Y(),e=t.operators,s={maximum:{okStr:"<=",ok:e.LTE,fail:e.GT},minimum:{okStr:">=",ok:e.GTE,fail:e.LT},exclusiveMaximum:{okStr:"<",ok:e.LT,fail:e.GTE},exclusiveMinimum:{okStr:">",ok:e.GT,fail:e.LTE}},n={message:({keyword:r,schemaCode:o})=>(0,t.str)`must be ${s[r].okStr} ${o}`,params:({keyword:r,schemaCode:o})=>(0,t._)`{comparison: ${s[r].okStr}, limit: ${o}}`},i={keyword:Object.keys(s),type:"number",schemaType:"number",$data:!0,error:n,code(r){const{keyword:o,data:d,schemaCode:f}=r;r.fail$data((0,t._)`${d} ${s[o].fail} ${f} || isNaN(${d})`)}};return kt.default=i,kt}var bt={},En;function Co(){if(En)return bt;En=1,Object.defineProperty(bt,"__esModule",{value:!0});const t=Y(),s={keyword:"multipleOf",type:"number",schemaType:"number",$data:!0,error:{message:({schemaCode:n})=>(0,t.str)`must be multiple of ${n}`,params:({schemaCode:n})=>(0,t._)`{multipleOf: ${n}}`},code(n){const{gen:i,data:r,schemaCode:o,it:d}=n,f=d.opts.multipleOfPrecision,w=i.let("res"),p=f?(0,t._)`Math.abs(Math.round(${w}) - ${w}) > 1e-${f}`:(0,t._)`${w} !== parseInt(${w})`;n.fail$data((0,t._)`(${o} === 0 || (${w} = ${r}/${o}, ${p}))`)}};return bt.default=s,bt}var $t={},St={},In;function xo(){if(In)return St;In=1,Object.defineProperty(St,"__esModule",{value:!0});function t(e){const s=e.length;let n=0,i=0,r;for(;i<s;)n++,r=e.charCodeAt(i++),r>=55296&&r<=56319&&i<s&&(r=e.charCodeAt(i),(r&64512)===56320&&i++);return n}return St.default=t,t.code='require("ajv/dist/runtime/ucs2length").default',St}var Tn;function Ro(){if(Tn)return $t;Tn=1,Object.defineProperty($t,"__esModule",{value:!0});const t=Y(),e=se(),s=xo(),i={keyword:["maxLength","minLength"],type:"string",schemaType:"number",$data:!0,error:{message({keyword:r,schemaCode:o}){const d=r==="maxLength"?"more":"fewer";return(0,t.str)`must NOT have ${d} than ${o} characters`},params:({schemaCode:r})=>(0,t._)`{limit: ${r}}`},code(r){const{keyword:o,data:d,schemaCode:f,it:w}=r,p=o==="maxLength"?t.operators.GT:t.operators.LT,$=w.opts.unicode===!1?(0,t._)`${d}.length`:(0,t._)`${(0,e.useFunc)(r.gen,s.default)}(${d})`;r.fail$data((0,t._)`${$} ${p} ${f}`)}};return $t.default=i,$t}var Pt={},On;function Mo(){if(On)return Pt;On=1,Object.defineProperty(Pt,"__esModule",{value:!0});const t=Ie(),e=Y(),n={keyword:"pattern",type:"string",schemaType:"string",$data:!0,error:{message:({schemaCode:i})=>(0,e.str)`must match pattern "${i}"`,params:({schemaCode:i})=>(0,e._)`{pattern: ${i}}`},code(i){const{data:r,$data:o,schema:d,schemaCode:f,it:w}=i,p=w.opts.unicodeRegExp?"u":"",$=o?(0,e._)`(new RegExp(${f}, ${p}))`:(0,t.usePattern)(i,d);i.fail$data((0,e._)`!${$}.test(${r})`)}};return Pt.default=n,Pt}var Et={},Nn;function Do(){if(Nn)return Et;Nn=1,Object.defineProperty(Et,"__esModule",{value:!0});const t=Y(),s={keyword:["maxProperties","minProperties"],type:"object",schemaType:"number",$data:!0,error:{message({keyword:n,schemaCode:i}){const r=n==="maxProperties"?"more":"fewer";return(0,t.str)`must NOT have ${r} than ${i} properties`},params:({schemaCode:n})=>(0,t._)`{limit: ${n}}`},code(n){const{keyword:i,data:r,schemaCode:o}=n,d=i==="maxProperties"?t.operators.GT:t.operators.LT;n.fail$data((0,t._)`Object.keys(${r}).length ${d} ${o}`)}};return Et.default=s,Et}var It={},Cn;function jo(){if(Cn)return It;Cn=1,Object.defineProperty(It,"__esModule",{value:!0});const t=Ie(),e=Y(),s=se(),i={keyword:"required",type:"object",schemaType:"array",$data:!0,error:{message:({params:{missingProperty:r}})=>(0,e.str)`must have required property '${r}'`,params:({params:{missingProperty:r}})=>(0,e._)`{missingProperty: ${r}}`},code(r){const{gen:o,schema:d,schemaCode:f,data:w,$data:p,it:$}=r,{opts:v}=$;if(!p&&d.length===0)return;const _=d.length>=v.loopRequired;if($.allErrors?k():b(),v.strictRequired){const a=r.parentSchema.properties,{definedProperties:c}=r.it;for(const y of d)if(a?.[y]===void 0&&!c.has(y)){const u=$.schemaEnv.baseId+$.errSchemaPath,m=`required property "${y}" is not defined at "${u}" (strictRequired)`;(0,s.checkStrictMode)($,m,$.opts.strictRequired)}}function k(){if(_||p)r.block$data(e.nil,h);else for(const a of d)(0,t.checkReportMissingProp)(r,a)}function b(){const a=o.let("missing");if(_||p){const c=o.let("valid",!0);r.block$data(c,()=>l(a,c)),r.ok(c)}else o.if((0,t.checkMissingProp)(r,d,a)),(0,t.reportMissingProp)(r,a),o.else()}function h(){o.forOf("prop",f,a=>{r.setParams({missingProperty:a}),o.if((0,t.noPropertyInData)(o,w,a,v.ownProperties),()=>r.error())})}function l(a,c){r.setParams({missingProperty:a}),o.forOf(a,f,()=>{o.assign(c,(0,t.propertyInData)(o,w,a,v.ownProperties)),o.if((0,e.not)(c),()=>{r.error(),o.break()})},e.nil)}}};return It.default=i,It}var Tt={},xn;function Ao(){if(xn)return Tt;xn=1,Object.defineProperty(Tt,"__esModule",{value:!0});const t=Y(),s={keyword:["maxItems","minItems"],type:"array",schemaType:"number",$data:!0,error:{message({keyword:n,schemaCode:i}){const r=n==="maxItems"?"more":"fewer";return(0,t.str)`must NOT have ${r} than ${i} items`},params:({schemaCode:n})=>(0,t._)`{limit: ${n}}`},code(n){const{keyword:i,data:r,schemaCode:o}=n,d=i==="maxItems"?t.operators.GT:t.operators.LT;n.fail$data((0,t._)`${r}.length ${d} ${o}`)}};return Tt.default=s,Tt}var Ot={},Nt={},Rn;function js(){if(Rn)return Nt;Rn=1,Object.defineProperty(Nt,"__esModule",{value:!0});const t=Xi();return t.code='require("ajv/dist/runtime/equal").default',Nt.default=t,Nt}var Mn;function Lo(){if(Mn)return Ot;Mn=1,Object.defineProperty(Ot,"__esModule",{value:!0});const t=Yt(),e=Y(),s=se(),n=js(),r={keyword:"uniqueItems",type:"array",schemaType:"boolean",$data:!0,error:{message:({params:{i:o,j:d}})=>(0,e.str)`must NOT have duplicate items (items ## ${d} and ${o} are identical)`,params:({params:{i:o,j:d}})=>(0,e._)`{i: ${o}, j: ${d}}`},code(o){const{gen:d,data:f,$data:w,schema:p,parentSchema:$,schemaCode:v,it:_}=o;if(!w&&!p)return;const k=d.let("valid"),b=$.items?(0,t.getSchemaTypes)($.items):[];o.block$data(k,h,(0,e._)`${v} === false`),o.ok(k);function h(){const y=d.let("i",(0,e._)`${f}.length`),u=d.let("j");o.setParams({i:y,j:u}),d.assign(k,!0),d.if((0,e._)`${y} > 1`,()=>(l()?a:c)(y,u))}function l(){return b.length>0&&!b.some(y=>y==="object"||y==="array")}function a(y,u){const m=d.name("item"),S=(0,t.checkDataTypes)(b,m,_.opts.strictNumbers,t.DataType.Wrong),I=d.const("indices",(0,e._)`{}`);d.for((0,e._)`;${y}--;`,()=>{d.let(m,(0,e._)`${f}[${y}]`),d.if(S,(0,e._)`continue`),b.length>1&&d.if((0,e._)`typeof ${m} == "string"`,(0,e._)`${m} += "_"`),d.if((0,e._)`typeof ${I}[${m}] == "number"`,()=>{d.assign(u,(0,e._)`${I}[${m}]`),o.error(),d.assign(k,!1).break()}).code((0,e._)`${I}[${m}] = ${y}`)})}function c(y,u){const m=(0,s.useFunc)(d,n.default),S=d.name("outer");d.label(S).for((0,e._)`;${y}--;`,()=>d.for((0,e._)`${u} = ${y}; ${u}--;`,()=>d.if((0,e._)`${m}(${f}[${y}], ${f}[${u}])`,()=>{o.error(),d.assign(k,!1).break(S)})))}}};return Ot.default=r,Ot}var Ct={},Dn;function qo(){if(Dn)return Ct;Dn=1,Object.defineProperty(Ct,"__esModule",{value:!0});const t=Y(),e=se(),s=js(),i={keyword:"const",$data:!0,error:{message:"must be equal to constant",params:({schemaCode:r})=>(0,t._)`{allowedValue: ${r}}`},code(r){const{gen:o,data:d,$data:f,schemaCode:w,schema:p}=r;f||p&&typeof p=="object"?r.fail$data((0,t._)`!${(0,e.useFunc)(o,s.default)}(${d}, ${w})`):r.fail((0,t._)`${p} !== ${d}`)}};return Ct.default=i,Ct}var xt={},jn;function zo(){if(jn)return xt;jn=1,Object.defineProperty(xt,"__esModule",{value:!0});const t=Y(),e=se(),s=js(),i={keyword:"enum",schemaType:"array",$data:!0,error:{message:"must be equal to one of the allowed values",params:({schemaCode:r})=>(0,t._)`{allowedValues: ${r}}`},code(r){const{gen:o,data:d,$data:f,schema:w,schemaCode:p,it:$}=r;if(!f&&w.length===0)throw new Error("enum must have non-empty array");const v=w.length>=$.opts.loopEnum;let _;const k=()=>_??(_=(0,e.useFunc)(o,s.default));let b;if(v||f)b=o.let("valid"),r.block$data(b,h);else{if(!Array.isArray(w))throw new Error("ajv implementation error");const a=o.const("vSchema",p);b=(0,t.or)(...w.map((c,y)=>l(a,y)))}r.pass(b);function h(){o.assign(b,!1),o.forOf("v",p,a=>o.if((0,t._)`${k()}(${d}, ${a})`,()=>o.assign(b,!0).break()))}function l(a,c){const y=w[c];return typeof y=="object"&&y!==null?(0,t._)`${k()}(${d}, ${a}[${c}])`:(0,t._)`${d} === ${y}`}}};return xt.default=i,xt}var An;function Uo(){if(An)return _t;An=1,Object.defineProperty(_t,"__esModule",{value:!0});const t=No(),e=Co(),s=Ro(),n=Mo(),i=Do(),r=jo(),o=Ao(),d=Lo(),f=qo(),w=zo(),p=[t.default,e.default,s.default,n.default,i.default,r.default,o.default,d.default,{keyword:"type",schemaType:["string","array"]},{keyword:"nullable",schemaType:"boolean"},f.default,w.default];return _t.default=p,_t}var Rt={},Ve={},Ln;function Qi(){if(Ln)return Ve;Ln=1,Object.defineProperty(Ve,"__esModule",{value:!0}),Ve.validateAdditionalItems=void 0;const t=Y(),e=se(),n={keyword:"additionalItems",type:"array",schemaType:["boolean","object"],before:"uniqueItems",error:{message:({params:{len:r}})=>(0,t.str)`must NOT have more than ${r} items`,params:({params:{len:r}})=>(0,t._)`{limit: ${r}}`},code(r){const{parentSchema:o,it:d}=r,{items:f}=o;if(!Array.isArray(f)){(0,e.checkStrictMode)(d,'"additionalItems" is ignored when "items" is not an array of schemas');return}i(r,f)}};function i(r,o){const{gen:d,schema:f,data:w,keyword:p,it:$}=r;$.items=!0;const v=d.const("len",(0,t._)`${w}.length`);if(f===!1)r.setParams({len:o.length}),r.pass((0,t._)`${v} <= ${o.length}`);else if(typeof f=="object"&&!(0,e.alwaysValidSchema)($,f)){const k=d.var("valid",(0,t._)`${v} <= ${o.length}`);d.if((0,t.not)(k),()=>_(k)),r.ok(k)}function _(k){d.forRange("i",o.length,v,b=>{r.subschema({keyword:p,dataProp:b,dataPropType:e.Type.Num},k),$.allErrors||d.if((0,t.not)(k),()=>d.break())})}}return Ve.validateAdditionalItems=i,Ve.default=n,Ve}var Mt={},Ze={},qn;function er(){if(qn)return Ze;qn=1,Object.defineProperty(Ze,"__esModule",{value:!0}),Ze.validateTuple=void 0;const t=Y(),e=se(),s=Ie(),n={keyword:"items",type:"array",schemaType:["object","array","boolean"],before:"uniqueItems",code(r){const{schema:o,it:d}=r;if(Array.isArray(o))return i(r,"additionalItems",o);d.items=!0,!(0,e.alwaysValidSchema)(d,o)&&r.ok((0,s.validateArray)(r))}};function i(r,o,d=r.schema){const{gen:f,parentSchema:w,data:p,keyword:$,it:v}=r;b(w),v.opts.unevaluated&&d.length&&v.items!==!0&&(v.items=e.mergeEvaluated.items(f,d.length,v.items));const _=f.name("valid"),k=f.const("len",(0,t._)`${p}.length`);d.forEach((h,l)=>{(0,e.alwaysValidSchema)(v,h)||(f.if((0,t._)`${k} > ${l}`,()=>r.subschema({keyword:$,schemaProp:l,dataProp:l},_)),r.ok(_))});function b(h){const{opts:l,errSchemaPath:a}=v,c=d.length,y=c===h.minItems&&(c===h.maxItems||h[o]===!1);if(l.strictTuples&&!y){const u=`"${$}" is ${c}-tuple, but minItems or maxItems/${o} are not specified or different at path "${a}"`;(0,e.checkStrictMode)(v,u,l.strictTuples)}}}return Ze.validateTuple=i,Ze.default=n,Ze}var zn;function Fo(){if(zn)return Mt;zn=1,Object.defineProperty(Mt,"__esModule",{value:!0});const t=er(),e={keyword:"prefixItems",type:"array",schemaType:["array"],before:"uniqueItems",code:s=>(0,t.validateTuple)(s,"items")};return Mt.default=e,Mt}var Dt={},Un;function Ho(){if(Un)return Dt;Un=1,Object.defineProperty(Dt,"__esModule",{value:!0});const t=Y(),e=se(),s=Ie(),n=Qi(),r={keyword:"items",type:"array",schemaType:["object","boolean"],before:"uniqueItems",error:{message:({params:{len:o}})=>(0,t.str)`must NOT have more than ${o} items`,params:({params:{len:o}})=>(0,t._)`{limit: ${o}}`},code(o){const{schema:d,parentSchema:f,it:w}=o,{prefixItems:p}=f;w.items=!0,!(0,e.alwaysValidSchema)(w,d)&&(p?(0,n.validateAdditionalItems)(o,p):o.ok((0,s.validateArray)(o)))}};return Dt.default=r,Dt}var jt={},Fn;function Bo(){if(Fn)return jt;Fn=1,Object.defineProperty(jt,"__esModule",{value:!0});const t=Y(),e=se(),n={keyword:"contains",type:"array",schemaType:["object","boolean"],before:"uniqueItems",trackErrors:!0,error:{message:({params:{min:i,max:r}})=>r===void 0?(0,t.str)`must contain at least ${i} valid item(s)`:(0,t.str)`must contain at least ${i} and no more than ${r} valid item(s)`,params:({params:{min:i,max:r}})=>r===void 0?(0,t._)`{minContains: ${i}}`:(0,t._)`{minContains: ${i}, maxContains: ${r}}`},code(i){const{gen:r,schema:o,parentSchema:d,data:f,it:w}=i;let p,$;const{minContains:v,maxContains:_}=d;w.opts.next?(p=v===void 0?1:v,$=_):p=1;const k=r.const("len",(0,t._)`${f}.length`);if(i.setParams({min:p,max:$}),$===void 0&&p===0){(0,e.checkStrictMode)(w,'"minContains" == 0 without "maxContains": "contains" keyword ignored');return}if($!==void 0&&p>$){(0,e.checkStrictMode)(w,'"minContains" > "maxContains" is always invalid'),i.fail();return}if((0,e.alwaysValidSchema)(w,o)){let c=(0,t._)`${k} >= ${p}`;$!==void 0&&(c=(0,t._)`${c} && ${k} <= ${$}`),i.pass(c);return}w.items=!0;const b=r.name("valid");$===void 0&&p===1?l(b,()=>r.if(b,()=>r.break())):p===0?(r.let(b,!0),$!==void 0&&r.if((0,t._)`${f}.length > 0`,h)):(r.let(b,!1),h()),i.result(b,()=>i.reset());function h(){const c=r.name("_valid"),y=r.let("count",0);l(c,()=>r.if(c,()=>a(y)))}function l(c,y){r.forRange("i",0,k,u=>{i.subschema({keyword:"contains",dataProp:u,dataPropType:e.Type.Num,compositeRule:!0},c),y()})}function a(c){r.code((0,t._)`${c}++`),$===void 0?r.if((0,t._)`${c} >= ${p}`,()=>r.assign(b,!0).break()):(r.if((0,t._)`${c} > ${$}`,()=>r.assign(b,!1).break()),p===1?r.assign(b,!0):r.if((0,t._)`${c} >= ${p}`,()=>r.assign(b,!0)))}}};return jt.default=n,jt}var bs={},Hn;function Go(){return Hn||(Hn=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.validateSchemaDeps=t.validatePropertyDeps=t.error=void 0;const e=Y(),s=se(),n=Ie();t.error={message:({params:{property:f,depsCount:w,deps:p}})=>{const $=w===1?"property":"properties";return(0,e.str)`must have ${$} ${p} when property ${f} is present`},params:({params:{property:f,depsCount:w,deps:p,missingProperty:$}})=>(0,e._)`{property: ${f},
    missingProperty: ${$},
    depsCount: ${w},
    deps: ${p}}`};const i={keyword:"dependencies",type:"object",schemaType:"object",error:t.error,code(f){const[w,p]=r(f);o(f,w),d(f,p)}};function r({schema:f}){const w={},p={};for(const $ in f){if($==="__proto__")continue;const v=Array.isArray(f[$])?w:p;v[$]=f[$]}return[w,p]}function o(f,w=f.schema){const{gen:p,data:$,it:v}=f;if(Object.keys(w).length===0)return;const _=p.let("missing");for(const k in w){const b=w[k];if(b.length===0)continue;const h=(0,n.propertyInData)(p,$,k,v.opts.ownProperties);f.setParams({property:k,depsCount:b.length,deps:b.join(", ")}),v.allErrors?p.if(h,()=>{for(const l of b)(0,n.checkReportMissingProp)(f,l)}):(p.if((0,e._)`${h} && (${(0,n.checkMissingProp)(f,b,_)})`),(0,n.reportMissingProp)(f,_),p.else())}}t.validatePropertyDeps=o;function d(f,w=f.schema){const{gen:p,data:$,keyword:v,it:_}=f,k=p.name("valid");for(const b in w)(0,s.alwaysValidSchema)(_,w[b])||(p.if((0,n.propertyInData)(p,$,b,_.opts.ownProperties),()=>{const h=f.subschema({keyword:v,schemaProp:b},k);f.mergeValidEvaluated(h,k)},()=>p.var(k,!0)),f.ok(k))}t.validateSchemaDeps=d,t.default=i}(bs)),bs}var At={},Bn;function Vo(){if(Bn)return At;Bn=1,Object.defineProperty(At,"__esModule",{value:!0});const t=Y(),e=se(),n={keyword:"propertyNames",type:"object",schemaType:["object","boolean"],error:{message:"property name must be valid",params:({params:i})=>(0,t._)`{propertyName: ${i.propertyName}}`},code(i){const{gen:r,schema:o,data:d,it:f}=i;if((0,e.alwaysValidSchema)(f,o))return;const w=r.name("valid");r.forIn("key",d,p=>{i.setParams({propertyName:p}),i.subschema({keyword:"propertyNames",data:p,dataTypes:["string"],propertyName:p,compositeRule:!0},w),r.if((0,t.not)(w),()=>{i.error(!0),f.allErrors||r.break()})}),i.ok(w)}};return At.default=n,At}var Lt={},Gn;function tr(){if(Gn)return Lt;Gn=1,Object.defineProperty(Lt,"__esModule",{value:!0});const t=Ie(),e=Y(),s=ze(),n=se(),r={keyword:"additionalProperties",type:["object"],schemaType:["boolean","object"],allowUndefined:!0,trackErrors:!0,error:{message:"must NOT have additional properties",params:({params:o})=>(0,e._)`{additionalProperty: ${o.additionalProperty}}`},code(o){const{gen:d,schema:f,parentSchema:w,data:p,errsCount:$,it:v}=o;if(!$)throw new Error("ajv implementation error");const{allErrors:_,opts:k}=v;if(v.props=!0,k.removeAdditional!=="all"&&(0,n.alwaysValidSchema)(v,f))return;const b=(0,t.allSchemaProperties)(w.properties),h=(0,t.allSchemaProperties)(w.patternProperties);l(),o.ok((0,e._)`${$} === ${s.default.errors}`);function l(){d.forIn("key",p,m=>{!b.length&&!h.length?y(m):d.if(a(m),()=>y(m))})}function a(m){let S;if(b.length>8){const I=(0,n.schemaRefOrVal)(v,w.properties,"properties");S=(0,t.isOwnProperty)(d,I,m)}else b.length?S=(0,e.or)(...b.map(I=>(0,e._)`${m} === ${I}`)):S=e.nil;return h.length&&(S=(0,e.or)(S,...h.map(I=>(0,e._)`${(0,t.usePattern)(o,I)}.test(${m})`))),(0,e.not)(S)}function c(m){d.code((0,e._)`delete ${p}[${m}]`)}function y(m){if(k.removeAdditional==="all"||k.removeAdditional&&f===!1){c(m);return}if(f===!1){o.setParams({additionalProperty:m}),o.error(),_||d.break();return}if(typeof f=="object"&&!(0,n.alwaysValidSchema)(v,f)){const S=d.name("valid");k.removeAdditional==="failing"?(u(m,S,!1),d.if((0,e.not)(S),()=>{o.reset(),c(m)})):(u(m,S),_||d.if((0,e.not)(S),()=>d.break()))}}function u(m,S,I){const x={keyword:"additionalProperties",dataProp:m,dataPropType:n.Type.Str};I===!1&&Object.assign(x,{compositeRule:!0,createErrors:!1,allErrors:!1}),o.subschema(x,S)}}};return Lt.default=r,Lt}var qt={},Vn;function Zo(){if(Vn)return qt;Vn=1,Object.defineProperty(qt,"__esModule",{value:!0});const t=ns(),e=Ie(),s=se(),n=tr(),i={keyword:"properties",type:"object",schemaType:"object",code(r){const{gen:o,schema:d,parentSchema:f,data:w,it:p}=r;p.opts.removeAdditional==="all"&&f.additionalProperties===void 0&&n.default.code(new t.KeywordCxt(p,n.default,"additionalProperties"));const $=(0,e.allSchemaProperties)(d);for(const h of $)p.definedProperties.add(h);p.opts.unevaluated&&$.length&&p.props!==!0&&(p.props=s.mergeEvaluated.props(o,(0,s.toHash)($),p.props));const v=$.filter(h=>!(0,s.alwaysValidSchema)(p,d[h]));if(v.length===0)return;const _=o.name("valid");for(const h of v)k(h)?b(h):(o.if((0,e.propertyInData)(o,w,h,p.opts.ownProperties)),b(h),p.allErrors||o.else().var(_,!0),o.endIf()),r.it.definedProperties.add(h),r.ok(_);function k(h){return p.opts.useDefaults&&!p.compositeRule&&d[h].default!==void 0}function b(h){r.subschema({keyword:"properties",schemaProp:h,dataProp:h},_)}}};return qt.default=i,qt}var zt={},Zn;function Ko(){if(Zn)return zt;Zn=1,Object.defineProperty(zt,"__esModule",{value:!0});const t=Ie(),e=Y(),s=se(),n=se(),i={keyword:"patternProperties",type:"object",schemaType:"object",code(r){const{gen:o,schema:d,data:f,parentSchema:w,it:p}=r,{opts:$}=p,v=(0,t.allSchemaProperties)(d),_=v.filter(y=>(0,s.alwaysValidSchema)(p,d[y]));if(v.length===0||_.length===v.length&&(!p.opts.unevaluated||p.props===!0))return;const k=$.strictSchema&&!$.allowMatchingProperties&&w.properties,b=o.name("valid");p.props!==!0&&!(p.props instanceof e.Name)&&(p.props=(0,n.evaluatedPropsToName)(o,p.props));const{props:h}=p;l();function l(){for(const y of v)k&&a(y),p.allErrors?c(y):(o.var(b,!0),c(y),o.if(b))}function a(y){for(const u in k)new RegExp(y).test(u)&&(0,s.checkStrictMode)(p,`property ${u} matches pattern ${y} (use allowMatchingProperties)`)}function c(y){o.forIn("key",f,u=>{o.if((0,e._)`${(0,t.usePattern)(r,y)}.test(${u})`,()=>{const m=_.includes(y);m||r.subschema({keyword:"patternProperties",schemaProp:y,dataProp:u,dataPropType:n.Type.Str},b),p.opts.unevaluated&&h!==!0?o.assign((0,e._)`${h}[${u}]`,!0):!m&&!p.allErrors&&o.if((0,e.not)(b),()=>o.break())})})}}};return zt.default=i,zt}var Ut={},Kn;function Wo(){if(Kn)return Ut;Kn=1,Object.defineProperty(Ut,"__esModule",{value:!0});const t=se(),e={keyword:"not",schemaType:["object","boolean"],trackErrors:!0,code(s){const{gen:n,schema:i,it:r}=s;if((0,t.alwaysValidSchema)(r,i)){s.fail();return}const o=n.name("valid");s.subschema({keyword:"not",compositeRule:!0,createErrors:!1,allErrors:!1},o),s.failResult(o,()=>s.reset(),()=>s.error())},error:{message:"must NOT be valid"}};return Ut.default=e,Ut}var Ft={},Wn;function Jo(){if(Wn)return Ft;Wn=1,Object.defineProperty(Ft,"__esModule",{value:!0});const e={keyword:"anyOf",schemaType:"array",trackErrors:!0,code:Ie().validateUnion,error:{message:"must match a schema in anyOf"}};return Ft.default=e,Ft}var Ht={},Jn;function Xo(){if(Jn)return Ht;Jn=1,Object.defineProperty(Ht,"__esModule",{value:!0});const t=Y(),e=se(),n={keyword:"oneOf",schemaType:"array",trackErrors:!0,error:{message:"must match exactly one schema in oneOf",params:({params:i})=>(0,t._)`{passingSchemas: ${i.passing}}`},code(i){const{gen:r,schema:o,parentSchema:d,it:f}=i;if(!Array.isArray(o))throw new Error("ajv implementation error");if(f.opts.discriminator&&d.discriminator)return;const w=o,p=r.let("valid",!1),$=r.let("passing",null),v=r.name("_valid");i.setParams({passing:$}),r.block(_),i.result(p,()=>i.reset(),()=>i.error(!0));function _(){w.forEach((k,b)=>{let h;(0,e.alwaysValidSchema)(f,k)?r.var(v,!0):h=i.subschema({keyword:"oneOf",schemaProp:b,compositeRule:!0},v),b>0&&r.if((0,t._)`${v} && ${p}`).assign(p,!1).assign($,(0,t._)`[${$}, ${b}]`).else(),r.if(v,()=>{r.assign(p,!0),r.assign($,b),h&&i.mergeEvaluated(h,t.Name)})})}}};return Ht.default=n,Ht}var Bt={},Xn;function Yo(){if(Xn)return Bt;Xn=1,Object.defineProperty(Bt,"__esModule",{value:!0});const t=se(),e={keyword:"allOf",schemaType:"array",code(s){const{gen:n,schema:i,it:r}=s;if(!Array.isArray(i))throw new Error("ajv implementation error");const o=n.name("valid");i.forEach((d,f)=>{if((0,t.alwaysValidSchema)(r,d))return;const w=s.subschema({keyword:"allOf",schemaProp:f},o);s.ok(o),s.mergeEvaluated(w)})}};return Bt.default=e,Bt}var Gt={},Yn;function Qo(){if(Yn)return Gt;Yn=1,Object.defineProperty(Gt,"__esModule",{value:!0});const t=Y(),e=se(),n={keyword:"if",schemaType:["object","boolean"],trackErrors:!0,error:{message:({params:r})=>(0,t.str)`must match "${r.ifClause}" schema`,params:({params:r})=>(0,t._)`{failingKeyword: ${r.ifClause}}`},code(r){const{gen:o,parentSchema:d,it:f}=r;d.then===void 0&&d.else===void 0&&(0,e.checkStrictMode)(f,'"if" without "then" and "else" is ignored');const w=i(f,"then"),p=i(f,"else");if(!w&&!p)return;const $=o.let("valid",!0),v=o.name("_valid");if(_(),r.reset(),w&&p){const b=o.let("ifClause");r.setParams({ifClause:b}),o.if(v,k("then",b),k("else",b))}else w?o.if(v,k("then")):o.if((0,t.not)(v),k("else"));r.pass($,()=>r.error(!0));function _(){const b=r.subschema({keyword:"if",compositeRule:!0,createErrors:!1,allErrors:!1},v);r.mergeEvaluated(b)}function k(b,h){return()=>{const l=r.subschema({keyword:b},v);o.assign($,v),r.mergeValidEvaluated(l,$),h?o.assign(h,(0,t._)`${b}`):r.setParams({ifClause:b})}}}};function i(r,o){const d=r.schema[o];return d!==void 0&&!(0,e.alwaysValidSchema)(r,d)}return Gt.default=n,Gt}var Vt={},Qn;function ea(){if(Qn)return Vt;Qn=1,Object.defineProperty(Vt,"__esModule",{value:!0});const t=se(),e={keyword:["then","else"],schemaType:["object","boolean"],code({keyword:s,parentSchema:n,it:i}){n.if===void 0&&(0,t.checkStrictMode)(i,`"${s}" without "if" is ignored`)}};return Vt.default=e,Vt}var ei;function ta(){if(ei)return Rt;ei=1,Object.defineProperty(Rt,"__esModule",{value:!0});const t=Qi(),e=Fo(),s=er(),n=Ho(),i=Bo(),r=Go(),o=Vo(),d=tr(),f=Zo(),w=Ko(),p=Wo(),$=Jo(),v=Xo(),_=Yo(),k=Qo(),b=ea();function h(l=!1){const a=[p.default,$.default,v.default,_.default,k.default,b.default,o.default,d.default,r.default,f.default,w.default];return l?a.push(e.default,n.default):a.push(t.default,s.default),a.push(i.default),a}return Rt.default=h,Rt}var Zt={},Kt={},ti;function sa(){if(ti)return Kt;ti=1,Object.defineProperty(Kt,"__esModule",{value:!0});const t=Y(),s={keyword:"format",type:["number","string"],schemaType:"string",$data:!0,error:{message:({schemaCode:n})=>(0,t.str)`must match format "${n}"`,params:({schemaCode:n})=>(0,t._)`{format: ${n}}`},code(n,i){const{gen:r,data:o,$data:d,schema:f,schemaCode:w,it:p}=n,{opts:$,errSchemaPath:v,schemaEnv:_,self:k}=p;if(!$.validateFormats)return;d?b():h();function b(){const l=r.scopeValue("formats",{ref:k.formats,code:$.code.formats}),a=r.const("fDef",(0,t._)`${l}[${w}]`),c=r.let("fType"),y=r.let("format");r.if((0,t._)`typeof ${a} == "object" && !(${a} instanceof RegExp)`,()=>r.assign(c,(0,t._)`${a}.type || "string"`).assign(y,(0,t._)`${a}.validate`),()=>r.assign(c,(0,t._)`"string"`).assign(y,a)),n.fail$data((0,t.or)(u(),m()));function u(){return $.strictSchema===!1?t.nil:(0,t._)`${w} && !${y}`}function m(){const S=_.$async?(0,t._)`(${a}.async ? await ${y}(${o}) : ${y}(${o}))`:(0,t._)`${y}(${o})`,I=(0,t._)`(typeof ${y} == "function" ? ${S} : ${y}.test(${o}))`;return(0,t._)`${y} && ${y} !== true && ${c} === ${i} && !${I}`}}function h(){const l=k.formats[f];if(!l){u();return}if(l===!0)return;const[a,c,y]=m(l);a===i&&n.pass(S());function u(){if($.strictSchema===!1){k.logger.warn(I());return}throw new Error(I());function I(){return`unknown format "${f}" ignored in schema at path "${v}"`}}function m(I){const x=I instanceof RegExp?(0,t.regexpCode)(I):$.code.formats?(0,t._)`${$.code.formats}${(0,t.getProperty)(f)}`:void 0,j=r.scopeValue("formats",{key:f,ref:I,code:x});return typeof I=="object"&&!(I instanceof RegExp)?[I.type||"string",I.validate,(0,t._)`${j}.validate`]:["string",I,j]}function S(){if(typeof l=="object"&&!(l instanceof RegExp)&&l.async){if(!_.$async)throw new Error("async format in sync schema");return(0,t._)`await ${y}(${o})`}return typeof c=="function"?(0,t._)`${y}(${o})`:(0,t._)`${y}.test(${o})`}}}};return Kt.default=s,Kt}var si;function na(){if(si)return Zt;si=1,Object.defineProperty(Zt,"__esModule",{value:!0});const e=[sa().default];return Zt.default=e,Zt}var He={},ni;function ia(){return ni||(ni=1,Object.defineProperty(He,"__esModule",{value:!0}),He.contentVocabulary=He.metadataVocabulary=void 0,He.metadataVocabulary=["title","description","default","deprecated","readOnly","writeOnly","examples"],He.contentVocabulary=["contentMediaType","contentEncoding","contentSchema"]),He}var ii;function ra(){if(ii)return gt;ii=1,Object.defineProperty(gt,"__esModule",{value:!0});const t=Oo(),e=Uo(),s=ta(),n=na(),i=ia(),r=[t.default,e.default,(0,s.default)(),n.default,i.metadataVocabulary,i.contentVocabulary];return gt.default=r,gt}var Wt={},it={},ri;function oa(){if(ri)return it;ri=1,Object.defineProperty(it,"__esModule",{value:!0}),it.DiscrError=void 0;var t;return function(e){e.Tag="tag",e.Mapping="mapping"}(t||(it.DiscrError=t={})),it}var oi;function aa(){if(oi)return Wt;oi=1,Object.defineProperty(Wt,"__esModule",{value:!0});const t=Y(),e=oa(),s=Ds(),n=is(),i=se(),o={keyword:"discriminator",type:"object",schemaType:"object",error:{message:({params:{discrError:d,tagName:f}})=>d===e.DiscrError.Tag?`tag "${f}" must be string`:`value of tag "${f}" must be in oneOf`,params:({params:{discrError:d,tag:f,tagName:w}})=>(0,t._)`{error: ${d}, tag: ${w}, tagValue: ${f}}`},code(d){const{gen:f,data:w,schema:p,parentSchema:$,it:v}=d,{oneOf:_}=$;if(!v.opts.discriminator)throw new Error("discriminator: requires discriminator option");const k=p.propertyName;if(typeof k!="string")throw new Error("discriminator: requires propertyName");if(p.mapping)throw new Error("discriminator: mapping is not supported");if(!_)throw new Error("discriminator: requires oneOf keyword");const b=f.let("valid",!1),h=f.const("tag",(0,t._)`${w}${(0,t.getProperty)(k)}`);f.if((0,t._)`typeof ${h} == "string"`,()=>l(),()=>d.error(!1,{discrError:e.DiscrError.Tag,tag:h,tagName:k})),d.ok(b);function l(){const y=c();f.if(!1);for(const u in y)f.elseIf((0,t._)`${h} === ${u}`),f.assign(b,a(y[u]));f.else(),d.error(!1,{discrError:e.DiscrError.Mapping,tag:h,tagName:k}),f.endIf()}function a(y){const u=f.name("valid"),m=d.subschema({keyword:"oneOf",schemaProp:y},u);return d.mergeEvaluated(m,t.Name),u}function c(){var y;const u={},m=I($);let S=!0;for(let L=0;L<_.length;L++){let U=_[L];if(U?.$ref&&!(0,i.schemaHasRulesButRef)(U,v.self.RULES)){const Z=U.$ref;if(U=s.resolveRef.call(v.self,v.schemaEnv.root,v.baseId,Z),U instanceof s.SchemaEnv&&(U=U.schema),U===void 0)throw new n.default(v.opts.uriResolver,v.baseId,Z)}const G=(y=U?.properties)===null||y===void 0?void 0:y[k];if(typeof G!="object")throw new Error(`discriminator: oneOf subschemas (or referenced schemas) must have "properties/${k}"`);S=S&&(m||I(U)),x(G,L)}if(!S)throw new Error(`discriminator: "${k}" must be required`);return u;function I({required:L}){return Array.isArray(L)&&L.includes(k)}function x(L,U){if(L.const)j(L.const,U);else if(L.enum)for(const G of L.enum)j(G,U);else throw new Error(`discriminator: "properties/${k}" must have "const" or "enum"`)}function j(L,U){if(typeof L!="string"||L in u)throw new Error(`discriminator: "${k}" values must be unique strings`);u[L]=U}}}};return Wt.default=o,Wt}const la="http://json-schema.org/draft-07/schema#",ca="http://json-schema.org/draft-07/schema#",da="Core schema meta-schema",ua={schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},ha=["object","boolean"],fa={$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},pa={$schema:la,$id:ca,title:da,definitions:ua,type:ha,properties:fa,default:!0};var ai;function ma(){return ai||(ai=1,function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.MissingRefError=e.ValidationError=e.CodeGen=e.Name=e.nil=e.stringify=e.str=e._=e.KeywordCxt=e.Ajv=void 0;const s=Eo(),n=ra(),i=aa(),r=pa,o=["/properties"],d="http://json-schema.org/draft-07/schema";class f extends s.default{_addVocabularies(){super._addVocabularies(),n.default.forEach(k=>this.addVocabulary(k)),this.opts.discriminator&&this.addKeyword(i.default)}_addDefaultMetaSchema(){if(super._addDefaultMetaSchema(),!this.opts.meta)return;const k=this.opts.$data?this.$dataMetaSchema(r,o):r;this.addMetaSchema(k,d,!1),this.refs["http://json-schema.org/schema"]=d}defaultMeta(){return this.opts.defaultMeta=super.defaultMeta()||(this.getSchema(d)?d:void 0)}}e.Ajv=f,t.exports=e=f,t.exports.Ajv=f,Object.defineProperty(e,"__esModule",{value:!0}),e.default=f;var w=ns();Object.defineProperty(e,"KeywordCxt",{enumerable:!0,get:function(){return w.KeywordCxt}});var p=Y();Object.defineProperty(e,"_",{enumerable:!0,get:function(){return p._}}),Object.defineProperty(e,"str",{enumerable:!0,get:function(){return p.str}}),Object.defineProperty(e,"stringify",{enumerable:!0,get:function(){return p.stringify}}),Object.defineProperty(e,"nil",{enumerable:!0,get:function(){return p.nil}}),Object.defineProperty(e,"Name",{enumerable:!0,get:function(){return p.Name}}),Object.defineProperty(e,"CodeGen",{enumerable:!0,get:function(){return p.CodeGen}});var $=Ms();Object.defineProperty(e,"ValidationError",{enumerable:!0,get:function(){return $.default}});var v=is();Object.defineProperty(e,"MissingRefError",{enumerable:!0,get:function(){return v.default}})}(ht,ht.exports)),ht.exports}var ya=ma();const ga=fi(ya),va=new ga,Je={type:"object",properties:{x:{type:"number"},y:{type:"number"}},required:["x","y"]},wa={type:"object",properties:{start:{type:"object",properties:{slotId:{type:"integer"},nodeId:{type:"integer"}},required:["nodeId","slotId"],nullable:!0},end:{type:"object",properties:{slotId:{type:"integer"},nodeId:{type:"integer"}},required:["nodeId","slotId"],nullable:!0}}},_a={type:"object",properties:{id:{type:"integer"},componentType:{type:"integer"},nodeType:{type:"integer"},position:Je,slotIds:{type:"array",items:{type:"integer"}},state:{type:"boolean"}},required:["id","componentType","nodeType","position","slotIds","state"]},ka={type:"object",properties:{id:{type:"integer"},componentType:{type:"integer"},position:Je,endPosition:Je,anchors:{type:"array",items:Je},connectedTo:wa},required:["id","componentType","position","endPosition","anchors","connectedTo"]},ba={type:"object",properties:{id:{type:"integer"},componentType:{type:"integer"},position:Je,parentId:{type:"integer"},slotIdAtParent:{type:"integer"},connectionIds:{type:"array",items:{type:"integer"}},inSlot:{type:"boolean"},color:{type:"string"},colorActive:{type:"string"},radius:{type:"number",minimum:0},attractionRadius:{type:"number",minimum:0}},required:["id","componentType","position","parentId","slotIdAtParent","connectionIds","inSlot","color","colorActive","radius","attractionRadius"]},$a={type:"object",properties:{id:{type:"integer"},componentType:{type:"integer"},position:Je,text:{type:"string"},parent:{type:"object",properties:{id:{type:"integer"},type:{type:"integer"}},required:["id","type"],nullable:!0},style:{type:"string"}},required:["id","componentType","position","text","style"]},Sa={type:"object",properties:{id:{type:"integer"},data:{type:"object",properties:{output:{type:"boolean"},signalFrom:{type:"array",items:{type:"array",items:{type:"integer"}}},signalTo:{type:"array",items:{type:"integer"}},nodeType:{type:"integer"}},required:["output","signalFrom","signalTo","nodeType"]}},required:["id","data"]},Pa={type:"object",properties:{id:{type:"string"},title:{type:"string"},data:{type:"object",properties:{nodes:{type:"array",items:_a},connections:{type:"array",items:ka},slots:{type:"array",items:ba},texts:{type:"array",items:$a}},required:["nodes","connections","slots","texts"]},signal:{type:"array",items:Sa}},required:["id","data","signal"]},li=va.compile(Pa);function Ea(t,e,s){if(!s.target){console.error("Falha ao tentar carregar os dados da entrada de dados");return}const n=s.target;if(!n.files||!n.files[0])return;const i=new FileReader;i.readAsArrayBuffer(n.files[0]),i.onload=()=>{if(!i.result||typeof i.result=="string")return;const r=ao(new Uint8Array(i.result)),o=JSON.parse(new TextDecoder().decode(r));if(!li(o)){window.alert("Falha ao carregar projeto! Arquivo inválido ou corrompido."),console.error("Falha ao carregar projeto! Arquivo inválido ou corrompido.",li.errors);return}t.editorEnv=ct.createFromJson(o,e,t.editorEnv.nodeImageList)}}function sr(t){const e=window.prompt("Salvar projeto como:",`${t.simulationTitle}-${Date.now()}`);if(e===null)return;const s=document.createElement("a"),n=new TextEncoder().encode(t.saveAsJson()),i=oo(n,{level:6});s.href=URL.createObjectURL(new Blob([i],{type:"application/gzip"})),s.download=`${e}.simulation`,s.click()}function Ia(t){return confirm(`Deseja limpar o editor?
Qualquer progresso não salvo será perdido!`)===!0?new ct(t.simulationId,t.simulationTitle,0,t.nodeImageList):t}class Ta{_keyboard;constructor(e){this._keyboard=e}onKeyDown(e){this._keyboard.nKeysPressed!==0&&(this._keyboard.keyPressed?this._keyboard.keyHold=!0:(this._keyboard.keyPressed=!0,this._keyboard.keyHold=!1),!this._keyboard.keyHold&&e.isMouseInsideEditor()&&this.handleKeyPressed(e))}handleKeyPressed(e){const s=this._keyboard.getKeysPressed();s[me.ADD]||s[me.ADD_u]?e.node(z.G_AND):s[me.NAND]||s[me.NAND_u]?e.node(z.G_NAND):s[me.NOR]||s[me.NOR_u]?e.node(z.G_NOR):s[me.NOT]||s[me.NOT_u]?e.node(z.G_NOT):s[me.OR]||s[me.OR_u]?e.node(z.G_OR):s[me.XNOR]||s[me.XNOR_u]?e.node(z.G_XNOR):s[me.XOR]||s[me.XOR_u]?e.node(z.G_XOR):s[Be.SWITCH]||s[Be.SWITCH_u]?e.input(z.I_SWITCH):s[Be.BUTTON]||s[Be.BUTTON_u]?e.input(z.I_BUTTON):s[Be.CLOCK]||s[Be.CLOCK_u]?e.input(z.I_CLOCK):s[rt.LED_RED]||s[rt.LED_RED_u]?e.output(z.O_LED_RED):s[rt.SEGMENTS]||s[rt.SEGMENTS_u]?e.output(z.O_7_SEGMENTS):s[$s.DELETE]?e.remove():s[$s.INSERT]&&sr(e.editorEnv)}onKeyUp(){this._keyboard.keyPressed&&this._keyboard.nKeysPressed===0&&(this._keyboard.keyPressed=!1,this._keyboard.keyHold=!1)}}class Oa{keys={};keyPressed=!1;keyHold=!1;stateChange=!1;_nKeysPressed=0;get nKeysPressed(){return this._nKeysPressed}set nKeysPressed(e){e<0&&console.warn("Número de teclas pressionadas é menor que 0!"),this._nKeysPressed=Math.max(0,e)}setKeyPressed(e,s){this.keys[e]=s,this.nKeysPressed+=s?1:-1}getKeysPressed(){return this.keys}}const Na=[pi,mi,yi,gi,vi,wi,_i,ki,bi,$i,Si,Pi,Oi,Ni,Ci,xi,Ri,Mi,Di,ji,Ai,Li];function Ca(){const t={};for(const e of Na)Tr(e).then(s=>{t[e]=s}).catch(()=>{console.warn("Erro ao carregar as imagens.")});return t}function xa(t,e,s){if(!window){console.error("Variável window é nula! Não será possível iniciar o editor");return}window.onload=()=>{t.resize(),setInterval(t.compute,1e3/t.tickRate),t.update(),setTimeout(()=>{document.getElementById("app").style.visibility="visible",document.getElementById("app-toolbar").style.visibility="visible",document.getElementById("app").className="animate-show",document.getElementById("app-toolbar").className="animate-show",document.getElementById("app-tutorial-content")!==null&&document.getElementById("app-tutorial-content").classList.add("modal-animate-show"),document.getElementById("loading-div").style.visibility="hidden"},1200)},window.onresize=()=>t.resize(),e.onmousedown=()=>t.mouse.clicked=!0,e.onmouseup=e.onmouseout=()=>t.mouse.clicked=!1,window.onmousemove=({x:i,y:r})=>t.setLocalMousePosition(i,r),window.onkeydown=i=>t.keyboard.setKeyPressed(i.key,!0),window.onkeyup=i=>t.keyboard.setKeyPressed(i.key,!1);const n=document.getElementsByTagName("img");for(const i of n)!i.classList.contains("app-component-image")||!i.parentElement||!i.parentElement.classList.contains("app-component")||!i.hasAttributes()||!i.draggable||i.parentElement.addEventListener("dragstart",r=>{r.dataTransfer?.setData("text/plain",i.id),r.dataTransfer?.setDragImage(i,i.width/2,i.height/2)});e.addEventListener("dragover",i=>{i.preventDefault()}),e.addEventListener("drop",i=>{i.preventDefault(),i.dataTransfer&&(t.setLocalMousePosition(i.x,i.y),t.addByDrapAndDrop(i.dataTransfer.getData("text/plain")))}),document.getElementById("save-editor")?.addEventListener("click",()=>sr(t.editorEnv)),document.getElementById("load-editor")?.addEventListener("click",()=>{document.getElementById("load-editor-file")?.click()}),document.getElementById("load-editor-file")?.addEventListener("change",i=>Ea(t,t.canvasCtx,i)),document.getElementById("clear-editor")?.addEventListener("click",()=>{t.editorEnv=Ia(t.editorEnv)})}class Ra{editorEnv;mouse;keyboard;mouseEvents;keyboardEvents;canvasId;canvasCtx;backgroundCtx;backgroundPattern;windowResized;tickRate;constructor(e,s,n,i,r=60){this.editorEnv=new ct(e,s,0,Ca()),this.mouse=new Hr,this.keyboard=new Oa,this.mouseEvents=new ye(this.mouse),this.keyboardEvents=new Ta(this.keyboard);const o=document.getElementById(n),d=document.getElementById(i);this.canvasId=n,this.canvasCtx=this.createContext(o),this.backgroundCtx=this.createContext(d),this.backgroundPattern=null,this.loadBackgroundPattern(dr),this.windowResized=!0,this.tickRate=r,xa(this,o)}createContext(e){return e.getContext("2d",{desynchronized:!0})}loadBackgroundPattern(e){const s=new Image;s.onload=()=>{this.backgroundPattern=this.backgroundCtx.createPattern(s,"repeat")},s.src=e}getEditorArea(){const e=document.getElementById(this.canvasId)?.parentElement,s=new O(0,0);if(e){const n=window.getComputedStyle(e);s.x=parseFloat(n.width.substring(0,n.length-2)),s.y=parseFloat(n.height.substring(0,n.length-2))}else s.x=window.innerWidth,s.y=window.innerHeight;return s}setLocalMousePosition(e,s){const n=this.canvasCtx.canvas.getBoundingClientRect();this.mouse.position=new O(e-n.left,s-n.top)}isMouseInsideEditor(){const e=new O(this.canvasCtx.canvas.width,this.canvasCtx.canvas.height);return!(!O.min(this.mouse.position,O.ZERO).equals(O.ZERO)||!O.max(this.mouse.position,e).equals(e))}resize(){const e=this.getEditorArea();this.canvasCtx.canvas.width=e.x,this.canvasCtx.canvas.height=e.y,this.backgroundCtx.canvas.width=e.x,this.backgroundCtx.canvas.height=e.y,this.windowResized=!0}update=()=>{hr(this.canvasCtx,this.editorEnv.components),this.windowResized&&(fr(this.backgroundCtx,this.backgroundPattern),this.windowResized=!1),requestAnimationFrame(this.update)};compute=()=>{this.keyboardEvents.onKeyDown(this),this.keyboardEvents.onKeyUp(),this.mouseEvents.onMouseClick(this.editorEnv),this.mouseEvents.onMouseMove(this.editorEnv),this.mouseEvents.onMouseRelease(this.editorEnv),Ss.onTick(this.editorEnv.nodes,this.editorEnv.signalGraph)};node(e=z.G_AND,s=this.mouse.position.x,n=this.mouse.position.y){return _e.node(void 0,this.editorEnv,this.canvasCtx.canvas.width,this.canvasCtx.canvas.height,e,s,n)}input(e=z.I_SWITCH,s=this.mouse.position.x,n=this.mouse.position.y){return _e.input(void 0,this.editorEnv,this.canvasCtx.canvas.width,this.canvasCtx.canvas.height,e,s,n)}output(e=z.O_LED_RED,s=this.mouse.position.x,n=this.mouse.position.y){return _e.output(void 0,this.editorEnv,this.canvasCtx.canvas.width,this.canvasCtx.canvas.height,e,s,n)}line(e,s,n,i,r,o){return _e.connection(void 0,this.editorEnv,e,s,n,i,r,o)}text(e,s,n,i,r){return _e.text(void 0,this.editorEnv,this.canvasCtx,e,s,n,i,r)}slot(e,s,n,i,r,o,d,f,w){return _e.slot(void 0,this.editorEnv,e,s,n,i,r,o,d,f,w)}remove(){return this.mouseEvents.getCollisionList().nodes.length!==0?this.editorEnv.removeComponent(this.mouseEvents.getCollisionList().nodes[0]):this.mouseEvents.getCollisionList().connections.length!==0?this.editorEnv.removeComponent(this.mouseEvents.getCollisionList().connections[0]):this.mouseEvents.getCollisionList().texts.length!==0?this.editorEnv.removeComponent(this.mouseEvents.getCollisionList().texts[0]):!1}addByDrapAndDrop(e){switch(e){case"and-gate":return this.node(z.G_AND);case"or-gate":return this.node(z.G_OR);case"not-gate":return this.node(z.G_NOT);case"nand-gate":return this.node(z.G_NAND);case"nor-gate":return this.node(z.G_NOR);case"xor-gate":return this.node(z.G_XOR);case"xnor-gate":return this.node(z.G_XNOR);case"switch-input":return this.input(z.I_SWITCH);case"button-input":return this.input(z.I_BUTTON);case"clock-input":return this.input(z.I_CLOCK);case"led-red-output":return this.output(z.O_LED_RED);case"seven-segments-output":return this.output(z.O_7_SEGMENTS);default:return-1}}}class Ma{modalDOM;openButton;closeButton;skipButton;nextButton;previousButton;tutorialEndButton;currentCarrouselId;carrouselMaxId;carrouselItems;constructor(e,s,n,i,r,o,d){this.modalDOM=document.getElementById(e),this.openButton=this.checkHTMLButtonElement(document.getElementById(s)),this.skipButton=this.checkHTMLButtonElement(document.getElementById(i)),this.nextButton=this.checkHTMLButtonElement(document.getElementById(r)),this.previousButton=this.checkHTMLButtonElement(document.getElementById(o)),this.tutorialEndButton=this.checkHTMLButtonElement(document.getElementById(d)),this.closeButton=document.getElementById(n),this.currentCarrouselId=0,this.carrouselItems=document.getElementsByClassName("carrousel-item"),this.carrouselMaxId=this.carrouselItems.length-1,this.carrouselItems.length>0&&this.carrouselItems[0].classList.add("carrousel-active"),this.createEvents()}checkHTMLButtonElement(e){return e!==null&&e.tagName==="BUTTON"?e:null}createEvents(){this.modalDOM!==null&&this.openButton!==null&&(localStorage.getItem("connectlab-hide-tutorial")!=="1"&&window.addEventListener("load",()=>{this.modalDOM.style.display="block"}),this.openButton.addEventListener("click",()=>{this.modalDOM.style.display="block"}),this.closeButton&&this.closeButton.addEventListener("click",()=>{localStorage.setItem("connectlab-hide-tutorial","1"),this.modalDOM.style.display="none"})),this.modalDOM!==null&&this.skipButton!==null&&this.nextButton!==null&&this.previousButton!==null&&this.tutorialEndButton!==null&&(this.previousButton.style.display="none",this.tutorialEndButton.style.display="none",this.skipButton.addEventListener("click",()=>{this.carrouselPrevious(0),localStorage.setItem("connectlab-hide-tutorial","1"),this.modalDOM.style.display="none"}),this.previousButton.addEventListener("click",()=>{this.carrouselPrevious(this.currentCarrouselId-1)}),this.nextButton.addEventListener("click",()=>{this.carrouselNext(this.currentCarrouselId+1)}),this.tutorialEndButton.addEventListener("click",()=>{this.carrouselPrevious(0),localStorage.setItem("connectlab-hide-tutorial","1"),this.modalDOM.style.display="none"}))}carrouselNext(e){this.nextButton===null||this.previousButton===null||this.skipButton===null||this.tutorialEndButton===null||(this.carrouselItems[this.currentCarrouselId].classList.toggle("carrousel-active"),this.currentCarrouselId=e,this.currentCarrouselId>=this.carrouselMaxId&&(this.currentCarrouselId=this.carrouselMaxId,this.nextButton.style.display="none",this.tutorialEndButton.style.display="block"),this.carrouselItems[this.currentCarrouselId].classList.toggle("carrousel-active"),this.previousButton.style.display="block",this.skipButton.style.display="none")}carrouselPrevious(e){this.nextButton===null||this.previousButton===null||this.skipButton===null||this.tutorialEndButton===null||(this.carrouselItems[this.currentCarrouselId].classList.toggle("carrousel-active"),this.currentCarrouselId=e,this.currentCarrouselId<=0&&(this.currentCarrouselId=0,this.previousButton.style.display="none",this.skipButton.style.display="block"),this.tutorialEndButton.style.display="none",this.carrouselItems[this.currentCarrouselId].classList.toggle("carrousel-active"),this.nextButton.style.display="block")}}new Ma("app-modal-tutorial","tutorial-button","app-modal-close","app-tutorial-skip","app-tutorial-next","app-tutorial-previous","app-tutorial-close");new Ra(cr(),"Teste","editor-canvas","background-canvas");
