(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function s(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(r){if(r.ep)return;r.ep=!0;const i=s(r);fetch(r.href,i)}})();const he=[];for(let t=0;t<256;++t)he.push((t+256).toString(16).slice(1));function ir(t,e=0){return(he[t[e+0]]+he[t[e+1]]+he[t[e+2]]+he[t[e+3]]+"-"+he[t[e+4]]+he[t[e+5]]+"-"+he[t[e+6]]+he[t[e+7]]+"-"+he[t[e+8]]+he[t[e+9]]+"-"+he[t[e+10]]+he[t[e+11]]+he[t[e+12]]+he[t[e+13]]+he[t[e+14]]+he[t[e+15]]).toLowerCase()}let ls;const rr=new Uint8Array(16);function or(){if(!ls){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");ls=crypto.getRandomValues.bind(crypto)}return ls(rr)}const ar=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),Ls={randomUUID:ar};function lr(t,e,s){t=t||{};const n=t.random??t.rng?.()??or();if(n.length<16)throw new Error("Random bytes length must be >= 16");return n[6]=n[6]&15|64,n[8]=n[8]&63|128,ir(n)}function cr(t,e,s){return Ls.randomUUID&&!t?Ls.randomUUID():lr(t)}var me=(t=>(t.ADD="a",t.ADD_u="A",t.NAND="d",t.NAND_u="D",t.NOR="r",t.NOR_u="R",t.NOT="n",t.NOT_u="N",t.OR="o",t.OR_u="O",t.XNOR="v",t.XNOR_u="V",t.XOR="x",t.XOR_u="X",t))(me||{}),Be=(t=>(t.SWITCH="s",t.SWITCH_u="S",t.BUTTON="b",t.BUTTON_u="B",t.CLOCK="k",t.CLOCK_u="K",t))(Be||{}),rt=(t=>(t.LED_RED="l",t.LED_RED_u="L",t.SEGMENTS="e",t.SEGMENTS_u="E",t))(rt||{}),$s=(t=>(t.DELETE="Delete",t.BACKSPACE="Backspace",t.INSERT="Insert",t))($s||{}),le=(t=>(t[t.LINE=1]="LINE",t[t.NODE=2]="NODE",t[t.TEXT=3]="TEXT",t[t.SLOT=4]="SLOT",t[t.INPUT=5]="INPUT",t[t.OUTPUT=6]="OUTPUT",t))(le||{}),z=(t=>(t[t.G_AND=0]="G_AND",t[t.G_NAND=1]="G_NAND",t[t.G_NOR=2]="G_NOR",t[t.G_NOT=3]="G_NOT",t[t.G_OR=4]="G_OR",t[t.G_XNOR=5]="G_XNOR",t[t.G_XOR=6]="G_XOR",t[t.I_SWITCH=100]="I_SWITCH",t[t.I_BUTTON=101]="I_BUTTON",t[t.I_CLOCK=102]="I_CLOCK",t[t.O_LED_RED=200]="O_LED_RED",t[t.O_7_SEGMENTS=201]="O_7_SEGMENTS",t))(z||{}),ne=(t=>(t[t.MOUSE_CLICKED=0]="MOUSE_CLICKED",t[t.MOUSE_RELEASED=1]="MOUSE_RELEASED",t[t.MOUSE_DRAGGED=2]="MOUSE_DRAGGED",t[t.KEY_PRESSED=10]="KEY_PRESSED",t[t.KEY_RELEASED=11]="KEY_RELEASED",t[t.KEY_HOLDED=12]="KEY_HOLDED",t[t.FOCUS_IN=20]="FOCUS_IN",t[t.FOCUS_OUT=21]="FOCUS_OUT",t[t.CLOCK_TRIGGERED=30]="CLOCK_TRIGGERED",t[t.CLOCK_FINISHED=31]="CLOCK_FINISHED",t[t.PHYSICS_ENGINE_CYCLE=40]="PHYSICS_ENGINE_CYCLE",t))(ne||{});const dr="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'?%3e%3csvg%20width='64'%20height='64'%20version='1.1'%20viewBox='0%200%2016%2016'%20xmlns='http://www.w3.org/2000/svg'%3e%3cg%20fill='none'%20stroke='%23289fac'%20stroke-linejoin='round'%20stroke-opacity='.5'%20stroke-width='.3'%3e%3cpath%20d='m0%2010.82h16'/%3e%3cpath%20d='m0%205.482h16'/%3e%3cpath%20d='m0%200.0675h16'/%3e%3cpath%20d='m10.82%200v16'/%3e%3cpath%20d='m16.06%200v16'/%3e%3cpath%20d='m0.0675%200v16'/%3e%3cpath%20d='m5.482%200v16'/%3e%3cpath%20d='m0%2016.06h16'/%3e%3c/g%3e%3c/svg%3e",ur=["connections","nodes","slots","texts"];function ci(t){t.save(),t.setTransform(1,0,0,1,0,0),t.clearRect(0,0,t.canvas.width,t.canvas.height),t.restore()}function hr(t,e){ci(t);for(const s of ur)for(const n of e[s].values())n.draw(t)}function fr(t,e){ci(t),t.rect(0,0,t.canvas.width,t.canvas.height),t.fillStyle=e??"#ff0000",t.fill()}function pr(t){return t=t-(t>>1&1431655765),t=(t&858993459)+(t>>2&858993459),(t+(t>>4)&252645135)*16843009>>24}const mr=(t,e)=>Cs(t),di=(t,e)=>{const s=(1<<e)-1;return(t&s)===s},yr=(t,e)=>!di(t,e),ui=(t,e)=>!Cs(t),gr=(t,e)=>e>1?ui(t):(t&1)!==1,Cs=(t,e)=>(t|0)!==0,vr=(t,e)=>!hi(t),hi=(t,e)=>pr(t)%2===1,je={input_output:mr,and:di,nand:yr,nor:ui,not:gr,or:Cs,xnor:vr,xor:hi},We={updateGraph(t,e){const s=new Set,n=[e];let r=n.shift();for(;r!==void 0;)!s.has(r)&&t[r]!==void 0&&((t[r].nodeType<z.I_SWITCH||t[r].nodeType>=z.O_LED_RED)&&this.computeState(t,t[r]),n.push(...t[r].signalTo.values())),s.add(r),r=n.shift()},computeState(t,e){const s=this.getComputeFunction(e.nodeType);let n=0,r=0;for(const i of e.signalFrom.values()){if(i>=-1){const o=t[i]?.output?1:0;r+=o<<n}n++}e.output=s(r,n)},getComputeFunction(t){switch(t){case z.G_AND:return je.and;case z.G_NAND:return je.nand;case z.G_NOR:return je.nor;case z.G_NOT:return je.not;case z.G_OR:return je.or;case z.G_XNOR:return je.xnor;case z.G_XOR:return je.xor;default:return je.input_output}}},Me={vertex:{add(t,e,s,n,r=!1,i=new Map,o=new Set){if(t[e]===void 0){if(i.size===0)for(const u of Object.values(n.connectionSlot))u.in&&i.set(u.id,-1);t[e]={id:e,output:r,signalFrom:i,signalTo:o,nodeType:s,signalGraph:t},We.updateGraph(t,e)}},remove(t,e){const s=t[e];if(s===void 0){console.warn(`Node ${e} não encontrado no grafo de sinal lógico ao ser removido!`);return}for(const n of s.signalTo.values())t[n]!==void 0&&t[n].signalFrom.forEach((r,i,o)=>{r===e&&o.set(i,-1)});delete t[e]},getState(t,e){return t[e].output??!1},setState(t,e,s){t[e]&&(t[e].output=s)}},edge:{add(t,e,s,n){const r=s.parent.id,i=n.parent.id;t[r]!==void 0?t[r].signalTo.add(i):console.warn(`Node inicial com ID ${i} não encontrado no grafo de sinal, isso poderá acarretar em bugs`,e),t[i]!==void 0?t[i].signalFrom.set(n.slotIdAtParent,r):console.warn(`Node final com ID ${i} não encontrado no grafo de sinal, isso poderá acarretar em bugs`,e),We.updateGraph(t,r)},remove(t,e){if(e===void 0)return;const s=e.connectedTo.start?.nodeId??-1,n=e.connectedTo.end?.nodeId??-1;n>=0&&t[n]!==void 0&&t[n].signalFrom.forEach((r,i,o)=>{r===s&&o.set(i,-1)}),s>=0&&t[s]!==void 0&&t[s].signalTo.delete(e.connectedTo.end?.nodeId??-1),n!==-1&&We.updateGraph(t,n)}}},Ke={node(t,e){const s=t.nodes.get(e);if(s===void 0)return!1;for(let n=0;n<s.slots.length;n++)t.removeComponent(s.slots[n].id,le.SLOT);return Me.vertex.remove(t.signalGraph,e),t.nodes.delete(e)},slot(t,e){const s=t.slots.get(e);if(s===void 0)return!1;for(const n of Object.values(s.slotConnections))t.removeComponent(n.id,le.LINE);return t.slots.delete(e)},connection(t,e){const s=t.connections.get(e);if(s===void 0)return!1;const n=t.slots.get(s.connectedTo.start?.slotId??-1),r=t.slots.get(s.connectedTo.end?.slotId??-1);if(n){const i=n.slotConnections.findIndex(o=>o.id===e);i!==-1&&n.slotConnections.splice(i,1)}if(r){const i=r.slotConnections.findIndex(o=>o.id===e);i!==-1&&r.slotConnections.splice(i,1)}return Me.edge.remove(t.signalGraph,s),t.connections.delete(e)},text(t,e){return t.texts.delete(e)}};class U{type="float";_x=0;_y=0;static get ZERO(){return new U}static get ONE(){return new U(1,1)}static get UP(){return new U(0,-1)}static get DOWN(){return new U(0,1)}static get LEFT(){return new U(-1,-0)}static get RIGHT(){return new U(1,0)}get x(){return this._x}set x(e){this._x=e}get y(){return this._y}set y(e){this._y=e}constructor(e=0,s=0){typeof e=="number"?(this.x=e,this.y=s):U.isVector2(e)&&(this.x=e.x,this.y=e.y)}static isVector2(e){return typeof e=="object"&&e!==null&&"_x"in e&&"_y"in e&&"type"in e&&(e.type==="int"||e.type==="float")}add(e){return U.isVector2(e)?(this.x+=e.x,this.y+=e.y):(this.x+=e,this.y+=e),this}static add(e,s,n){return n??=U.ZERO,U.isVector2(s)?(n.x=e.x+s.x,n.y=e.y+s.y):(n.x=e.x+s,n.y=e.y+s),n}sub(e){return U.isVector2(e)?(this.x-=e.x,this.y-=e.y):(this.x-=e,this.y-=e),this}static sub(e,s,n){return n??=U.ZERO,U.isVector2(s)?(n.x=e.x-s.x,n.y=e.y-s.y):(n.x=e.x-s,n.y=e.y-s),n}mul(e){return U.isVector2(e)?(this.x*=e.x,this.y*=e.y):(this.x*=e,this.y*=e),this}static mul(e,s,n){return n??=U.ZERO,U.isVector2(s)?(n.x=e.x*s.x,n.y=e.y*s.y):(n.x=e.x*s,n.y=e.y*s),n}div(e){return U.isVector2(e)?(this.x/=e.x,this.y/=e.y):(this.x/=e,this.y/=e),this}static div(e,s,n){return n??=U.ZERO,U.isVector2(s)?(n.x=e.x/s.x,n.y=e.y/s.y):(n.x=e.x/s,n.y=e.y/s),n}dot(e){return this.x*e.x+this.y*e.y}static dot(e,s){return e.x*s.x+e.y*s.y}cross(e){return this.x*e.y-this.y*e.x}static cross(e,s){return e.x*s.y-e.y*s.x}len(){return Math.sqrt(this.lenSquared())}static len(e){return Math.sqrt(U.lenSquared(e))}lenSquared(){return this.dot(this)}static lenSquared(e){return U.dot(e,e)}madd(e,s){return this.x+=e.x*s,this.y+=e.y*s,this}static madd(e,s,n,r){return r??=new U(0,0),r.x=e.x+s.x*n,r.y=e.y+s.y*n,r}lerp(e,s){return this.madd(U.sub(e,this),s)}static lerp(e,s,n,r){return U.madd(e,U.sub(s,e),n,r)}bilinear(e,s){return this.x=U.lerp(this,e,s.x).x,this.y=U.lerp(this,e,s.y).y,this}static bilinear(e,s,n,r){return r??=new U(0,0),r.x=U.lerp(e,s,n.x,void 0).x,r.y=U.lerp(e,s,n.y,void 0).y,r}equals(e,s=1e-4){return Math.abs(this.x-e.x)<s&&Math.abs(this.y-e.y)<s}static equals(e,s,n=1e-4){return Math.abs(e.x-s.x)<n&&Math.abs(e.y-s.y)<n}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}static min(e,s,n){return n??=new U(0,0),n.x=Math.min(e.x,s.x),n.y=Math.min(e.y,s.y),n}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}static max(e,s,n){return n??=new U(0,0),n.x=Math.max(e.x,s.x),n.y=Math.max(e.y,s.y),n}rotate(e){const s=Math.sin(e),n=Math.cos(e);return this.x=this.x*n-this.y*s,this.y=this.x*s+this.y*n,this}static rotate(e,s,n){n??=new U(0,0);const r=Math.sin(s),i=Math.cos(s);return n.x=e.x*i-e.y*r,n.y=e.x*r+e.y*i,n}atan2(e){return Math.atan2(e.y-this.y,e.x-this.x)}static atan2(e,s){return Math.atan2(s.y-e.y,s.x-e.x)}normalize(){return this.div(this.len())}static normalize(e,s){return U.div(e,e.len(),s)}abs(){return this.x=Math.abs(this.x),this.y=Math.abs(this.y),this}static abs(e,s){return s??=new U(0,0),s.x=Math.abs(e.x),s.y=Math.abs(e.y),s}copy(e){return this.x=e.x,this.y=e.y,this}static copy(e,s){return s.x=e.x,s.y=e.y,s}clone(){return new U(this)}static clone(e){return new U(e)}toPlainObject(){return{x:this.x,y:this.y}}}class T{type="int";_x=0;_y=0;static get ZERO(){return new T}static get ONE(){return new T(1,1)}static get UP(){return new T(0,-1)}static get DOWN(){return new T(0,1)}static get LEFT(){return new T(-1,-0)}static get RIGHT(){return new T(1,0)}get x(){return this._x}set x(e){this._x=Math.round(e)}get y(){return this._y}set y(e){this._y=Math.round(e)}constructor(e=0,s=0){typeof e=="number"?(this.x=e,this.y=s):T.isVector2(e)&&(this.x=e.x,this.y=e.y)}static isVector2(e){return typeof e=="object"&&e!==null&&"_x"in e&&"_y"in e&&"type"in e&&(e.type==="int"||e.type==="float")}add(e){return T.isVector2(e)?(this.x+=e.x,this.y+=e.y):(this.x+=e,this.y+=e),this}static add(e,s,n){return n??=T.ZERO,T.isVector2(s)?(n.x=e.x+s.x,n.y=e.y+s.y):(n.x=e.x+s,n.y=e.y+s),n}sub(e){return T.isVector2(e)?(this.x-=e.x,this.y-=e.y):(this.x-=e,this.y-=e),this}static sub(e,s,n){return n??=T.ZERO,T.isVector2(s)?(n.x=e.x-s.x,n.y=e.y-s.y):(n.x=e.x-s,n.y=e.y-s),n}mul(e){return T.isVector2(e)?(this.x*=e.x,this.y*=e.y):(this.x*=e,this.y*=e),this}static mul(e,s,n){return n??=T.ZERO,T.isVector2(s)?(n.x=e.x*s.x,n.y=e.y*s.y):(n.x=e.x*s,n.y=e.y*s),n}div(e){return T.isVector2(e)?(this.x/=e.x,this.y/=e.y):(this.x/=e,this.y/=e),this}static div(e,s,n){return n??=T.ZERO,T.isVector2(s)?(n.x=e.x/s.x,n.y=e.y/s.y):(n.x=e.x/s,n.y=e.y/s),n}dot(e){return this.x*e.x+this.y*e.y}static dot(e,s){return e.x*s.x+e.y*s.y}cross(e){return this.x*e.y-this.y*e.x}static cross(e,s){return e.x*s.y-e.y*s.x}len(){return Math.sqrt(this.lenSquared())}static len(e){return Math.sqrt(T.lenSquared(e))}lenSquared(){return this.dot(this)}static lenSquared(e){return T.dot(e,e)}madd(e,s){return this.x+=e.x*s,this.y+=e.y*s,this}static madd(e,s,n,r){return r??=T.ZERO,r.x=e.x+s.x*n,r.y=e.y+s.y*n,r}lerp(e,s){return this.madd(T.sub(e,this),s)}static lerp(e,s,n,r){return T.madd(e,T.sub(s,e),n,r)}bilinear(e,s){return this.x=T.lerp(this,e,s.x).x,this.y=T.lerp(this,e,s.y).y,this}static bilinear(e,s,n,r){return r??=T.ZERO,r.x=T.lerp(e,s,n.x).x,r.y=T.lerp(e,s,n.y).y,r}equals(e,s=0){return s===0?this.x===e.x&&this.y===e.y:Math.abs(this.x-e.x)<s&&Math.abs(this.y-e.y)<s}static equals(e,s,n=0){return n===0?e.x===s.x&&e.y===s.y:Math.abs(e.x-s.x)<n&&Math.abs(e.y-s.y)<n}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}static min(e,s,n){return n??=T.ZERO,n.x=Math.min(e.x,s.x),n.y=Math.min(e.y,s.y),n}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}static max(e,s,n){return n??=T.ZERO,n.x=Math.max(e.x,s.x),n.y=Math.max(e.y,s.y),n}rotate(e){const s=Math.sin(e),n=Math.cos(e);return this.x=this.x*n-this.y*s,this.y=this.x*s+this.y*n,this}static rotate(e,s,n){n??=T.ZERO;const r=Math.sin(s),i=Math.cos(s);return n.x=e.x*i-e.y*r,n.y=e.x*r+e.y*i,n}atan2(e){return Math.atan2(e.y-this.y,e.x-this.x)}static atan2(e,s){return Math.atan2(s.y-e.y,s.x-e.x)}normalize(){return U.div(this,this.len())}static normalize(e,s){return U.div(e,e.len(),s)}abs(){return this.x=Math.abs(this.x),this.y=Math.abs(this.y),this}static abs(e,s){return s??=T.ZERO,s.x=Math.abs(e.x),s.y=Math.abs(e.y),s}copy(e){return this.x=e.x,this.y=e.y,this}static copy(e,s){return s.x=e.x,s.y=e.y,s}clone(){return new T(this)}static clone(e){return new T(e)}toPlainObject(){return{x:this.x,y:this.y}}}class ot{position;endPosition;borderColor;drawPath;regenPath;lineLength;constructor(e,s,n="#FF8008DC"){this.position=e,this.endPosition=s,this.lineLength=this.computeLineLength(),this.borderColor=n,this.regenPath=!0,this.drawPath=this.generatePath()}generatePath(){const e=new Path2D;return e.moveTo(this.position.x,this.position.y),e.lineTo(this.endPosition.x,this.endPosition.y),this.regenPath=!1,e}computeLineLength(){return T.sub(this.endPosition,this.position).len()}draw(e,s){s&&((!this.drawPath||this.regenPath)&&(this.drawPath=this.generatePath()),e.save(),e.strokeStyle=this.borderColor,e.stroke(this.drawPath),e.restore())}moveShape(e,s){s?(this.position.add(e),this.endPosition.add(e)):(this.position.add(T.sub(this.position,e)),this.endPosition.add(T.sub(this.position,e)))}collisionWithPoint(e){const s=T.sub(this.position,e).len(),n=T.sub(this.endPosition,e).len();return s+n-this.lineLength<1e-4}collisionWithBox(e){return e.collisionWithLine(this)}collisionWithCircle(e){if(e.collisionWithPoint(this.position)||e.collisionWithPoint(this.endPosition))return!0;const s=((e.position.x-this.position.x)*(this.endPosition.x-this.position.x)+(e.position.y-this.position.y)*(this.endPosition.y-this.position.y))/Math.pow(this.lineLength,2),n=new T(this.position.x+s*(this.endPosition.x-this.position.x),this.position.y+s*(this.endPosition.y-this.position.y));return this.collisionWithPoint(n)?T.sub(n,e.position).len()<e.radius:!1}collisionWithLine(e){const s=(this.position.x-this.endPosition.x)*(e.position.y-e.endPosition.y)-(this.position.y-this.endPosition.y)*(e.position.x-e.endPosition.x);if(s===0)return!!(this.collisionWithPoint(e.position)||this.collisionWithPoint(e.endPosition)||e.collisionWithPoint(this.position));const n=(this.position.x-e.position.x)*(e.position.y-e.endPosition.y)-(this.position.y-e.position.y)*(e.position.x-e.endPosition.x),r=(this.position.x-this.endPosition.x)*(this.position.y-e.position.y)-(this.position.y-this.endPosition.y)*(this.position.x-e.position.x),i=n/s,o=-(r/s);return i>=0&&i<=1&&o>=0&&o<=1}}class De{position;localVertices;vertices;width;height;drawPath;regenPath;borderColor;constructor(e,s=2,n=2,r="#FF8008DC"){this.position=e,this.width=s,this.height=n,this.borderColor=r,this.localVertices=this.setLocalVertices(),this.regenPath=!1,this.vertices={a:T.add(this.position,this.localVertices.a),b:T.add(this.position,this.localVertices.b),c:T.add(this.position,this.localVertices.c),d:T.add(this.position,this.localVertices.d)}}setVertices(){T.add(this.position,this.localVertices.a,this.vertices.a),T.add(this.position,this.localVertices.b,this.vertices.b),T.add(this.position,this.localVertices.c,this.vertices.c),T.add(this.position,this.localVertices.d,this.vertices.d)}setLocalVertices(){return Object.freeze({a:new T,b:new T(this.width,0),c:new T(this.width,this.height),d:new T(0,this.height)})}generatePath(){const e=new Path2D;return e.rect(this.vertices.a.x,this.vertices.a.y,this.width,this.height),this.regenPath=!1,e}draw(e,s){s&&((!this.drawPath||this.regenPath)&&(this.drawPath=this.generatePath()),e.save(),e.strokeStyle=this.borderColor,e.stroke(this.drawPath),e.restore())}moveShape(e,s=!0){s?this.position.add(e):this.position.copy(e),this.setVertices(),this.regenPath=!0}collisionWithPoint(e){return e.x>this.vertices.a.x&&e.x<this.vertices.c.x&&e.y>this.vertices.a.y&&e.y<this.vertices.c.y}collisionWithBox(e){return!(this.vertices.c.x<e.vertices.a.x||this.vertices.c.y<e.vertices.a.y||this.vertices.a.x>e.vertices.c.x||this.vertices.a.y>e.vertices.c.y)}collisionWithCircle(e){return e.collisionWithBox(this)}collisionWithLine(e){const s=new ot(this.vertices.a,this.vertices.d),n=new ot(this.vertices.a,this.vertices.b),r=new ot(this.vertices.b,this.vertices.c),i=new ot(this.vertices.c,this.vertices.d);return this.collisionWithPoint(e.position)||this.collisionWithPoint(e.endPosition)||e.collisionWithLine(s)||e.collisionWithLine(n)||e.collisionWithLine(r)||e.collisionWithLine(i)}}const wr={setCollisionShapeSize(t,e,s=0,n=0,r=0,i=0,o=1e-4){return new U(Math.abs(t.x-e.x)<o?s:n,Math.abs(t.y-e.y)<o?r:i)},generateCollisionShapes(t,e,s){if(s.length===0)return[];const n=[],r=new T(6,6),i=t.clone(),o=new T;for(let u=0;u<=s.length;u++){u<s.length?T.bilinear(t,e,s[u],o):o.copy(e);const p=this.setCollisionShapeSize(i,o,12,o.x-i.x,12,o.y-i.y);n.push(new De(i.sub(r),p.x,p.y)),i.copy(o)}return n}},zs=Math.PI*.5,_r=Math.PI*1.5,dt=Math.PI*.25,ut=Math.PI*.75;function fi(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Jt={exports:{}},kr=Jt.exports,Us;function br(){return Us||(Us=1,function(t,e){(function(){var s,n,r,i,o,u,p,w,h,$,v,k,_,b,f;r=Math.floor,$=Math.min,n=function(l,a){return l<a?-1:l>a?1:0},h=function(l,a,c,y,d){var m;if(c==null&&(c=0),d==null&&(d=n),c<0)throw new Error("lo must be non-negative");for(y==null&&(y=l.length);c<y;)m=r((c+y)/2),d(a,l[m])<0?y=m:c=m+1;return[].splice.apply(l,[c,c-c].concat(a)),a},u=function(l,a,c){return c==null&&(c=n),l.push(a),b(l,0,l.length-1,c)},o=function(l,a){var c,y;return a==null&&(a=n),c=l.pop(),l.length?(y=l[0],l[0]=c,f(l,0,a)):y=c,y},w=function(l,a,c){var y;return c==null&&(c=n),y=l[0],l[0]=a,f(l,0,c),y},p=function(l,a,c){var y;return c==null&&(c=n),l.length&&c(l[0],a)<0&&(y=[l[0],a],a=y[0],l[0]=y[1],f(l,0,c)),a},i=function(l,a){var c,y,d,m,S,I;for(a==null&&(a=n),m=(function(){I=[];for(var x=0,j=r(l.length/2);0<=j?x<j:x>j;0<=j?x++:x--)I.push(x);return I}).apply(this).reverse(),S=[],y=0,d=m.length;y<d;y++)c=m[y],S.push(f(l,c,a));return S},_=function(l,a,c){var y;if(c==null&&(c=n),y=l.indexOf(a),y!==-1)return b(l,0,y,c),f(l,y,c)},v=function(l,a,c){var y,d,m,S,I;if(c==null&&(c=n),d=l.slice(0,a),!d.length)return d;for(i(d,c),I=l.slice(a),m=0,S=I.length;m<S;m++)y=I[m],p(d,y,c);return d.sort(c).reverse()},k=function(l,a,c){var y,d,m,S,I,x,j,q,F;if(c==null&&(c=n),a*10<=l.length){if(m=l.slice(0,a).sort(c),!m.length)return m;for(d=m[m.length-1],j=l.slice(a),S=0,x=j.length;S<x;S++)y=j[S],c(y,d)<0&&(h(m,y,0,null,c),m.pop(),d=m[m.length-1]);return m}for(i(l,c),F=[],I=0,q=$(a,l.length);0<=q?I<q:I>q;0<=q?++I:--I)F.push(o(l,c));return F},b=function(l,a,c,y){var d,m,S;for(y==null&&(y=n),d=l[c];c>a;){if(S=c-1>>1,m=l[S],y(d,m)<0){l[c]=m,c=S;continue}break}return l[c]=d},f=function(l,a,c){var y,d,m,S,I;for(c==null&&(c=n),d=l.length,I=a,m=l[a],y=2*a+1;y<d;)S=y+1,S<d&&!(c(l[y],l[S])<0)&&(y=S),l[a]=l[y],a=y,y=2*a+1;return l[a]=m,b(l,I,a,c)},s=function(){l.push=u,l.pop=o,l.replace=w,l.pushpop=p,l.heapify=i,l.updateItem=_,l.nlargest=v,l.nsmallest=k;function l(a){this.cmp=a??n,this.nodes=[]}return l.prototype.push=function(a){return u(this.nodes,a,this.cmp)},l.prototype.pop=function(){return o(this.nodes,this.cmp)},l.prototype.peek=function(){return this.nodes[0]},l.prototype.contains=function(a){return this.nodes.indexOf(a)!==-1},l.prototype.replace=function(a){return w(this.nodes,a,this.cmp)},l.prototype.pushpop=function(a){return p(this.nodes,a,this.cmp)},l.prototype.heapify=function(){return i(this.nodes,this.cmp)},l.prototype.updateItem=function(a){return _(this.nodes,a,this.cmp)},l.prototype.clear=function(){return this.nodes=[]},l.prototype.empty=function(){return this.nodes.length===0},l.prototype.size=function(){return this.nodes.length},l.prototype.clone=function(){var a;return a=new l,a.nodes=this.nodes.slice(0),a},l.prototype.toArray=function(){return this.nodes.slice(0)},l.prototype.insert=l.prototype.push,l.prototype.top=l.prototype.peek,l.prototype.front=l.prototype.peek,l.prototype.has=l.prototype.contains,l.prototype.copy=l.prototype.clone,l}(),function(l,a){return t.exports=a()}(this,function(){return s})}).call(kr)}(Jt)),Jt.exports}var cs,Fs;function $r(){return Fs||(Fs=1,cs=br()),cs}var Sr=$r();const Pr=fi(Sr),Er={stepDirectionFromAtan2(t){const e=U.ZERO;return t<=dt&&t>=-dt&&(e.x=1),t>dt&&t<ut&&(e.y=1),(t>=ut||t<=-ut)&&(e.x=-1),t<-dt&&t>-ut&&(e.y=-1),e},getSearchArea(t,e,s=3){const r=U.sub(t,e).abs().clone().mul(s),i=T.min(t,e),o=T.max(t,e),u=U.add(i,o).div(2);return i.copy(U.sub(u,U.div(r,2))),new De(i,r.x,r.y)},getCollisionsInArea(t,e){const s=new Map;for(const n of t.values())n.collisionShape.collisionWithBox(e)&&s.set(n.id,n);return s},floatEquals(t,e,s){return Math.abs(t-e)<s},currentDirection(t,e,s){const n=U.sub(e,t),r=n.len();if(n.equals(U.ZERO)&&r===0)return"e";const i=t.atan2(e);return this.floatEquals(i,zs,s)?"y":this.floatEquals(i,0,s)?"x":"c"},optimizePath(t,e=1e-5){const s=[];let n="c";for(let r=0;r<t.length;r++){const i=this.currentDirection(t[Math.max(0,r-1)],t[Math.min(r,t.length-1)],e);i==="c"||i!==n&&n!=="e"?s.push(t[r]):i==="x"?s[s.length-1].x=t[r].x:i==="y"&&(s[s.length-1].y=t[r].y),n=i}return s.filter(r=>!r.equals(U.ONE))},simplePathFinder(t,e,s=new U(.5,1)){const n=[];if(t.equals(e))return n;const r=t.clone(),i=U.ZERO;let o=0;for(;!r.equals(e)&&!(o>15);){o++;const u=e.atan2(r),w=this.stepDirectionFromAtan2(u).abs().mul(s).add(i);n.push(w),T.bilinear(t,e,w,r),i.copy(w)}return n},stepCollisionExists(t,e,s,n,r){const i=T.bilinear(t,e,n);for(const o of r.values())if(o.collisionShape.collisionWithLine(new ot(s,i)))return!0;return!1},manhattanDistance(t,e){return Math.abs(t.x-e.x)+Math.abs(t.y-e.y)},computeStepScore(t,e,s){return this.manhattanDistance(t,e)+this.manhattanDistance(e,s)},createPathFromScores(t,e){let s=t.get(`${e.x}::${e.y}`);const n=[];for(;s!==void 0;)n.push(s.t.clone()),s=s.from!==void 0?t.get(`${s.from.x}::${s.from.y}`):void 0;return t.clear(),n.reverse()},setNodeScore(t,e,s,n,r,i){const o=`${n.x}::${n.y}`;let u;const p=t.get(o)?.score??1/0;if(isNaN(p))return 3;if(i!==void 0){u=`${i.x}::${i.y}`;const h=t.get(u);if(n.equals(i))return 2;if(h?.from?.equals(i))return 4}const w=this.computeStepScore(e,n,s);return w<p?(t.set(o,{position:n,t:r,from:i,score:w}),1):0},testStep(t,e,s,n,r,i,o,u){const p=U.mul(r,u).add(n),w=T.bilinear(t,e,p);for(;U.min(u,o).equals(o);){if(this.stepCollisionExists(t,e,s,p,i)){u.sub(.075);continue}return[!0,w,p]}return[!1,T.ZERO,U.ZERO]},getPossibleNextSteps(t,e,s,n,r,i,o){const u=[],p=this.stepDirectionFromAtan2(s.atan2(e)),w=[p,U.rotate(p,zs),U.rotate(p,_r)];for(const h of w){const[$,v,k]=this.testStep(t,e,s,n,h,r,o,i.clone());$&&u.push([v,k])}return u},complexPathFinder(t,e,s){const n=new Map;this.setNodeScore(n,t,e,t,new U(0,0),void 0);const r=new Pr((w,h)=>w.score-h.score);r.push({key:t,score:n.get(`${t.x}::${t.y}`).score});const i=U.sub(t,e).abs().max(U.ONE),o=new U(.5,.5),u=new U(4,4).div(i).min(o);let p=0;for(;p<=512&&r.size()>0;){p++;const w=r.pop(),h=n.get(`${w.key.x}::${w.key.y}`),$=h.position,v=h.t;if($.equals(e,16))return this.setNodeScore(n,t,e,e,new U(1,1),$),[!0,this.createPathFromScores(n,e)];const k=this.getPossibleNextSteps(t,e,$,v,s,o,u);if(k.length===0){n.set(`${w.key.x}::${w.key.y}`,{position:$,t:v,from:h.from,score:NaN}),h.from!==void 0&&r.push({key:h.from,score:n.get(`${h.from.x}::${h.from.y}`).score});continue}for(const _ of k)switch(this.setNodeScore(n,t,e,_[0],_[1],$)){case 1:r.push({key:_[0],score:n.get(`${_[0].x}::${_[0].y}`).score});break;case 2:case 4:h.from!==void 0&&r.push({key:h.from,score:n.get(`${h.from.x}::${h.from.y}`)?.score??1/0}),h.score=NaN;break}}return[!1,[]]},find(t,e,s){if(t.equals(e,8))return[];const n=this.getSearchArea(t,e,1);let r=this.getCollisionsInArea(s,n);if(r.size===0)return this.simplePathFinder(t,e);{const i=this.getSearchArea(t,e,3);r=this.getCollisionsInArea(s,i);const[o,u]=this.complexPathFinder(t,e,r);return o?u:this.simplePathFinder(t,e)}}};var Oe=(t=>(t[t.START=0]="START",t[t.END=1]="END",t[t.BOTH=2]="BOTH",t[t.NONE=-1]="NONE",t))(Oe||{});class Ir{id;position;componentType;endPosition;anchors;connectedTo;drawPath;regenPath;collisionShape;selected;constructor(e,s,n,r={start:void 0,end:void 0},i){this.id=e,this.position=s,this.componentType=le.LINE,this.endPosition=n,this.anchors=i??[new U(.25,0),new U(.25,.5),new U(.5,.5),new U(.5,1)],this.connectedTo=r,this.regenPath=!0,this.collisionShape=this.generateCollisionShapes(),this.selected=!1}generatePath(){const e=new Path2D;e.moveTo(this.position.x,this.position.y);const s=new T;for(let n=0;n<this.anchors.length;n++)T.bilinear(this.position,this.endPosition,this.anchors[n],s),e.lineTo(s.x,s.y);return e.lineTo(this.endPosition.x,this.endPosition.y),this.regenPath=!1,e}generateCollisionShapes(){return wr.generateCollisionShapes(this.position,this.endPosition,this.anchors)}generateAnchors(e){return Er.find(this.position,this.endPosition,e)}draw(e){if(this.endPosition!==this.position){(this.regenPath||!this.drawPath)&&(this.drawPath=this.generatePath()),e.save(),e.strokeStyle="#101010",e.lineWidth=2,e.lineJoin="round",e.stroke(this.drawPath),e.restore();for(let s=0;s<this.collisionShape.length;s++)this.collisionShape[s].draw(e,this.selected)}}addAnchor(e,s=this.anchors.length){this.anchors.splice(s,0,e),this.regenPath=!0}removePoint(e=this.anchors.length-1){if(e<0||e>=this.anchors.length){console.error("ConnectionComponent.removePoint - index is out of bounds!");return}this.anchors.splice(e,1),this.regenPath=!0}move(e,s=!0,n=2,r=!0,i=new Map){s?(n!==1&&this.position.add(e),n!==0&&this.endPosition.add(e)):(n!==1&&this.position.copy(e),n!==0&&this.endPosition.copy(e)),this.anchors=this.generateAnchors(i),r&&(this.collisionShape=this.generateCollisionShapes()),this.regenPath=!0}changeAnchor(e,s=this.anchors.length-1){if(s<0||s>=this.anchors.length){console.error("ConnectionComponent.changePosition - index is out of bounds!");return}this.anchors[s]=U.sub(e,this.position).div(U.sub(this.endPosition,this.position)),this.regenPath=!0}changeConnection(e,s,n=!1){e!==void 0&&s!==void 0?n?this.connectedTo.end={slotId:e,nodeId:s}:this.connectedTo.start={slotId:e,nodeId:s}:n?this.connectedTo.end=void 0:this.connectedTo.start=void 0}onEvent(e){switch(e){case ne.FOCUS_IN:this.selected=!0;break;case ne.FOCUS_OUT:this.selected=!1;break;default:return!1}return!0}toObject(){const e={id:this.id,componentType:this.componentType,position:this.position.toPlainObject(),endPosition:this.endPosition.toPlainObject(),anchors:[],connectedTo:this.connectedTo};return this.anchors.forEach(s=>e.anchors.push(s.toPlainObject())),e}}async function Or(t){const e=new Image;return e.src=t,await e.decode(),window.createImageBitmap(e)}function Xe(t,e){const s={};let n=0;for(const r of e)Object.keys(t).includes(r)&&(s[n]=t[r],n++);return s}const pi="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'?%3e%3csvg%20width='88'%20height='50'%20version='1.1'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='m64%2025h25m-64-10h-26m27%2020h-27'%20fill='none'%20stroke='%23000'%20stroke-width='2'/%3e%3cpath%20d='m26.857%207.8571h17.619c9.7607%200%2016.667%207.64%2016.667%2017.143s-7.3822%2017.143-17.143%2017.143h-17.143z'%20fill='%23fff'/%3e%3cpath%20d='m24%205v40h20.476c11.268%200%2020-9%2020-20s-8.7321-20-20-20zm2.8571%202.8571h17.619c9.7607%200%2016.667%207.64%2016.667%2017.143s-7.3822%2017.143-17.143%2017.143h-17.143z'/%3e%3c/svg%3e",mi="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'?%3e%3csvg%20width='88'%20height='50'%20version='1.1'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='m73%2025h16m-64-10h-26m27%2020h-27'%20fill='none'%20stroke='%23000'%20stroke-width='2'/%3e%3cpath%20d='m26.857%207.8571h17.619c9.7607%200%2016.667%207.64%2016.667%2017.143s-7.3822%2017.143-17.143%2017.143h-17.143z'%20fill='%23fff'/%3e%3cpath%20d='m24%205v40h20.476c11.268%200%2020-9%2020-20s-8.7321-20-20-20zm2.8571%202.8571h17.619c9.7607%200%2016.667%207.64%2016.667%2017.143s-7.3822%2017.143-17.143%2017.143h-17.143z'/%3e%3cpath%20d='m73%2025a4%204%200%201%201-8%200%204%204%200%201%201%208%200z'%20fill='%23fff'%20stroke='%23000'%20stroke-width='3'/%3e%3c/svg%3e",yi="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'?%3e%3csvg%20width='88'%20height='50'%20version='1.1'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='m73%2025h16m-64-10h-26m27%2020h-27'%20fill='none'%20stroke='%23000'%20stroke-width='2'/%3e%3cpath%20d='m23.969%208h11.281c4.6842%200%2018.287-0.13021%2027.969%2017-4.7668%208.4291-10.521%2012.684-15.719%2014.812-5.3607%202.1954-9.8419%202.1875-12.25%202.1875h-11.25c1.8736-3.1084%204.75-9.0494%204.75-17%200-7.9734-2.9085-13.9-4.7812-17z'%20fill='%23fff'%20fill-rule='evenodd'/%3e%3cpath%20d='m18.094%205%202%202.4375s5.6562%207%205.6562%2017.562-5.6562%2017.562-5.6562%2017.562l-2%202.4375h17.156c2.4081%201e-6%207.6897%200.02451%2013.625-2.4062%205.9353-2.4308%2012.537-7.3433%2017.688-16.875l-1.3125-0.71875%201.3125-0.71875c-10.303-19.066-26.556-19.281-31.312-19.281zm5.875%203h11.281c4.6842%200%2018.287-0.13021%2027.969%2017-4.7668%208.4291-10.521%2012.684-15.719%2014.812-5.3607%202.1954-9.8419%202.1875-12.25%202.1875h-11.25c1.8736-3.1084%204.75-9.0494%204.75-17%200-7.9734-2.9085-13.9-4.7812-17z'%20fill-rule='evenodd'/%3e%3cpath%20d='m73%2025a4%204%200%201%201-8%200%204%204%200%201%201%208%200z'%20fill='%23fff'%20stroke='%23000'%20stroke-width='3'/%3e%3c/svg%3e",gi="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'?%3e%3csvg%20width='88'%20height='50'%20version='1.1'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='m73.135%2025h15.843m-65.957%200h-24'%20fill='none'%20stroke='%23000'%20stroke-width='2'/%3e%3cpath%20d='m25.947%207.4063%2036.125%2017.594-36.125%2017.594z'%20fill='%23fff'/%3e%3cpath%20d='m72.978%2025a4%204%200%201%201-8%200%204%204%200%201%201%208%200z'%20fill='%23fff'%20stroke='%23000'%20stroke-width='3'/%3e%3cpath%20d='m22.947%202.5938v44.812l2.1562-1.0625%2041.031-20v-2.6875l-41.031-20zm3%204.8125%2036.125%2017.594-36.125%2017.594z'/%3e%3c/svg%3e",vi="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'?%3e%3csvg%20width='88'%20height='50'%20version='1.1'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='m64%2025h25m-64-10h-26m27%2020h-27'%20fill='none'%20stroke='%23000'%20stroke-width='2'/%3e%3cpath%20d='m23.969%208h11.281c4.6842%200%2018.287-0.13021%2027.969%2017-4.7668%208.4291-10.521%2012.684-15.719%2014.812-5.3607%202.1954-9.8419%202.1875-12.25%202.1875h-11.25c1.8736-3.1084%204.75-9.0494%204.75-17%200-7.9734-2.9085-13.9-4.7812-17z'%20fill='%23fff'%20fill-rule='evenodd'/%3e%3cpath%20d='m18.094%205%202%202.4375s5.6562%207%205.6562%2017.562-5.6562%2017.562-5.6562%2017.562l-2%202.4375h17.156c2.4081%201e-6%207.6897%200.02451%2013.625-2.4062%205.9353-2.4308%2012.537-7.3433%2017.688-16.875l-1.3125-0.71875%201.3125-0.71875c-10.303-19.066-26.556-19.281-31.312-19.281zm5.875%203h11.281c4.6842%200%2018.287-0.13021%2027.969%2017-4.7668%208.4291-10.521%2012.684-15.719%2014.812-5.3607%202.1954-9.8419%202.1875-12.25%202.1875h-11.25c1.8736-3.1084%204.75-9.0494%204.75-17%200-7.9734-2.9085-13.9-4.7812-17z'%20fill-rule='evenodd'/%3e%3c/svg%3e",wi="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'?%3e%3csvg%20width='88'%20height='50'%20version='1.1'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='m72.333%2025h16.667m-64.614-10h-25.386m26.362%2020h-26.362'%20fill='none'%20stroke='%23000'%20stroke-width='2'/%3e%3cg%20transform='translate(-6)'%20fill-rule='evenodd'%3e%3cpath%20d='m24.25%2042c-1.5974%202.6444-2.25%203-2.25%203h-3.6562l2-2.4375s5.6562-7.0001%205.6562-17.563-5.6562-17.562-5.6562-17.562l-2-2.4375h3.6562c0.78125%200.9375%201.4219%201.6562%202.2188%203%201.8727%203.0998%204.7812%209.0266%204.7812%2017%200%207.9506-2.8967%2013.879-4.75%2017z'/%3e%3cpath%20d='m29.969%208h11.281c4.6842%200%2018.287-0.13021%2027.969%2017-4.7668%208.4291-10.521%2012.684-15.719%2014.812-5.3607%202.1954-9.8419%202.1875-12.25%202.1875h-11.25c1.8736-3.1084%204.75-9.0494%204.75-17%200-7.9734-2.9085-13.9-4.7812-17z'%20fill='%23fff'/%3e%3cpath%20d='m24.094%205%202%202.4375s5.6562%207%205.6562%2017.562-5.6562%2017.562-5.6562%2017.562l-2%202.4375h17.156c2.4081%201e-6%207.6897%200.02451%2013.625-2.4062%205.9353-2.4308%2012.537-7.3433%2017.688-16.875l-1.3125-0.71875%201.3125-0.71875c-10.303-19.066-26.556-19.281-31.312-19.281zm5.875%203h11.281c4.6842%200%2018.287-0.13021%2027.969%2017-4.7668%208.4291-10.521%2012.684-15.719%2014.812-5.3607%202.1954-9.8419%202.1875-12.25%202.1875h-11.25c1.8736-3.1084%204.75-9.0494%204.75-17%200-7.9734-2.9085-13.9-4.7812-17z'/%3e%3c/g%3e%3cpath%20d='m73%2025a4%204%200%201%201-8%200%204%204%200%201%201%208%200z'%20fill='%23fff'%20stroke='%23000'%20stroke-width='3'/%3e%3c/svg%3e",_i="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'?%3e%3csvg%20width='88'%20height='50'%20version='1.1'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='m64%2025h25m-64.614-10h-25.386m26.362%2020h-26.362'%20fill='none'%20stroke='%23000'%20stroke-width='2'/%3e%3cg%20transform='translate(-6)'%20fill-rule='evenodd'%3e%3cpath%20d='m24.25%2042c-1.5974%202.6444-2.25%203-2.25%203h-3.6562l2-2.4375s5.6562-7%205.6562-17.562-5.6562-17.562-5.6562-17.562l-2-2.4375h3.6562c0.78125%200.9375%201.4219%201.6562%202.2188%203%201.8727%203.0998%204.7812%209.0266%204.7812%2017%200%207.9506-2.8967%2013.879-4.75%2017z'/%3e%3cpath%20d='m29.969%208h11.281c4.6842%200%2018.287-0.1302%2027.969%2017-4.7668%208.4291-10.521%2012.684-15.719%2014.812-5.3607%202.1954-9.8419%202.1875-12.25%202.1875h-11.25c1.8736-3.1084%204.75-9.0494%204.75-17%200-7.9734-2.9085-13.9-4.7812-17z'%20fill='%23fff'/%3e%3cpath%20d='m24.094%205%202%202.4375s5.6562%207%205.6562%2017.562-5.6562%2017.562-5.6562%2017.562l-2%202.4375h17.156c2.4081%200%207.6897%200.02451%2013.625-2.4062s12.537-7.3433%2017.688-16.875l-1.3125-0.71875%201.3125-0.71875c-10.303-19.066-26.556-19.281-31.312-19.281zm5.875%203h11.281c4.6842%200%2018.287-0.1302%2027.969%2017-4.7668%208.4291-10.521%2012.684-15.719%2014.812-5.3607%202.1954-9.8419%202.1875-12.25%202.1875h-11.25c1.8736-3.1084%204.75-9.0494%204.75-17%200-7.9734-2.9085-13.9-4.7812-17z'/%3e%3c/g%3e%3c/svg%3e",Tr={id:z.G_AND,imgPath:[pi],connectionSlot:[{id:0,name:"A",in:!0,localPos:new T(-4,15)},{id:1,name:"B",in:!0,localPos:new T(-4,35)},{id:2,name:"C",in:!1,localPos:new T(92,25)}]},Cr={id:z.G_NAND,imgPath:[mi],connectionSlot:[{id:0,name:"A",in:!0,localPos:new T(-4,15)},{id:1,name:"B",in:!0,localPos:new T(-4,35)},{id:2,name:"C",in:!1,localPos:new T(92,25)}]},Nr={id:z.G_NOR,imgPath:[yi],connectionSlot:[{id:0,name:"A",in:!0,localPos:new T(-4,15)},{id:1,name:"B",in:!0,localPos:new T(-4,35)},{id:2,name:"C",in:!1,localPos:new T(92,25)}]},Hs={id:z.G_NOT,imgPath:[gi],connectionSlot:[{id:0,name:"In",in:!0,localPos:new T(-4,25)},{id:1,name:"Out",in:!1,localPos:new T(92,25)}]},xr={id:z.G_OR,imgPath:[vi],connectionSlot:[{id:0,name:"A",in:!0,localPos:new T(-4,15)},{id:1,name:"B",in:!0,localPos:new T(-4,35)},{id:2,name:"C",in:!1,localPos:new T(92,25)}]},Rr={id:z.G_XNOR,imgPath:[wi],connectionSlot:[{id:0,name:"A",in:!0,localPos:new T(-4,15)},{id:1,name:"B",in:!0,localPos:new T(-4,35)},{id:2,name:"C",in:!1,localPos:new T(92,25)}]},Mr={id:z.G_XOR,imgPath:[_i],connectionSlot:[{id:0,name:"A",in:!0,localPos:new T(-4,15)},{id:1,name:"B",in:!0,localPos:new T(-4,35)},{id:2,name:"C",in:!1,localPos:new T(92,25)}]};class at{id;position;componentType;nodeType;slots;collisionShape;_images;imageSize;halfImageSize;imageMode="UP_LEFT";_signalData;selected;get image(){return Object.keys(this._images).length===0?null:this._images[0]}get state(){return this._signalData.output??!1}constructor(e,s,n,r,i,o,u,p,w=!0){if(this.id=e,this.position=s,this.componentType=le.NODE,this.nodeType=at.getNodeModel(n),this._signalData=p[this.id],this.slots=o,this._images=Xe(u,this.nodeType.imgPath),this.imageSize=new T(this.image?.width??100,this.image?.height??100),this.halfImageSize=T.div(this.imageSize,2),w){this.imageMode="CENTER",this.position.sub(this.halfImageSize);const h=new T(r,i).sub(this.imageSize);this.position.min(h).max(T.ZERO)}this.collisionShape=new De(this.position,this.imageSize.x,this.imageSize.y),this.selected=!1}static getNodeModel(e){switch(e){case z.G_AND:return Tr;case z.G_NAND:return Cr;case z.G_NOR:return Nr;case z.G_NOT:return Hs;case z.G_OR:return xr;case z.G_XNOR:return Rr;case z.G_XOR:return Mr;default:return Hs}}move(e,s=!0){s?this.position.add(e):this.imageMode==="CENTER"?T.sub(e,this.halfImageSize,this.position):this.position.copy(e),this.collisionShape.moveShape(this.position,!1)}draw(e){this.image&&(e.drawImage(this.image,this.position.x,this.position.y),this.collisionShape!==void 0&&this.collisionShape.draw(e,this.selected))}onEvent(e){switch(e){case ne.FOCUS_IN:this.selected=!0;break;case ne.FOCUS_OUT:this.selected=!1;break;default:return!1}return!0}toObject(){return{id:this.id,componentType:this.componentType,nodeType:this.nodeType.id,position:this.position.toPlainObject(),slotIds:this.slots.map(s=>s.id),state:this.state}}}class Dr{position;radius;radiusSquared;drawPath;regenPath;borderColor;constructor(e,s,n="#FF8008DC"){this.position=e,this.radius=s,this.radiusSquared=s*s,this.borderColor=n,this.regenPath=!1}generatePath(){const e=new Path2D;return e.arc(this.position.x,this.position.y,this.radius,0,Math.PI*2),this.regenPath=!1,e}draw(e,s){s&&((!this.drawPath||this.regenPath)&&(this.drawPath=this.generatePath()),e.save(),e.strokeStyle=this.borderColor,e.stroke(this.drawPath),e.restore())}moveShape(e,s=!0){s?this.position.add(e):this.position.copy(e),this.drawPath=this.generatePath()}collisionWithPoint(e){return T.sub(this.position,e).lenSquared()<this.radiusSquared}collisionWithBox(e){if(e.collisionWithPoint(this.position))return!0;const s=T.max(e.vertices.a,T.min(e.vertices.c,this.position));return T.sub(this.position,s).lenSquared()<this.radiusSquared}collisionWithCircle(e){return T.sub(this.position,e.position).len()<this.radius+e.radius}collisionWithLine(e){return e.collisionWithCircle(this)}}class jr{id;position;globalPosition;componentType;parent;slotIdAtParent;_slotConnections;drawPath;regenPath;selected;inSlot;color;colorActive;radius;attractionRadius;collisionShape;get slotConnections(){return this._slotConnections}set slotConnections(e){this.inSlot?(this._slotConnections.splice(0,this._slotConnections.length),this._slotConnections.push(e[0])):this._slotConnections=e}constructor(e,s,n,r,i=[],o=!0,u=4,p=12,w="#0880FF",h="#FF0000"){this.id=e,this.position=s,this.globalPosition=T.add(s,n.position),this.componentType=le.SLOT,this.parent=n,this.slotIdAtParent=r,this._slotConnections=i,this.color=w,this.colorActive=h,this.selected=!1,this.inSlot=o,this.radius=u,this.attractionRadius=p,this.collisionShape=new Dr(this.globalPosition,this.attractionRadius),this.regenPath=!1}move(e,s=!0){T.add(this.position,this.parent.position,this.globalPosition),this.collisionShape.moveShape(this.globalPosition,!1),this.regenPath=!0}generatePath(){const e=new Path2D;return e.arc(this.globalPosition.x,this.globalPosition.y,this.radius,0,Math.PI*2),e}draw(e){(!this.drawPath||this.regenPath)&&(this.drawPath=this.generatePath()),e.save(),e.fillStyle=this.selected?this.colorActive:this.color,e.fill(this.drawPath),e.restore(),this.collisionShape.draw(e,this.selected)}onEvent(e){switch(e){case ne.FOCUS_IN:this.selected=!0;break;case ne.FOCUS_OUT:this.selected=!1;break;default:return!1}return!0}toObject(){return{id:this.id,componentType:this.componentType,position:this.position.toPlainObject(),parentId:this.parent.id,slotIdAtParent:this.slotIdAtParent,connectionIds:this.slotConnections.map(s=>s.id),inSlot:this.inSlot,color:this.color,colorActive:this.colorActive,radius:this.radius,attractionRadius:this.attractionRadius}}}class Ar{id;position;componentType;text;parent;style;textSize;collisionShape;canvasContext;selected;constructor(e,s,n="",r="12px sans-serif",i,o){this.id=e,this.position=s,this.componentType=le.TEXT,this.text=n,this.style=r,this.parent=i,this.canvasContext=o,this.textSize=this.measureText(n,r),this.position.sub(T.div(this.textSize,2)),this.collisionShape=new De(this.position,this.textSize.x,this.textSize.y),this.selected=!1}measureText(e,s){this.canvasContext.font=s,this.canvasContext.textBaseline="top",this.canvasContext.textAlign="left";const n=this.canvasContext.measureText(e);return new T(n.width,n.actualBoundingBoxDescent-n.actualBoundingBoxAscent).max(new T(16,16))}draw(e){e.save(),e.font=this.style,e.textBaseline="top",e.textAlign="left",e.fillText(this.text,this.position.x,this.position.y),e.restore(),this.collisionShape.draw(e,this.selected)}move(e,s=!0){s?this.position.add(e):T.sub(e,T.div(this.textSize,2),this.position),this.collisionShape.moveShape(this.position,!1)}onEvent(e){switch(e){case ne.FOCUS_IN:this.selected=!0;break;case ne.FOCUS_OUT:this.selected=!1;break;default:return!1}return!0}toObject(){return{id:this.id,componentType:this.componentType,position:this.position.toPlainObject(),text:this.text,parent:this.parent,style:this.style}}}const ki="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB3aWR0aD0iNzAiIGhlaWdodD0iNTAiIHZlcnNpb249IjEuMSIgdmlld0JveD0iMCAwIDcwIDUwIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIj4KIDxnPgogIDxyZWN0IHg9IjEiIHk9IjEiIHdpZHRoPSI0OCIgaGVpZ2h0PSI0OCIgZmlsbD0iI2ZmZiIgc3Ryb2tlPSIjMDAwIiBzdHJva2Utd2lkdGg9IjIiLz4KICA8cGF0aCBkPSJtNDkuNSAyNS4wNDRoMjEuNSIgZmlsbD0iI2ZmZiIgc3Ryb2tlPSIjMDAwIiBzdHJva2Utd2lkdGg9IjIuMTEzNiIvPgogIDx0ZXh0IHg9IjE1Ljg0OCIgeT0iMzYuNDM5OTk5IiBmaWxsPSIjMDAwMDAwIiBmb250LXNpemU9IjMycHgiIHN0cm9rZT0iIzAwMDAwMCIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+PHRzcGFuIHg9IjE1Ljg0OCIgeT0iMzYuNDM5OTk5IiBmaWxsPSIjMDAwMDAwIiBmb250LXNpemU9IjMycHgiIHN0cm9rZT0iIzAwMDAwMCI+MDwvdHNwYW4+PC90ZXh0PgogPC9nPgo8L3N2Zz4K",bi="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB3aWR0aD0iNzAiIGhlaWdodD0iNTAiIHZlcnNpb249IjEuMSIgdmlld0JveD0iMCAwIDcwIDUwIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPgogPGc+CiAgPHJlY3QgeD0iMSIgeT0iMSIgd2lkdGg9IjQ4IiBoZWlnaHQ9IjQ4IiBmaWxsPSIjZmZmIiBzdHJva2U9IiMwMDAiIHN0cm9rZS13aWR0aD0iMiIvPgogIDxwYXRoIGQ9Im00OS41IDI1LjA0NGgyMS41IiBmaWxsPSIjZmZmIiBzdHJva2U9IiMwMDAiIHN0cm9rZS13aWR0aD0iMi4xMTM2Ii8+CiAgPHRleHQgeD0iMTUuODQ4IiB5PSIzNi40Mzk5OTkiIGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjMycHgiIHN0cm9rZT0iIzAwMDAwMCIgc3R5bGU9ImZvbnQtdmFyaWFudC1jYXBzOm5vcm1hbDtmb250LXZhcmlhbnQtZWFzdC1hc2lhbjpub3JtYWw7Zm9udC12YXJpYW50LWxpZ2F0dXJlczpub3JtYWw7Zm9udC12YXJpYW50LW51bWVyaWM6bm9ybWFsIiB4bWw6c3BhY2U9InByZXNlcnZlIj48dHNwYW4+MTwvdHNwYW4+PC90ZXh0PgogPC9nPgo8L3N2Zz4K",$i="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'%20standalone='no'?%3e%3csvg%20width='70'%20height='50'%20version='1.1'%20viewBox='0%200%2070%2050'%20id='svg1'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:svg='http://www.w3.org/2000/svg'%3e%3cdefs%20id='defs1'%20/%3e%3cg%20id='g1'%20transform='translate(-0.96743465)'%3e%3cpath%20d='M%2049.5,25.044%20H%2071'%20fill='%23ffffff'%20stroke='%23000000'%20stroke-width='2.1136'%20id='path1'%20/%3e%3c/g%3e%3ccircle%20style='fill:%23ffffff;stroke:%23000000;stroke-width:2'%20id='path3'%20cx='25'%20cy='25'%20r='24'%20/%3e%3ccircle%20style='fill:%23b3b3b3;stroke:%23000000;stroke-width:1;stroke-dasharray:none'%20id='path4'%20cx='25'%20cy='25'%20r='20'%20/%3e%3c/svg%3e",Si="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'%20standalone='no'?%3e%3csvg%20width='70'%20height='50'%20version='1.1'%20viewBox='0%200%2070%2050'%20id='svg1'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:svg='http://www.w3.org/2000/svg'%3e%3cdefs%20id='defs1'%20/%3e%3cg%20id='g4'%3e%3cpath%20d='M%2049.5,25.044%20H%2071'%20fill='%23ffffff'%20stroke='%23000000'%20stroke-width='2.1136'%20id='path1'%20transform='translate(-0.96743465)'%20/%3e%3ccircle%20style='fill:%23ffffff;stroke:%23000000;stroke-width:2'%20id='path3'%20cx='25'%20cy='25'%20r='24'%20/%3e%3ccircle%20style='fill:%23ff0000;stroke:%23000000;stroke-width:1;stroke-dasharray:none'%20id='path4'%20cx='25'%20cy='25'%20r='20'%20/%3e%3c/g%3e%3c/svg%3e",Pi="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'?%3e%3c!--%20Created%20with%20Inkscape%20(http://www.inkscape.org/)%20--%3e%3csvg%20width='60'%20height='50'%20version='1.1'%20viewBox='0%200%2060%2050'%20xmlns='http://www.w3.org/2000/svg'%3e%3cg%20stroke='%23000'%3e%3crect%20x='1'%20y='1'%20width='48'%20height='48'%20fill='%23fff'%20stroke-width='2'/%3e%3cpath%20d='m4.8716%2042.094h5.9456v-34.435h13.13v34.683h12.015v-34.683h9.1662'%20fill='none'/%3e%3cpath%20d='m49.671%2025h10.529'%20fill='none'%20stroke-width='2'/%3e%3c/g%3e%3c/svg%3e",Ei={id:z.I_SWITCH,imgPath:[ki,bi],connectionSlot:[{id:0,in:!1,name:"Out",localPos:new T(74,25)}]},Ii={id:z.I_BUTTON,imgPath:[$i,Si],connectionSlot:[{id:0,in:!1,name:"Out",localPos:new T(74,25)}]},Oi={id:z.I_CLOCK,imgPath:[Pi],connectionSlot:[{id:0,in:!1,name:"Out",localPos:new T(64,25)}]};class qr{id;position;componentType;nodeType;slots;collisionShape;_images;imageSize;halfImageSize;imageMode="UP_LEFT";_signalData;selected;get image(){return Object.keys(this._images).length===0?null:this._images[this.state?1:0]}get state(){return this._signalData.output??!1}set state(e){this._signalData.output=e}constructor(e,s,n,r,i,o,u,p=!0){if(this.id=e,this.position=s,this.componentType=le.INPUT,this.nodeType=Ei,this._signalData=u[this.id],this.slots=i,this._images=Xe(o,this.nodeType.imgPath),this.imageSize=new T(this.image?.width??100,this.image?.height??100),this.halfImageSize=T.div(this.imageSize,2),p){this.imageMode="CENTER",this.position.sub(this.halfImageSize);const w=new T(n,r).sub(this.imageSize);this.position.min(w).max(T.ZERO)}this.collisionShape=new De(this.position,this.imageSize.x,this.imageSize.y),this.selected=!1}move(e,s=!0){s?this.position.add(e):this.imageMode==="CENTER"?T.sub(e,this.halfImageSize,this.position):this.position.copy(e),this.collisionShape.moveShape(this.position,!1)}draw(e){this.image&&(e.drawImage(this.image,this.position.x,this.position.y),this.collisionShape!==void 0&&this.collisionShape.draw(e,this.selected))}onEvent(e){switch(e){case ne.MOUSE_RELEASED:this.state=!this.state;break;case ne.FOCUS_IN:this.selected=!0;break;case ne.FOCUS_OUT:this.selected=!1;break;default:return!1}return!0}toObject(){return{id:this.id,componentType:this.componentType,nodeType:this.nodeType.id,position:this.position.toPlainObject(),slotIds:this.slots.map(s=>s.id),state:this.state}}}const Ti="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'?%3e%3csvg%20width='46.08'%20height='64'%20version='1.1'%20viewBox='0%200%2046.08%2064'%20xmlns='http://www.w3.org/2000/svg'%3e%3cg%20stroke='%23000'%20stroke-linejoin='round'%3e%3cpath%20d='m23.041%202.5131c-6.8934%200-12.445%204.8028-12.445%2010.768v18.825%202.7066h-7.2638v9.2635h39.415v-9.2635h-7.2638v-2.7066-18.825c0-5.9654-5.5488-10.768-12.442-10.768z'%20fill='%23d9d9d9'%20stroke-width='2.5854'/%3e%3cpath%20d='m9.619%2035.474h26.424'%20fill='%23fdfdfd'%20stroke-width='1.2927'/%3e%3cpath%20d='m23.04%2044.39v21.976'%20fill='%23fdfdfd'%20stroke-width='2.8546'/%3e%3c/g%3e%3c/svg%3e",Ci="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'?%3e%3csvg%20width='46.08'%20height='64'%20version='1.1'%20viewBox='0%200%2046.08%2064'%20xmlns='http://www.w3.org/2000/svg'%3e%3cg%20stroke='%23000'%20stroke-linejoin='round'%3e%3cpath%20d='m23.041%202.5131c-6.8934%200-12.445%204.8028-12.445%2010.768v18.825%202.7066h-7.2638v9.2635h39.415v-9.2635h-7.2638v-2.7066-18.825c0-5.9654-5.5488-10.768-12.442-10.768z'%20fill='%23ff4949'%20stroke-width='2.5854'/%3e%3cpath%20d='m9.619%2035.474h26.424'%20fill='%23fdfdfd'%20stroke-width='1.2927'/%3e%3cpath%20d='m23.04%2044.39v21.976'%20fill='%23fdfdfd'%20stroke-width='2.8546'/%3e%3c/g%3e%3c/svg%3e",Ni="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'%20standalone='no'?%3e%3c!--%20Created%20with%20Inkscape%20(http://www.inkscape.org/)%20--%3e%3csvg%20width='90'%20height='120'%20viewBox='0%200%2090%20120'%20version='1.1'%20id='svg1'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:svg='http://www.w3.org/2000/svg'%3e%3cdefs%20id='defs1'%20/%3e%3cg%20id='layer1'%3e%3crect%20style='fill:%23ffffff;stroke:%23000000;stroke-width:1.98364;stroke-dasharray:none;fill-opacity:1'%20id='rect1'%20width='68.016357'%20height='118.01637'%20x='20.991819'%20y='0.99181795'%20/%3e%3cpath%20style='fill:%23b3b3b3;fill-opacity:1;stroke:none;stroke-width:2;stroke-dasharray:none'%20d='m%2037.896931,20.60398%202.443296,-2.225144%20h%2029.843106%20l%201.919733,2.225144%20-1.919733,2.225144%20H%2040.340227%20Z'%20id='path1'%20/%3e%3cpath%20style='fill:%23b3b3b3;fill-opacity:1;stroke:none;stroke-width:2;stroke-dasharray:none'%20d='m%2073.999998,23.18857%202.225144,2.443296%20v%2029.843106%20l%20-2.225144,1.919732%20-2.225144,-1.919732%20V%2025.631866%20Z'%20id='path1-5'%20/%3e%3cpath%20style='fill:%23b3b3b3;fill-opacity:1;stroke:none;stroke-width:2;stroke-dasharray:none'%20d='m%2037.89693,59.979294%202.443296,-2.225144%20h%2029.843107%20l%201.919732,2.225144%20-1.919732,2.225144%20H%2040.340226%20Z'%20id='path2'%20/%3e%3cpath%20style='fill:%23b3b3b3;fill-opacity:1;stroke:none;stroke-width:2;stroke-dasharray:none'%20d='m%2035.999998,23.18857%202.225144,2.443296%20v%2029.843106%20l%20-2.225144,1.919732%20-2.225144,-1.919732%20V%2025.631866%20Z'%20id='path3'%20/%3e%3cpath%20style='fill:%23b3b3b3;fill-opacity:1;stroke:none;stroke-width:2;stroke-dasharray:none'%20d='m%2073.999998,62.605295%202.225144,2.443296%20V%2094.891697%20L%2073.999998,96.81143%2071.774854,94.891697%20V%2065.048591%20Z'%20id='path4'%20/%3e%3cpath%20style='fill:%23b3b3b3;fill-opacity:1;stroke:none;stroke-width:2;stroke-dasharray:none'%20d='m%2037.89693,99.396019%202.443296,-2.225144%20h%2029.843107%20l%201.919732,2.225144%20-1.919732,2.225141%20H%2040.340226%20Z'%20id='path5'%20/%3e%3cpath%20style='fill:%23b3b3b3;fill-opacity:1;stroke:none;stroke-width:2;stroke-dasharray:none'%20d='m%2035.999998,62.605295%202.225144,2.443296%20V%2094.891697%20L%2035.999998,96.81143%2033.774854,94.891697%20V%2065.048591%20Z'%20id='path6'%20/%3e%3cpath%20style='fill:none;fill-opacity:1;stroke:%23000000;stroke-width:2;stroke-dasharray:none;stroke-opacity:1'%20d='M%2020.942532,17%20H%200'%20id='path7'%20/%3e%3cpath%20style='fill:none;fill-opacity:1;stroke:%23000000;stroke-width:2;stroke-dasharray:none;stroke-opacity:1'%20d='M%2020.942532,31.333333%20H%200'%20id='path8'%20/%3e%3cpath%20style='fill:none;fill-opacity:1;stroke:%23000000;stroke-width:2;stroke-dasharray:none;stroke-opacity:1'%20d='M%2020.942532,45.666667%20H%200'%20id='path9'%20/%3e%3cpath%20style='fill:none;fill-opacity:1;stroke:%23000000;stroke-width:2;stroke-dasharray:none;stroke-opacity:1'%20d='M%2020.942532,60%20H%200'%20id='path10'%20/%3e%3cpath%20style='fill:none;fill-opacity:1;stroke:%23000000;stroke-width:2;stroke-dasharray:none;stroke-opacity:1'%20d='M%2020.942532,74.333333%20H%200'%20id='path11'%20/%3e%3cpath%20style='fill:none;fill-opacity:1;stroke:%23000000;stroke-width:2;stroke-dasharray:none;stroke-opacity:1'%20d='M%2020.942532,88.666667%20H%200'%20id='path12'%20/%3e%3cpath%20style='fill:none;fill-opacity:1;stroke:%23000000;stroke-width:2;stroke-dasharray:none;stroke-opacity:1'%20d='M%2020.942532,103%20H%200'%20id='path13'%20/%3e%3c/g%3e%3c/svg%3e",xi="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'%20standalone='no'?%3e%3c!--%20Created%20with%20Inkscape%20(http://www.inkscape.org/)%20--%3e%3csvg%20width='90'%20height='120'%20viewBox='0%200%2090%20120'%20version='1.1'%20id='svg1'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:svg='http://www.w3.org/2000/svg'%3e%3cdefs%20id='defs1'%20/%3e%3cg%20id='layer1'%3e%3crect%20style='display:none;fill:none;stroke:%23000000;stroke-width:1.98364;stroke-dasharray:none'%20id='rect1'%20width='68.016357'%20height='118.01637'%20x='20.991819'%20y='0.99181795'%20/%3e%3cpath%20style='fill:%23ff0000;fill-opacity:1;stroke:none;stroke-width:2;stroke-dasharray:none'%20d='m%2037.896931,20.60398%202.443296,-2.225144%20h%2029.843106%20l%201.919733,2.225144%20-1.919733,2.225144%20H%2040.340227%20Z'%20id='path1'%20/%3e%3cpath%20style='display:none;fill:%23ff0000;fill-opacity:1;stroke:none;stroke-width:2;stroke-dasharray:none'%20d='m%2073.999998,23.18857%202.225144,2.443296%20v%2029.843106%20l%20-2.225144,1.919732%20-2.225144,-1.919732%20V%2025.631866%20Z'%20id='path1-5'%20/%3e%3cpath%20style='display:none;fill:%23ff0000;fill-opacity:1;stroke:none;stroke-width:2;stroke-dasharray:none'%20d='m%2073.999998,62.605295%202.225144,2.443296%20V%2094.891697%20L%2073.999998,96.81143%2071.774854,94.891697%20V%2065.048591%20Z'%20id='path4'%20/%3e%3cpath%20style='display:none;fill:%23ff0000;fill-opacity:1;stroke:none;stroke-width:2;stroke-dasharray:none'%20d='m%2037.89693,99.396019%202.443296,-2.225144%20h%2029.843107%20l%201.919732,2.225144%20-1.919732,2.225141%20H%2040.340226%20Z'%20id='path5'%20/%3e%3cpath%20style='display:none;fill:%23ff0000;fill-opacity:1;stroke:none;stroke-width:2;stroke-dasharray:none'%20d='m%2035.999998,62.605295%202.225144,2.443296%20V%2094.891697%20L%2035.999998,96.81143%2033.774854,94.891697%20V%2065.048591%20Z'%20id='path6'%20/%3e%3cpath%20style='display:none;fill:%23ff0000;fill-opacity:1;stroke:none;stroke-width:2;stroke-dasharray:none'%20d='m%2035.999998,23.18857%202.225144,2.443296%20v%2029.843106%20l%20-2.225144,1.919732%20-2.225144,-1.919732%20V%2025.631866%20Z'%20id='path3'%20/%3e%3cpath%20style='display:none;fill:%23ff0000;fill-opacity:1;stroke:none;stroke-width:2;stroke-dasharray:none'%20d='m%2037.89693,59.979294%202.443296,-2.225144%20h%2029.843107%20l%201.919732,2.225144%20-1.919732,2.225144%20H%2040.340226%20Z'%20id='path2'%20/%3e%3cpath%20style='display:none;fill:none;fill-opacity:1;stroke:%23000000;stroke-width:2;stroke-dasharray:none;stroke-opacity:1'%20d='M%2020.942532,17%20H%200'%20id='path7'%20/%3e%3cpath%20style='display:none;fill:none;fill-opacity:1;stroke:%23000000;stroke-width:2;stroke-dasharray:none;stroke-opacity:1'%20d='M%2020.942532,31.333333%20H%200'%20id='path8'%20/%3e%3cpath%20style='display:none;fill:none;fill-opacity:1;stroke:%23000000;stroke-width:2;stroke-dasharray:none;stroke-opacity:1'%20d='M%2020.942532,45.666667%20H%200'%20id='path9'%20/%3e%3cpath%20style='display:none;fill:none;fill-opacity:1;stroke:%23000000;stroke-width:2;stroke-dasharray:none;stroke-opacity:1'%20d='M%2020.942532,60%20H%200'%20id='path10'%20/%3e%3cpath%20style='display:none;fill:none;fill-opacity:1;stroke:%23000000;stroke-width:2;stroke-dasharray:none;stroke-opacity:1'%20d='M%2020.942532,74.333333%20H%200'%20id='path11'%20/%3e%3cpath%20style='display:none;fill:none;fill-opacity:1;stroke:%23000000;stroke-width:2;stroke-dasharray:none;stroke-opacity:1'%20d='M%2020.942532,88.666667%20H%200'%20id='path12'%20/%3e%3cpath%20style='display:none;fill:none;fill-opacity:1;stroke:%23000000;stroke-width:2;stroke-dasharray:none;stroke-opacity:1'%20d='M%2020.942532,103%20H%200'%20id='path13'%20/%3e%3c/g%3e%3c/svg%3e",Ri="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'%20standalone='no'?%3e%3c!--%20Created%20with%20Inkscape%20(http://www.inkscape.org/)%20--%3e%3csvg%20width='90'%20height='120'%20viewBox='0%200%2090%20120'%20version='1.1'%20id='svg1'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:svg='http://www.w3.org/2000/svg'%3e%3cdefs%20id='defs1'%20/%3e%3cg%20id='layer1'%3e%3crect%20style='display:none;fill:none;stroke:%23000000;stroke-width:1.98364;stroke-dasharray:none'%20id='rect1'%20width='68.016357'%20height='118.01637'%20x='20.991819'%20y='0.99181795'%20/%3e%3cpath%20style='display:none;fill:%23ff0000;fill-opacity:1;stroke:none;stroke-width:2;stroke-dasharray:none'%20d='m%2037.896931,20.60398%202.443296,-2.225144%20h%2029.843106%20l%201.919733,2.225144%20-1.919733,2.225144%20H%2040.340227%20Z'%20id='path1'%20/%3e%3cpath%20style='display:inline;fill:%23ff0000;fill-opacity:1;stroke:none;stroke-width:2;stroke-dasharray:none'%20d='m%2073.999998,23.18857%202.225144,2.443296%20v%2029.843106%20l%20-2.225144,1.919732%20-2.225144,-1.919732%20V%2025.631866%20Z'%20id='path1-5'%20/%3e%3cpath%20style='display:none;fill:%23ff0000;fill-opacity:1;stroke:none;stroke-width:2;stroke-dasharray:none'%20d='m%2073.999998,62.605295%202.225144,2.443296%20V%2094.891697%20L%2073.999998,96.81143%2071.774854,94.891697%20V%2065.048591%20Z'%20id='path4'%20/%3e%3cpath%20style='display:none;fill:%23ff0000;fill-opacity:1;stroke:none;stroke-width:2;stroke-dasharray:none'%20d='m%2037.89693,99.396019%202.443296,-2.225144%20h%2029.843107%20l%201.919732,2.225144%20-1.919732,2.225141%20H%2040.340226%20Z'%20id='path5'%20/%3e%3cpath%20style='display:none;fill:%23ff0000;fill-opacity:1;stroke:none;stroke-width:2;stroke-dasharray:none'%20d='m%2035.999998,62.605295%202.225144,2.443296%20V%2094.891697%20L%2035.999998,96.81143%2033.774854,94.891697%20V%2065.048591%20Z'%20id='path6'%20/%3e%3cpath%20style='display:none;fill:%23ff0000;fill-opacity:1;stroke:none;stroke-width:2;stroke-dasharray:none'%20d='m%2035.999998,23.18857%202.225144,2.443296%20v%2029.843106%20l%20-2.225144,1.919732%20-2.225144,-1.919732%20V%2025.631866%20Z'%20id='path3'%20/%3e%3cpath%20style='display:none;fill:%23ff0000;fill-opacity:1;stroke:none;stroke-width:2;stroke-dasharray:none'%20d='m%2037.89693,59.979294%202.443296,-2.225144%20h%2029.843107%20l%201.919732,2.225144%20-1.919732,2.225144%20H%2040.340226%20Z'%20id='path2'%20/%3e%3cpath%20style='display:none;fill:none;fill-opacity:1;stroke:%23000000;stroke-width:2;stroke-dasharray:none;stroke-opacity:1'%20d='M%2020.942532,17%20H%200'%20id='path7'%20/%3e%3cpath%20style='display:none;fill:none;fill-opacity:1;stroke:%23000000;stroke-width:2;stroke-dasharray:none;stroke-opacity:1'%20d='M%2020.942532,31.333333%20H%200'%20id='path8'%20/%3e%3cpath%20style='display:none;fill:none;fill-opacity:1;stroke:%23000000;stroke-width:2;stroke-dasharray:none;stroke-opacity:1'%20d='M%2020.942532,45.666667%20H%200'%20id='path9'%20/%3e%3cpath%20style='display:none;fill:none;fill-opacity:1;stroke:%23000000;stroke-width:2;stroke-dasharray:none;stroke-opacity:1'%20d='M%2020.942532,60%20H%200'%20id='path10'%20/%3e%3cpath%20style='display:none;fill:none;fill-opacity:1;stroke:%23000000;stroke-width:2;stroke-dasharray:none;stroke-opacity:1'%20d='M%2020.942532,74.333333%20H%200'%20id='path11'%20/%3e%3cpath%20style='display:none;fill:none;fill-opacity:1;stroke:%23000000;stroke-width:2;stroke-dasharray:none;stroke-opacity:1'%20d='M%2020.942532,88.666667%20H%200'%20id='path12'%20/%3e%3cpath%20style='display:none;fill:none;fill-opacity:1;stroke:%23000000;stroke-width:2;stroke-dasharray:none;stroke-opacity:1'%20d='M%2020.942532,103%20H%200'%20id='path13'%20/%3e%3c/g%3e%3c/svg%3e",Mi="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'%20standalone='no'?%3e%3c!--%20Created%20with%20Inkscape%20(http://www.inkscape.org/)%20--%3e%3csvg%20width='90'%20height='120'%20viewBox='0%200%2090%20120'%20version='1.1'%20id='svg1'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:svg='http://www.w3.org/2000/svg'%3e%3cdefs%20id='defs1'%20/%3e%3cg%20id='layer1'%3e%3crect%20style='display:none;fill:none;stroke:%23000000;stroke-width:1.98364;stroke-dasharray:none'%20id='rect1'%20width='68.016357'%20height='118.01637'%20x='20.991819'%20y='0.99181795'%20/%3e%3cpath%20style='display:none;fill:%23ff0000;fill-opacity:1;stroke:none;stroke-width:2;stroke-dasharray:none'%20d='m%2037.896931,20.60398%202.443296,-2.225144%20h%2029.843106%20l%201.919733,2.225144%20-1.919733,2.225144%20H%2040.340227%20Z'%20id='path1'%20/%3e%3cpath%20style='display:none;fill:%23ff0000;fill-opacity:1;stroke:none;stroke-width:2;stroke-dasharray:none'%20d='m%2073.999998,23.18857%202.225144,2.443296%20v%2029.843106%20l%20-2.225144,1.919732%20-2.225144,-1.919732%20V%2025.631866%20Z'%20id='path1-5'%20/%3e%3cpath%20style='display:inline;fill:%23ff0000;fill-opacity:1;stroke:none;stroke-width:2;stroke-dasharray:none'%20d='m%2073.999998,62.605295%202.225144,2.443296%20V%2094.891697%20L%2073.999998,96.81143%2071.774854,94.891697%20V%2065.048591%20Z'%20id='path4'%20/%3e%3cpath%20style='display:none;fill:%23ff0000;fill-opacity:1;stroke:none;stroke-width:2;stroke-dasharray:none'%20d='m%2037.89693,99.396019%202.443296,-2.225144%20h%2029.843107%20l%201.919732,2.225144%20-1.919732,2.225141%20H%2040.340226%20Z'%20id='path5'%20/%3e%3cpath%20style='display:none;fill:%23ff0000;fill-opacity:1;stroke:none;stroke-width:2;stroke-dasharray:none'%20d='m%2035.999998,62.605295%202.225144,2.443296%20V%2094.891697%20L%2035.999998,96.81143%2033.774854,94.891697%20V%2065.048591%20Z'%20id='path6'%20/%3e%3cpath%20style='display:none;fill:%23ff0000;fill-opacity:1;stroke:none;stroke-width:2;stroke-dasharray:none'%20d='m%2035.999998,23.18857%202.225144,2.443296%20v%2029.843106%20l%20-2.225144,1.919732%20-2.225144,-1.919732%20V%2025.631866%20Z'%20id='path3'%20/%3e%3cpath%20style='display:none;fill:%23ff0000;fill-opacity:1;stroke:none;stroke-width:2;stroke-dasharray:none'%20d='m%2037.89693,59.979294%202.443296,-2.225144%20h%2029.843107%20l%201.919732,2.225144%20-1.919732,2.225144%20H%2040.340226%20Z'%20id='path2'%20/%3e%3cpath%20style='display:none;fill:none;fill-opacity:1;stroke:%23000000;stroke-width:2;stroke-dasharray:none;stroke-opacity:1'%20d='M%2020.942532,17%20H%200'%20id='path7'%20/%3e%3cpath%20style='display:none;fill:none;fill-opacity:1;stroke:%23000000;stroke-width:2;stroke-dasharray:none;stroke-opacity:1'%20d='M%2020.942532,31.333333%20H%200'%20id='path8'%20/%3e%3cpath%20style='display:none;fill:none;fill-opacity:1;stroke:%23000000;stroke-width:2;stroke-dasharray:none;stroke-opacity:1'%20d='M%2020.942532,45.666667%20H%200'%20id='path9'%20/%3e%3cpath%20style='display:none;fill:none;fill-opacity:1;stroke:%23000000;stroke-width:2;stroke-dasharray:none;stroke-opacity:1'%20d='M%2020.942532,60%20H%200'%20id='path10'%20/%3e%3cpath%20style='display:none;fill:none;fill-opacity:1;stroke:%23000000;stroke-width:2;stroke-dasharray:none;stroke-opacity:1'%20d='M%2020.942532,74.333333%20H%200'%20id='path11'%20/%3e%3cpath%20style='display:none;fill:none;fill-opacity:1;stroke:%23000000;stroke-width:2;stroke-dasharray:none;stroke-opacity:1'%20d='M%2020.942532,88.666667%20H%200'%20id='path12'%20/%3e%3cpath%20style='display:none;fill:none;fill-opacity:1;stroke:%23000000;stroke-width:2;stroke-dasharray:none;stroke-opacity:1'%20d='M%2020.942532,103%20H%200'%20id='path13'%20/%3e%3c/g%3e%3c/svg%3e",Di="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'%20standalone='no'?%3e%3c!--%20Created%20with%20Inkscape%20(http://www.inkscape.org/)%20--%3e%3csvg%20width='90'%20height='120'%20viewBox='0%200%2090%20120'%20version='1.1'%20id='svg1'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:svg='http://www.w3.org/2000/svg'%3e%3cdefs%20id='defs1'%20/%3e%3cg%20id='layer1'%3e%3crect%20style='display:none;fill:none;stroke:%23000000;stroke-width:1.98364;stroke-dasharray:none'%20id='rect1'%20width='68.016357'%20height='118.01637'%20x='20.991819'%20y='0.99181795'%20/%3e%3cpath%20style='display:none;fill:%23ff0000;fill-opacity:1;stroke:none;stroke-width:2;stroke-dasharray:none'%20d='m%2037.896931,20.60398%202.443296,-2.225144%20h%2029.843106%20l%201.919733,2.225144%20-1.919733,2.225144%20H%2040.340227%20Z'%20id='path1'%20/%3e%3cpath%20style='display:none;fill:%23ff0000;fill-opacity:1;stroke:none;stroke-width:2;stroke-dasharray:none'%20d='m%2073.999998,23.18857%202.225144,2.443296%20v%2029.843106%20l%20-2.225144,1.919732%20-2.225144,-1.919732%20V%2025.631866%20Z'%20id='path1-5'%20/%3e%3cpath%20style='display:none;fill:%23ff0000;fill-opacity:1;stroke:none;stroke-width:2;stroke-dasharray:none'%20d='m%2073.999998,62.605295%202.225144,2.443296%20V%2094.891697%20L%2073.999998,96.81143%2071.774854,94.891697%20V%2065.048591%20Z'%20id='path4'%20/%3e%3cpath%20style='display:inline;fill:%23ff0000;fill-opacity:1;stroke:none;stroke-width:2;stroke-dasharray:none'%20d='m%2037.89693,99.396019%202.443296,-2.225144%20h%2029.843107%20l%201.919732,2.225144%20-1.919732,2.225141%20H%2040.340226%20Z'%20id='path5'%20/%3e%3cpath%20style='display:none;fill:%23ff0000;fill-opacity:1;stroke:none;stroke-width:2;stroke-dasharray:none'%20d='m%2035.999998,62.605295%202.225144,2.443296%20V%2094.891697%20L%2035.999998,96.81143%2033.774854,94.891697%20V%2065.048591%20Z'%20id='path6'%20/%3e%3cpath%20style='display:none;fill:%23ff0000;fill-opacity:1;stroke:none;stroke-width:2;stroke-dasharray:none'%20d='m%2035.999998,23.18857%202.225144,2.443296%20v%2029.843106%20l%20-2.225144,1.919732%20-2.225144,-1.919732%20V%2025.631866%20Z'%20id='path3'%20/%3e%3cpath%20style='display:none;fill:%23ff0000;fill-opacity:1;stroke:none;stroke-width:2;stroke-dasharray:none'%20d='m%2037.89693,59.979294%202.443296,-2.225144%20h%2029.843107%20l%201.919732,2.225144%20-1.919732,2.225144%20H%2040.340226%20Z'%20id='path2'%20/%3e%3cpath%20style='display:none;fill:none;fill-opacity:1;stroke:%23000000;stroke-width:2;stroke-dasharray:none;stroke-opacity:1'%20d='M%2020.942532,17%20H%200'%20id='path7'%20/%3e%3cpath%20style='display:none;fill:none;fill-opacity:1;stroke:%23000000;stroke-width:2;stroke-dasharray:none;stroke-opacity:1'%20d='M%2020.942532,31.333333%20H%200'%20id='path8'%20/%3e%3cpath%20style='display:none;fill:none;fill-opacity:1;stroke:%23000000;stroke-width:2;stroke-dasharray:none;stroke-opacity:1'%20d='M%2020.942532,45.666667%20H%200'%20id='path9'%20/%3e%3cpath%20style='display:none;fill:none;fill-opacity:1;stroke:%23000000;stroke-width:2;stroke-dasharray:none;stroke-opacity:1'%20d='M%2020.942532,60%20H%200'%20id='path10'%20/%3e%3cpath%20style='display:none;fill:none;fill-opacity:1;stroke:%23000000;stroke-width:2;stroke-dasharray:none;stroke-opacity:1'%20d='M%2020.942532,74.333333%20H%200'%20id='path11'%20/%3e%3cpath%20style='display:none;fill:none;fill-opacity:1;stroke:%23000000;stroke-width:2;stroke-dasharray:none;stroke-opacity:1'%20d='M%2020.942532,88.666667%20H%200'%20id='path12'%20/%3e%3cpath%20style='display:none;fill:none;fill-opacity:1;stroke:%23000000;stroke-width:2;stroke-dasharray:none;stroke-opacity:1'%20d='M%2020.942532,103%20H%200'%20id='path13'%20/%3e%3c/g%3e%3c/svg%3e",ji="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'%20standalone='no'?%3e%3c!--%20Created%20with%20Inkscape%20(http://www.inkscape.org/)%20--%3e%3csvg%20width='90'%20height='120'%20viewBox='0%200%2090%20120'%20version='1.1'%20id='svg1'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:svg='http://www.w3.org/2000/svg'%3e%3cdefs%20id='defs1'%20/%3e%3cg%20id='layer1'%3e%3crect%20style='display:none;fill:none;stroke:%23000000;stroke-width:1.98364;stroke-dasharray:none'%20id='rect1'%20width='68.016357'%20height='118.01637'%20x='20.991819'%20y='0.99181795'%20/%3e%3cpath%20style='display:none;fill:%23ff0000;fill-opacity:1;stroke:none;stroke-width:2;stroke-dasharray:none'%20d='m%2037.896931,20.60398%202.443296,-2.225144%20h%2029.843106%20l%201.919733,2.225144%20-1.919733,2.225144%20H%2040.340227%20Z'%20id='path1'%20/%3e%3cpath%20style='display:none;fill:%23ff0000;fill-opacity:1;stroke:none;stroke-width:2;stroke-dasharray:none'%20d='m%2073.999998,23.18857%202.225144,2.443296%20v%2029.843106%20l%20-2.225144,1.919732%20-2.225144,-1.919732%20V%2025.631866%20Z'%20id='path1-5'%20/%3e%3cpath%20style='display:none;fill:%23ff0000;fill-opacity:1;stroke:none;stroke-width:2;stroke-dasharray:none'%20d='m%2073.999998,62.605295%202.225144,2.443296%20V%2094.891697%20L%2073.999998,96.81143%2071.774854,94.891697%20V%2065.048591%20Z'%20id='path4'%20/%3e%3cpath%20style='display:none;fill:%23ff0000;fill-opacity:1;stroke:none;stroke-width:2;stroke-dasharray:none'%20d='m%2037.89693,99.396019%202.443296,-2.225144%20h%2029.843107%20l%201.919732,2.225144%20-1.919732,2.225141%20H%2040.340226%20Z'%20id='path5'%20/%3e%3cpath%20style='display:inline;fill:%23ff0000;fill-opacity:1;stroke:none;stroke-width:2;stroke-dasharray:none'%20d='m%2035.999998,62.605295%202.225144,2.443296%20V%2094.891697%20L%2035.999998,96.81143%2033.774854,94.891697%20V%2065.048591%20Z'%20id='path6'%20/%3e%3cpath%20style='display:none;fill:%23ff0000;fill-opacity:1;stroke:none;stroke-width:2;stroke-dasharray:none'%20d='m%2035.999998,23.18857%202.225144,2.443296%20v%2029.843106%20l%20-2.225144,1.919732%20-2.225144,-1.919732%20V%2025.631866%20Z'%20id='path3'%20/%3e%3cpath%20style='display:none;fill:%23ff0000;fill-opacity:1;stroke:none;stroke-width:2;stroke-dasharray:none'%20d='m%2037.89693,59.979294%202.443296,-2.225144%20h%2029.843107%20l%201.919732,2.225144%20-1.919732,2.225144%20H%2040.340226%20Z'%20id='path2'%20/%3e%3cpath%20style='display:none;fill:none;fill-opacity:1;stroke:%23000000;stroke-width:2;stroke-dasharray:none;stroke-opacity:1'%20d='M%2020.942532,17%20H%200'%20id='path7'%20/%3e%3cpath%20style='display:none;fill:none;fill-opacity:1;stroke:%23000000;stroke-width:2;stroke-dasharray:none;stroke-opacity:1'%20d='M%2020.942532,31.333333%20H%200'%20id='path8'%20/%3e%3cpath%20style='display:none;fill:none;fill-opacity:1;stroke:%23000000;stroke-width:2;stroke-dasharray:none;stroke-opacity:1'%20d='M%2020.942532,45.666667%20H%200'%20id='path9'%20/%3e%3cpath%20style='display:none;fill:none;fill-opacity:1;stroke:%23000000;stroke-width:2;stroke-dasharray:none;stroke-opacity:1'%20d='M%2020.942532,60%20H%200'%20id='path10'%20/%3e%3cpath%20style='display:none;fill:none;fill-opacity:1;stroke:%23000000;stroke-width:2;stroke-dasharray:none;stroke-opacity:1'%20d='M%2020.942532,74.333333%20H%200'%20id='path11'%20/%3e%3cpath%20style='display:none;fill:none;fill-opacity:1;stroke:%23000000;stroke-width:2;stroke-dasharray:none;stroke-opacity:1'%20d='M%2020.942532,88.666667%20H%200'%20id='path12'%20/%3e%3cpath%20style='display:none;fill:none;fill-opacity:1;stroke:%23000000;stroke-width:2;stroke-dasharray:none;stroke-opacity:1'%20d='M%2020.942532,103%20H%200'%20id='path13'%20/%3e%3c/g%3e%3c/svg%3e",Ai="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'%20standalone='no'?%3e%3c!--%20Created%20with%20Inkscape%20(http://www.inkscape.org/)%20--%3e%3csvg%20width='90'%20height='120'%20viewBox='0%200%2090%20120'%20version='1.1'%20id='svg1'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:svg='http://www.w3.org/2000/svg'%3e%3cdefs%20id='defs1'%20/%3e%3cg%20id='layer1'%3e%3crect%20style='display:none;fill:none;stroke:%23000000;stroke-width:1.98364;stroke-dasharray:none'%20id='rect1'%20width='68.016357'%20height='118.01637'%20x='20.991819'%20y='0.99181795'%20/%3e%3cpath%20style='display:none;fill:%23ff0000;fill-opacity:1;stroke:none;stroke-width:2;stroke-dasharray:none'%20d='m%2037.896931,20.60398%202.443296,-2.225144%20h%2029.843106%20l%201.919733,2.225144%20-1.919733,2.225144%20H%2040.340227%20Z'%20id='path1'%20/%3e%3cpath%20style='display:none;fill:%23ff0000;fill-opacity:1;stroke:none;stroke-width:2;stroke-dasharray:none'%20d='m%2073.999998,23.18857%202.225144,2.443296%20v%2029.843106%20l%20-2.225144,1.919732%20-2.225144,-1.919732%20V%2025.631866%20Z'%20id='path1-5'%20/%3e%3cpath%20style='display:none;fill:%23ff0000;fill-opacity:1;stroke:none;stroke-width:2;stroke-dasharray:none'%20d='m%2073.999998,62.605295%202.225144,2.443296%20V%2094.891697%20L%2073.999998,96.81143%2071.774854,94.891697%20V%2065.048591%20Z'%20id='path4'%20/%3e%3cpath%20style='display:none;fill:%23ff0000;fill-opacity:1;stroke:none;stroke-width:2;stroke-dasharray:none'%20d='m%2037.89693,99.396019%202.443296,-2.225144%20h%2029.843107%20l%201.919732,2.225144%20-1.919732,2.225141%20H%2040.340226%20Z'%20id='path5'%20/%3e%3cpath%20style='display:none;fill:%23ff0000;fill-opacity:1;stroke:none;stroke-width:2;stroke-dasharray:none'%20d='m%2035.999998,62.605295%202.225144,2.443296%20V%2094.891697%20L%2035.999998,96.81143%2033.774854,94.891697%20V%2065.048591%20Z'%20id='path6'%20/%3e%3cpath%20style='display:inline;fill:%23ff0000;fill-opacity:1;stroke:none;stroke-width:2;stroke-dasharray:none'%20d='m%2035.999998,23.18857%202.225144,2.443296%20v%2029.843106%20l%20-2.225144,1.919732%20-2.225144,-1.919732%20V%2025.631866%20Z'%20id='path3'%20/%3e%3cpath%20style='display:none;fill:%23ff0000;fill-opacity:1;stroke:none;stroke-width:2;stroke-dasharray:none'%20d='m%2037.89693,59.979294%202.443296,-2.225144%20h%2029.843107%20l%201.919732,2.225144%20-1.919732,2.225144%20H%2040.340226%20Z'%20id='path2'%20/%3e%3cpath%20style='display:none;fill:none;fill-opacity:1;stroke:%23000000;stroke-width:2;stroke-dasharray:none;stroke-opacity:1'%20d='M%2020.942532,17%20H%200'%20id='path7'%20/%3e%3cpath%20style='display:none;fill:none;fill-opacity:1;stroke:%23000000;stroke-width:2;stroke-dasharray:none;stroke-opacity:1'%20d='M%2020.942532,31.333333%20H%200'%20id='path8'%20/%3e%3cpath%20style='display:none;fill:none;fill-opacity:1;stroke:%23000000;stroke-width:2;stroke-dasharray:none;stroke-opacity:1'%20d='M%2020.942532,45.666667%20H%200'%20id='path9'%20/%3e%3cpath%20style='display:none;fill:none;fill-opacity:1;stroke:%23000000;stroke-width:2;stroke-dasharray:none;stroke-opacity:1'%20d='M%2020.942532,60%20H%200'%20id='path10'%20/%3e%3cpath%20style='display:none;fill:none;fill-opacity:1;stroke:%23000000;stroke-width:2;stroke-dasharray:none;stroke-opacity:1'%20d='M%2020.942532,74.333333%20H%200'%20id='path11'%20/%3e%3cpath%20style='display:none;fill:none;fill-opacity:1;stroke:%23000000;stroke-width:2;stroke-dasharray:none;stroke-opacity:1'%20d='M%2020.942532,88.666667%20H%200'%20id='path12'%20/%3e%3cpath%20style='display:none;fill:none;fill-opacity:1;stroke:%23000000;stroke-width:2;stroke-dasharray:none;stroke-opacity:1'%20d='M%2020.942532,103%20H%200'%20id='path13'%20/%3e%3c/g%3e%3c/svg%3e",qi="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'%20standalone='no'?%3e%3c!--%20Created%20with%20Inkscape%20(http://www.inkscape.org/)%20--%3e%3csvg%20width='90'%20height='120'%20viewBox='0%200%2090%20120'%20version='1.1'%20id='svg1'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:svg='http://www.w3.org/2000/svg'%3e%3cdefs%20id='defs1'%20/%3e%3cg%20id='layer1'%3e%3crect%20style='display:none;fill:none;stroke:%23000000;stroke-width:1.98364;stroke-dasharray:none'%20id='rect1'%20width='68.016357'%20height='118.01637'%20x='20.991819'%20y='0.99181795'%20/%3e%3cpath%20style='display:none;fill:%23ff0000;fill-opacity:1;stroke:none;stroke-width:2;stroke-dasharray:none'%20d='m%2037.896931,20.60398%202.443296,-2.225144%20h%2029.843106%20l%201.919733,2.225144%20-1.919733,2.225144%20H%2040.340227%20Z'%20id='path1'%20/%3e%3cpath%20style='display:none;fill:%23ff0000;fill-opacity:1;stroke:none;stroke-width:2;stroke-dasharray:none'%20d='m%2073.999998,23.18857%202.225144,2.443296%20v%2029.843106%20l%20-2.225144,1.919732%20-2.225144,-1.919732%20V%2025.631866%20Z'%20id='path1-5'%20/%3e%3cpath%20style='display:none;fill:%23ff0000;fill-opacity:1;stroke:none;stroke-width:2;stroke-dasharray:none'%20d='m%2073.999998,62.605295%202.225144,2.443296%20V%2094.891697%20L%2073.999998,96.81143%2071.774854,94.891697%20V%2065.048591%20Z'%20id='path4'%20/%3e%3cpath%20style='display:none;fill:%23ff0000;fill-opacity:1;stroke:none;stroke-width:2;stroke-dasharray:none'%20d='m%2037.89693,99.396019%202.443296,-2.225144%20h%2029.843107%20l%201.919732,2.225144%20-1.919732,2.225141%20H%2040.340226%20Z'%20id='path5'%20/%3e%3cpath%20style='display:none;fill:%23ff0000;fill-opacity:1;stroke:none;stroke-width:2;stroke-dasharray:none'%20d='m%2035.999998,62.605295%202.225144,2.443296%20V%2094.891697%20L%2035.999998,96.81143%2033.774854,94.891697%20V%2065.048591%20Z'%20id='path6'%20/%3e%3cpath%20style='display:none;fill:%23ff0000;fill-opacity:1;stroke:none;stroke-width:2;stroke-dasharray:none'%20d='m%2035.999998,23.18857%202.225144,2.443296%20v%2029.843106%20l%20-2.225144,1.919732%20-2.225144,-1.919732%20V%2025.631866%20Z'%20id='path3'%20/%3e%3cpath%20style='display:inline;fill:%23ff0000;fill-opacity:1;stroke:none;stroke-width:2;stroke-dasharray:none'%20d='m%2037.89693,59.979294%202.443296,-2.225144%20h%2029.843107%20l%201.919732,2.225144%20-1.919732,2.225144%20H%2040.340226%20Z'%20id='path2'%20/%3e%3cpath%20style='display:none;fill:none;fill-opacity:1;stroke:%23000000;stroke-width:2;stroke-dasharray:none;stroke-opacity:1'%20d='M%2020.942532,17%20H%200'%20id='path7'%20/%3e%3cpath%20style='display:none;fill:none;fill-opacity:1;stroke:%23000000;stroke-width:2;stroke-dasharray:none;stroke-opacity:1'%20d='M%2020.942532,31.333333%20H%200'%20id='path8'%20/%3e%3cpath%20style='display:none;fill:none;fill-opacity:1;stroke:%23000000;stroke-width:2;stroke-dasharray:none;stroke-opacity:1'%20d='M%2020.942532,45.666667%20H%200'%20id='path9'%20/%3e%3cpath%20style='display:none;fill:none;fill-opacity:1;stroke:%23000000;stroke-width:2;stroke-dasharray:none;stroke-opacity:1'%20d='M%2020.942532,60%20H%200'%20id='path10'%20/%3e%3cpath%20style='display:none;fill:none;fill-opacity:1;stroke:%23000000;stroke-width:2;stroke-dasharray:none;stroke-opacity:1'%20d='M%2020.942532,74.333333%20H%200'%20id='path11'%20/%3e%3cpath%20style='display:none;fill:none;fill-opacity:1;stroke:%23000000;stroke-width:2;stroke-dasharray:none;stroke-opacity:1'%20d='M%2020.942532,88.666667%20H%200'%20id='path12'%20/%3e%3cpath%20style='display:none;fill:none;fill-opacity:1;stroke:%23000000;stroke-width:2;stroke-dasharray:none;stroke-opacity:1'%20d='M%2020.942532,103%20H%200'%20id='path13'%20/%3e%3c/g%3e%3c/svg%3e",Li={id:z.O_LED_RED,imgPath:[Ti,Ci],connectionSlot:[{id:0,in:!0,name:"In",localPos:new T(23,66)}]},zi={id:z.O_7_SEGMENTS,imgPath:[Ni,xi,Ri,Mi,Di,ji,Ai,qi],connectionSlot:[{id:0,in:!0,name:"A",localPos:new T(-4,17)},{id:1,in:!0,name:"B",localPos:new T(-4,32)},{id:2,in:!0,name:"C",localPos:new T(-4,46)},{id:3,in:!0,name:"D",localPos:new T(-4,60)},{id:4,in:!0,name:"E",localPos:new T(-4,75)},{id:5,in:!0,name:"F",localPos:new T(-4,89)},{id:6,in:!0,name:"G",localPos:new T(-4,103)}]};class Lr{id;position;componentType;nodeType;slots;collisionShape;_images;imageSize;halfImageSize;imageMode="UP_LEFT";_signalData;selected;get image(){return Object.keys(this._images).length===0?null:this._images[this.state?1:0]}get state(){return this._signalData.output??!1}constructor(e,s,n,r,i,o,u,p=!0){if(this.id=e,this.position=s,this.componentType=le.OUTPUT,this.nodeType=Li,this._signalData=u[this.id],this.slots=i,this._images=Xe(o,this.nodeType.imgPath),this.imageSize=new T(this.image?.width??100,this.image?.height??100),this.halfImageSize=T.div(this.imageSize,2),p){this.imageMode="CENTER",this.position.sub(this.halfImageSize);const w=new T(n,r).sub(this.imageSize);this.position.min(w).max(T.ZERO)}this.collisionShape=new De(this.position,this.imageSize.x,this.imageSize.y),this.selected=!1}move(e,s=!0){s?this.position.add(e):this.imageMode==="CENTER"?T.sub(e,this.halfImageSize,this.position):this.position.copy(e),this.collisionShape.moveShape(this.position,!1)}draw(e){this.image&&(e.drawImage(this.image,this.position.x,this.position.y),this.collisionShape!==void 0&&this.collisionShape.draw(e,this.selected))}onEvent(e){switch(e){case ne.FOCUS_IN:this.selected=!0;break;case ne.FOCUS_OUT:this.selected=!1;break;default:return!1}return!0}toObject(){return{id:this.id,componentType:this.componentType,nodeType:this.nodeType.id,position:this.position.toPlainObject(),slotIds:this.slots.map(s=>s.id),state:this.state}}}class zr{id;position;componentType;nodeType;slots;collisionShape;_images;imageSize;halfImageSize;imageMode="UP_LEFT";_signalData;selected;get image(){return Object.keys(this._images).length===0?null:this._images[0]}get state(){return this._signalData.output??!1}constructor(e,s,n,r,i,o,u,p=!0){if(this.id=e,this.position=s,this.componentType=le.OUTPUT,this.nodeType=zi,this._signalData=u[this.id],this.slots=i,this._images=Xe(o,this.nodeType.imgPath),this.imageSize=new T(this.image?.width??100,this.image?.height??100),this.halfImageSize=T.div(this.imageSize,2),p){this.imageMode="CENTER",this.position.sub(this.halfImageSize);const w=new T(n,r).sub(this.imageSize);this.position.min(w).max(T.ZERO)}this.collisionShape=new De(this.position,this.imageSize.x,this.imageSize.y),this.selected=!1}move(e,s=!0){s?this.position.add(e):this.imageMode==="CENTER"?T.sub(e,this.halfImageSize,this.position):this.position.copy(e),this.collisionShape.moveShape(this.position,!1)}draw(e){if(this.image){if(e.drawImage(this.image,this.position.x,this.position.y),Object.keys(this._images).length>=8)for(const[s,n]of this._signalData.signalFrom)n>=0&&this._signalData.signalGraph[n].output===!0&&e.drawImage(this._images[s+1],this.position.x,this.position.y);this.collisionShape!==void 0&&this.collisionShape.draw(e,this.selected)}}onEvent(e){switch(e){case ne.FOCUS_IN:this.selected=!0;break;case ne.FOCUS_OUT:this.selected=!1;break;default:return!1}return!0}toObject(){return{id:this.id,componentType:this.componentType,nodeType:this.nodeType.id,position:this.position.toPlainObject(),slotIds:this.slots.map(s=>s.id),state:this.state}}}class Ur{id;position;componentType;nodeType;slots;collisionShape;_images;imageSize;halfImageSize;imageMode="UP_LEFT";_signalData;selected;get image(){return Object.keys(this._images).length===0?null:this._images[this.state?1:0]}get state(){return this._signalData.output??!1}set state(e){this._signalData.output=e}constructor(e,s,n,r,i,o,u,p=!0){if(this.id=e,this.position=s,this.componentType=le.INPUT,this.nodeType=Ii,this._signalData=u[this.id],this.slots=i,this._images=Xe(o,this.nodeType.imgPath),this.imageSize=new T(this.image?.width??100,this.image?.height??100),this.halfImageSize=T.div(this.imageSize,2),p){this.imageMode="CENTER",this.position.sub(this.halfImageSize);const w=new T(n,r).sub(this.halfImageSize);this.position.min(w).max(T.ZERO)}this.collisionShape=new De(this.position,this.imageSize.x,this.imageSize.y),this.selected=!1}move(e,s=!0){s?this.position.add(e):this.imageMode==="CENTER"?T.sub(e,this.halfImageSize,this.position):this.position.copy(e),this.collisionShape.moveShape(this.position,!1)}draw(e){this.image&&(e.drawImage(this.image,this.position.x,this.position.y),this.collisionShape!==void 0&&this.collisionShape.draw(e,this.selected))}onEvent(e){switch(e){case ne.MOUSE_CLICKED:this.state=!0;break;case ne.MOUSE_RELEASED:this.state=!1;break;case ne.FOCUS_IN:this.selected=!0;break;case ne.FOCUS_OUT:this.selected=!1;break;default:return!1}return!0}toObject(){return{id:this.id,componentType:this.componentType,nodeType:this.nodeType.id,position:this.position.toPlainObject(),slotIds:this.slots.map(s=>s.id),state:this.state}}}class Fr{id;position;componentType;nodeType;slots;collisionShape;_images;imageSize;halfImageSize;imageMode="UP_LEFT";_signalData;selected;clockDelay;currentClockStep=0;get image(){return Object.keys(this._images).length===0?null:this._images[0]}get state(){return this._signalData.output??!1}set state(e){this._signalData.output=e}constructor(e,s,n,r,i,o,u,p=60,w=!0){if(this.id=e,this.position=s,this.componentType=le.INPUT,this.nodeType=Oi,this._signalData=u[this.id],this.slots=i,this.clockDelay=p,this._images=Xe(o,this.nodeType.imgPath),this.imageSize=new T(this.image?.width??100,this.image?.height??100),this.halfImageSize=T.div(this.imageSize,2),w){this.imageMode="CENTER",this.position.sub(this.halfImageSize);const h=new T(n,r).sub(this.imageSize);this.position.min(h).max(T.ZERO)}this.collisionShape=new De(this.position,this.imageSize.x,this.imageSize.y),this.selected=!1}move(e,s=!0){s?this.position.add(e):this.imageMode==="CENTER"?T.sub(e,this.halfImageSize,this.position):this.position.copy(e),this.collisionShape.moveShape(this.position,!1)}draw(e){this.image&&(e.drawImage(this.image,this.position.x,this.position.y),this.collisionShape!==void 0&&this.collisionShape.draw(e,this.selected))}onEvent(e){switch(e){case ne.FOCUS_IN:this.selected=!0;break;case ne.FOCUS_OUT:this.selected=!1;break;case ne.CLOCK_FINISHED:this.state=!this.state,this.currentClockStep=0;break;case ne.PHYSICS_ENGINE_CYCLE:this.currentClockStep++,this.currentClockStep>this.clockDelay&&this.onEvent(ne.CLOCK_FINISHED);break;default:return!1}return!0}toObject(){return{id:this.id,componentType:this.componentType,nodeType:this.nodeType.id,position:this.position.toPlainObject(),slotIds:this.slots.map(s=>s.id),state:this.state}}}const _e={node(t=-1,e,s,n,r,i,o,u=[],p=!0,w=!1){const h=t>=0?t:e.nextComponentId;if(r<z.G_AND||r>=z.I_SWITCH)return console.error("O tipo de node passado como parâmetro é inválido!",r),-1;Me.vertex.add(e.signalGraph,h,r,at.getNodeModel(r),w);const $=new at(h,new T(i,o),r,s,n,[],e.nodeImageList,e.signalGraph,p);e.nodes.set(h,$);const v=e.nodes.get(h);if(e.updateComponentId(t>=0?t:void 0),u.length===0){const k=at.getNodeModel(r).connectionSlot;for(const _ of Object.values(k)){const b=this.slot(void 0,e,_.localPos.x,_.localPos.y,v,_.id,_.in);if(!v.slots.find(f=>f.id===b)){const f=e.slots.get(b);f&&v.slots.push(f)}}}else for(const k of u){const _=e.slots.get(k);_&&v.slots.push(_)}return h},input(t=-1,e,s,n,r,i,o,u=[],p=!0,w=!1){const h=t>=0?t:e.nextComponentId;let $,v;switch(r){case z.I_SWITCH:v=Ei,Me.vertex.add(e.signalGraph,h,r,v,w),$=new qr(h,new T(i,o),s,n,[],e.nodeImageList,e.signalGraph,p);break;case z.I_BUTTON:v=Ii,Me.vertex.add(e.signalGraph,h,r,v,w),$=new Ur(h,new T(i,o),s,n,[],e.nodeImageList,e.signalGraph,p);break;case z.I_CLOCK:v=Oi,Me.vertex.add(e.signalGraph,h,r,v,w),$=new Fr(h,new T(i,o),s,n,[],e.nodeImageList,e.signalGraph,void 0,p);break;default:return console.error("O tipo de node de entrada passado como parâmetro é inválido!",r),-1}e.nodes.set(h,$);const k=e.nodes.get(h);if(e.updateComponentId(t>=0?t:void 0),u.length===0){const _=v.connectionSlot;for(const b of Object.values(_)){const f=this.slot(void 0,e,b.localPos.x,b.localPos.y,k,b.id,b.in);if(!k.slots.find(l=>l.id===f)){const l=e.slots.get(f);l&&k.slots.push(l)}}}else for(const _ of u){const b=e.slots.get(_);b&&k.slots.push(b)}return h},output(t=-1,e,s,n,r,i,o,u=[],p=!0,w=!1){const h=t>=0?t:e.nextComponentId;let $,v;switch(r){case z.O_LED_RED:v=Li,Me.vertex.add(e.signalGraph,h,r,v,w),$=new Lr(h,new T(i,o),s,n,[],e.nodeImageList,e.signalGraph,p);break;case z.O_7_SEGMENTS:v=zi,Me.vertex.add(e.signalGraph,h,r,v,w),$=new zr(h,new T(i,o),s,n,[],e.nodeImageList,e.signalGraph,p);break;default:return console.error("O tipo de node de saída passado como parâmetro é inválido!",r),-1}e.nodes.set(h,$);const k=e.nodes.get(h);if(e.updateComponentId(t>=0?t:void 0),u.length===0){const _=v.connectionSlot;for(const b of Object.values(_)){const f=this.slot(void 0,e,b.localPos.x,b.localPos.y,k,b.id,b.in);if(!k.slots.find(l=>l.id===f)){const l=e.slots.get(f);l&&k.slots.push(l)}}}else for(const _ of u){const b=e.slots.get(_);b&&k.slots.push(b)}return h},slot(t=-1,e,s,n,r,i,o,u,p,w,h){const $=t>=0?t:e.nextComponentId,v=new jr($,new T(s,n),r,i,void 0,o,u,p,w,h);return e.slots.set($,v),(r.componentType===le.INPUT||r.componentType===le.OUTPUT||r.componentType===le.NODE)&&r.slots.push(e.slots.get($)),e.updateComponentId(t>=0?t:void 0)},connection(t=-1,e,s,n,r,i,o,u,p){const w=t>=0?t:e.nextComponentId,h=new Ir(w,new T(s,n),new T(r,i),{start:o,end:u},p);return e.connections.set(w,h),e.updateComponentId(t>=0?t:void 0)},text(t=-1,e,s,n,r,i,o,u){const p=t>=0?t:e.nextComponentId,w=new Ar(p,new T(r,i),n,o,u?{id:u.id,type:u.componentType}:void 0,s);return e.texts.set(p,w),e.updateComponentId(t>=0?t:void 0)}};class ct{simulationId;simulationTitle;_nextComponentId;nodes;slots;connections;texts;nodeImageList;signalGraph;constructor(e,s,n=0,r,i={},o=new Map,u=new Map,p=new Map,w=new Map){this.simulationId=e,this.simulationTitle=s,this._nextComponentId=n,this.nodes=o,this.slots=u,this.connections=p,this.texts=w,this.signalGraph=i,this.nodeImageList=r}get components(){return{nodes:this.nodes,slots:this.slots,connections:this.connections,texts:this.texts}}get nextComponentId(){return this._nextComponentId}updateComponentId(e){const s=this._nextComponentId;return this._nextComponentId=e?Math.max(this._nextComponentId,e+1):this._nextComponentId+1,s}removeComponent(e=this._nextComponentId-1,s){if(s)switch(s){case le.NODE:case le.INPUT:case le.OUTPUT:return Ke.node(this,e);case le.SLOT:return Ke.slot(this,e);case le.LINE:return Ke.connection(this,e);case le.TEXT:return Ke.text(this,e)}else{const n=this.connections.get(e)??this.nodes.get(e)??this.slots.get(e)??this.texts.get(e);if(n!==void 0)return this.removeComponent(n.id,n.componentType)}return!1}saveAsJson(){const e={id:this.simulationId,title:this.simulationTitle,data:{nodes:[],connections:[],slots:[],texts:[]},signal:[]};for(const[s,n]of Object.entries(this.components))for(const r of n.values())switch(s){case"nodes":e.data.nodes.push(r.toObject());break;case"slots":e.data.slots.push(r.toObject());break;case"connections":e.data.connections.push(r.toObject());break;case"texts":e.data.texts.push(r.toObject());break}for(const[s,n]of Object.entries(this.signalGraph)){const r=parseInt(s);e.signal.push({id:r,data:{output:n.output,signalFrom:[...n.signalFrom.entries()],signalTo:[...n.signalTo.values()],nodeType:n.nodeType}})}return JSON.stringify(e)}static createFromJson(e,s,n){const r={};for(const o of Object.values(e.signal))r[o.id]={id:o.id,output:o.data.output,signalFrom:new Map(o.data.signalFrom.map(u=>[u[0],u[1]])),signalTo:new Set(o.data.signalTo),nodeType:o.data.nodeType,signalGraph:r};const i=new ct(e.id,e.title,0,structuredClone(n),r);for(const o of e.data.nodes)o.nodeType>=z.G_AND&&o.nodeType<z.I_SWITCH?_e.node(o.id,i,s.canvas.width,s.canvas.height,o.nodeType,o.position.x,o.position.y,o.slotIds,!1):o.nodeType>=z.I_SWITCH&&o.nodeType<z.O_LED_RED?_e.input(o.id,i,s.canvas.width,s.canvas.height,o.nodeType,o.position.x,o.position.y,o.slotIds,!1):o.nodeType>=z.O_LED_RED&&_e.output(o.id,i,s.canvas.width,s.canvas.height,o.nodeType,o.position.x,o.position.y,o.slotIds,!1);for(const o of e.data.slots)_e.slot(o.id,i,o.position.x,o.position.y,i.nodes.get(o.parentId),o.slotIdAtParent,o.inSlot,o.radius,o.attractionRadius,o.color,o.colorActive);for(const o of e.data.connections)_e.connection(o.id,i,o.position.x,o.position.y,o.endPosition.x,o.endPosition.y,o.connectedTo.start,o.connectedTo.end,o.anchors.map(u=>new U(u.x,u.y))),o.connectedTo.start&&i.slots.get(o.connectedTo.start.slotId).slotConnections.push(i.connections.get(o.id)),o.connectedTo.end&&i.slots.get(o.connectedTo.end.slotId).slotConnections.push(i.connections.get(o.id));for(const o of e.data.texts){_e.text(o.id,i,s,o.text,o.position.x,o.position.y,o.style);break}return i}}const Ns={checkComponentClick(t,e){const s=[];for(const[n,r]of e.entries()){if(r.collisionShape instanceof Array)return console.warn("Não utilize a função checkComponentClick para checar colisões com conexões!"),[];r.collisionShape.collisionWithPoint(t)&&s.push(n)}return s}},Ui={checkSlotClick(t,e){return Ns.checkComponentClick(e,t)}},Qe={editingLine:void 0,startSlot:void 0,endSlot:void 0,oldStartSlot:void 0,oldEndSlot:void 0,movePoint:Oe.NONE,reset:function(){this.editingLine=void 0,this.startSlot=void 0,this.endSlot=void 0,this.oldStartSlot=void 0,this.oldEndSlot=void 0,this.movePoint=Oe.NONE},checkConnectionClick:function(t,e){const s=new Set;for(const[n,r]of t.entries())r.collisionShape.find(o=>o.collisionWithPoint(e))!==void 0&&s.add(n);return[...s.values()]},newConnection:function(t,e){if(this.editingLine!==void 0||ye.movingObject!=="none")return!1;const s=t.slots.get(e);if(s===void 0)return!1;this.movePoint=s.inSlot?Oe.START:Oe.END,[this.startSlot,this.endSlot]=s.inSlot?[void 0,s]:[s,void 0];const n=_e.connection(void 0,t,s.globalPosition.x,s.globalPosition.y,s.globalPosition.x,s.globalPosition.y,s.inSlot?void 0:{nodeId:s.parent.id,slotId:s.id},s.inSlot?{nodeId:s.parent.id,slotId:s.id}:void 0);return this.editingLine=t.connections.get(n),ye.movingObject="connection",!0},move:function(t,e){return!(ye.movingObject==="connection"||ye.movingObject==="none")||this.editingLine===void 0?!1:(ye.movingObject="connection",this.editingLine.move(e,!1,this.movePoint,!0,t.nodes),!0)},setConnectionProps:function(t){return this.startSlot===void 0||this.endSlot===void 0||this.editingLine===void 0?!1:(this.editingLine.position=this.startSlot.globalPosition.clone(),this.editingLine.endPosition=this.endSlot.globalPosition.clone(),this.editingLine.anchors=this.editingLine.generateAnchors(t.nodes),this.editingLine.changeConnection(this.startSlot.id,this.startSlot.parent.id,!1),this.editingLine.changeConnection(this.endSlot.id,this.endSlot.parent.id,!0),this.startSlot.slotConnections.push(this.editingLine),this.endSlot.slotConnections.push(this.editingLine),Me.edge.add(t.signalGraph,this.editingLine,this.startSlot,this.endSlot),this.editingLine.move(T.ZERO,!0,Oe.START,!1),this.reset(),!0)},isValidPosition:function(t,e){const s=Ui.checkSlotClick(t.slots,e);if(s.length===0||this.movePoint===Oe.START&&s[0]===this.endSlot?.id||this.movePoint===Oe.END&&s[0]===this.startSlot?.id)return!1;const n=t.slots.get(s[0]);if(n===void 0)return!1;if(this.movePoint===Oe.START){if(this.endSlot===void 0||n.inSlot===this.endSlot.inSlot)return!1;this.startSlot=n}if(this.movePoint===Oe.END){if(this.startSlot===void 0||n.inSlot===this.startSlot.inSlot)return!1;this.endSlot=n}return!0},bindLine:function(t,e){return this.editingLine===void 0?!1:!this.isValidPosition(t,e)||this.startSlot===void 0||this.endSlot===void 0?(Ke.connection(t,this.editingLine.id),!1):this.removeOldInputConnections(t)&&this.setConnectionProps(t)},removeOldInputConnections:function(t){if(this.startSlot===void 0||this.endSlot===void 0||this.editingLine===void 0||!this.endSlot.inSlot)return!1;for(const e of this.endSlot.slotConnections)e.id!==this.editingLine.id&&Ke.connection(t,e.id);return!0}},Ss={checkNodeClick(t,e){return Ns.checkComponentClick(e,t)},move(t,e,s,n=!0){const r=e.getCollisionList().nodes;if(r.length===0||!(ye.movingObject==="none"||ye.movingObject==="node"))return!1;ye.movingObject="node";const i=t.nodes.get(r[0]);return i===void 0?!1:(i.move(s,n),this.moveLinkedElements(i,t.nodes),!0)},moveLinkedElements(t,e){for(const s of t.slots)if(s){s.move();for(let n=0;n<s.slotConnections.length;n++){const r=s.slotConnections[n];r.connectedTo.start?.slotId===s.id?r.move(s.globalPosition,!1,0,!0,e):r.connectedTo.end?.slotId===s.id&&r.move(s.globalPosition,!1,1,!0,e)}}},onPhysicsEngineUpdate(t,e){const s=[];for(const n of t.values())n.nodeType.id===z.I_CLOCK&&n.onEvent(ne.PHYSICS_ENGINE_CYCLE)&&s.push(n.id);for(const n of s)We.updateGraph(e,n)}},Bs={checkTextClick(t,e){return Ns.checkComponentClick(e,t)},move(t,e,s,n=!0){const r=e.getCollisionList().texts;if(r.length===0||!(ye.movingObject==="none"||ye.movingObject==="text"))return!1;ye.movingObject="text";const i=t.get(r[0]);return i===void 0?!1:(i.move(s,n),!0)}};class ye{collisionList;_mouse;static movingObject="none";constructor(e){this._mouse=e,this.collisionList={nodes:[],slots:[],connections:[],texts:[]},ye.movingObject="none"}onMouseClick(e){if(this._mouse.stateChanged&&this._mouse.clicked){this.clearAllCollisions(e);const s=Ss.checkNodeClick(e.nodes,this._mouse.position),n=Ui.checkSlotClick(e.slots,this._mouse.position),r=Qe.checkConnectionClick(e.connections,this._mouse.position),i=Bs.checkTextClick(e.texts,this._mouse.position);this.collisionList={nodes:s,slots:n,connections:r,texts:i},n.length>0&&Qe.newConnection(e,n[0]);const o=e.nodes.get(this.collisionList.nodes[0]);o!==void 0&&o.nodeType.id===z.I_BUTTON&&(o.onEvent(ne.MOUSE_CLICKED),We.updateGraph(e.signalGraph,this.collisionList.nodes[0])),this.displaySelectedComponents(e),this._mouse.stateChanged=!1}}onMouseRelease(e){if(!this._mouse.clicked&&this._mouse.stateChanged){if(!this._mouse.dragged)for(const s of this.collisionList.nodes){const n=e.nodes.get(s);n!==void 0&&n.componentType===le.INPUT&&n.onEvent(ne.MOUSE_RELEASED)&&We.updateGraph(e.signalGraph,s)}Qe.bindLine(e,this._mouse.position),Qe.reset(),this._mouse.stateChanged=!1}ye.movingObject="none"}onMouseMove(e){return this._mouse.clicked&&this._mouse.dragged?Qe.move(e,this._mouse.position)||Ss.move(e,this,this._mouse.position,!1)||Bs.move(e.texts,this,this._mouse.position,!1):!1}displaySelectedComponents(e){for(const[s,n]of Object.entries(this.collisionList))e.components[s].get(n[0])?.onEvent(ne.FOCUS_IN)}clearSelectedComponents(e){for(const[s,n]of Object.entries(this.collisionList))for(const r of n)e.components[s].get(r)?.onEvent(ne.FOCUS_OUT)}getCollisionList(){return this.collisionList}clearAllCollisions(e){this.clearSelectedComponents(e),this.collisionList.nodes=[],this.collisionList.slots=[],this.collisionList.connections=[],this.collisionList.texts=[]}}class Hr{position=new T;mouseClicked=!1;doubleClicked=!1;clickStartPosition=new T;mouseStateChanged=!1;clickToDragThreshold=6;doubleClickTimer=300;alreadyClicked=!1;mouseDragged=!1;get clicked(){return this.mouseClicked}set clicked(e){this.mouseClicked=e,this.mouseStateChanged=!0,e?this.clickStartPosition.copy(this.position):this.mouseDragged=!1}get dragged(){const e=T.sub(this.position,this.clickStartPosition);return this.mouseDragged=this.mouseDragged||e.x>this.clickToDragThreshold||e.x<-this.clickToDragThreshold||e.y>this.clickToDragThreshold||e.y<-this.clickToDragThreshold,this.mouseDragged}get stateChanged(){return this.mouseStateChanged}set stateChanged(e){this.mouseStateChanged=e,this.alreadyClicked?this.doubleClicked=this.mouseClicked:(this.alreadyClicked=!0,setTimeout(()=>this.alreadyClicked=!1,this.doubleClickTimer))}}var fe=Uint8Array,ke=Uint16Array,xs=Int32Array,Qt=new fe([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),es=new fe([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),Ps=new fe([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Fi=function(t,e){for(var s=new ke(31),n=0;n<31;++n)s[n]=e+=1<<t[n-1];for(var r=new xs(s[30]),n=1;n<30;++n)for(var i=s[n];i<s[n+1];++i)r[i]=i-s[n]<<5|n;return{b:s,r}},Hi=Fi(Qt,2),Bi=Hi.b,Es=Hi.r;Bi[28]=258,Es[258]=28;var Gi=Fi(es,0),Br=Gi.b,Gs=Gi.r,Is=new ke(32768);for(var ae=0;ae<32768;++ae){var Ae=(ae&43690)>>1|(ae&21845)<<1;Ae=(Ae&52428)>>2|(Ae&13107)<<2,Ae=(Ae&61680)>>4|(Ae&3855)<<4,Is[ae]=((Ae&65280)>>8|(Ae&255)<<8)>>1}var Te=function(t,e,s){for(var n=t.length,r=0,i=new ke(e);r<n;++r)t[r]&&++i[t[r]-1];var o=new ke(e);for(r=1;r<e;++r)o[r]=o[r-1]+i[r-1]<<1;var u;if(s){u=new ke(1<<e);var p=15-e;for(r=0;r<n;++r)if(t[r])for(var w=r<<4|t[r],h=e-t[r],$=o[t[r]-1]++<<h,v=$|(1<<h)-1;$<=v;++$)u[Is[$]>>p]=w}else for(u=new ke(n),r=0;r<n;++r)t[r]&&(u[r]=Is[o[t[r]-1]++]>>15-t[r]);return u},Le=new fe(288);for(var ae=0;ae<144;++ae)Le[ae]=8;for(var ae=144;ae<256;++ae)Le[ae]=9;for(var ae=256;ae<280;++ae)Le[ae]=7;for(var ae=280;ae<288;++ae)Le[ae]=8;var lt=new fe(32);for(var ae=0;ae<32;++ae)lt[ae]=5;var Gr=Te(Le,9,0),Vr=Te(Le,9,1),Zr=Te(lt,5,0),Kr=Te(lt,5,1),ds=function(t){for(var e=t[0],s=1;s<t.length;++s)t[s]>e&&(e=t[s]);return e},Se=function(t,e,s){var n=e/8|0;return(t[n]|t[n+1]<<8)>>(e&7)&s},us=function(t,e){var s=e/8|0;return(t[s]|t[s+1]<<8|t[s+2]<<16)>>(e&7)},Rs=function(t){return(t+7)/8|0},Vi=function(t,e,s){return(s==null||s>t.length)&&(s=t.length),new fe(t.subarray(e,s))},Wr=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],Ee=function(t,e,s){var n=new Error(e||Wr[t]);if(n.code=t,Error.captureStackTrace&&Error.captureStackTrace(n,Ee),!s)throw n;return n},Jr=function(t,e,s,n){var r=t.length,i=0;if(!r||e.f&&!e.l)return s||new fe(0);var o=!s,u=o||e.i!=2,p=e.i;o&&(s=new fe(r*3));var w=function(E){var N=s.length;if(E>N){var M=new fe(Math.max(N*2,E));M.set(s),s=M}},h=e.f||0,$=e.p||0,v=e.b||0,k=e.l,_=e.d,b=e.m,f=e.n,l=r*8;do{if(!k){h=Se(t,$,1);var a=Se(t,$+1,3);if($+=3,a)if(a==1)k=Vr,_=Kr,b=9,f=5;else if(a==2){var m=Se(t,$,31)+257,S=Se(t,$+10,15)+4,I=m+Se(t,$+5,31)+1;$+=14;for(var x=new fe(I),j=new fe(19),q=0;q<S;++q)j[Ps[q]]=Se(t,$+q*3,7);$+=S*3;for(var F=ds(j),G=(1<<F)-1,Z=Te(j,F,1),q=0;q<I;){var ee=Z[Se(t,$,G)];$+=ee&15;var c=ee>>4;if(c<16)x[q++]=c;else{var re=0,te=0;for(c==16?(te=3+Se(t,$,3),$+=2,re=x[q-1]):c==17?(te=3+Se(t,$,7),$+=3):c==18&&(te=11+Se(t,$,127),$+=7);te--;)x[q++]=re}}var K=x.subarray(0,m),oe=x.subarray(m);b=ds(K),f=ds(oe),k=Te(K,b,1),_=Te(oe,f,1)}else Ee(1);else{var c=Rs($)+4,y=t[c-4]|t[c-3]<<8,d=c+y;if(d>r){p&&Ee(0);break}u&&w(v+y),s.set(t.subarray(c,d),v),e.b=v+=y,e.p=$=d*8,e.f=h;continue}if($>l){p&&Ee(0);break}}u&&w(v+131072);for(var A=(1<<b)-1,O=(1<<f)-1,D=$;;D=$){var re=k[us(t,$)&A],C=re>>4;if($+=re&15,$>l){p&&Ee(0);break}if(re||Ee(2),C<256)s[v++]=C;else if(C==256){D=$,k=null;break}else{var g=C-254;if(C>264){var q=C-257,P=Qt[q];g=Se(t,$,(1<<P)-1)+Bi[q],$+=P}var R=_[us(t,$)&O],H=R>>4;R||Ee(3),$+=R&15;var oe=Br[H];if(H>3){var P=es[H];oe+=us(t,$)&(1<<P)-1,$+=P}if($>l){p&&Ee(0);break}u&&w(v+131072);var B=v+g;if(v<oe){var Q=i-oe,W=Math.min(oe,B);for(Q+v<0&&Ee(3);v<W;++v)s[v]=n[Q+v]}for(;v<B;++v)s[v]=s[v-oe]}}e.l=k,e.p=D,e.b=v,e.f=h,k&&(h=1,e.m=b,e.d=_,e.n=f)}while(!h);return v!=s.length&&o?Vi(s,0,v):s.subarray(0,v)},Ce=function(t,e,s){s<<=e&7;var n=e/8|0;t[n]|=s,t[n+1]|=s>>8},et=function(t,e,s){s<<=e&7;var n=e/8|0;t[n]|=s,t[n+1]|=s>>8,t[n+2]|=s>>16},hs=function(t,e){for(var s=[],n=0;n<t.length;++n)t[n]&&s.push({s:n,f:t[n]});var r=s.length,i=s.slice();if(!r)return{t:Ki,l:0};if(r==1){var o=new fe(s[0].s+1);return o[s[0].s]=1,{t:o,l:1}}s.sort(function(d,m){return d.f-m.f}),s.push({s:-1,f:25001});var u=s[0],p=s[1],w=0,h=1,$=2;for(s[0]={s:-1,f:u.f+p.f,l:u,r:p};h!=r-1;)u=s[s[w].f<s[$].f?w++:$++],p=s[w!=h&&s[w].f<s[$].f?w++:$++],s[h++]={s:-1,f:u.f+p.f,l:u,r:p};for(var v=i[0].s,n=1;n<r;++n)i[n].s>v&&(v=i[n].s);var k=new ke(v+1),_=Os(s[h-1],k,0);if(_>e){var n=0,b=0,f=_-e,l=1<<f;for(i.sort(function(m,S){return k[S.s]-k[m.s]||m.f-S.f});n<r;++n){var a=i[n].s;if(k[a]>e)b+=l-(1<<_-k[a]),k[a]=e;else break}for(b>>=f;b>0;){var c=i[n].s;k[c]<e?b-=1<<e-k[c]++-1:++n}for(;n>=0&&b;--n){var y=i[n].s;k[y]==e&&(--k[y],++b)}_=e}return{t:new fe(k),l:_}},Os=function(t,e,s){return t.s==-1?Math.max(Os(t.l,e,s+1),Os(t.r,e,s+1)):e[t.s]=s},Vs=function(t){for(var e=t.length;e&&!t[--e];);for(var s=new ke(++e),n=0,r=t[0],i=1,o=function(p){s[n++]=p},u=1;u<=e;++u)if(t[u]==r&&u!=e)++i;else{if(!r&&i>2){for(;i>138;i-=138)o(32754);i>2&&(o(i>10?i-11<<5|28690:i-3<<5|12305),i=0)}else if(i>3){for(o(r),--i;i>6;i-=6)o(8304);i>2&&(o(i-3<<5|8208),i=0)}for(;i--;)o(r);i=1,r=t[u]}return{c:s.subarray(0,n),n:e}},tt=function(t,e){for(var s=0,n=0;n<e.length;++n)s+=t[n]*e[n];return s},Zi=function(t,e,s){var n=s.length,r=Rs(e+2);t[r]=n&255,t[r+1]=n>>8,t[r+2]=t[r]^255,t[r+3]=t[r+1]^255;for(var i=0;i<n;++i)t[r+i+4]=s[i];return(r+4+n)*8},Zs=function(t,e,s,n,r,i,o,u,p,w,h){Ce(e,h++,s),++r[256];for(var $=hs(r,15),v=$.t,k=$.l,_=hs(i,15),b=_.t,f=_.l,l=Vs(v),a=l.c,c=l.n,y=Vs(b),d=y.c,m=y.n,S=new ke(19),I=0;I<a.length;++I)++S[a[I]&31];for(var I=0;I<d.length;++I)++S[d[I]&31];for(var x=hs(S,7),j=x.t,q=x.l,F=19;F>4&&!j[Ps[F-1]];--F);var G=w+5<<3,Z=tt(r,Le)+tt(i,lt)+o,ee=tt(r,v)+tt(i,b)+o+14+3*F+tt(S,j)+2*S[16]+3*S[17]+7*S[18];if(p>=0&&G<=Z&&G<=ee)return Zi(e,h,t.subarray(p,p+w));var re,te,K,oe;if(Ce(e,h,1+(ee<Z)),h+=2,ee<Z){re=Te(v,k,0),te=v,K=Te(b,f,0),oe=b;var A=Te(j,q,0);Ce(e,h,c-257),Ce(e,h+5,m-1),Ce(e,h+10,F-4),h+=14;for(var I=0;I<F;++I)Ce(e,h+3*I,j[Ps[I]]);h+=3*F;for(var O=[a,d],D=0;D<2;++D)for(var C=O[D],I=0;I<C.length;++I){var g=C[I]&31;Ce(e,h,A[g]),h+=j[g],g>15&&(Ce(e,h,C[I]>>5&127),h+=C[I]>>12)}}else re=Gr,te=Le,K=Zr,oe=lt;for(var I=0;I<u;++I){var P=n[I];if(P>255){var g=P>>18&31;et(e,h,re[g+257]),h+=te[g+257],g>7&&(Ce(e,h,P>>23&31),h+=Qt[g]);var R=P&31;et(e,h,K[R]),h+=oe[R],R>3&&(et(e,h,P>>5&8191),h+=es[R])}else et(e,h,re[P]),h+=te[P]}return et(e,h,re[256]),h+te[256]},Xr=new xs([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),Ki=new fe(0),Yr=function(t,e,s,n,r,i){var o=i.z||t.length,u=new fe(n+o+5*(1+Math.ceil(o/7e3))+r),p=u.subarray(n,u.length-r),w=i.l,h=(i.r||0)&7;if(e){h&&(p[0]=i.r>>3);for(var $=Xr[e-1],v=$>>13,k=$&8191,_=(1<<s)-1,b=i.p||new ke(32768),f=i.h||new ke(_+1),l=Math.ceil(s/3),a=2*l,c=function(L){return(t[L]^t[L+1]<<l^t[L+2]<<a)&_},y=new xs(25e3),d=new ke(288),m=new ke(32),S=0,I=0,x=i.i||0,j=0,q=i.w||0,F=0;x+2<o;++x){var G=c(x),Z=x&32767,ee=f[G];if(b[Z]=ee,f[G]=Z,q<=x){var re=o-x;if((S>7e3||j>24576)&&(re>423||!w)){h=Zs(t,p,0,y,d,m,I,j,F,x-F,h),j=S=I=0,F=x;for(var te=0;te<286;++te)d[te]=0;for(var te=0;te<30;++te)m[te]=0}var K=2,oe=0,A=k,O=Z-ee&32767;if(re>2&&G==c(x-O))for(var D=Math.min(v,re)-1,C=Math.min(32767,x),g=Math.min(258,re);O<=C&&--A&&Z!=ee;){if(t[x+K]==t[x+K-O]){for(var P=0;P<g&&t[x+P]==t[x+P-O];++P);if(P>K){if(K=P,oe=O,P>D)break;for(var R=Math.min(O,P-2),H=0,te=0;te<R;++te){var B=x-O+te&32767,Q=b[B],W=B-Q&32767;W>H&&(H=W,ee=B)}}}Z=ee,ee=b[Z],O+=Z-ee&32767}if(oe){y[j++]=268435456|Es[K]<<18|Gs[oe];var E=Es[K]&31,N=Gs[oe]&31;I+=Qt[E]+es[N],++d[257+E],++m[N],q=x+K,++S}else y[j++]=t[x],++d[t[x]]}}for(x=Math.max(x,q);x<o;++x)y[j++]=t[x],++d[t[x]];h=Zs(t,p,w,y,d,m,I,j,F,x-F,h),w||(i.r=h&7|p[h/8|0]<<3,h-=7,i.h=f,i.p=b,i.i=x,i.w=q)}else{for(var x=i.w||0;x<o+w;x+=65535){var M=x+65535;M>=o&&(p[h/8|0]=w,M=o),h=Zi(p,h+1,t.subarray(x,M))}i.i=o}return Vi(u,0,n+Rs(h)+r)},Qr=function(){for(var t=new Int32Array(256),e=0;e<256;++e){for(var s=e,n=9;--n;)s=(s&1&&-306674912)^s>>>1;t[e]=s}return t}(),eo=function(){var t=-1;return{p:function(e){for(var s=t,n=0;n<e.length;++n)s=Qr[s&255^e[n]]^s>>>8;t=s},d:function(){return~t}}},to=function(t,e,s,n,r){if(!r&&(r={l:1},e.dictionary)){var i=e.dictionary.subarray(-32768),o=new fe(i.length+t.length);o.set(i),o.set(t,i.length),t=o,r.w=i.length}return Yr(t,e.level==null?6:e.level,e.mem==null?r.l?Math.ceil(Math.max(8,Math.min(13,Math.log(t.length)))*1.5):20:12+e.mem,s,n,r)},Ts=function(t,e,s){for(;s;++e)t[e]=s,s>>>=8},so=function(t,e){var s=e.filename;if(t[0]=31,t[1]=139,t[2]=8,t[8]=e.level<2?4:e.level==9?2:0,t[9]=3,e.mtime!=0&&Ts(t,4,Math.floor(new Date(e.mtime||Date.now())/1e3)),s){t[3]=8;for(var n=0;n<=s.length;++n)t[n+10]=s.charCodeAt(n)}},no=function(t){(t[0]!=31||t[1]!=139||t[2]!=8)&&Ee(6,"invalid gzip data");var e=t[3],s=10;e&4&&(s+=(t[10]|t[11]<<8)+2);for(var n=(e>>3&1)+(e>>4&1);n>0;n-=!t[s++]);return s+(e&2)},io=function(t){var e=t.length;return(t[e-4]|t[e-3]<<8|t[e-2]<<16|t[e-1]<<24)>>>0},ro=function(t){return 10+(t.filename?t.filename.length+1:0)};function oo(t,e){e||(e={});var s=eo(),n=t.length;s.p(t);var r=to(t,e,ro(e),8),i=r.length;return so(r,e),Ts(r,i-8,s.d()),Ts(r,i-4,n),r}function ao(t,e){var s=no(t);return s+8>t.length&&Ee(6,"invalid gzip data"),Jr(t.subarray(s,-8),{i:2},new fe(io(t)),e)}var lo=typeof TextDecoder<"u"&&new TextDecoder,co=0;try{lo.decode(Ki,{stream:!0}),co=1}catch{}var ht={exports:{}},fs={},Ne={},Ue={},ps={},ms={},ys={},Ks;function Xt(){return Ks||(Ks=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.regexpCode=t.getEsmExportName=t.getProperty=t.safeStringify=t.stringify=t.strConcat=t.addCodeArg=t.str=t._=t.nil=t._Code=t.Name=t.IDENTIFIER=t._CodeOrName=void 0;class e{}t._CodeOrName=e,t.IDENTIFIER=/^[a-z$_][a-z$_0-9]*$/i;class s extends e{constructor(a){if(super(),!t.IDENTIFIER.test(a))throw new Error("CodeGen: name must be a valid identifier");this.str=a}toString(){return this.str}emptyStr(){return!1}get names(){return{[this.str]:1}}}t.Name=s;class n extends e{constructor(a){super(),this._items=typeof a=="string"?[a]:a}toString(){return this.str}emptyStr(){if(this._items.length>1)return!1;const a=this._items[0];return a===""||a==='""'}get str(){var a;return(a=this._str)!==null&&a!==void 0?a:this._str=this._items.reduce((c,y)=>`${c}${y}`,"")}get names(){var a;return(a=this._names)!==null&&a!==void 0?a:this._names=this._items.reduce((c,y)=>(y instanceof s&&(c[y.str]=(c[y.str]||0)+1),c),{})}}t._Code=n,t.nil=new n("");function r(l,...a){const c=[l[0]];let y=0;for(;y<a.length;)u(c,a[y]),c.push(l[++y]);return new n(c)}t._=r;const i=new n("+");function o(l,...a){const c=[k(l[0])];let y=0;for(;y<a.length;)c.push(i),u(c,a[y]),c.push(i,k(l[++y]));return p(c),new n(c)}t.str=o;function u(l,a){a instanceof n?l.push(...a._items):a instanceof s?l.push(a):l.push($(a))}t.addCodeArg=u;function p(l){let a=1;for(;a<l.length-1;){if(l[a]===i){const c=w(l[a-1],l[a+1]);if(c!==void 0){l.splice(a-1,3,c);continue}l[a++]="+"}a++}}function w(l,a){if(a==='""')return l;if(l==='""')return a;if(typeof l=="string")return a instanceof s||l[l.length-1]!=='"'?void 0:typeof a!="string"?`${l.slice(0,-1)}${a}"`:a[0]==='"'?l.slice(0,-1)+a.slice(1):void 0;if(typeof a=="string"&&a[0]==='"'&&!(l instanceof s))return`"${l}${a.slice(1)}`}function h(l,a){return a.emptyStr()?l:l.emptyStr()?a:o`${l}${a}`}t.strConcat=h;function $(l){return typeof l=="number"||typeof l=="boolean"||l===null?l:k(Array.isArray(l)?l.join(","):l)}function v(l){return new n(k(l))}t.stringify=v;function k(l){return JSON.stringify(l).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}t.safeStringify=k;function _(l){return typeof l=="string"&&t.IDENTIFIER.test(l)?new n(`.${l}`):r`[${l}]`}t.getProperty=_;function b(l){if(typeof l=="string"&&t.IDENTIFIER.test(l))return new n(`${l}`);throw new Error(`CodeGen: invalid export name: ${l}, use explicit $id name mapping`)}t.getEsmExportName=b;function f(l){return new n(l.toString())}t.regexpCode=f}(ys)),ys}var gs={},Ws;function Js(){return Ws||(Ws=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.ValueScope=t.ValueScopeName=t.Scope=t.varKinds=t.UsedValueState=void 0;const e=Xt();class s extends Error{constructor(w){super(`CodeGen: "code" for ${w} not defined`),this.value=w.value}}var n;(function(p){p[p.Started=0]="Started",p[p.Completed=1]="Completed"})(n||(t.UsedValueState=n={})),t.varKinds={const:new e.Name("const"),let:new e.Name("let"),var:new e.Name("var")};class r{constructor({prefixes:w,parent:h}={}){this._names={},this._prefixes=w,this._parent=h}toName(w){return w instanceof e.Name?w:this.name(w)}name(w){return new e.Name(this._newName(w))}_newName(w){const h=this._names[w]||this._nameGroup(w);return`${w}${h.index++}`}_nameGroup(w){var h,$;if(!(($=(h=this._parent)===null||h===void 0?void 0:h._prefixes)===null||$===void 0)&&$.has(w)||this._prefixes&&!this._prefixes.has(w))throw new Error(`CodeGen: prefix "${w}" is not allowed in this scope`);return this._names[w]={prefix:w,index:0}}}t.Scope=r;class i extends e.Name{constructor(w,h){super(h),this.prefix=w}setValue(w,{property:h,itemIndex:$}){this.value=w,this.scopePath=(0,e._)`.${new e.Name(h)}[${$}]`}}t.ValueScopeName=i;const o=(0,e._)`\n`;class u extends r{constructor(w){super(w),this._values={},this._scope=w.scope,this.opts={...w,_n:w.lines?o:e.nil}}get(){return this._scope}name(w){return new i(w,this._newName(w))}value(w,h){var $;if(h.ref===void 0)throw new Error("CodeGen: ref must be passed in value");const v=this.toName(w),{prefix:k}=v,_=($=h.key)!==null&&$!==void 0?$:h.ref;let b=this._values[k];if(b){const a=b.get(_);if(a)return a}else b=this._values[k]=new Map;b.set(_,v);const f=this._scope[k]||(this._scope[k]=[]),l=f.length;return f[l]=h.ref,v.setValue(h,{property:k,itemIndex:l}),v}getValue(w,h){const $=this._values[w];if($)return $.get(h)}scopeRefs(w,h=this._values){return this._reduceValues(h,$=>{if($.scopePath===void 0)throw new Error(`CodeGen: name "${$}" has no value`);return(0,e._)`${w}${$.scopePath}`})}scopeCode(w=this._values,h,$){return this._reduceValues(w,v=>{if(v.value===void 0)throw new Error(`CodeGen: name "${v}" has no value`);return v.value.code},h,$)}_reduceValues(w,h,$={},v){let k=e.nil;for(const _ in w){const b=w[_];if(!b)continue;const f=$[_]=$[_]||new Map;b.forEach(l=>{if(f.has(l))return;f.set(l,n.Started);let a=h(l);if(a){const c=this.opts.es5?t.varKinds.var:t.varKinds.const;k=(0,e._)`${k}${c} ${l} = ${a};${this.opts._n}`}else if(a=v?.(l))k=(0,e._)`${k}${a}${this.opts._n}`;else throw new s(l);f.set(l,n.Completed)})}return k}}t.ValueScope=u}(gs)),gs}var Xs;function Y(){return Xs||(Xs=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.or=t.and=t.not=t.CodeGen=t.operators=t.varKinds=t.ValueScopeName=t.ValueScope=t.Scope=t.Name=t.regexpCode=t.stringify=t.getProperty=t.nil=t.strConcat=t.str=t._=void 0;const e=Xt(),s=Js();var n=Xt();Object.defineProperty(t,"_",{enumerable:!0,get:function(){return n._}}),Object.defineProperty(t,"str",{enumerable:!0,get:function(){return n.str}}),Object.defineProperty(t,"strConcat",{enumerable:!0,get:function(){return n.strConcat}}),Object.defineProperty(t,"nil",{enumerable:!0,get:function(){return n.nil}}),Object.defineProperty(t,"getProperty",{enumerable:!0,get:function(){return n.getProperty}}),Object.defineProperty(t,"stringify",{enumerable:!0,get:function(){return n.stringify}}),Object.defineProperty(t,"regexpCode",{enumerable:!0,get:function(){return n.regexpCode}}),Object.defineProperty(t,"Name",{enumerable:!0,get:function(){return n.Name}});var r=Js();Object.defineProperty(t,"Scope",{enumerable:!0,get:function(){return r.Scope}}),Object.defineProperty(t,"ValueScope",{enumerable:!0,get:function(){return r.ValueScope}}),Object.defineProperty(t,"ValueScopeName",{enumerable:!0,get:function(){return r.ValueScopeName}}),Object.defineProperty(t,"varKinds",{enumerable:!0,get:function(){return r.varKinds}}),t.operators={GT:new e._Code(">"),GTE:new e._Code(">="),LT:new e._Code("<"),LTE:new e._Code("<="),EQ:new e._Code("==="),NEQ:new e._Code("!=="),NOT:new e._Code("!"),OR:new e._Code("||"),AND:new e._Code("&&"),ADD:new e._Code("+")};class i{optimizeNodes(){return this}optimizeNames(g,P){return this}}class o extends i{constructor(g,P,R){super(),this.varKind=g,this.name=P,this.rhs=R}render({es5:g,_n:P}){const R=g?s.varKinds.var:this.varKind,H=this.rhs===void 0?"":` = ${this.rhs}`;return`${R} ${this.name}${H};`+P}optimizeNames(g,P){if(g[this.name.str])return this.rhs&&(this.rhs=Z(this.rhs,g,P)),this}get names(){return this.rhs instanceof e._CodeOrName?this.rhs.names:{}}}class u extends i{constructor(g,P,R){super(),this.lhs=g,this.rhs=P,this.sideEffects=R}render({_n:g}){return`${this.lhs} = ${this.rhs};`+g}optimizeNames(g,P){if(!(this.lhs instanceof e.Name&&!g[this.lhs.str]&&!this.sideEffects))return this.rhs=Z(this.rhs,g,P),this}get names(){const g=this.lhs instanceof e.Name?{}:{...this.lhs.names};return G(g,this.rhs)}}class p extends u{constructor(g,P,R,H){super(g,R,H),this.op=P}render({_n:g}){return`${this.lhs} ${this.op}= ${this.rhs};`+g}}class w extends i{constructor(g){super(),this.label=g,this.names={}}render({_n:g}){return`${this.label}:`+g}}class h extends i{constructor(g){super(),this.label=g,this.names={}}render({_n:g}){return`break${this.label?` ${this.label}`:""};`+g}}class $ extends i{constructor(g){super(),this.error=g}render({_n:g}){return`throw ${this.error};`+g}get names(){return this.error.names}}class v extends i{constructor(g){super(),this.code=g}render({_n:g}){return`${this.code};`+g}optimizeNodes(){return`${this.code}`?this:void 0}optimizeNames(g,P){return this.code=Z(this.code,g,P),this}get names(){return this.code instanceof e._CodeOrName?this.code.names:{}}}class k extends i{constructor(g=[]){super(),this.nodes=g}render(g){return this.nodes.reduce((P,R)=>P+R.render(g),"")}optimizeNodes(){const{nodes:g}=this;let P=g.length;for(;P--;){const R=g[P].optimizeNodes();Array.isArray(R)?g.splice(P,1,...R):R?g[P]=R:g.splice(P,1)}return g.length>0?this:void 0}optimizeNames(g,P){const{nodes:R}=this;let H=R.length;for(;H--;){const B=R[H];B.optimizeNames(g,P)||(ee(g,B.names),R.splice(H,1))}return R.length>0?this:void 0}get names(){return this.nodes.reduce((g,P)=>F(g,P.names),{})}}class _ extends k{render(g){return"{"+g._n+super.render(g)+"}"+g._n}}class b extends k{}class f extends _{}f.kind="else";class l extends _{constructor(g,P){super(P),this.condition=g}render(g){let P=`if(${this.condition})`+super.render(g);return this.else&&(P+="else "+this.else.render(g)),P}optimizeNodes(){super.optimizeNodes();const g=this.condition;if(g===!0)return this.nodes;let P=this.else;if(P){const R=P.optimizeNodes();P=this.else=Array.isArray(R)?new f(R):R}if(P)return g===!1?P instanceof l?P:P.nodes:this.nodes.length?this:new l(re(g),P instanceof l?[P]:P.nodes);if(!(g===!1||!this.nodes.length))return this}optimizeNames(g,P){var R;if(this.else=(R=this.else)===null||R===void 0?void 0:R.optimizeNames(g,P),!!(super.optimizeNames(g,P)||this.else))return this.condition=Z(this.condition,g,P),this}get names(){const g=super.names;return G(g,this.condition),this.else&&F(g,this.else.names),g}}l.kind="if";class a extends _{}a.kind="for";class c extends a{constructor(g){super(),this.iteration=g}render(g){return`for(${this.iteration})`+super.render(g)}optimizeNames(g,P){if(super.optimizeNames(g,P))return this.iteration=Z(this.iteration,g,P),this}get names(){return F(super.names,this.iteration.names)}}class y extends a{constructor(g,P,R,H){super(),this.varKind=g,this.name=P,this.from=R,this.to=H}render(g){const P=g.es5?s.varKinds.var:this.varKind,{name:R,from:H,to:B}=this;return`for(${P} ${R}=${H}; ${R}<${B}; ${R}++)`+super.render(g)}get names(){const g=G(super.names,this.from);return G(g,this.to)}}class d extends a{constructor(g,P,R,H){super(),this.loop=g,this.varKind=P,this.name=R,this.iterable=H}render(g){return`for(${this.varKind} ${this.name} ${this.loop} ${this.iterable})`+super.render(g)}optimizeNames(g,P){if(super.optimizeNames(g,P))return this.iterable=Z(this.iterable,g,P),this}get names(){return F(super.names,this.iterable.names)}}class m extends _{constructor(g,P,R){super(),this.name=g,this.args=P,this.async=R}render(g){return`${this.async?"async ":""}function ${this.name}(${this.args})`+super.render(g)}}m.kind="func";class S extends k{render(g){return"return "+super.render(g)}}S.kind="return";class I extends _{render(g){let P="try"+super.render(g);return this.catch&&(P+=this.catch.render(g)),this.finally&&(P+=this.finally.render(g)),P}optimizeNodes(){var g,P;return super.optimizeNodes(),(g=this.catch)===null||g===void 0||g.optimizeNodes(),(P=this.finally)===null||P===void 0||P.optimizeNodes(),this}optimizeNames(g,P){var R,H;return super.optimizeNames(g,P),(R=this.catch)===null||R===void 0||R.optimizeNames(g,P),(H=this.finally)===null||H===void 0||H.optimizeNames(g,P),this}get names(){const g=super.names;return this.catch&&F(g,this.catch.names),this.finally&&F(g,this.finally.names),g}}class x extends _{constructor(g){super(),this.error=g}render(g){return`catch(${this.error})`+super.render(g)}}x.kind="catch";class j extends _{render(g){return"finally"+super.render(g)}}j.kind="finally";class q{constructor(g,P={}){this._values={},this._blockStarts=[],this._constants={},this.opts={...P,_n:P.lines?`
`:""},this._extScope=g,this._scope=new s.Scope({parent:g}),this._nodes=[new b]}toString(){return this._root.render(this.opts)}name(g){return this._scope.name(g)}scopeName(g){return this._extScope.name(g)}scopeValue(g,P){const R=this._extScope.value(g,P);return(this._values[R.prefix]||(this._values[R.prefix]=new Set)).add(R),R}getScopeValue(g,P){return this._extScope.getValue(g,P)}scopeRefs(g){return this._extScope.scopeRefs(g,this._values)}scopeCode(){return this._extScope.scopeCode(this._values)}_def(g,P,R,H){const B=this._scope.toName(P);return R!==void 0&&H&&(this._constants[B.str]=R),this._leafNode(new o(g,B,R)),B}const(g,P,R){return this._def(s.varKinds.const,g,P,R)}let(g,P,R){return this._def(s.varKinds.let,g,P,R)}var(g,P,R){return this._def(s.varKinds.var,g,P,R)}assign(g,P,R){return this._leafNode(new u(g,P,R))}add(g,P){return this._leafNode(new p(g,t.operators.ADD,P))}code(g){return typeof g=="function"?g():g!==e.nil&&this._leafNode(new v(g)),this}object(...g){const P=["{"];for(const[R,H]of g)P.length>1&&P.push(","),P.push(R),(R!==H||this.opts.es5)&&(P.push(":"),(0,e.addCodeArg)(P,H));return P.push("}"),new e._Code(P)}if(g,P,R){if(this._blockNode(new l(g)),P&&R)this.code(P).else().code(R).endIf();else if(P)this.code(P).endIf();else if(R)throw new Error('CodeGen: "else" body without "then" body');return this}elseIf(g){return this._elseNode(new l(g))}else(){return this._elseNode(new f)}endIf(){return this._endBlockNode(l,f)}_for(g,P){return this._blockNode(g),P&&this.code(P).endFor(),this}for(g,P){return this._for(new c(g),P)}forRange(g,P,R,H,B=this.opts.es5?s.varKinds.var:s.varKinds.let){const Q=this._scope.toName(g);return this._for(new y(B,Q,P,R),()=>H(Q))}forOf(g,P,R,H=s.varKinds.const){const B=this._scope.toName(g);if(this.opts.es5){const Q=P instanceof e.Name?P:this.var("_arr",P);return this.forRange("_i",0,(0,e._)`${Q}.length`,W=>{this.var(B,(0,e._)`${Q}[${W}]`),R(B)})}return this._for(new d("of",H,B,P),()=>R(B))}forIn(g,P,R,H=this.opts.es5?s.varKinds.var:s.varKinds.const){if(this.opts.ownProperties)return this.forOf(g,(0,e._)`Object.keys(${P})`,R);const B=this._scope.toName(g);return this._for(new d("in",H,B,P),()=>R(B))}endFor(){return this._endBlockNode(a)}label(g){return this._leafNode(new w(g))}break(g){return this._leafNode(new h(g))}return(g){const P=new S;if(this._blockNode(P),this.code(g),P.nodes.length!==1)throw new Error('CodeGen: "return" should have one node');return this._endBlockNode(S)}try(g,P,R){if(!P&&!R)throw new Error('CodeGen: "try" without "catch" and "finally"');const H=new I;if(this._blockNode(H),this.code(g),P){const B=this.name("e");this._currNode=H.catch=new x(B),P(B)}return R&&(this._currNode=H.finally=new j,this.code(R)),this._endBlockNode(x,j)}throw(g){return this._leafNode(new $(g))}block(g,P){return this._blockStarts.push(this._nodes.length),g&&this.code(g).endBlock(P),this}endBlock(g){const P=this._blockStarts.pop();if(P===void 0)throw new Error("CodeGen: not in self-balancing block");const R=this._nodes.length-P;if(R<0||g!==void 0&&R!==g)throw new Error(`CodeGen: wrong number of nodes: ${R} vs ${g} expected`);return this._nodes.length=P,this}func(g,P=e.nil,R,H){return this._blockNode(new m(g,P,R)),H&&this.code(H).endFunc(),this}endFunc(){return this._endBlockNode(m)}optimize(g=1){for(;g-- >0;)this._root.optimizeNodes(),this._root.optimizeNames(this._root.names,this._constants)}_leafNode(g){return this._currNode.nodes.push(g),this}_blockNode(g){this._currNode.nodes.push(g),this._nodes.push(g)}_endBlockNode(g,P){const R=this._currNode;if(R instanceof g||P&&R instanceof P)return this._nodes.pop(),this;throw new Error(`CodeGen: not in block "${P?`${g.kind}/${P.kind}`:g.kind}"`)}_elseNode(g){const P=this._currNode;if(!(P instanceof l))throw new Error('CodeGen: "else" without "if"');return this._currNode=P.else=g,this}get _root(){return this._nodes[0]}get _currNode(){const g=this._nodes;return g[g.length-1]}set _currNode(g){const P=this._nodes;P[P.length-1]=g}}t.CodeGen=q;function F(C,g){for(const P in g)C[P]=(C[P]||0)+(g[P]||0);return C}function G(C,g){return g instanceof e._CodeOrName?F(C,g.names):C}function Z(C,g,P){if(C instanceof e.Name)return R(C);if(!H(C))return C;return new e._Code(C._items.reduce((B,Q)=>(Q instanceof e.Name&&(Q=R(Q)),Q instanceof e._Code?B.push(...Q._items):B.push(Q),B),[]));function R(B){const Q=P[B.str];return Q===void 0||g[B.str]!==1?B:(delete g[B.str],Q)}function H(B){return B instanceof e._Code&&B._items.some(Q=>Q instanceof e.Name&&g[Q.str]===1&&P[Q.str]!==void 0)}}function ee(C,g){for(const P in g)C[P]=(C[P]||0)-(g[P]||0)}function re(C){return typeof C=="boolean"||typeof C=="number"||C===null?!C:(0,e._)`!${D(C)}`}t.not=re;const te=O(t.operators.AND);function K(...C){return C.reduce(te)}t.and=K;const oe=O(t.operators.OR);function A(...C){return C.reduce(oe)}t.or=A;function O(C){return(g,P)=>g===e.nil?P:P===e.nil?g:(0,e._)`${D(g)} ${C} ${D(P)}`}function D(C){return C instanceof e.Name?C:(0,e._)`(${C})`}}(ms)),ms}var J={},Ys;function se(){if(Ys)return J;Ys=1,Object.defineProperty(J,"__esModule",{value:!0}),J.checkStrictMode=J.getErrorPath=J.Type=J.useFunc=J.setEvaluated=J.evaluatedPropsToName=J.mergeEvaluated=J.eachItem=J.unescapeJsonPointer=J.escapeJsonPointer=J.escapeFragment=J.unescapeFragment=J.schemaRefOrVal=J.schemaHasRulesButRef=J.schemaHasRules=J.checkUnknownRules=J.alwaysValidSchema=J.toHash=void 0;const t=Y(),e=Xt();function s(d){const m={};for(const S of d)m[S]=!0;return m}J.toHash=s;function n(d,m){return typeof m=="boolean"?m:Object.keys(m).length===0?!0:(r(d,m),!i(m,d.self.RULES.all))}J.alwaysValidSchema=n;function r(d,m=d.schema){const{opts:S,self:I}=d;if(!S.strictSchema||typeof m=="boolean")return;const x=I.RULES.keywords;for(const j in m)x[j]||y(d,`unknown keyword: "${j}"`)}J.checkUnknownRules=r;function i(d,m){if(typeof d=="boolean")return!d;for(const S in d)if(m[S])return!0;return!1}J.schemaHasRules=i;function o(d,m){if(typeof d=="boolean")return!d;for(const S in d)if(S!=="$ref"&&m.all[S])return!0;return!1}J.schemaHasRulesButRef=o;function u({topSchemaRef:d,schemaPath:m},S,I,x){if(!x){if(typeof S=="number"||typeof S=="boolean")return S;if(typeof S=="string")return(0,t._)`${S}`}return(0,t._)`${d}${m}${(0,t.getProperty)(I)}`}J.schemaRefOrVal=u;function p(d){return $(decodeURIComponent(d))}J.unescapeFragment=p;function w(d){return encodeURIComponent(h(d))}J.escapeFragment=w;function h(d){return typeof d=="number"?`${d}`:d.replace(/~/g,"~0").replace(/\//g,"~1")}J.escapeJsonPointer=h;function $(d){return d.replace(/~1/g,"/").replace(/~0/g,"~")}J.unescapeJsonPointer=$;function v(d,m){if(Array.isArray(d))for(const S of d)m(S);else m(d)}J.eachItem=v;function k({mergeNames:d,mergeToName:m,mergeValues:S,resultToName:I}){return(x,j,q,F)=>{const G=q===void 0?j:q instanceof t.Name?(j instanceof t.Name?d(x,j,q):m(x,j,q),q):j instanceof t.Name?(m(x,q,j),j):S(j,q);return F===t.Name&&!(G instanceof t.Name)?I(x,G):G}}J.mergeEvaluated={props:k({mergeNames:(d,m,S)=>d.if((0,t._)`${S} !== true && ${m} !== undefined`,()=>{d.if((0,t._)`${m} === true`,()=>d.assign(S,!0),()=>d.assign(S,(0,t._)`${S} || {}`).code((0,t._)`Object.assign(${S}, ${m})`))}),mergeToName:(d,m,S)=>d.if((0,t._)`${S} !== true`,()=>{m===!0?d.assign(S,!0):(d.assign(S,(0,t._)`${S} || {}`),b(d,S,m))}),mergeValues:(d,m)=>d===!0?!0:{...d,...m},resultToName:_}),items:k({mergeNames:(d,m,S)=>d.if((0,t._)`${S} !== true && ${m} !== undefined`,()=>d.assign(S,(0,t._)`${m} === true ? true : ${S} > ${m} ? ${S} : ${m}`)),mergeToName:(d,m,S)=>d.if((0,t._)`${S} !== true`,()=>d.assign(S,m===!0?!0:(0,t._)`${S} > ${m} ? ${S} : ${m}`)),mergeValues:(d,m)=>d===!0?!0:Math.max(d,m),resultToName:(d,m)=>d.var("items",m)})};function _(d,m){if(m===!0)return d.var("props",!0);const S=d.var("props",(0,t._)`{}`);return m!==void 0&&b(d,S,m),S}J.evaluatedPropsToName=_;function b(d,m,S){Object.keys(S).forEach(I=>d.assign((0,t._)`${m}${(0,t.getProperty)(I)}`,!0))}J.setEvaluated=b;const f={};function l(d,m){return d.scopeValue("func",{ref:m,code:f[m.code]||(f[m.code]=new e._Code(m.code))})}J.useFunc=l;var a;(function(d){d[d.Num=0]="Num",d[d.Str=1]="Str"})(a||(J.Type=a={}));function c(d,m,S){if(d instanceof t.Name){const I=m===a.Num;return S?I?(0,t._)`"[" + ${d} + "]"`:(0,t._)`"['" + ${d} + "']"`:I?(0,t._)`"/" + ${d}`:(0,t._)`"/" + ${d}.replace(/~/g, "~0").replace(/\\//g, "~1")`}return S?(0,t.getProperty)(d).toString():"/"+h(d)}J.getErrorPath=c;function y(d,m,S=d.opts.strictSchema){if(S){if(m=`strict mode: ${m}`,S===!0)throw new Error(m);d.self.logger.warn(m)}}return J.checkStrictMode=y,J}var ft={},Qs;function ze(){if(Qs)return ft;Qs=1,Object.defineProperty(ft,"__esModule",{value:!0});const t=Y(),e={data:new t.Name("data"),valCxt:new t.Name("valCxt"),instancePath:new t.Name("instancePath"),parentData:new t.Name("parentData"),parentDataProperty:new t.Name("parentDataProperty"),rootData:new t.Name("rootData"),dynamicAnchors:new t.Name("dynamicAnchors"),vErrors:new t.Name("vErrors"),errors:new t.Name("errors"),this:new t.Name("this"),self:new t.Name("self"),scope:new t.Name("scope"),json:new t.Name("json"),jsonPos:new t.Name("jsonPos"),jsonLen:new t.Name("jsonLen"),jsonPart:new t.Name("jsonPart")};return ft.default=e,ft}var en;function ts(){return en||(en=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.extendErrors=t.resetErrorsCount=t.reportExtraError=t.reportError=t.keyword$DataError=t.keywordError=void 0;const e=Y(),s=se(),n=ze();t.keywordError={message:({keyword:f})=>(0,e.str)`must pass "${f}" keyword validation`},t.keyword$DataError={message:({keyword:f,schemaType:l})=>l?(0,e.str)`"${f}" keyword must be ${l} ($data)`:(0,e.str)`"${f}" keyword is invalid ($data)`};function r(f,l=t.keywordError,a,c){const{it:y}=f,{gen:d,compositeRule:m,allErrors:S}=y,I=$(f,l,a);c??(m||S)?p(d,I):w(y,(0,e._)`[${I}]`)}t.reportError=r;function i(f,l=t.keywordError,a){const{it:c}=f,{gen:y,compositeRule:d,allErrors:m}=c,S=$(f,l,a);p(y,S),d||m||w(c,n.default.vErrors)}t.reportExtraError=i;function o(f,l){f.assign(n.default.errors,l),f.if((0,e._)`${n.default.vErrors} !== null`,()=>f.if(l,()=>f.assign((0,e._)`${n.default.vErrors}.length`,l),()=>f.assign(n.default.vErrors,null)))}t.resetErrorsCount=o;function u({gen:f,keyword:l,schemaValue:a,data:c,errsCount:y,it:d}){if(y===void 0)throw new Error("ajv implementation error");const m=f.name("err");f.forRange("i",y,n.default.errors,S=>{f.const(m,(0,e._)`${n.default.vErrors}[${S}]`),f.if((0,e._)`${m}.instancePath === undefined`,()=>f.assign((0,e._)`${m}.instancePath`,(0,e.strConcat)(n.default.instancePath,d.errorPath))),f.assign((0,e._)`${m}.schemaPath`,(0,e.str)`${d.errSchemaPath}/${l}`),d.opts.verbose&&(f.assign((0,e._)`${m}.schema`,a),f.assign((0,e._)`${m}.data`,c))})}t.extendErrors=u;function p(f,l){const a=f.const("err",l);f.if((0,e._)`${n.default.vErrors} === null`,()=>f.assign(n.default.vErrors,(0,e._)`[${a}]`),(0,e._)`${n.default.vErrors}.push(${a})`),f.code((0,e._)`${n.default.errors}++`)}function w(f,l){const{gen:a,validateName:c,schemaEnv:y}=f;y.$async?a.throw((0,e._)`new ${f.ValidationError}(${l})`):(a.assign((0,e._)`${c}.errors`,l),a.return(!1))}const h={keyword:new e.Name("keyword"),schemaPath:new e.Name("schemaPath"),params:new e.Name("params"),propertyName:new e.Name("propertyName"),message:new e.Name("message"),schema:new e.Name("schema"),parentSchema:new e.Name("parentSchema")};function $(f,l,a){const{createErrors:c}=f.it;return c===!1?(0,e._)`{}`:v(f,l,a)}function v(f,l,a={}){const{gen:c,it:y}=f,d=[k(y,a),_(f,a)];return b(f,l,d),c.object(...d)}function k({errorPath:f},{instancePath:l}){const a=l?(0,e.str)`${f}${(0,s.getErrorPath)(l,s.Type.Str)}`:f;return[n.default.instancePath,(0,e.strConcat)(n.default.instancePath,a)]}function _({keyword:f,it:{errSchemaPath:l}},{schemaPath:a,parentSchema:c}){let y=c?l:(0,e.str)`${l}/${f}`;return a&&(y=(0,e.str)`${y}${(0,s.getErrorPath)(a,s.Type.Str)}`),[h.schemaPath,y]}function b(f,{params:l,message:a},c){const{keyword:y,data:d,schemaValue:m,it:S}=f,{opts:I,propertyName:x,topSchemaRef:j,schemaPath:q}=S;c.push([h.keyword,y],[h.params,typeof l=="function"?l(f):l||(0,e._)`{}`]),I.messages&&c.push([h.message,typeof a=="function"?a(f):a]),I.verbose&&c.push([h.schema,m],[h.parentSchema,(0,e._)`${j}${q}`],[n.default.data,d]),x&&c.push([h.propertyName,x])}}(ps)),ps}var tn;function uo(){if(tn)return Ue;tn=1,Object.defineProperty(Ue,"__esModule",{value:!0}),Ue.boolOrEmptySchema=Ue.topBoolOrEmptySchema=void 0;const t=ts(),e=Y(),s=ze(),n={message:"boolean schema is false"};function r(u){const{gen:p,schema:w,validateName:h}=u;w===!1?o(u,!1):typeof w=="object"&&w.$async===!0?p.return(s.default.data):(p.assign((0,e._)`${h}.errors`,null),p.return(!0))}Ue.topBoolOrEmptySchema=r;function i(u,p){const{gen:w,schema:h}=u;h===!1?(w.var(p,!1),o(u)):w.var(p,!0)}Ue.boolOrEmptySchema=i;function o(u,p){const{gen:w,data:h}=u,$={gen:w,keyword:"false schema",data:h,schema:!1,schemaCode:!1,schemaValue:!1,params:{},it:u};(0,t.reportError)($,n,void 0,p)}return Ue}var ue={},Fe={},sn;function Wi(){if(sn)return Fe;sn=1,Object.defineProperty(Fe,"__esModule",{value:!0}),Fe.getRules=Fe.isJSONType=void 0;const t=["string","number","integer","boolean","null","object","array"],e=new Set(t);function s(r){return typeof r=="string"&&e.has(r)}Fe.isJSONType=s;function n(){const r={number:{type:"number",rules:[]},string:{type:"string",rules:[]},array:{type:"array",rules:[]},object:{type:"object",rules:[]}};return{types:{...r,integer:!0,boolean:!0,null:!0},rules:[{rules:[]},r.number,r.string,r.array,r.object],post:{rules:[]},all:{},keywords:{}}}return Fe.getRules=n,Fe}var xe={},nn;function Ji(){if(nn)return xe;nn=1,Object.defineProperty(xe,"__esModule",{value:!0}),xe.shouldUseRule=xe.shouldUseGroup=xe.schemaHasRulesForType=void 0;function t({schema:n,self:r},i){const o=r.RULES.types[i];return o&&o!==!0&&e(n,o)}xe.schemaHasRulesForType=t;function e(n,r){return r.rules.some(i=>s(n,i))}xe.shouldUseGroup=e;function s(n,r){var i;return n[r.keyword]!==void 0||((i=r.definition.implements)===null||i===void 0?void 0:i.some(o=>n[o]!==void 0))}return xe.shouldUseRule=s,xe}var rn;function Yt(){if(rn)return ue;rn=1,Object.defineProperty(ue,"__esModule",{value:!0}),ue.reportTypeError=ue.checkDataTypes=ue.checkDataType=ue.coerceAndCheckDataType=ue.getJSONTypes=ue.getSchemaTypes=ue.DataType=void 0;const t=Wi(),e=Ji(),s=ts(),n=Y(),r=se();var i;(function(a){a[a.Correct=0]="Correct",a[a.Wrong=1]="Wrong"})(i||(ue.DataType=i={}));function o(a){const c=u(a.type);if(c.includes("null")){if(a.nullable===!1)throw new Error("type: null contradicts nullable: false")}else{if(!c.length&&a.nullable!==void 0)throw new Error('"nullable" cannot be used without "type"');a.nullable===!0&&c.push("null")}return c}ue.getSchemaTypes=o;function u(a){const c=Array.isArray(a)?a:a?[a]:[];if(c.every(t.isJSONType))return c;throw new Error("type must be JSONType or JSONType[]: "+c.join(","))}ue.getJSONTypes=u;function p(a,c){const{gen:y,data:d,opts:m}=a,S=h(c,m.coerceTypes),I=c.length>0&&!(S.length===0&&c.length===1&&(0,e.schemaHasRulesForType)(a,c[0]));if(I){const x=_(c,d,m.strictNumbers,i.Wrong);y.if(x,()=>{S.length?$(a,c,S):f(a)})}return I}ue.coerceAndCheckDataType=p;const w=new Set(["string","number","integer","boolean","null"]);function h(a,c){return c?a.filter(y=>w.has(y)||c==="array"&&y==="array"):[]}function $(a,c,y){const{gen:d,data:m,opts:S}=a,I=d.let("dataType",(0,n._)`typeof ${m}`),x=d.let("coerced",(0,n._)`undefined`);S.coerceTypes==="array"&&d.if((0,n._)`${I} == 'object' && Array.isArray(${m}) && ${m}.length == 1`,()=>d.assign(m,(0,n._)`${m}[0]`).assign(I,(0,n._)`typeof ${m}`).if(_(c,m,S.strictNumbers),()=>d.assign(x,m))),d.if((0,n._)`${x} !== undefined`);for(const q of y)(w.has(q)||q==="array"&&S.coerceTypes==="array")&&j(q);d.else(),f(a),d.endIf(),d.if((0,n._)`${x} !== undefined`,()=>{d.assign(m,x),v(a,x)});function j(q){switch(q){case"string":d.elseIf((0,n._)`${I} == "number" || ${I} == "boolean"`).assign(x,(0,n._)`"" + ${m}`).elseIf((0,n._)`${m} === null`).assign(x,(0,n._)`""`);return;case"number":d.elseIf((0,n._)`${I} == "boolean" || ${m} === null
              || (${I} == "string" && ${m} && ${m} == +${m})`).assign(x,(0,n._)`+${m}`);return;case"integer":d.elseIf((0,n._)`${I} === "boolean" || ${m} === null
              || (${I} === "string" && ${m} && ${m} == +${m} && !(${m} % 1))`).assign(x,(0,n._)`+${m}`);return;case"boolean":d.elseIf((0,n._)`${m} === "false" || ${m} === 0 || ${m} === null`).assign(x,!1).elseIf((0,n._)`${m} === "true" || ${m} === 1`).assign(x,!0);return;case"null":d.elseIf((0,n._)`${m} === "" || ${m} === 0 || ${m} === false`),d.assign(x,null);return;case"array":d.elseIf((0,n._)`${I} === "string" || ${I} === "number"
              || ${I} === "boolean" || ${m} === null`).assign(x,(0,n._)`[${m}]`)}}}function v({gen:a,parentData:c,parentDataProperty:y},d){a.if((0,n._)`${c} !== undefined`,()=>a.assign((0,n._)`${c}[${y}]`,d))}function k(a,c,y,d=i.Correct){const m=d===i.Correct?n.operators.EQ:n.operators.NEQ;let S;switch(a){case"null":return(0,n._)`${c} ${m} null`;case"array":S=(0,n._)`Array.isArray(${c})`;break;case"object":S=(0,n._)`${c} && typeof ${c} == "object" && !Array.isArray(${c})`;break;case"integer":S=I((0,n._)`!(${c} % 1) && !isNaN(${c})`);break;case"number":S=I();break;default:return(0,n._)`typeof ${c} ${m} ${a}`}return d===i.Correct?S:(0,n.not)(S);function I(x=n.nil){return(0,n.and)((0,n._)`typeof ${c} == "number"`,x,y?(0,n._)`isFinite(${c})`:n.nil)}}ue.checkDataType=k;function _(a,c,y,d){if(a.length===1)return k(a[0],c,y,d);let m;const S=(0,r.toHash)(a);if(S.array&&S.object){const I=(0,n._)`typeof ${c} != "object"`;m=S.null?I:(0,n._)`!${c} || ${I}`,delete S.null,delete S.array,delete S.object}else m=n.nil;S.number&&delete S.integer;for(const I in S)m=(0,n.and)(m,k(I,c,y,d));return m}ue.checkDataTypes=_;const b={message:({schema:a})=>`must be ${a}`,params:({schema:a,schemaValue:c})=>typeof a=="string"?(0,n._)`{type: ${a}}`:(0,n._)`{type: ${c}}`};function f(a){const c=l(a);(0,s.reportError)(c,b)}ue.reportTypeError=f;function l(a){const{gen:c,data:y,schema:d}=a,m=(0,r.schemaRefOrVal)(a,d,"type");return{gen:c,keyword:"type",data:y,schema:d.type,schemaCode:m,schemaValue:m,parentSchema:d,params:{},it:a}}return ue}var st={},on;function ho(){if(on)return st;on=1,Object.defineProperty(st,"__esModule",{value:!0}),st.assignDefaults=void 0;const t=Y(),e=se();function s(r,i){const{properties:o,items:u}=r.schema;if(i==="object"&&o)for(const p in o)n(r,p,o[p].default);else i==="array"&&Array.isArray(u)&&u.forEach((p,w)=>n(r,w,p.default))}st.assignDefaults=s;function n(r,i,o){const{gen:u,compositeRule:p,data:w,opts:h}=r;if(o===void 0)return;const $=(0,t._)`${w}${(0,t.getProperty)(i)}`;if(p){(0,e.checkStrictMode)(r,`default is ignored for: ${$}`);return}let v=(0,t._)`${$} === undefined`;h.useDefaults==="empty"&&(v=(0,t._)`${v} || ${$} === null || ${$} === ""`),u.if(v,(0,t._)`${$} = ${(0,t.stringify)(o)}`)}return st}var Pe={},ie={},an;function Ie(){if(an)return ie;an=1,Object.defineProperty(ie,"__esModule",{value:!0}),ie.validateUnion=ie.validateArray=ie.usePattern=ie.callValidateCode=ie.schemaProperties=ie.allSchemaProperties=ie.noPropertyInData=ie.propertyInData=ie.isOwnProperty=ie.hasPropFunc=ie.reportMissingProp=ie.checkMissingProp=ie.checkReportMissingProp=void 0;const t=Y(),e=se(),s=ze(),n=se();function r(a,c){const{gen:y,data:d,it:m}=a;y.if(h(y,d,c,m.opts.ownProperties),()=>{a.setParams({missingProperty:(0,t._)`${c}`},!0),a.error()})}ie.checkReportMissingProp=r;function i({gen:a,data:c,it:{opts:y}},d,m){return(0,t.or)(...d.map(S=>(0,t.and)(h(a,c,S,y.ownProperties),(0,t._)`${m} = ${S}`)))}ie.checkMissingProp=i;function o(a,c){a.setParams({missingProperty:c},!0),a.error()}ie.reportMissingProp=o;function u(a){return a.scopeValue("func",{ref:Object.prototype.hasOwnProperty,code:(0,t._)`Object.prototype.hasOwnProperty`})}ie.hasPropFunc=u;function p(a,c,y){return(0,t._)`${u(a)}.call(${c}, ${y})`}ie.isOwnProperty=p;function w(a,c,y,d){const m=(0,t._)`${c}${(0,t.getProperty)(y)} !== undefined`;return d?(0,t._)`${m} && ${p(a,c,y)}`:m}ie.propertyInData=w;function h(a,c,y,d){const m=(0,t._)`${c}${(0,t.getProperty)(y)} === undefined`;return d?(0,t.or)(m,(0,t.not)(p(a,c,y))):m}ie.noPropertyInData=h;function $(a){return a?Object.keys(a).filter(c=>c!=="__proto__"):[]}ie.allSchemaProperties=$;function v(a,c){return $(c).filter(y=>!(0,e.alwaysValidSchema)(a,c[y]))}ie.schemaProperties=v;function k({schemaCode:a,data:c,it:{gen:y,topSchemaRef:d,schemaPath:m,errorPath:S},it:I},x,j,q){const F=q?(0,t._)`${a}, ${c}, ${d}${m}`:c,G=[[s.default.instancePath,(0,t.strConcat)(s.default.instancePath,S)],[s.default.parentData,I.parentData],[s.default.parentDataProperty,I.parentDataProperty],[s.default.rootData,s.default.rootData]];I.opts.dynamicRef&&G.push([s.default.dynamicAnchors,s.default.dynamicAnchors]);const Z=(0,t._)`${F}, ${y.object(...G)}`;return j!==t.nil?(0,t._)`${x}.call(${j}, ${Z})`:(0,t._)`${x}(${Z})`}ie.callValidateCode=k;const _=(0,t._)`new RegExp`;function b({gen:a,it:{opts:c}},y){const d=c.unicodeRegExp?"u":"",{regExp:m}=c.code,S=m(y,d);return a.scopeValue("pattern",{key:S.toString(),ref:S,code:(0,t._)`${m.code==="new RegExp"?_:(0,n.useFunc)(a,m)}(${y}, ${d})`})}ie.usePattern=b;function f(a){const{gen:c,data:y,keyword:d,it:m}=a,S=c.name("valid");if(m.allErrors){const x=c.let("valid",!0);return I(()=>c.assign(x,!1)),x}return c.var(S,!0),I(()=>c.break()),S;function I(x){const j=c.const("len",(0,t._)`${y}.length`);c.forRange("i",0,j,q=>{a.subschema({keyword:d,dataProp:q,dataPropType:e.Type.Num},S),c.if((0,t.not)(S),x)})}}ie.validateArray=f;function l(a){const{gen:c,schema:y,keyword:d,it:m}=a;if(!Array.isArray(y))throw new Error("ajv implementation error");if(y.some(j=>(0,e.alwaysValidSchema)(m,j))&&!m.opts.unevaluated)return;const I=c.let("valid",!1),x=c.name("_valid");c.block(()=>y.forEach((j,q)=>{const F=a.subschema({keyword:d,schemaProp:q,compositeRule:!0},x);c.assign(I,(0,t._)`${I} || ${x}`),a.mergeValidEvaluated(F,x)||c.if((0,t.not)(I))})),a.result(I,()=>a.reset(),()=>a.error(!0))}return ie.validateUnion=l,ie}var ln;function fo(){if(ln)return Pe;ln=1,Object.defineProperty(Pe,"__esModule",{value:!0}),Pe.validateKeywordUsage=Pe.validSchemaType=Pe.funcKeywordCode=Pe.macroKeywordCode=void 0;const t=Y(),e=ze(),s=Ie(),n=ts();function r(v,k){const{gen:_,keyword:b,schema:f,parentSchema:l,it:a}=v,c=k.macro.call(a.self,f,l,a),y=w(_,b,c);a.opts.validateSchema!==!1&&a.self.validateSchema(c,!0);const d=_.name("valid");v.subschema({schema:c,schemaPath:t.nil,errSchemaPath:`${a.errSchemaPath}/${b}`,topSchemaRef:y,compositeRule:!0},d),v.pass(d,()=>v.error(!0))}Pe.macroKeywordCode=r;function i(v,k){var _;const{gen:b,keyword:f,schema:l,parentSchema:a,$data:c,it:y}=v;p(y,k);const d=!c&&k.compile?k.compile.call(y.self,l,a,y):k.validate,m=w(b,f,d),S=b.let("valid");v.block$data(S,I),v.ok((_=k.valid)!==null&&_!==void 0?_:S);function I(){if(k.errors===!1)q(),k.modifying&&o(v),F(()=>v.error());else{const G=k.async?x():j();k.modifying&&o(v),F(()=>u(v,G))}}function x(){const G=b.let("ruleErrs",null);return b.try(()=>q((0,t._)`await `),Z=>b.assign(S,!1).if((0,t._)`${Z} instanceof ${y.ValidationError}`,()=>b.assign(G,(0,t._)`${Z}.errors`),()=>b.throw(Z))),G}function j(){const G=(0,t._)`${m}.errors`;return b.assign(G,null),q(t.nil),G}function q(G=k.async?(0,t._)`await `:t.nil){const Z=y.opts.passContext?e.default.this:e.default.self,ee=!("compile"in k&&!c||k.schema===!1);b.assign(S,(0,t._)`${G}${(0,s.callValidateCode)(v,m,Z,ee)}`,k.modifying)}function F(G){var Z;b.if((0,t.not)((Z=k.valid)!==null&&Z!==void 0?Z:S),G)}}Pe.funcKeywordCode=i;function o(v){const{gen:k,data:_,it:b}=v;k.if(b.parentData,()=>k.assign(_,(0,t._)`${b.parentData}[${b.parentDataProperty}]`))}function u(v,k){const{gen:_}=v;_.if((0,t._)`Array.isArray(${k})`,()=>{_.assign(e.default.vErrors,(0,t._)`${e.default.vErrors} === null ? ${k} : ${e.default.vErrors}.concat(${k})`).assign(e.default.errors,(0,t._)`${e.default.vErrors}.length`),(0,n.extendErrors)(v)},()=>v.error())}function p({schemaEnv:v},k){if(k.async&&!v.$async)throw new Error("async keyword in sync schema")}function w(v,k,_){if(_===void 0)throw new Error(`keyword "${k}" failed to compile`);return v.scopeValue("keyword",typeof _=="function"?{ref:_}:{ref:_,code:(0,t.stringify)(_)})}function h(v,k,_=!1){return!k.length||k.some(b=>b==="array"?Array.isArray(v):b==="object"?v&&typeof v=="object"&&!Array.isArray(v):typeof v==b||_&&typeof v>"u")}Pe.validSchemaType=h;function $({schema:v,opts:k,self:_,errSchemaPath:b},f,l){if(Array.isArray(f.keyword)?!f.keyword.includes(l):f.keyword!==l)throw new Error("ajv implementation error");const a=f.dependencies;if(a?.some(c=>!Object.prototype.hasOwnProperty.call(v,c)))throw new Error(`parent schema must have dependencies of ${l}: ${a.join(",")}`);if(f.validateSchema&&!f.validateSchema(v[l])){const y=`keyword "${l}" value is invalid at path "${b}": `+_.errorsText(f.validateSchema.errors);if(k.validateSchema==="log")_.logger.error(y);else throw new Error(y)}}return Pe.validateKeywordUsage=$,Pe}var Re={},cn;function po(){if(cn)return Re;cn=1,Object.defineProperty(Re,"__esModule",{value:!0}),Re.extendSubschemaMode=Re.extendSubschemaData=Re.getSubschema=void 0;const t=Y(),e=se();function s(i,{keyword:o,schemaProp:u,schema:p,schemaPath:w,errSchemaPath:h,topSchemaRef:$}){if(o!==void 0&&p!==void 0)throw new Error('both "keyword" and "schema" passed, only one allowed');if(o!==void 0){const v=i.schema[o];return u===void 0?{schema:v,schemaPath:(0,t._)`${i.schemaPath}${(0,t.getProperty)(o)}`,errSchemaPath:`${i.errSchemaPath}/${o}`}:{schema:v[u],schemaPath:(0,t._)`${i.schemaPath}${(0,t.getProperty)(o)}${(0,t.getProperty)(u)}`,errSchemaPath:`${i.errSchemaPath}/${o}/${(0,e.escapeFragment)(u)}`}}if(p!==void 0){if(w===void 0||h===void 0||$===void 0)throw new Error('"schemaPath", "errSchemaPath" and "topSchemaRef" are required with "schema"');return{schema:p,schemaPath:w,topSchemaRef:$,errSchemaPath:h}}throw new Error('either "keyword" or "schema" must be passed')}Re.getSubschema=s;function n(i,o,{dataProp:u,dataPropType:p,data:w,dataTypes:h,propertyName:$}){if(w!==void 0&&u!==void 0)throw new Error('both "data" and "dataProp" passed, only one allowed');const{gen:v}=o;if(u!==void 0){const{errorPath:_,dataPathArr:b,opts:f}=o,l=v.let("data",(0,t._)`${o.data}${(0,t.getProperty)(u)}`,!0);k(l),i.errorPath=(0,t.str)`${_}${(0,e.getErrorPath)(u,p,f.jsPropertySyntax)}`,i.parentDataProperty=(0,t._)`${u}`,i.dataPathArr=[...b,i.parentDataProperty]}if(w!==void 0){const _=w instanceof t.Name?w:v.let("data",w,!0);k(_),$!==void 0&&(i.propertyName=$)}h&&(i.dataTypes=h);function k(_){i.data=_,i.dataLevel=o.dataLevel+1,i.dataTypes=[],o.definedProperties=new Set,i.parentData=o.data,i.dataNames=[...o.dataNames,_]}}Re.extendSubschemaData=n;function r(i,{jtdDiscriminator:o,jtdMetadata:u,compositeRule:p,createErrors:w,allErrors:h}){p!==void 0&&(i.compositeRule=p),w!==void 0&&(i.createErrors=w),h!==void 0&&(i.allErrors=h),i.jtdDiscriminator=o,i.jtdMetadata=u}return Re.extendSubschemaMode=r,Re}var pe={},vs,dn;function Xi(){return dn||(dn=1,vs=function t(e,s){if(e===s)return!0;if(e&&s&&typeof e=="object"&&typeof s=="object"){if(e.constructor!==s.constructor)return!1;var n,r,i;if(Array.isArray(e)){if(n=e.length,n!=s.length)return!1;for(r=n;r--!==0;)if(!t(e[r],s[r]))return!1;return!0}if(e.constructor===RegExp)return e.source===s.source&&e.flags===s.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===s.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===s.toString();if(i=Object.keys(e),n=i.length,n!==Object.keys(s).length)return!1;for(r=n;r--!==0;)if(!Object.prototype.hasOwnProperty.call(s,i[r]))return!1;for(r=n;r--!==0;){var o=i[r];if(!t(e[o],s[o]))return!1}return!0}return e!==e&&s!==s}),vs}var ws={exports:{}},un;function mo(){if(un)return ws.exports;un=1;var t=ws.exports=function(n,r,i){typeof r=="function"&&(i=r,r={}),i=r.cb||i;var o=typeof i=="function"?i:i.pre||function(){},u=i.post||function(){};e(r,o,u,n,"",n)};t.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0,if:!0,then:!0,else:!0},t.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0},t.propsKeywords={$defs:!0,definitions:!0,properties:!0,patternProperties:!0,dependencies:!0},t.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0};function e(n,r,i,o,u,p,w,h,$,v){if(o&&typeof o=="object"&&!Array.isArray(o)){r(o,u,p,w,h,$,v);for(var k in o){var _=o[k];if(Array.isArray(_)){if(k in t.arrayKeywords)for(var b=0;b<_.length;b++)e(n,r,i,_[b],u+"/"+k+"/"+b,p,u,k,o,b)}else if(k in t.propsKeywords){if(_&&typeof _=="object")for(var f in _)e(n,r,i,_[f],u+"/"+k+"/"+s(f),p,u,k,o,f)}else(k in t.keywords||n.allKeys&&!(k in t.skipKeywords))&&e(n,r,i,_,u+"/"+k,p,u,k,o)}i(o,u,p,w,h,$,v)}}function s(n){return n.replace(/~/g,"~0").replace(/\//g,"~1")}return ws.exports}var hn;function ss(){if(hn)return pe;hn=1,Object.defineProperty(pe,"__esModule",{value:!0}),pe.getSchemaRefs=pe.resolveUrl=pe.normalizeId=pe._getFullPath=pe.getFullPath=pe.inlineRef=void 0;const t=se(),e=Xi(),s=mo(),n=new Set(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum","const"]);function r(b,f=!0){return typeof b=="boolean"?!0:f===!0?!o(b):f?u(b)<=f:!1}pe.inlineRef=r;const i=new Set(["$ref","$recursiveRef","$recursiveAnchor","$dynamicRef","$dynamicAnchor"]);function o(b){for(const f in b){if(i.has(f))return!0;const l=b[f];if(Array.isArray(l)&&l.some(o)||typeof l=="object"&&o(l))return!0}return!1}function u(b){let f=0;for(const l in b){if(l==="$ref")return 1/0;if(f++,!n.has(l)&&(typeof b[l]=="object"&&(0,t.eachItem)(b[l],a=>f+=u(a)),f===1/0))return 1/0}return f}function p(b,f="",l){l!==!1&&(f=$(f));const a=b.parse(f);return w(b,a)}pe.getFullPath=p;function w(b,f){return b.serialize(f).split("#")[0]+"#"}pe._getFullPath=w;const h=/#\/?$/;function $(b){return b?b.replace(h,""):""}pe.normalizeId=$;function v(b,f,l){return l=$(l),b.resolve(f,l)}pe.resolveUrl=v;const k=/^[a-z_][-a-z0-9._]*$/i;function _(b,f){if(typeof b=="boolean")return{};const{schemaId:l,uriResolver:a}=this.opts,c=$(b[l]||f),y={"":c},d=p(a,c,!1),m={},S=new Set;return s(b,{allKeys:!0},(j,q,F,G)=>{if(G===void 0)return;const Z=d+q;let ee=y[G];typeof j[l]=="string"&&(ee=re.call(this,j[l])),te.call(this,j.$anchor),te.call(this,j.$dynamicAnchor),y[q]=ee;function re(K){const oe=this.opts.uriResolver.resolve;if(K=$(ee?oe(ee,K):K),S.has(K))throw x(K);S.add(K);let A=this.refs[K];return typeof A=="string"&&(A=this.refs[A]),typeof A=="object"?I(j,A.schema,K):K!==$(Z)&&(K[0]==="#"?(I(j,m[K],K),m[K]=j):this.refs[K]=Z),K}function te(K){if(typeof K=="string"){if(!k.test(K))throw new Error(`invalid anchor "${K}"`);re.call(this,`#${K}`)}}}),m;function I(j,q,F){if(q!==void 0&&!e(j,q))throw x(F)}function x(j){return new Error(`reference "${j}" resolves to more than one schema`)}}return pe.getSchemaRefs=_,pe}var fn;function ns(){if(fn)return Ne;fn=1,Object.defineProperty(Ne,"__esModule",{value:!0}),Ne.getData=Ne.KeywordCxt=Ne.validateFunctionCode=void 0;const t=uo(),e=Yt(),s=Ji(),n=Yt(),r=ho(),i=fo(),o=po(),u=Y(),p=ze(),w=ss(),h=se(),$=ts();function v(E){if(d(E)&&(S(E),y(E))){f(E);return}k(E,()=>(0,t.topBoolOrEmptySchema)(E))}Ne.validateFunctionCode=v;function k({gen:E,validateName:N,schema:M,schemaEnv:L,opts:V},X){V.code.es5?E.func(N,(0,u._)`${p.default.data}, ${p.default.valCxt}`,L.$async,()=>{E.code((0,u._)`"use strict"; ${a(M,V)}`),b(E,V),E.code(X)}):E.func(N,(0,u._)`${p.default.data}, ${_(V)}`,L.$async,()=>E.code(a(M,V)).code(X))}function _(E){return(0,u._)`{${p.default.instancePath}="", ${p.default.parentData}, ${p.default.parentDataProperty}, ${p.default.rootData}=${p.default.data}${E.dynamicRef?(0,u._)`, ${p.default.dynamicAnchors}={}`:u.nil}}={}`}function b(E,N){E.if(p.default.valCxt,()=>{E.var(p.default.instancePath,(0,u._)`${p.default.valCxt}.${p.default.instancePath}`),E.var(p.default.parentData,(0,u._)`${p.default.valCxt}.${p.default.parentData}`),E.var(p.default.parentDataProperty,(0,u._)`${p.default.valCxt}.${p.default.parentDataProperty}`),E.var(p.default.rootData,(0,u._)`${p.default.valCxt}.${p.default.rootData}`),N.dynamicRef&&E.var(p.default.dynamicAnchors,(0,u._)`${p.default.valCxt}.${p.default.dynamicAnchors}`)},()=>{E.var(p.default.instancePath,(0,u._)`""`),E.var(p.default.parentData,(0,u._)`undefined`),E.var(p.default.parentDataProperty,(0,u._)`undefined`),E.var(p.default.rootData,p.default.data),N.dynamicRef&&E.var(p.default.dynamicAnchors,(0,u._)`{}`)})}function f(E){const{schema:N,opts:M,gen:L}=E;k(E,()=>{M.$comment&&N.$comment&&G(E),j(E),L.let(p.default.vErrors,null),L.let(p.default.errors,0),M.unevaluated&&l(E),I(E),Z(E)})}function l(E){const{gen:N,validateName:M}=E;E.evaluated=N.const("evaluated",(0,u._)`${M}.evaluated`),N.if((0,u._)`${E.evaluated}.dynamicProps`,()=>N.assign((0,u._)`${E.evaluated}.props`,(0,u._)`undefined`)),N.if((0,u._)`${E.evaluated}.dynamicItems`,()=>N.assign((0,u._)`${E.evaluated}.items`,(0,u._)`undefined`))}function a(E,N){const M=typeof E=="object"&&E[N.schemaId];return M&&(N.code.source||N.code.process)?(0,u._)`/*# sourceURL=${M} */`:u.nil}function c(E,N){if(d(E)&&(S(E),y(E))){m(E,N);return}(0,t.boolOrEmptySchema)(E,N)}function y({schema:E,self:N}){if(typeof E=="boolean")return!E;for(const M in E)if(N.RULES.all[M])return!0;return!1}function d(E){return typeof E.schema!="boolean"}function m(E,N){const{schema:M,gen:L,opts:V}=E;V.$comment&&M.$comment&&G(E),q(E),F(E);const X=L.const("_errs",p.default.errors);I(E,X),L.var(N,(0,u._)`${X} === ${p.default.errors}`)}function S(E){(0,h.checkUnknownRules)(E),x(E)}function I(E,N){if(E.opts.jtd)return re(E,[],!1,N);const M=(0,e.getSchemaTypes)(E.schema),L=(0,e.coerceAndCheckDataType)(E,M);re(E,M,!L,N)}function x(E){const{schema:N,errSchemaPath:M,opts:L,self:V}=E;N.$ref&&L.ignoreKeywordsWithRef&&(0,h.schemaHasRulesButRef)(N,V.RULES)&&V.logger.warn(`$ref: keywords ignored in schema at path "${M}"`)}function j(E){const{schema:N,opts:M}=E;N.default!==void 0&&M.useDefaults&&M.strictSchema&&(0,h.checkStrictMode)(E,"default is ignored in the schema root")}function q(E){const N=E.schema[E.opts.schemaId];N&&(E.baseId=(0,w.resolveUrl)(E.opts.uriResolver,E.baseId,N))}function F(E){if(E.schema.$async&&!E.schemaEnv.$async)throw new Error("async schema in sync schema")}function G({gen:E,schemaEnv:N,schema:M,errSchemaPath:L,opts:V}){const X=M.$comment;if(V.$comment===!0)E.code((0,u._)`${p.default.self}.logger.log(${X})`);else if(typeof V.$comment=="function"){const ce=(0,u.str)`${L}/$comment`,$e=E.scopeValue("root",{ref:N.root});E.code((0,u._)`${p.default.self}.opts.$comment(${X}, ${ce}, ${$e}.schema)`)}}function Z(E){const{gen:N,schemaEnv:M,validateName:L,ValidationError:V,opts:X}=E;M.$async?N.if((0,u._)`${p.default.errors} === 0`,()=>N.return(p.default.data),()=>N.throw((0,u._)`new ${V}(${p.default.vErrors})`)):(N.assign((0,u._)`${L}.errors`,p.default.vErrors),X.unevaluated&&ee(E),N.return((0,u._)`${p.default.errors} === 0`))}function ee({gen:E,evaluated:N,props:M,items:L}){M instanceof u.Name&&E.assign((0,u._)`${N}.props`,M),L instanceof u.Name&&E.assign((0,u._)`${N}.items`,L)}function re(E,N,M,L){const{gen:V,schema:X,data:ce,allErrors:$e,opts:ge,self:ve}=E,{RULES:de}=ve;if(X.$ref&&(ge.ignoreKeywordsWithRef||!(0,h.schemaHasRulesButRef)(X,de))){V.block(()=>H(E,"$ref",de.all.$ref.definition));return}ge.jtd||K(E,N),V.block(()=>{for(const be of de.rules)Ge(be);Ge(de.post)});function Ge(be){(0,s.shouldUseGroup)(X,be)&&(be.type?(V.if((0,n.checkDataType)(be.type,ce,ge.strictNumbers)),te(E,be),N.length===1&&N[0]===be.type&&M&&(V.else(),(0,n.reportTypeError)(E)),V.endIf()):te(E,be),$e||V.if((0,u._)`${p.default.errors} === ${L||0}`))}}function te(E,N){const{gen:M,schema:L,opts:{useDefaults:V}}=E;V&&(0,r.assignDefaults)(E,N.type),M.block(()=>{for(const X of N.rules)(0,s.shouldUseRule)(L,X)&&H(E,X.keyword,X.definition,N.type)})}function K(E,N){E.schemaEnv.meta||!E.opts.strictTypes||(oe(E,N),E.opts.allowUnionTypes||A(E,N),O(E,E.dataTypes))}function oe(E,N){if(N.length){if(!E.dataTypes.length){E.dataTypes=N;return}N.forEach(M=>{C(E.dataTypes,M)||P(E,`type "${M}" not allowed by context "${E.dataTypes.join(",")}"`)}),g(E,N)}}function A(E,N){N.length>1&&!(N.length===2&&N.includes("null"))&&P(E,"use allowUnionTypes to allow union type keyword")}function O(E,N){const M=E.self.RULES.all;for(const L in M){const V=M[L];if(typeof V=="object"&&(0,s.shouldUseRule)(E.schema,V)){const{type:X}=V.definition;X.length&&!X.some(ce=>D(N,ce))&&P(E,`missing type "${X.join(",")}" for keyword "${L}"`)}}}function D(E,N){return E.includes(N)||N==="number"&&E.includes("integer")}function C(E,N){return E.includes(N)||N==="integer"&&E.includes("number")}function g(E,N){const M=[];for(const L of E.dataTypes)C(N,L)?M.push(L):N.includes("integer")&&L==="number"&&M.push("integer");E.dataTypes=M}function P(E,N){const M=E.schemaEnv.baseId+E.errSchemaPath;N+=` at "${M}" (strictTypes)`,(0,h.checkStrictMode)(E,N,E.opts.strictTypes)}class R{constructor(N,M,L){if((0,i.validateKeywordUsage)(N,M,L),this.gen=N.gen,this.allErrors=N.allErrors,this.keyword=L,this.data=N.data,this.schema=N.schema[L],this.$data=M.$data&&N.opts.$data&&this.schema&&this.schema.$data,this.schemaValue=(0,h.schemaRefOrVal)(N,this.schema,L,this.$data),this.schemaType=M.schemaType,this.parentSchema=N.schema,this.params={},this.it=N,this.def=M,this.$data)this.schemaCode=N.gen.const("vSchema",W(this.$data,N));else if(this.schemaCode=this.schemaValue,!(0,i.validSchemaType)(this.schema,M.schemaType,M.allowUndefined))throw new Error(`${L} value must be ${JSON.stringify(M.schemaType)}`);("code"in M?M.trackErrors:M.errors!==!1)&&(this.errsCount=N.gen.const("_errs",p.default.errors))}result(N,M,L){this.failResult((0,u.not)(N),M,L)}failResult(N,M,L){this.gen.if(N),L?L():this.error(),M?(this.gen.else(),M(),this.allErrors&&this.gen.endIf()):this.allErrors?this.gen.endIf():this.gen.else()}pass(N,M){this.failResult((0,u.not)(N),void 0,M)}fail(N){if(N===void 0){this.error(),this.allErrors||this.gen.if(!1);return}this.gen.if(N),this.error(),this.allErrors?this.gen.endIf():this.gen.else()}fail$data(N){if(!this.$data)return this.fail(N);const{schemaCode:M}=this;this.fail((0,u._)`${M} !== undefined && (${(0,u.or)(this.invalid$data(),N)})`)}error(N,M,L){if(M){this.setParams(M),this._error(N,L),this.setParams({});return}this._error(N,L)}_error(N,M){(N?$.reportExtraError:$.reportError)(this,this.def.error,M)}$dataError(){(0,$.reportError)(this,this.def.$dataError||$.keyword$DataError)}reset(){if(this.errsCount===void 0)throw new Error('add "trackErrors" to keyword definition');(0,$.resetErrorsCount)(this.gen,this.errsCount)}ok(N){this.allErrors||this.gen.if(N)}setParams(N,M){M?Object.assign(this.params,N):this.params=N}block$data(N,M,L=u.nil){this.gen.block(()=>{this.check$data(N,L),M()})}check$data(N=u.nil,M=u.nil){if(!this.$data)return;const{gen:L,schemaCode:V,schemaType:X,def:ce}=this;L.if((0,u.or)((0,u._)`${V} === undefined`,M)),N!==u.nil&&L.assign(N,!0),(X.length||ce.validateSchema)&&(L.elseIf(this.invalid$data()),this.$dataError(),N!==u.nil&&L.assign(N,!1)),L.else()}invalid$data(){const{gen:N,schemaCode:M,schemaType:L,def:V,it:X}=this;return(0,u.or)(ce(),$e());function ce(){if(L.length){if(!(M instanceof u.Name))throw new Error("ajv implementation error");const ge=Array.isArray(L)?L:[L];return(0,u._)`${(0,n.checkDataTypes)(ge,M,X.opts.strictNumbers,n.DataType.Wrong)}`}return u.nil}function $e(){if(V.validateSchema){const ge=N.scopeValue("validate$data",{ref:V.validateSchema});return(0,u._)`!${ge}(${M})`}return u.nil}}subschema(N,M){const L=(0,o.getSubschema)(this.it,N);(0,o.extendSubschemaData)(L,this.it,N),(0,o.extendSubschemaMode)(L,N);const V={...this.it,...L,items:void 0,props:void 0};return c(V,M),V}mergeEvaluated(N,M){const{it:L,gen:V}=this;L.opts.unevaluated&&(L.props!==!0&&N.props!==void 0&&(L.props=h.mergeEvaluated.props(V,N.props,L.props,M)),L.items!==!0&&N.items!==void 0&&(L.items=h.mergeEvaluated.items(V,N.items,L.items,M)))}mergeValidEvaluated(N,M){const{it:L,gen:V}=this;if(L.opts.unevaluated&&(L.props!==!0||L.items!==!0))return V.if(M,()=>this.mergeEvaluated(N,u.Name)),!0}}Ne.KeywordCxt=R;function H(E,N,M,L){const V=new R(E,M,N);"code"in M?M.code(V,L):V.$data&&M.validate?(0,i.funcKeywordCode)(V,M):"macro"in M?(0,i.macroKeywordCode)(V,M):(M.compile||M.validate)&&(0,i.funcKeywordCode)(V,M)}const B=/^\/(?:[^~]|~0|~1)*$/,Q=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function W(E,{dataLevel:N,dataNames:M,dataPathArr:L}){let V,X;if(E==="")return p.default.rootData;if(E[0]==="/"){if(!B.test(E))throw new Error(`Invalid JSON-pointer: ${E}`);V=E,X=p.default.rootData}else{const ve=Q.exec(E);if(!ve)throw new Error(`Invalid JSON-pointer: ${E}`);const de=+ve[1];if(V=ve[2],V==="#"){if(de>=N)throw new Error(ge("property/index",de));return L[N-de]}if(de>N)throw new Error(ge("data",de));if(X=M[N-de],!V)return X}let ce=X;const $e=V.split("/");for(const ve of $e)ve&&(X=(0,u._)`${X}${(0,u.getProperty)((0,h.unescapeJsonPointer)(ve))}`,ce=(0,u._)`${ce} && ${X}`);return ce;function ge(ve,de){return`Cannot access ${ve} ${de} levels up, current level is ${N}`}}return Ne.getData=W,Ne}var pt={},pn;function Ms(){if(pn)return pt;pn=1,Object.defineProperty(pt,"__esModule",{value:!0});class t extends Error{constructor(s){super("validation failed"),this.errors=s,this.ajv=this.validation=!0}}return pt.default=t,pt}var mt={},mn;function is(){if(mn)return mt;mn=1,Object.defineProperty(mt,"__esModule",{value:!0});const t=ss();class e extends Error{constructor(n,r,i,o){super(o||`can't resolve reference ${i} from id ${r}`),this.missingRef=(0,t.resolveUrl)(n,r,i),this.missingSchema=(0,t.normalizeId)((0,t.getFullPath)(n,this.missingRef))}}return mt.default=e,mt}var we={},yn;function Ds(){if(yn)return we;yn=1,Object.defineProperty(we,"__esModule",{value:!0}),we.resolveSchema=we.getCompilingSchema=we.resolveRef=we.compileSchema=we.SchemaEnv=void 0;const t=Y(),e=Ms(),s=ze(),n=ss(),r=se(),i=ns();class o{constructor(l){var a;this.refs={},this.dynamicAnchors={};let c;typeof l.schema=="object"&&(c=l.schema),this.schema=l.schema,this.schemaId=l.schemaId,this.root=l.root||this,this.baseId=(a=l.baseId)!==null&&a!==void 0?a:(0,n.normalizeId)(c?.[l.schemaId||"$id"]),this.schemaPath=l.schemaPath,this.localRefs=l.localRefs,this.meta=l.meta,this.$async=c?.$async,this.refs={}}}we.SchemaEnv=o;function u(f){const l=h.call(this,f);if(l)return l;const a=(0,n.getFullPath)(this.opts.uriResolver,f.root.baseId),{es5:c,lines:y}=this.opts.code,{ownProperties:d}=this.opts,m=new t.CodeGen(this.scope,{es5:c,lines:y,ownProperties:d});let S;f.$async&&(S=m.scopeValue("Error",{ref:e.default,code:(0,t._)`require("ajv/dist/runtime/validation_error").default`}));const I=m.scopeName("validate");f.validateName=I;const x={gen:m,allErrors:this.opts.allErrors,data:s.default.data,parentData:s.default.parentData,parentDataProperty:s.default.parentDataProperty,dataNames:[s.default.data],dataPathArr:[t.nil],dataLevel:0,dataTypes:[],definedProperties:new Set,topSchemaRef:m.scopeValue("schema",this.opts.code.source===!0?{ref:f.schema,code:(0,t.stringify)(f.schema)}:{ref:f.schema}),validateName:I,ValidationError:S,schema:f.schema,schemaEnv:f,rootId:a,baseId:f.baseId||a,schemaPath:t.nil,errSchemaPath:f.schemaPath||(this.opts.jtd?"":"#"),errorPath:(0,t._)`""`,opts:this.opts,self:this};let j;try{this._compilations.add(f),(0,i.validateFunctionCode)(x),m.optimize(this.opts.code.optimize);const q=m.toString();j=`${m.scopeRefs(s.default.scope)}return ${q}`,this.opts.code.process&&(j=this.opts.code.process(j,f));const G=new Function(`${s.default.self}`,`${s.default.scope}`,j)(this,this.scope.get());if(this.scope.value(I,{ref:G}),G.errors=null,G.schema=f.schema,G.schemaEnv=f,f.$async&&(G.$async=!0),this.opts.code.source===!0&&(G.source={validateName:I,validateCode:q,scopeValues:m._values}),this.opts.unevaluated){const{props:Z,items:ee}=x;G.evaluated={props:Z instanceof t.Name?void 0:Z,items:ee instanceof t.Name?void 0:ee,dynamicProps:Z instanceof t.Name,dynamicItems:ee instanceof t.Name},G.source&&(G.source.evaluated=(0,t.stringify)(G.evaluated))}return f.validate=G,f}catch(q){throw delete f.validate,delete f.validateName,j&&this.logger.error("Error compiling schema, function code:",j),q}finally{this._compilations.delete(f)}}we.compileSchema=u;function p(f,l,a){var c;a=(0,n.resolveUrl)(this.opts.uriResolver,l,a);const y=f.refs[a];if(y)return y;let d=v.call(this,f,a);if(d===void 0){const m=(c=f.localRefs)===null||c===void 0?void 0:c[a],{schemaId:S}=this.opts;m&&(d=new o({schema:m,schemaId:S,root:f,baseId:l}))}if(d!==void 0)return f.refs[a]=w.call(this,d)}we.resolveRef=p;function w(f){return(0,n.inlineRef)(f.schema,this.opts.inlineRefs)?f.schema:f.validate?f:u.call(this,f)}function h(f){for(const l of this._compilations)if($(l,f))return l}we.getCompilingSchema=h;function $(f,l){return f.schema===l.schema&&f.root===l.root&&f.baseId===l.baseId}function v(f,l){let a;for(;typeof(a=this.refs[l])=="string";)l=a;return a||this.schemas[l]||k.call(this,f,l)}function k(f,l){const a=this.opts.uriResolver.parse(l),c=(0,n._getFullPath)(this.opts.uriResolver,a);let y=(0,n.getFullPath)(this.opts.uriResolver,f.baseId,void 0);if(Object.keys(f.schema).length>0&&c===y)return b.call(this,a,f);const d=(0,n.normalizeId)(c),m=this.refs[d]||this.schemas[d];if(typeof m=="string"){const S=k.call(this,f,m);return typeof S?.schema!="object"?void 0:b.call(this,a,S)}if(typeof m?.schema=="object"){if(m.validate||u.call(this,m),d===(0,n.normalizeId)(l)){const{schema:S}=m,{schemaId:I}=this.opts,x=S[I];return x&&(y=(0,n.resolveUrl)(this.opts.uriResolver,y,x)),new o({schema:S,schemaId:I,root:f,baseId:y})}return b.call(this,a,m)}}we.resolveSchema=k;const _=new Set(["properties","patternProperties","enum","dependencies","definitions"]);function b(f,{baseId:l,schema:a,root:c}){var y;if(((y=f.fragment)===null||y===void 0?void 0:y[0])!=="/")return;for(const S of f.fragment.slice(1).split("/")){if(typeof a=="boolean")return;const I=a[(0,r.unescapeFragment)(S)];if(I===void 0)return;a=I;const x=typeof a=="object"&&a[this.opts.schemaId];!_.has(S)&&x&&(l=(0,n.resolveUrl)(this.opts.uriResolver,l,x))}let d;if(typeof a!="boolean"&&a.$ref&&!(0,r.schemaHasRulesButRef)(a,this.RULES)){const S=(0,n.resolveUrl)(this.opts.uriResolver,l,a.$ref);d=k.call(this,c,S)}const{schemaId:m}=this.opts;if(d=d||new o({schema:a,schemaId:m,root:c,baseId:l}),d.schema!==d.root.schema)return d}return we}const yo="https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#",go="Meta-schema for $data reference (JSON AnySchema extension proposal)",vo="object",wo=["$data"],_o={$data:{type:"string",anyOf:[{format:"relative-json-pointer"},{format:"json-pointer"}]}},ko=!1,bo={$id:yo,description:go,type:vo,required:wo,properties:_o,additionalProperties:ko};var yt={},nt={exports:{}},_s,gn;function Yi(){if(gn)return _s;gn=1;const t=RegExp.prototype.test.bind(/^[\da-f]{8}-[\da-f]{4}-[\da-f]{4}-[\da-f]{4}-[\da-f]{12}$/iu),e=RegExp.prototype.test.bind(/^(?:(?:25[0-5]|2[0-4]\d|1\d{2}|[1-9]\d|\d)\.){3}(?:25[0-5]|2[0-4]\d|1\d{2}|[1-9]\d|\d)$/u);function s(v){let k="",_=0,b=0;for(b=0;b<v.length;b++)if(_=v[b].charCodeAt(0),_!==48){if(!(_>=48&&_<=57||_>=65&&_<=70||_>=97&&_<=102))return"";k+=v[b];break}for(b+=1;b<v.length;b++){if(_=v[b].charCodeAt(0),!(_>=48&&_<=57||_>=65&&_<=70||_>=97&&_<=102))return"";k+=v[b]}return k}const n=RegExp.prototype.test.bind(/[^!"$&'()*+,\-.;=_`a-z{}~]/u);function r(v){return v.length=0,!0}function i(v,k,_){if(v.length){const b=s(v);if(b!=="")k.push(b);else return _.error=!0,!1;v.length=0}return!0}function o(v){let k=0;const _={error:!1,address:"",zone:""},b=[],f=[];let l=!1,a=!1,c=i;for(let y=0;y<v.length;y++){const d=v[y];if(!(d==="["||d==="]"))if(d===":"){if(l===!0&&(a=!0),!c(f,b,_))break;if(++k>7){_.error=!0;break}y>0&&v[y-1]===":"&&(l=!0),b.push(":");continue}else if(d==="%"){if(!c(f,b,_))break;c=r}else{f.push(d);continue}}return f.length&&(c===r?_.zone=f.join(""):a?b.push(f.join("")):b.push(s(f))),_.address=b.join(""),_}function u(v){if(p(v,":")<2)return{host:v,isIPV6:!1};const k=o(v);if(k.error)return{host:v,isIPV6:!1};{let _=k.address,b=k.address;return k.zone&&(_+="%"+k.zone,b+="%25"+k.zone),{host:_,isIPV6:!0,escapedHost:b}}}function p(v,k){let _=0;for(let b=0;b<v.length;b++)v[b]===k&&_++;return _}function w(v){let k=v;const _=[];let b=-1,f=0;for(;f=k.length;){if(f===1){if(k===".")break;if(k==="/"){_.push("/");break}else{_.push(k);break}}else if(f===2){if(k[0]==="."){if(k[1]===".")break;if(k[1]==="/"){k=k.slice(2);continue}}else if(k[0]==="/"&&(k[1]==="."||k[1]==="/")){_.push("/");break}}else if(f===3&&k==="/.."){_.length!==0&&_.pop(),_.push("/");break}if(k[0]==="."){if(k[1]==="."){if(k[2]==="/"){k=k.slice(3);continue}}else if(k[1]==="/"){k=k.slice(2);continue}}else if(k[0]==="/"&&k[1]==="."){if(k[2]==="/"){k=k.slice(2);continue}else if(k[2]==="."&&k[3]==="/"){k=k.slice(3),_.length!==0&&_.pop();continue}}if((b=k.indexOf("/",1))===-1){_.push(k);break}else _.push(k.slice(0,b)),k=k.slice(b)}return _.join("")}function h(v,k){const _=k!==!0?escape:unescape;return v.scheme!==void 0&&(v.scheme=_(v.scheme)),v.userinfo!==void 0&&(v.userinfo=_(v.userinfo)),v.host!==void 0&&(v.host=_(v.host)),v.path!==void 0&&(v.path=_(v.path)),v.query!==void 0&&(v.query=_(v.query)),v.fragment!==void 0&&(v.fragment=_(v.fragment)),v}function $(v){const k=[];if(v.userinfo!==void 0&&(k.push(v.userinfo),k.push("@")),v.host!==void 0){let _=unescape(v.host);if(!e(_)){const b=u(_);b.isIPV6===!0?_=`[${b.escapedHost}]`:_=v.host}k.push(_)}return(typeof v.port=="number"||typeof v.port=="string")&&(k.push(":"),k.push(String(v.port))),k.length?k.join(""):void 0}return _s={nonSimpleDomain:n,recomposeAuthority:$,normalizeComponentEncoding:h,removeDotSegments:w,isIPv4:e,isUUID:t,normalizeIPv6:u,stringArrayToHexStripped:s},_s}var ks,vn;function $o(){if(vn)return ks;vn=1;const{isUUID:t}=Yi(),e=/([\da-z][\d\-a-z]{0,31}):((?:[\w!$'()*+,\-.:;=@]|%[\da-f]{2})+)/iu,s=["http","https","ws","wss","urn","urn:uuid"];function n(d){return s.indexOf(d)!==-1}function r(d){return d.secure===!0?!0:d.secure===!1?!1:d.scheme?d.scheme.length===3&&(d.scheme[0]==="w"||d.scheme[0]==="W")&&(d.scheme[1]==="s"||d.scheme[1]==="S")&&(d.scheme[2]==="s"||d.scheme[2]==="S"):!1}function i(d){return d.host||(d.error=d.error||"HTTP URIs must have a host."),d}function o(d){const m=String(d.scheme).toLowerCase()==="https";return(d.port===(m?443:80)||d.port==="")&&(d.port=void 0),d.path||(d.path="/"),d}function u(d){return d.secure=r(d),d.resourceName=(d.path||"/")+(d.query?"?"+d.query:""),d.path=void 0,d.query=void 0,d}function p(d){if((d.port===(r(d)?443:80)||d.port==="")&&(d.port=void 0),typeof d.secure=="boolean"&&(d.scheme=d.secure?"wss":"ws",d.secure=void 0),d.resourceName){const[m,S]=d.resourceName.split("?");d.path=m&&m!=="/"?m:void 0,d.query=S,d.resourceName=void 0}return d.fragment=void 0,d}function w(d,m){if(!d.path)return d.error="URN can not be parsed",d;const S=d.path.match(e);if(S){const I=m.scheme||d.scheme||"urn";d.nid=S[1].toLowerCase(),d.nss=S[2];const x=`${I}:${m.nid||d.nid}`,j=y(x);d.path=void 0,j&&(d=j.parse(d,m))}else d.error=d.error||"URN can not be parsed.";return d}function h(d,m){if(d.nid===void 0)throw new Error("URN without nid cannot be serialized");const S=m.scheme||d.scheme||"urn",I=d.nid.toLowerCase(),x=`${S}:${m.nid||I}`,j=y(x);j&&(d=j.serialize(d,m));const q=d,F=d.nss;return q.path=`${I||m.nid}:${F}`,m.skipEscape=!0,q}function $(d,m){const S=d;return S.uuid=S.nss,S.nss=void 0,!m.tolerant&&(!S.uuid||!t(S.uuid))&&(S.error=S.error||"UUID is not valid."),S}function v(d){const m=d;return m.nss=(d.uuid||"").toLowerCase(),m}const k={scheme:"http",domainHost:!0,parse:i,serialize:o},_={scheme:"https",domainHost:k.domainHost,parse:i,serialize:o},b={scheme:"ws",domainHost:!0,parse:u,serialize:p},f={scheme:"wss",domainHost:b.domainHost,parse:b.parse,serialize:b.serialize},c={http:k,https:_,ws:b,wss:f,urn:{scheme:"urn",parse:w,serialize:h,skipNormalize:!0},"urn:uuid":{scheme:"urn:uuid",parse:$,serialize:v,skipNormalize:!0}};Object.setPrototypeOf(c,null);function y(d){return d&&(c[d]||c[d.toLowerCase()])||void 0}return ks={wsIsSecure:r,SCHEMES:c,isValidSchemeName:n,getSchemeHandler:y},ks}var wn;function So(){if(wn)return nt.exports;wn=1;const{normalizeIPv6:t,removeDotSegments:e,recomposeAuthority:s,normalizeComponentEncoding:n,isIPv4:r,nonSimpleDomain:i}=Yi(),{SCHEMES:o,getSchemeHandler:u}=$o();function p(f,l){return typeof f=="string"?f=v(_(f,l),l):typeof f=="object"&&(f=_(v(f,l),l)),f}function w(f,l,a){const c=a?Object.assign({scheme:"null"},a):{scheme:"null"},y=h(_(f,c),_(l,c),c,!0);return c.skipEscape=!0,v(y,c)}function h(f,l,a,c){const y={};return c||(f=_(v(f,a),a),l=_(v(l,a),a)),a=a||{},!a.tolerant&&l.scheme?(y.scheme=l.scheme,y.userinfo=l.userinfo,y.host=l.host,y.port=l.port,y.path=e(l.path||""),y.query=l.query):(l.userinfo!==void 0||l.host!==void 0||l.port!==void 0?(y.userinfo=l.userinfo,y.host=l.host,y.port=l.port,y.path=e(l.path||""),y.query=l.query):(l.path?(l.path[0]==="/"?y.path=e(l.path):((f.userinfo!==void 0||f.host!==void 0||f.port!==void 0)&&!f.path?y.path="/"+l.path:f.path?y.path=f.path.slice(0,f.path.lastIndexOf("/")+1)+l.path:y.path=l.path,y.path=e(y.path)),y.query=l.query):(y.path=f.path,l.query!==void 0?y.query=l.query:y.query=f.query),y.userinfo=f.userinfo,y.host=f.host,y.port=f.port),y.scheme=f.scheme),y.fragment=l.fragment,y}function $(f,l,a){return typeof f=="string"?(f=unescape(f),f=v(n(_(f,a),!0),{...a,skipEscape:!0})):typeof f=="object"&&(f=v(n(f,!0),{...a,skipEscape:!0})),typeof l=="string"?(l=unescape(l),l=v(n(_(l,a),!0),{...a,skipEscape:!0})):typeof l=="object"&&(l=v(n(l,!0),{...a,skipEscape:!0})),f.toLowerCase()===l.toLowerCase()}function v(f,l){const a={host:f.host,scheme:f.scheme,userinfo:f.userinfo,port:f.port,path:f.path,query:f.query,nid:f.nid,nss:f.nss,uuid:f.uuid,fragment:f.fragment,reference:f.reference,resourceName:f.resourceName,secure:f.secure,error:""},c=Object.assign({},l),y=[],d=u(c.scheme||a.scheme);d&&d.serialize&&d.serialize(a,c),a.path!==void 0&&(c.skipEscape?a.path=unescape(a.path):(a.path=escape(a.path),a.scheme!==void 0&&(a.path=a.path.split("%3A").join(":")))),c.reference!=="suffix"&&a.scheme&&y.push(a.scheme,":");const m=s(a);if(m!==void 0&&(c.reference!=="suffix"&&y.push("//"),y.push(m),a.path&&a.path[0]!=="/"&&y.push("/")),a.path!==void 0){let S=a.path;!c.absolutePath&&(!d||!d.absolutePath)&&(S=e(S)),m===void 0&&S[0]==="/"&&S[1]==="/"&&(S="/%2F"+S.slice(2)),y.push(S)}return a.query!==void 0&&y.push("?",a.query),a.fragment!==void 0&&y.push("#",a.fragment),y.join("")}const k=/^(?:([^#/:?]+):)?(?:\/\/((?:([^#/?@]*)@)?(\[[^#/?\]]+\]|[^#/:?]*)(?::(\d*))?))?([^#?]*)(?:\?([^#]*))?(?:#((?:.|[\n\r])*))?/u;function _(f,l){const a=Object.assign({},l),c={scheme:void 0,userinfo:void 0,host:"",port:void 0,path:"",query:void 0,fragment:void 0};let y=!1;a.reference==="suffix"&&(a.scheme?f=a.scheme+":"+f:f="//"+f);const d=f.match(k);if(d){if(c.scheme=d[1],c.userinfo=d[3],c.host=d[4],c.port=parseInt(d[5],10),c.path=d[6]||"",c.query=d[7],c.fragment=d[8],isNaN(c.port)&&(c.port=d[5]),c.host)if(r(c.host)===!1){const I=t(c.host);c.host=I.host.toLowerCase(),y=I.isIPV6}else y=!0;c.scheme===void 0&&c.userinfo===void 0&&c.host===void 0&&c.port===void 0&&c.query===void 0&&!c.path?c.reference="same-document":c.scheme===void 0?c.reference="relative":c.fragment===void 0?c.reference="absolute":c.reference="uri",a.reference&&a.reference!=="suffix"&&a.reference!==c.reference&&(c.error=c.error||"URI is not a "+a.reference+" reference.");const m=u(a.scheme||c.scheme);if(!a.unicodeSupport&&(!m||!m.unicodeSupport)&&c.host&&(a.domainHost||m&&m.domainHost)&&y===!1&&i(c.host))try{c.host=URL.domainToASCII(c.host.toLowerCase())}catch(S){c.error=c.error||"Host's domain name can not be converted to ASCII: "+S}(!m||m&&!m.skipNormalize)&&(f.indexOf("%")!==-1&&(c.scheme!==void 0&&(c.scheme=unescape(c.scheme)),c.host!==void 0&&(c.host=unescape(c.host))),c.path&&(c.path=escape(unescape(c.path))),c.fragment&&(c.fragment=encodeURI(decodeURIComponent(c.fragment)))),m&&m.parse&&m.parse(c,a)}else c.error=c.error||"URI can not be parsed.";return c}const b={SCHEMES:o,normalize:p,resolve:w,resolveComponent:h,equal:$,serialize:v,parse:_};return nt.exports=b,nt.exports.default=b,nt.exports.fastUri=b,nt.exports}var _n;function Po(){if(_n)return yt;_n=1,Object.defineProperty(yt,"__esModule",{value:!0});const t=So();return t.code='require("ajv/dist/runtime/uri").default',yt.default=t,yt}var kn;function Eo(){return kn||(kn=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.CodeGen=t.Name=t.nil=t.stringify=t.str=t._=t.KeywordCxt=void 0;var e=ns();Object.defineProperty(t,"KeywordCxt",{enumerable:!0,get:function(){return e.KeywordCxt}});var s=Y();Object.defineProperty(t,"_",{enumerable:!0,get:function(){return s._}}),Object.defineProperty(t,"str",{enumerable:!0,get:function(){return s.str}}),Object.defineProperty(t,"stringify",{enumerable:!0,get:function(){return s.stringify}}),Object.defineProperty(t,"nil",{enumerable:!0,get:function(){return s.nil}}),Object.defineProperty(t,"Name",{enumerable:!0,get:function(){return s.Name}}),Object.defineProperty(t,"CodeGen",{enumerable:!0,get:function(){return s.CodeGen}});const n=Ms(),r=is(),i=Wi(),o=Ds(),u=Y(),p=ss(),w=Yt(),h=se(),$=bo,v=Po(),k=(A,O)=>new RegExp(A,O);k.code="new RegExp";const _=["removeAdditional","useDefaults","coerceTypes"],b=new Set(["validate","serialize","parse","wrapper","root","schema","keyword","pattern","formats","validate$data","func","obj","Error"]),f={errorDataPath:"",format:"`validateFormats: false` can be used instead.",nullable:'"nullable" keyword is supported by default.',jsonPointers:"Deprecated jsPropertySyntax can be used instead.",extendRefs:"Deprecated ignoreKeywordsWithRef can be used instead.",missingRefs:"Pass empty schema with $id that should be ignored to ajv.addSchema.",processCode:"Use option `code: {process: (code, schemaEnv: object) => string}`",sourceCode:"Use option `code: {source: true}`",strictDefaults:"It is default now, see option `strict`.",strictKeywords:"It is default now, see option `strict`.",uniqueItems:'"uniqueItems" keyword is always validated.',unknownFormats:"Disable strict mode or pass `true` to `ajv.addFormat` (or `formats` option).",cache:"Map is used as cache, schema object as key.",serialize:"Map is used as cache, schema object as key.",ajvErrors:"It is default now."},l={ignoreKeywordsWithRef:"",jsPropertySyntax:"",unicode:'"minLength"/"maxLength" account for unicode characters by default.'},a=200;function c(A){var O,D,C,g,P,R,H,B,Q,W,E,N,M,L,V,X,ce,$e,ge,ve,de,Ge,be,rs,os;const Ye=A.strict,as=(O=A.code)===null||O===void 0?void 0:O.optimize,As=as===!0||as===void 0?1:as||0,qs=(C=(D=A.code)===null||D===void 0?void 0:D.regExp)!==null&&C!==void 0?C:k,nr=(g=A.uriResolver)!==null&&g!==void 0?g:v.default;return{strictSchema:(R=(P=A.strictSchema)!==null&&P!==void 0?P:Ye)!==null&&R!==void 0?R:!0,strictNumbers:(B=(H=A.strictNumbers)!==null&&H!==void 0?H:Ye)!==null&&B!==void 0?B:!0,strictTypes:(W=(Q=A.strictTypes)!==null&&Q!==void 0?Q:Ye)!==null&&W!==void 0?W:"log",strictTuples:(N=(E=A.strictTuples)!==null&&E!==void 0?E:Ye)!==null&&N!==void 0?N:"log",strictRequired:(L=(M=A.strictRequired)!==null&&M!==void 0?M:Ye)!==null&&L!==void 0?L:!1,code:A.code?{...A.code,optimize:As,regExp:qs}:{optimize:As,regExp:qs},loopRequired:(V=A.loopRequired)!==null&&V!==void 0?V:a,loopEnum:(X=A.loopEnum)!==null&&X!==void 0?X:a,meta:(ce=A.meta)!==null&&ce!==void 0?ce:!0,messages:($e=A.messages)!==null&&$e!==void 0?$e:!0,inlineRefs:(ge=A.inlineRefs)!==null&&ge!==void 0?ge:!0,schemaId:(ve=A.schemaId)!==null&&ve!==void 0?ve:"$id",addUsedSchema:(de=A.addUsedSchema)!==null&&de!==void 0?de:!0,validateSchema:(Ge=A.validateSchema)!==null&&Ge!==void 0?Ge:!0,validateFormats:(be=A.validateFormats)!==null&&be!==void 0?be:!0,unicodeRegExp:(rs=A.unicodeRegExp)!==null&&rs!==void 0?rs:!0,int32range:(os=A.int32range)!==null&&os!==void 0?os:!0,uriResolver:nr}}class y{constructor(O={}){this.schemas={},this.refs={},this.formats={},this._compilations=new Set,this._loading={},this._cache=new Map,O=this.opts={...O,...c(O)};const{es5:D,lines:C}=this.opts.code;this.scope=new u.ValueScope({scope:{},prefixes:b,es5:D,lines:C}),this.logger=F(O.logger);const g=O.validateFormats;O.validateFormats=!1,this.RULES=(0,i.getRules)(),d.call(this,f,O,"NOT SUPPORTED"),d.call(this,l,O,"DEPRECATED","warn"),this._metaOpts=j.call(this),O.formats&&I.call(this),this._addVocabularies(),this._addDefaultMetaSchema(),O.keywords&&x.call(this,O.keywords),typeof O.meta=="object"&&this.addMetaSchema(O.meta),S.call(this),O.validateFormats=g}_addVocabularies(){this.addKeyword("$async")}_addDefaultMetaSchema(){const{$data:O,meta:D,schemaId:C}=this.opts;let g=$;C==="id"&&(g={...$},g.id=g.$id,delete g.$id),D&&O&&this.addMetaSchema(g,g[C],!1)}defaultMeta(){const{meta:O,schemaId:D}=this.opts;return this.opts.defaultMeta=typeof O=="object"?O[D]||O:void 0}validate(O,D){let C;if(typeof O=="string"){if(C=this.getSchema(O),!C)throw new Error(`no schema with key or ref "${O}"`)}else C=this.compile(O);const g=C(D);return"$async"in C||(this.errors=C.errors),g}compile(O,D){const C=this._addSchema(O,D);return C.validate||this._compileSchemaEnv(C)}compileAsync(O,D){if(typeof this.opts.loadSchema!="function")throw new Error("options.loadSchema should be a function");const{loadSchema:C}=this.opts;return g.call(this,O,D);async function g(W,E){await P.call(this,W.$schema);const N=this._addSchema(W,E);return N.validate||R.call(this,N)}async function P(W){W&&!this.getSchema(W)&&await g.call(this,{$ref:W},!0)}async function R(W){try{return this._compileSchemaEnv(W)}catch(E){if(!(E instanceof r.default))throw E;return H.call(this,E),await B.call(this,E.missingSchema),R.call(this,W)}}function H({missingSchema:W,missingRef:E}){if(this.refs[W])throw new Error(`AnySchema ${W} is loaded but ${E} cannot be resolved`)}async function B(W){const E=await Q.call(this,W);this.refs[W]||await P.call(this,E.$schema),this.refs[W]||this.addSchema(E,W,D)}async function Q(W){const E=this._loading[W];if(E)return E;try{return await(this._loading[W]=C(W))}finally{delete this._loading[W]}}}addSchema(O,D,C,g=this.opts.validateSchema){if(Array.isArray(O)){for(const R of O)this.addSchema(R,void 0,C,g);return this}let P;if(typeof O=="object"){const{schemaId:R}=this.opts;if(P=O[R],P!==void 0&&typeof P!="string")throw new Error(`schema ${R} must be string`)}return D=(0,p.normalizeId)(D||P),this._checkUnique(D),this.schemas[D]=this._addSchema(O,C,D,g,!0),this}addMetaSchema(O,D,C=this.opts.validateSchema){return this.addSchema(O,D,!0,C),this}validateSchema(O,D){if(typeof O=="boolean")return!0;let C;if(C=O.$schema,C!==void 0&&typeof C!="string")throw new Error("$schema must be a string");if(C=C||this.opts.defaultMeta||this.defaultMeta(),!C)return this.logger.warn("meta-schema not available"),this.errors=null,!0;const g=this.validate(C,O);if(!g&&D){const P="schema is invalid: "+this.errorsText();if(this.opts.validateSchema==="log")this.logger.error(P);else throw new Error(P)}return g}getSchema(O){let D;for(;typeof(D=m.call(this,O))=="string";)O=D;if(D===void 0){const{schemaId:C}=this.opts,g=new o.SchemaEnv({schema:{},schemaId:C});if(D=o.resolveSchema.call(this,g,O),!D)return;this.refs[O]=D}return D.validate||this._compileSchemaEnv(D)}removeSchema(O){if(O instanceof RegExp)return this._removeAllSchemas(this.schemas,O),this._removeAllSchemas(this.refs,O),this;switch(typeof O){case"undefined":return this._removeAllSchemas(this.schemas),this._removeAllSchemas(this.refs),this._cache.clear(),this;case"string":{const D=m.call(this,O);return typeof D=="object"&&this._cache.delete(D.schema),delete this.schemas[O],delete this.refs[O],this}case"object":{const D=O;this._cache.delete(D);let C=O[this.opts.schemaId];return C&&(C=(0,p.normalizeId)(C),delete this.schemas[C],delete this.refs[C]),this}default:throw new Error("ajv.removeSchema: invalid parameter")}}addVocabulary(O){for(const D of O)this.addKeyword(D);return this}addKeyword(O,D){let C;if(typeof O=="string")C=O,typeof D=="object"&&(this.logger.warn("these parameters are deprecated, see docs for addKeyword"),D.keyword=C);else if(typeof O=="object"&&D===void 0){if(D=O,C=D.keyword,Array.isArray(C)&&!C.length)throw new Error("addKeywords: keyword must be string or non-empty array")}else throw new Error("invalid addKeywords parameters");if(Z.call(this,C,D),!D)return(0,h.eachItem)(C,P=>ee.call(this,P)),this;te.call(this,D);const g={...D,type:(0,w.getJSONTypes)(D.type),schemaType:(0,w.getJSONTypes)(D.schemaType)};return(0,h.eachItem)(C,g.type.length===0?P=>ee.call(this,P,g):P=>g.type.forEach(R=>ee.call(this,P,g,R))),this}getKeyword(O){const D=this.RULES.all[O];return typeof D=="object"?D.definition:!!D}removeKeyword(O){const{RULES:D}=this;delete D.keywords[O],delete D.all[O];for(const C of D.rules){const g=C.rules.findIndex(P=>P.keyword===O);g>=0&&C.rules.splice(g,1)}return this}addFormat(O,D){return typeof D=="string"&&(D=new RegExp(D)),this.formats[O]=D,this}errorsText(O=this.errors,{separator:D=", ",dataVar:C="data"}={}){return!O||O.length===0?"No errors":O.map(g=>`${C}${g.instancePath} ${g.message}`).reduce((g,P)=>g+D+P)}$dataMetaSchema(O,D){const C=this.RULES.all;O=JSON.parse(JSON.stringify(O));for(const g of D){const P=g.split("/").slice(1);let R=O;for(const H of P)R=R[H];for(const H in C){const B=C[H];if(typeof B!="object")continue;const{$data:Q}=B.definition,W=R[H];Q&&W&&(R[H]=oe(W))}}return O}_removeAllSchemas(O,D){for(const C in O){const g=O[C];(!D||D.test(C))&&(typeof g=="string"?delete O[C]:g&&!g.meta&&(this._cache.delete(g.schema),delete O[C]))}}_addSchema(O,D,C,g=this.opts.validateSchema,P=this.opts.addUsedSchema){let R;const{schemaId:H}=this.opts;if(typeof O=="object")R=O[H];else{if(this.opts.jtd)throw new Error("schema must be object");if(typeof O!="boolean")throw new Error("schema must be object or boolean")}let B=this._cache.get(O);if(B!==void 0)return B;C=(0,p.normalizeId)(R||C);const Q=p.getSchemaRefs.call(this,O,C);return B=new o.SchemaEnv({schema:O,schemaId:H,meta:D,baseId:C,localRefs:Q}),this._cache.set(B.schema,B),P&&!C.startsWith("#")&&(C&&this._checkUnique(C),this.refs[C]=B),g&&this.validateSchema(O,!0),B}_checkUnique(O){if(this.schemas[O]||this.refs[O])throw new Error(`schema with key or id "${O}" already exists`)}_compileSchemaEnv(O){if(O.meta?this._compileMetaSchema(O):o.compileSchema.call(this,O),!O.validate)throw new Error("ajv implementation error");return O.validate}_compileMetaSchema(O){const D=this.opts;this.opts=this._metaOpts;try{o.compileSchema.call(this,O)}finally{this.opts=D}}}y.ValidationError=n.default,y.MissingRefError=r.default,t.default=y;function d(A,O,D,C="error"){for(const g in A){const P=g;P in O&&this.logger[C](`${D}: option ${g}. ${A[P]}`)}}function m(A){return A=(0,p.normalizeId)(A),this.schemas[A]||this.refs[A]}function S(){const A=this.opts.schemas;if(A)if(Array.isArray(A))this.addSchema(A);else for(const O in A)this.addSchema(A[O],O)}function I(){for(const A in this.opts.formats){const O=this.opts.formats[A];O&&this.addFormat(A,O)}}function x(A){if(Array.isArray(A)){this.addVocabulary(A);return}this.logger.warn("keywords option as map is deprecated, pass array");for(const O in A){const D=A[O];D.keyword||(D.keyword=O),this.addKeyword(D)}}function j(){const A={...this.opts};for(const O of _)delete A[O];return A}const q={log(){},warn(){},error(){}};function F(A){if(A===!1)return q;if(A===void 0)return console;if(A.log&&A.warn&&A.error)return A;throw new Error("logger must implement log, warn and error methods")}const G=/^[a-z_$][a-z0-9_$:-]*$/i;function Z(A,O){const{RULES:D}=this;if((0,h.eachItem)(A,C=>{if(D.keywords[C])throw new Error(`Keyword ${C} is already defined`);if(!G.test(C))throw new Error(`Keyword ${C} has invalid name`)}),!!O&&O.$data&&!("code"in O||"validate"in O))throw new Error('$data keyword must have "code" or "validate" function')}function ee(A,O,D){var C;const g=O?.post;if(D&&g)throw new Error('keyword with "post" flag cannot have "type"');const{RULES:P}=this;let R=g?P.post:P.rules.find(({type:B})=>B===D);if(R||(R={type:D,rules:[]},P.rules.push(R)),P.keywords[A]=!0,!O)return;const H={keyword:A,definition:{...O,type:(0,w.getJSONTypes)(O.type),schemaType:(0,w.getJSONTypes)(O.schemaType)}};O.before?re.call(this,R,H,O.before):R.rules.push(H),P.all[A]=H,(C=O.implements)===null||C===void 0||C.forEach(B=>this.addKeyword(B))}function re(A,O,D){const C=A.rules.findIndex(g=>g.keyword===D);C>=0?A.rules.splice(C,0,O):(A.rules.push(O),this.logger.warn(`rule ${D} is not defined`))}function te(A){let{metaSchema:O}=A;O!==void 0&&(A.$data&&this.opts.$data&&(O=oe(O)),A.validateSchema=this.compile(O,!0))}const K={$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"};function oe(A){return{anyOf:[A,K]}}}(fs)),fs}var gt={},vt={},wt={},bn;function Io(){if(bn)return wt;bn=1,Object.defineProperty(wt,"__esModule",{value:!0});const t={keyword:"id",code(){throw new Error('NOT SUPPORTED: keyword "id", use "$id" for schema ID')}};return wt.default=t,wt}var qe={},$n;function Oo(){if($n)return qe;$n=1,Object.defineProperty(qe,"__esModule",{value:!0}),qe.callRef=qe.getValidate=void 0;const t=is(),e=Ie(),s=Y(),n=ze(),r=Ds(),i=se(),o={keyword:"$ref",schemaType:"string",code(w){const{gen:h,schema:$,it:v}=w,{baseId:k,schemaEnv:_,validateName:b,opts:f,self:l}=v,{root:a}=_;if(($==="#"||$==="#/")&&k===a.baseId)return y();const c=r.resolveRef.call(l,a,k,$);if(c===void 0)throw new t.default(v.opts.uriResolver,k,$);if(c instanceof r.SchemaEnv)return d(c);return m(c);function y(){if(_===a)return p(w,b,_,_.$async);const S=h.scopeValue("root",{ref:a});return p(w,(0,s._)`${S}.validate`,a,a.$async)}function d(S){const I=u(w,S);p(w,I,S,S.$async)}function m(S){const I=h.scopeValue("schema",f.code.source===!0?{ref:S,code:(0,s.stringify)(S)}:{ref:S}),x=h.name("valid"),j=w.subschema({schema:S,dataTypes:[],schemaPath:s.nil,topSchemaRef:I,errSchemaPath:$},x);w.mergeEvaluated(j),w.ok(x)}}};function u(w,h){const{gen:$}=w;return h.validate?$.scopeValue("validate",{ref:h.validate}):(0,s._)`${$.scopeValue("wrapper",{ref:h})}.validate`}qe.getValidate=u;function p(w,h,$,v){const{gen:k,it:_}=w,{allErrors:b,schemaEnv:f,opts:l}=_,a=l.passContext?n.default.this:s.nil;v?c():y();function c(){if(!f.$async)throw new Error("async schema referenced by sync schema");const S=k.let("valid");k.try(()=>{k.code((0,s._)`await ${(0,e.callValidateCode)(w,h,a)}`),m(h),b||k.assign(S,!0)},I=>{k.if((0,s._)`!(${I} instanceof ${_.ValidationError})`,()=>k.throw(I)),d(I),b||k.assign(S,!1)}),w.ok(S)}function y(){w.result((0,e.callValidateCode)(w,h,a),()=>m(h),()=>d(h))}function d(S){const I=(0,s._)`${S}.errors`;k.assign(n.default.vErrors,(0,s._)`${n.default.vErrors} === null ? ${I} : ${n.default.vErrors}.concat(${I})`),k.assign(n.default.errors,(0,s._)`${n.default.vErrors}.length`)}function m(S){var I;if(!_.opts.unevaluated)return;const x=(I=$?.validate)===null||I===void 0?void 0:I.evaluated;if(_.props!==!0)if(x&&!x.dynamicProps)x.props!==void 0&&(_.props=i.mergeEvaluated.props(k,x.props,_.props));else{const j=k.var("props",(0,s._)`${S}.evaluated.props`);_.props=i.mergeEvaluated.props(k,j,_.props,s.Name)}if(_.items!==!0)if(x&&!x.dynamicItems)x.items!==void 0&&(_.items=i.mergeEvaluated.items(k,x.items,_.items));else{const j=k.var("items",(0,s._)`${S}.evaluated.items`);_.items=i.mergeEvaluated.items(k,j,_.items,s.Name)}}}return qe.callRef=p,qe.default=o,qe}var Sn;function To(){if(Sn)return vt;Sn=1,Object.defineProperty(vt,"__esModule",{value:!0});const t=Io(),e=Oo(),s=["$schema","$id","$defs","$vocabulary",{keyword:"$comment"},"definitions",t.default,e.default];return vt.default=s,vt}var _t={},kt={},Pn;function Co(){if(Pn)return kt;Pn=1,Object.defineProperty(kt,"__esModule",{value:!0});const t=Y(),e=t.operators,s={maximum:{okStr:"<=",ok:e.LTE,fail:e.GT},minimum:{okStr:">=",ok:e.GTE,fail:e.LT},exclusiveMaximum:{okStr:"<",ok:e.LT,fail:e.GTE},exclusiveMinimum:{okStr:">",ok:e.GT,fail:e.LTE}},n={message:({keyword:i,schemaCode:o})=>(0,t.str)`must be ${s[i].okStr} ${o}`,params:({keyword:i,schemaCode:o})=>(0,t._)`{comparison: ${s[i].okStr}, limit: ${o}}`},r={keyword:Object.keys(s),type:"number",schemaType:"number",$data:!0,error:n,code(i){const{keyword:o,data:u,schemaCode:p}=i;i.fail$data((0,t._)`${u} ${s[o].fail} ${p} || isNaN(${u})`)}};return kt.default=r,kt}var bt={},En;function No(){if(En)return bt;En=1,Object.defineProperty(bt,"__esModule",{value:!0});const t=Y(),s={keyword:"multipleOf",type:"number",schemaType:"number",$data:!0,error:{message:({schemaCode:n})=>(0,t.str)`must be multiple of ${n}`,params:({schemaCode:n})=>(0,t._)`{multipleOf: ${n}}`},code(n){const{gen:r,data:i,schemaCode:o,it:u}=n,p=u.opts.multipleOfPrecision,w=r.let("res"),h=p?(0,t._)`Math.abs(Math.round(${w}) - ${w}) > 1e-${p}`:(0,t._)`${w} !== parseInt(${w})`;n.fail$data((0,t._)`(${o} === 0 || (${w} = ${i}/${o}, ${h}))`)}};return bt.default=s,bt}var $t={},St={},In;function xo(){if(In)return St;In=1,Object.defineProperty(St,"__esModule",{value:!0});function t(e){const s=e.length;let n=0,r=0,i;for(;r<s;)n++,i=e.charCodeAt(r++),i>=55296&&i<=56319&&r<s&&(i=e.charCodeAt(r),(i&64512)===56320&&r++);return n}return St.default=t,t.code='require("ajv/dist/runtime/ucs2length").default',St}var On;function Ro(){if(On)return $t;On=1,Object.defineProperty($t,"__esModule",{value:!0});const t=Y(),e=se(),s=xo(),r={keyword:["maxLength","minLength"],type:"string",schemaType:"number",$data:!0,error:{message({keyword:i,schemaCode:o}){const u=i==="maxLength"?"more":"fewer";return(0,t.str)`must NOT have ${u} than ${o} characters`},params:({schemaCode:i})=>(0,t._)`{limit: ${i}}`},code(i){const{keyword:o,data:u,schemaCode:p,it:w}=i,h=o==="maxLength"?t.operators.GT:t.operators.LT,$=w.opts.unicode===!1?(0,t._)`${u}.length`:(0,t._)`${(0,e.useFunc)(i.gen,s.default)}(${u})`;i.fail$data((0,t._)`${$} ${h} ${p}`)}};return $t.default=r,$t}var Pt={},Tn;function Mo(){if(Tn)return Pt;Tn=1,Object.defineProperty(Pt,"__esModule",{value:!0});const t=Ie(),e=Y(),n={keyword:"pattern",type:"string",schemaType:"string",$data:!0,error:{message:({schemaCode:r})=>(0,e.str)`must match pattern "${r}"`,params:({schemaCode:r})=>(0,e._)`{pattern: ${r}}`},code(r){const{data:i,$data:o,schema:u,schemaCode:p,it:w}=r,h=w.opts.unicodeRegExp?"u":"",$=o?(0,e._)`(new RegExp(${p}, ${h}))`:(0,t.usePattern)(r,u);r.fail$data((0,e._)`!${$}.test(${i})`)}};return Pt.default=n,Pt}var Et={},Cn;function Do(){if(Cn)return Et;Cn=1,Object.defineProperty(Et,"__esModule",{value:!0});const t=Y(),s={keyword:["maxProperties","minProperties"],type:"object",schemaType:"number",$data:!0,error:{message({keyword:n,schemaCode:r}){const i=n==="maxProperties"?"more":"fewer";return(0,t.str)`must NOT have ${i} than ${r} properties`},params:({schemaCode:n})=>(0,t._)`{limit: ${n}}`},code(n){const{keyword:r,data:i,schemaCode:o}=n,u=r==="maxProperties"?t.operators.GT:t.operators.LT;n.fail$data((0,t._)`Object.keys(${i}).length ${u} ${o}`)}};return Et.default=s,Et}var It={},Nn;function jo(){if(Nn)return It;Nn=1,Object.defineProperty(It,"__esModule",{value:!0});const t=Ie(),e=Y(),s=se(),r={keyword:"required",type:"object",schemaType:"array",$data:!0,error:{message:({params:{missingProperty:i}})=>(0,e.str)`must have required property '${i}'`,params:({params:{missingProperty:i}})=>(0,e._)`{missingProperty: ${i}}`},code(i){const{gen:o,schema:u,schemaCode:p,data:w,$data:h,it:$}=i,{opts:v}=$;if(!h&&u.length===0)return;const k=u.length>=v.loopRequired;if($.allErrors?_():b(),v.strictRequired){const a=i.parentSchema.properties,{definedProperties:c}=i.it;for(const y of u)if(a?.[y]===void 0&&!c.has(y)){const d=$.schemaEnv.baseId+$.errSchemaPath,m=`required property "${y}" is not defined at "${d}" (strictRequired)`;(0,s.checkStrictMode)($,m,$.opts.strictRequired)}}function _(){if(k||h)i.block$data(e.nil,f);else for(const a of u)(0,t.checkReportMissingProp)(i,a)}function b(){const a=o.let("missing");if(k||h){const c=o.let("valid",!0);i.block$data(c,()=>l(a,c)),i.ok(c)}else o.if((0,t.checkMissingProp)(i,u,a)),(0,t.reportMissingProp)(i,a),o.else()}function f(){o.forOf("prop",p,a=>{i.setParams({missingProperty:a}),o.if((0,t.noPropertyInData)(o,w,a,v.ownProperties),()=>i.error())})}function l(a,c){i.setParams({missingProperty:a}),o.forOf(a,p,()=>{o.assign(c,(0,t.propertyInData)(o,w,a,v.ownProperties)),o.if((0,e.not)(c),()=>{i.error(),o.break()})},e.nil)}}};return It.default=r,It}var Ot={},xn;function Ao(){if(xn)return Ot;xn=1,Object.defineProperty(Ot,"__esModule",{value:!0});const t=Y(),s={keyword:["maxItems","minItems"],type:"array",schemaType:"number",$data:!0,error:{message({keyword:n,schemaCode:r}){const i=n==="maxItems"?"more":"fewer";return(0,t.str)`must NOT have ${i} than ${r} items`},params:({schemaCode:n})=>(0,t._)`{limit: ${n}}`},code(n){const{keyword:r,data:i,schemaCode:o}=n,u=r==="maxItems"?t.operators.GT:t.operators.LT;n.fail$data((0,t._)`${i}.length ${u} ${o}`)}};return Ot.default=s,Ot}var Tt={},Ct={},Rn;function js(){if(Rn)return Ct;Rn=1,Object.defineProperty(Ct,"__esModule",{value:!0});const t=Xi();return t.code='require("ajv/dist/runtime/equal").default',Ct.default=t,Ct}var Mn;function qo(){if(Mn)return Tt;Mn=1,Object.defineProperty(Tt,"__esModule",{value:!0});const t=Yt(),e=Y(),s=se(),n=js(),i={keyword:"uniqueItems",type:"array",schemaType:"boolean",$data:!0,error:{message:({params:{i:o,j:u}})=>(0,e.str)`must NOT have duplicate items (items ## ${u} and ${o} are identical)`,params:({params:{i:o,j:u}})=>(0,e._)`{i: ${o}, j: ${u}}`},code(o){const{gen:u,data:p,$data:w,schema:h,parentSchema:$,schemaCode:v,it:k}=o;if(!w&&!h)return;const _=u.let("valid"),b=$.items?(0,t.getSchemaTypes)($.items):[];o.block$data(_,f,(0,e._)`${v} === false`),o.ok(_);function f(){const y=u.let("i",(0,e._)`${p}.length`),d=u.let("j");o.setParams({i:y,j:d}),u.assign(_,!0),u.if((0,e._)`${y} > 1`,()=>(l()?a:c)(y,d))}function l(){return b.length>0&&!b.some(y=>y==="object"||y==="array")}function a(y,d){const m=u.name("item"),S=(0,t.checkDataTypes)(b,m,k.opts.strictNumbers,t.DataType.Wrong),I=u.const("indices",(0,e._)`{}`);u.for((0,e._)`;${y}--;`,()=>{u.let(m,(0,e._)`${p}[${y}]`),u.if(S,(0,e._)`continue`),b.length>1&&u.if((0,e._)`typeof ${m} == "string"`,(0,e._)`${m} += "_"`),u.if((0,e._)`typeof ${I}[${m}] == "number"`,()=>{u.assign(d,(0,e._)`${I}[${m}]`),o.error(),u.assign(_,!1).break()}).code((0,e._)`${I}[${m}] = ${y}`)})}function c(y,d){const m=(0,s.useFunc)(u,n.default),S=u.name("outer");u.label(S).for((0,e._)`;${y}--;`,()=>u.for((0,e._)`${d} = ${y}; ${d}--;`,()=>u.if((0,e._)`${m}(${p}[${y}], ${p}[${d}])`,()=>{o.error(),u.assign(_,!1).break(S)})))}}};return Tt.default=i,Tt}var Nt={},Dn;function Lo(){if(Dn)return Nt;Dn=1,Object.defineProperty(Nt,"__esModule",{value:!0});const t=Y(),e=se(),s=js(),r={keyword:"const",$data:!0,error:{message:"must be equal to constant",params:({schemaCode:i})=>(0,t._)`{allowedValue: ${i}}`},code(i){const{gen:o,data:u,$data:p,schemaCode:w,schema:h}=i;p||h&&typeof h=="object"?i.fail$data((0,t._)`!${(0,e.useFunc)(o,s.default)}(${u}, ${w})`):i.fail((0,t._)`${h} !== ${u}`)}};return Nt.default=r,Nt}var xt={},jn;function zo(){if(jn)return xt;jn=1,Object.defineProperty(xt,"__esModule",{value:!0});const t=Y(),e=se(),s=js(),r={keyword:"enum",schemaType:"array",$data:!0,error:{message:"must be equal to one of the allowed values",params:({schemaCode:i})=>(0,t._)`{allowedValues: ${i}}`},code(i){const{gen:o,data:u,$data:p,schema:w,schemaCode:h,it:$}=i;if(!p&&w.length===0)throw new Error("enum must have non-empty array");const v=w.length>=$.opts.loopEnum;let k;const _=()=>k??(k=(0,e.useFunc)(o,s.default));let b;if(v||p)b=o.let("valid"),i.block$data(b,f);else{if(!Array.isArray(w))throw new Error("ajv implementation error");const a=o.const("vSchema",h);b=(0,t.or)(...w.map((c,y)=>l(a,y)))}i.pass(b);function f(){o.assign(b,!1),o.forOf("v",h,a=>o.if((0,t._)`${_()}(${u}, ${a})`,()=>o.assign(b,!0).break()))}function l(a,c){const y=w[c];return typeof y=="object"&&y!==null?(0,t._)`${_()}(${u}, ${a}[${c}])`:(0,t._)`${u} === ${y}`}}};return xt.default=r,xt}var An;function Uo(){if(An)return _t;An=1,Object.defineProperty(_t,"__esModule",{value:!0});const t=Co(),e=No(),s=Ro(),n=Mo(),r=Do(),i=jo(),o=Ao(),u=qo(),p=Lo(),w=zo(),h=[t.default,e.default,s.default,n.default,r.default,i.default,o.default,u.default,{keyword:"type",schemaType:["string","array"]},{keyword:"nullable",schemaType:"boolean"},p.default,w.default];return _t.default=h,_t}var Rt={},Ve={},qn;function Qi(){if(qn)return Ve;qn=1,Object.defineProperty(Ve,"__esModule",{value:!0}),Ve.validateAdditionalItems=void 0;const t=Y(),e=se(),n={keyword:"additionalItems",type:"array",schemaType:["boolean","object"],before:"uniqueItems",error:{message:({params:{len:i}})=>(0,t.str)`must NOT have more than ${i} items`,params:({params:{len:i}})=>(0,t._)`{limit: ${i}}`},code(i){const{parentSchema:o,it:u}=i,{items:p}=o;if(!Array.isArray(p)){(0,e.checkStrictMode)(u,'"additionalItems" is ignored when "items" is not an array of schemas');return}r(i,p)}};function r(i,o){const{gen:u,schema:p,data:w,keyword:h,it:$}=i;$.items=!0;const v=u.const("len",(0,t._)`${w}.length`);if(p===!1)i.setParams({len:o.length}),i.pass((0,t._)`${v} <= ${o.length}`);else if(typeof p=="object"&&!(0,e.alwaysValidSchema)($,p)){const _=u.var("valid",(0,t._)`${v} <= ${o.length}`);u.if((0,t.not)(_),()=>k(_)),i.ok(_)}function k(_){u.forRange("i",o.length,v,b=>{i.subschema({keyword:h,dataProp:b,dataPropType:e.Type.Num},_),$.allErrors||u.if((0,t.not)(_),()=>u.break())})}}return Ve.validateAdditionalItems=r,Ve.default=n,Ve}var Mt={},Ze={},Ln;function er(){if(Ln)return Ze;Ln=1,Object.defineProperty(Ze,"__esModule",{value:!0}),Ze.validateTuple=void 0;const t=Y(),e=se(),s=Ie(),n={keyword:"items",type:"array",schemaType:["object","array","boolean"],before:"uniqueItems",code(i){const{schema:o,it:u}=i;if(Array.isArray(o))return r(i,"additionalItems",o);u.items=!0,!(0,e.alwaysValidSchema)(u,o)&&i.ok((0,s.validateArray)(i))}};function r(i,o,u=i.schema){const{gen:p,parentSchema:w,data:h,keyword:$,it:v}=i;b(w),v.opts.unevaluated&&u.length&&v.items!==!0&&(v.items=e.mergeEvaluated.items(p,u.length,v.items));const k=p.name("valid"),_=p.const("len",(0,t._)`${h}.length`);u.forEach((f,l)=>{(0,e.alwaysValidSchema)(v,f)||(p.if((0,t._)`${_} > ${l}`,()=>i.subschema({keyword:$,schemaProp:l,dataProp:l},k)),i.ok(k))});function b(f){const{opts:l,errSchemaPath:a}=v,c=u.length,y=c===f.minItems&&(c===f.maxItems||f[o]===!1);if(l.strictTuples&&!y){const d=`"${$}" is ${c}-tuple, but minItems or maxItems/${o} are not specified or different at path "${a}"`;(0,e.checkStrictMode)(v,d,l.strictTuples)}}}return Ze.validateTuple=r,Ze.default=n,Ze}var zn;function Fo(){if(zn)return Mt;zn=1,Object.defineProperty(Mt,"__esModule",{value:!0});const t=er(),e={keyword:"prefixItems",type:"array",schemaType:["array"],before:"uniqueItems",code:s=>(0,t.validateTuple)(s,"items")};return Mt.default=e,Mt}var Dt={},Un;function Ho(){if(Un)return Dt;Un=1,Object.defineProperty(Dt,"__esModule",{value:!0});const t=Y(),e=se(),s=Ie(),n=Qi(),i={keyword:"items",type:"array",schemaType:["object","boolean"],before:"uniqueItems",error:{message:({params:{len:o}})=>(0,t.str)`must NOT have more than ${o} items`,params:({params:{len:o}})=>(0,t._)`{limit: ${o}}`},code(o){const{schema:u,parentSchema:p,it:w}=o,{prefixItems:h}=p;w.items=!0,!(0,e.alwaysValidSchema)(w,u)&&(h?(0,n.validateAdditionalItems)(o,h):o.ok((0,s.validateArray)(o)))}};return Dt.default=i,Dt}var jt={},Fn;function Bo(){if(Fn)return jt;Fn=1,Object.defineProperty(jt,"__esModule",{value:!0});const t=Y(),e=se(),n={keyword:"contains",type:"array",schemaType:["object","boolean"],before:"uniqueItems",trackErrors:!0,error:{message:({params:{min:r,max:i}})=>i===void 0?(0,t.str)`must contain at least ${r} valid item(s)`:(0,t.str)`must contain at least ${r} and no more than ${i} valid item(s)`,params:({params:{min:r,max:i}})=>i===void 0?(0,t._)`{minContains: ${r}}`:(0,t._)`{minContains: ${r}, maxContains: ${i}}`},code(r){const{gen:i,schema:o,parentSchema:u,data:p,it:w}=r;let h,$;const{minContains:v,maxContains:k}=u;w.opts.next?(h=v===void 0?1:v,$=k):h=1;const _=i.const("len",(0,t._)`${p}.length`);if(r.setParams({min:h,max:$}),$===void 0&&h===0){(0,e.checkStrictMode)(w,'"minContains" == 0 without "maxContains": "contains" keyword ignored');return}if($!==void 0&&h>$){(0,e.checkStrictMode)(w,'"minContains" > "maxContains" is always invalid'),r.fail();return}if((0,e.alwaysValidSchema)(w,o)){let c=(0,t._)`${_} >= ${h}`;$!==void 0&&(c=(0,t._)`${c} && ${_} <= ${$}`),r.pass(c);return}w.items=!0;const b=i.name("valid");$===void 0&&h===1?l(b,()=>i.if(b,()=>i.break())):h===0?(i.let(b,!0),$!==void 0&&i.if((0,t._)`${p}.length > 0`,f)):(i.let(b,!1),f()),r.result(b,()=>r.reset());function f(){const c=i.name("_valid"),y=i.let("count",0);l(c,()=>i.if(c,()=>a(y)))}function l(c,y){i.forRange("i",0,_,d=>{r.subschema({keyword:"contains",dataProp:d,dataPropType:e.Type.Num,compositeRule:!0},c),y()})}function a(c){i.code((0,t._)`${c}++`),$===void 0?i.if((0,t._)`${c} >= ${h}`,()=>i.assign(b,!0).break()):(i.if((0,t._)`${c} > ${$}`,()=>i.assign(b,!1).break()),h===1?i.assign(b,!0):i.if((0,t._)`${c} >= ${h}`,()=>i.assign(b,!0)))}}};return jt.default=n,jt}var bs={},Hn;function Go(){return Hn||(Hn=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.validateSchemaDeps=t.validatePropertyDeps=t.error=void 0;const e=Y(),s=se(),n=Ie();t.error={message:({params:{property:p,depsCount:w,deps:h}})=>{const $=w===1?"property":"properties";return(0,e.str)`must have ${$} ${h} when property ${p} is present`},params:({params:{property:p,depsCount:w,deps:h,missingProperty:$}})=>(0,e._)`{property: ${p},
    missingProperty: ${$},
    depsCount: ${w},
    deps: ${h}}`};const r={keyword:"dependencies",type:"object",schemaType:"object",error:t.error,code(p){const[w,h]=i(p);o(p,w),u(p,h)}};function i({schema:p}){const w={},h={};for(const $ in p){if($==="__proto__")continue;const v=Array.isArray(p[$])?w:h;v[$]=p[$]}return[w,h]}function o(p,w=p.schema){const{gen:h,data:$,it:v}=p;if(Object.keys(w).length===0)return;const k=h.let("missing");for(const _ in w){const b=w[_];if(b.length===0)continue;const f=(0,n.propertyInData)(h,$,_,v.opts.ownProperties);p.setParams({property:_,depsCount:b.length,deps:b.join(", ")}),v.allErrors?h.if(f,()=>{for(const l of b)(0,n.checkReportMissingProp)(p,l)}):(h.if((0,e._)`${f} && (${(0,n.checkMissingProp)(p,b,k)})`),(0,n.reportMissingProp)(p,k),h.else())}}t.validatePropertyDeps=o;function u(p,w=p.schema){const{gen:h,data:$,keyword:v,it:k}=p,_=h.name("valid");for(const b in w)(0,s.alwaysValidSchema)(k,w[b])||(h.if((0,n.propertyInData)(h,$,b,k.opts.ownProperties),()=>{const f=p.subschema({keyword:v,schemaProp:b},_);p.mergeValidEvaluated(f,_)},()=>h.var(_,!0)),p.ok(_))}t.validateSchemaDeps=u,t.default=r}(bs)),bs}var At={},Bn;function Vo(){if(Bn)return At;Bn=1,Object.defineProperty(At,"__esModule",{value:!0});const t=Y(),e=se(),n={keyword:"propertyNames",type:"object",schemaType:["object","boolean"],error:{message:"property name must be valid",params:({params:r})=>(0,t._)`{propertyName: ${r.propertyName}}`},code(r){const{gen:i,schema:o,data:u,it:p}=r;if((0,e.alwaysValidSchema)(p,o))return;const w=i.name("valid");i.forIn("key",u,h=>{r.setParams({propertyName:h}),r.subschema({keyword:"propertyNames",data:h,dataTypes:["string"],propertyName:h,compositeRule:!0},w),i.if((0,t.not)(w),()=>{r.error(!0),p.allErrors||i.break()})}),r.ok(w)}};return At.default=n,At}var qt={},Gn;function tr(){if(Gn)return qt;Gn=1,Object.defineProperty(qt,"__esModule",{value:!0});const t=Ie(),e=Y(),s=ze(),n=se(),i={keyword:"additionalProperties",type:["object"],schemaType:["boolean","object"],allowUndefined:!0,trackErrors:!0,error:{message:"must NOT have additional properties",params:({params:o})=>(0,e._)`{additionalProperty: ${o.additionalProperty}}`},code(o){const{gen:u,schema:p,parentSchema:w,data:h,errsCount:$,it:v}=o;if(!$)throw new Error("ajv implementation error");const{allErrors:k,opts:_}=v;if(v.props=!0,_.removeAdditional!=="all"&&(0,n.alwaysValidSchema)(v,p))return;const b=(0,t.allSchemaProperties)(w.properties),f=(0,t.allSchemaProperties)(w.patternProperties);l(),o.ok((0,e._)`${$} === ${s.default.errors}`);function l(){u.forIn("key",h,m=>{!b.length&&!f.length?y(m):u.if(a(m),()=>y(m))})}function a(m){let S;if(b.length>8){const I=(0,n.schemaRefOrVal)(v,w.properties,"properties");S=(0,t.isOwnProperty)(u,I,m)}else b.length?S=(0,e.or)(...b.map(I=>(0,e._)`${m} === ${I}`)):S=e.nil;return f.length&&(S=(0,e.or)(S,...f.map(I=>(0,e._)`${(0,t.usePattern)(o,I)}.test(${m})`))),(0,e.not)(S)}function c(m){u.code((0,e._)`delete ${h}[${m}]`)}function y(m){if(_.removeAdditional==="all"||_.removeAdditional&&p===!1){c(m);return}if(p===!1){o.setParams({additionalProperty:m}),o.error(),k||u.break();return}if(typeof p=="object"&&!(0,n.alwaysValidSchema)(v,p)){const S=u.name("valid");_.removeAdditional==="failing"?(d(m,S,!1),u.if((0,e.not)(S),()=>{o.reset(),c(m)})):(d(m,S),k||u.if((0,e.not)(S),()=>u.break()))}}function d(m,S,I){const x={keyword:"additionalProperties",dataProp:m,dataPropType:n.Type.Str};I===!1&&Object.assign(x,{compositeRule:!0,createErrors:!1,allErrors:!1}),o.subschema(x,S)}}};return qt.default=i,qt}var Lt={},Vn;function Zo(){if(Vn)return Lt;Vn=1,Object.defineProperty(Lt,"__esModule",{value:!0});const t=ns(),e=Ie(),s=se(),n=tr(),r={keyword:"properties",type:"object",schemaType:"object",code(i){const{gen:o,schema:u,parentSchema:p,data:w,it:h}=i;h.opts.removeAdditional==="all"&&p.additionalProperties===void 0&&n.default.code(new t.KeywordCxt(h,n.default,"additionalProperties"));const $=(0,e.allSchemaProperties)(u);for(const f of $)h.definedProperties.add(f);h.opts.unevaluated&&$.length&&h.props!==!0&&(h.props=s.mergeEvaluated.props(o,(0,s.toHash)($),h.props));const v=$.filter(f=>!(0,s.alwaysValidSchema)(h,u[f]));if(v.length===0)return;const k=o.name("valid");for(const f of v)_(f)?b(f):(o.if((0,e.propertyInData)(o,w,f,h.opts.ownProperties)),b(f),h.allErrors||o.else().var(k,!0),o.endIf()),i.it.definedProperties.add(f),i.ok(k);function _(f){return h.opts.useDefaults&&!h.compositeRule&&u[f].default!==void 0}function b(f){i.subschema({keyword:"properties",schemaProp:f,dataProp:f},k)}}};return Lt.default=r,Lt}var zt={},Zn;function Ko(){if(Zn)return zt;Zn=1,Object.defineProperty(zt,"__esModule",{value:!0});const t=Ie(),e=Y(),s=se(),n=se(),r={keyword:"patternProperties",type:"object",schemaType:"object",code(i){const{gen:o,schema:u,data:p,parentSchema:w,it:h}=i,{opts:$}=h,v=(0,t.allSchemaProperties)(u),k=v.filter(y=>(0,s.alwaysValidSchema)(h,u[y]));if(v.length===0||k.length===v.length&&(!h.opts.unevaluated||h.props===!0))return;const _=$.strictSchema&&!$.allowMatchingProperties&&w.properties,b=o.name("valid");h.props!==!0&&!(h.props instanceof e.Name)&&(h.props=(0,n.evaluatedPropsToName)(o,h.props));const{props:f}=h;l();function l(){for(const y of v)_&&a(y),h.allErrors?c(y):(o.var(b,!0),c(y),o.if(b))}function a(y){for(const d in _)new RegExp(y).test(d)&&(0,s.checkStrictMode)(h,`property ${d} matches pattern ${y} (use allowMatchingProperties)`)}function c(y){o.forIn("key",p,d=>{o.if((0,e._)`${(0,t.usePattern)(i,y)}.test(${d})`,()=>{const m=k.includes(y);m||i.subschema({keyword:"patternProperties",schemaProp:y,dataProp:d,dataPropType:n.Type.Str},b),h.opts.unevaluated&&f!==!0?o.assign((0,e._)`${f}[${d}]`,!0):!m&&!h.allErrors&&o.if((0,e.not)(b),()=>o.break())})})}}};return zt.default=r,zt}var Ut={},Kn;function Wo(){if(Kn)return Ut;Kn=1,Object.defineProperty(Ut,"__esModule",{value:!0});const t=se(),e={keyword:"not",schemaType:["object","boolean"],trackErrors:!0,code(s){const{gen:n,schema:r,it:i}=s;if((0,t.alwaysValidSchema)(i,r)){s.fail();return}const o=n.name("valid");s.subschema({keyword:"not",compositeRule:!0,createErrors:!1,allErrors:!1},o),s.failResult(o,()=>s.reset(),()=>s.error())},error:{message:"must NOT be valid"}};return Ut.default=e,Ut}var Ft={},Wn;function Jo(){if(Wn)return Ft;Wn=1,Object.defineProperty(Ft,"__esModule",{value:!0});const e={keyword:"anyOf",schemaType:"array",trackErrors:!0,code:Ie().validateUnion,error:{message:"must match a schema in anyOf"}};return Ft.default=e,Ft}var Ht={},Jn;function Xo(){if(Jn)return Ht;Jn=1,Object.defineProperty(Ht,"__esModule",{value:!0});const t=Y(),e=se(),n={keyword:"oneOf",schemaType:"array",trackErrors:!0,error:{message:"must match exactly one schema in oneOf",params:({params:r})=>(0,t._)`{passingSchemas: ${r.passing}}`},code(r){const{gen:i,schema:o,parentSchema:u,it:p}=r;if(!Array.isArray(o))throw new Error("ajv implementation error");if(p.opts.discriminator&&u.discriminator)return;const w=o,h=i.let("valid",!1),$=i.let("passing",null),v=i.name("_valid");r.setParams({passing:$}),i.block(k),r.result(h,()=>r.reset(),()=>r.error(!0));function k(){w.forEach((_,b)=>{let f;(0,e.alwaysValidSchema)(p,_)?i.var(v,!0):f=r.subschema({keyword:"oneOf",schemaProp:b,compositeRule:!0},v),b>0&&i.if((0,t._)`${v} && ${h}`).assign(h,!1).assign($,(0,t._)`[${$}, ${b}]`).else(),i.if(v,()=>{i.assign(h,!0),i.assign($,b),f&&r.mergeEvaluated(f,t.Name)})})}}};return Ht.default=n,Ht}var Bt={},Xn;function Yo(){if(Xn)return Bt;Xn=1,Object.defineProperty(Bt,"__esModule",{value:!0});const t=se(),e={keyword:"allOf",schemaType:"array",code(s){const{gen:n,schema:r,it:i}=s;if(!Array.isArray(r))throw new Error("ajv implementation error");const o=n.name("valid");r.forEach((u,p)=>{if((0,t.alwaysValidSchema)(i,u))return;const w=s.subschema({keyword:"allOf",schemaProp:p},o);s.ok(o),s.mergeEvaluated(w)})}};return Bt.default=e,Bt}var Gt={},Yn;function Qo(){if(Yn)return Gt;Yn=1,Object.defineProperty(Gt,"__esModule",{value:!0});const t=Y(),e=se(),n={keyword:"if",schemaType:["object","boolean"],trackErrors:!0,error:{message:({params:i})=>(0,t.str)`must match "${i.ifClause}" schema`,params:({params:i})=>(0,t._)`{failingKeyword: ${i.ifClause}}`},code(i){const{gen:o,parentSchema:u,it:p}=i;u.then===void 0&&u.else===void 0&&(0,e.checkStrictMode)(p,'"if" without "then" and "else" is ignored');const w=r(p,"then"),h=r(p,"else");if(!w&&!h)return;const $=o.let("valid",!0),v=o.name("_valid");if(k(),i.reset(),w&&h){const b=o.let("ifClause");i.setParams({ifClause:b}),o.if(v,_("then",b),_("else",b))}else w?o.if(v,_("then")):o.if((0,t.not)(v),_("else"));i.pass($,()=>i.error(!0));function k(){const b=i.subschema({keyword:"if",compositeRule:!0,createErrors:!1,allErrors:!1},v);i.mergeEvaluated(b)}function _(b,f){return()=>{const l=i.subschema({keyword:b},v);o.assign($,v),i.mergeValidEvaluated(l,$),f?o.assign(f,(0,t._)`${b}`):i.setParams({ifClause:b})}}}};function r(i,o){const u=i.schema[o];return u!==void 0&&!(0,e.alwaysValidSchema)(i,u)}return Gt.default=n,Gt}var Vt={},Qn;function ea(){if(Qn)return Vt;Qn=1,Object.defineProperty(Vt,"__esModule",{value:!0});const t=se(),e={keyword:["then","else"],schemaType:["object","boolean"],code({keyword:s,parentSchema:n,it:r}){n.if===void 0&&(0,t.checkStrictMode)(r,`"${s}" without "if" is ignored`)}};return Vt.default=e,Vt}var ei;function ta(){if(ei)return Rt;ei=1,Object.defineProperty(Rt,"__esModule",{value:!0});const t=Qi(),e=Fo(),s=er(),n=Ho(),r=Bo(),i=Go(),o=Vo(),u=tr(),p=Zo(),w=Ko(),h=Wo(),$=Jo(),v=Xo(),k=Yo(),_=Qo(),b=ea();function f(l=!1){const a=[h.default,$.default,v.default,k.default,_.default,b.default,o.default,u.default,i.default,p.default,w.default];return l?a.push(e.default,n.default):a.push(t.default,s.default),a.push(r.default),a}return Rt.default=f,Rt}var Zt={},Kt={},ti;function sa(){if(ti)return Kt;ti=1,Object.defineProperty(Kt,"__esModule",{value:!0});const t=Y(),s={keyword:"format",type:["number","string"],schemaType:"string",$data:!0,error:{message:({schemaCode:n})=>(0,t.str)`must match format "${n}"`,params:({schemaCode:n})=>(0,t._)`{format: ${n}}`},code(n,r){const{gen:i,data:o,$data:u,schema:p,schemaCode:w,it:h}=n,{opts:$,errSchemaPath:v,schemaEnv:k,self:_}=h;if(!$.validateFormats)return;u?b():f();function b(){const l=i.scopeValue("formats",{ref:_.formats,code:$.code.formats}),a=i.const("fDef",(0,t._)`${l}[${w}]`),c=i.let("fType"),y=i.let("format");i.if((0,t._)`typeof ${a} == "object" && !(${a} instanceof RegExp)`,()=>i.assign(c,(0,t._)`${a}.type || "string"`).assign(y,(0,t._)`${a}.validate`),()=>i.assign(c,(0,t._)`"string"`).assign(y,a)),n.fail$data((0,t.or)(d(),m()));function d(){return $.strictSchema===!1?t.nil:(0,t._)`${w} && !${y}`}function m(){const S=k.$async?(0,t._)`(${a}.async ? await ${y}(${o}) : ${y}(${o}))`:(0,t._)`${y}(${o})`,I=(0,t._)`(typeof ${y} == "function" ? ${S} : ${y}.test(${o}))`;return(0,t._)`${y} && ${y} !== true && ${c} === ${r} && !${I}`}}function f(){const l=_.formats[p];if(!l){d();return}if(l===!0)return;const[a,c,y]=m(l);a===r&&n.pass(S());function d(){if($.strictSchema===!1){_.logger.warn(I());return}throw new Error(I());function I(){return`unknown format "${p}" ignored in schema at path "${v}"`}}function m(I){const x=I instanceof RegExp?(0,t.regexpCode)(I):$.code.formats?(0,t._)`${$.code.formats}${(0,t.getProperty)(p)}`:void 0,j=i.scopeValue("formats",{key:p,ref:I,code:x});return typeof I=="object"&&!(I instanceof RegExp)?[I.type||"string",I.validate,(0,t._)`${j}.validate`]:["string",I,j]}function S(){if(typeof l=="object"&&!(l instanceof RegExp)&&l.async){if(!k.$async)throw new Error("async format in sync schema");return(0,t._)`await ${y}(${o})`}return typeof c=="function"?(0,t._)`${y}(${o})`:(0,t._)`${y}.test(${o})`}}}};return Kt.default=s,Kt}var si;function na(){if(si)return Zt;si=1,Object.defineProperty(Zt,"__esModule",{value:!0});const e=[sa().default];return Zt.default=e,Zt}var He={},ni;function ia(){return ni||(ni=1,Object.defineProperty(He,"__esModule",{value:!0}),He.contentVocabulary=He.metadataVocabulary=void 0,He.metadataVocabulary=["title","description","default","deprecated","readOnly","writeOnly","examples"],He.contentVocabulary=["contentMediaType","contentEncoding","contentSchema"]),He}var ii;function ra(){if(ii)return gt;ii=1,Object.defineProperty(gt,"__esModule",{value:!0});const t=To(),e=Uo(),s=ta(),n=na(),r=ia(),i=[t.default,e.default,(0,s.default)(),n.default,r.metadataVocabulary,r.contentVocabulary];return gt.default=i,gt}var Wt={},it={},ri;function oa(){if(ri)return it;ri=1,Object.defineProperty(it,"__esModule",{value:!0}),it.DiscrError=void 0;var t;return function(e){e.Tag="tag",e.Mapping="mapping"}(t||(it.DiscrError=t={})),it}var oi;function aa(){if(oi)return Wt;oi=1,Object.defineProperty(Wt,"__esModule",{value:!0});const t=Y(),e=oa(),s=Ds(),n=is(),r=se(),o={keyword:"discriminator",type:"object",schemaType:"object",error:{message:({params:{discrError:u,tagName:p}})=>u===e.DiscrError.Tag?`tag "${p}" must be string`:`value of tag "${p}" must be in oneOf`,params:({params:{discrError:u,tag:p,tagName:w}})=>(0,t._)`{error: ${u}, tag: ${w}, tagValue: ${p}}`},code(u){const{gen:p,data:w,schema:h,parentSchema:$,it:v}=u,{oneOf:k}=$;if(!v.opts.discriminator)throw new Error("discriminator: requires discriminator option");const _=h.propertyName;if(typeof _!="string")throw new Error("discriminator: requires propertyName");if(h.mapping)throw new Error("discriminator: mapping is not supported");if(!k)throw new Error("discriminator: requires oneOf keyword");const b=p.let("valid",!1),f=p.const("tag",(0,t._)`${w}${(0,t.getProperty)(_)}`);p.if((0,t._)`typeof ${f} == "string"`,()=>l(),()=>u.error(!1,{discrError:e.DiscrError.Tag,tag:f,tagName:_})),u.ok(b);function l(){const y=c();p.if(!1);for(const d in y)p.elseIf((0,t._)`${f} === ${d}`),p.assign(b,a(y[d]));p.else(),u.error(!1,{discrError:e.DiscrError.Mapping,tag:f,tagName:_}),p.endIf()}function a(y){const d=p.name("valid"),m=u.subschema({keyword:"oneOf",schemaProp:y},d);return u.mergeEvaluated(m,t.Name),d}function c(){var y;const d={},m=I($);let S=!0;for(let q=0;q<k.length;q++){let F=k[q];if(F?.$ref&&!(0,r.schemaHasRulesButRef)(F,v.self.RULES)){const Z=F.$ref;if(F=s.resolveRef.call(v.self,v.schemaEnv.root,v.baseId,Z),F instanceof s.SchemaEnv&&(F=F.schema),F===void 0)throw new n.default(v.opts.uriResolver,v.baseId,Z)}const G=(y=F?.properties)===null||y===void 0?void 0:y[_];if(typeof G!="object")throw new Error(`discriminator: oneOf subschemas (or referenced schemas) must have "properties/${_}"`);S=S&&(m||I(F)),x(G,q)}if(!S)throw new Error(`discriminator: "${_}" must be required`);return d;function I({required:q}){return Array.isArray(q)&&q.includes(_)}function x(q,F){if(q.const)j(q.const,F);else if(q.enum)for(const G of q.enum)j(G,F);else throw new Error(`discriminator: "properties/${_}" must have "const" or "enum"`)}function j(q,F){if(typeof q!="string"||q in d)throw new Error(`discriminator: "${_}" values must be unique strings`);d[q]=F}}}};return Wt.default=o,Wt}const la="http://json-schema.org/draft-07/schema#",ca="http://json-schema.org/draft-07/schema#",da="Core schema meta-schema",ua={schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},ha=["object","boolean"],fa={$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},pa={$schema:la,$id:ca,title:da,definitions:ua,type:ha,properties:fa,default:!0};var ai;function ma(){return ai||(ai=1,function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.MissingRefError=e.ValidationError=e.CodeGen=e.Name=e.nil=e.stringify=e.str=e._=e.KeywordCxt=e.Ajv=void 0;const s=Eo(),n=ra(),r=aa(),i=pa,o=["/properties"],u="http://json-schema.org/draft-07/schema";class p extends s.default{_addVocabularies(){super._addVocabularies(),n.default.forEach(_=>this.addVocabulary(_)),this.opts.discriminator&&this.addKeyword(r.default)}_addDefaultMetaSchema(){if(super._addDefaultMetaSchema(),!this.opts.meta)return;const _=this.opts.$data?this.$dataMetaSchema(i,o):i;this.addMetaSchema(_,u,!1),this.refs["http://json-schema.org/schema"]=u}defaultMeta(){return this.opts.defaultMeta=super.defaultMeta()||(this.getSchema(u)?u:void 0)}}e.Ajv=p,t.exports=e=p,t.exports.Ajv=p,Object.defineProperty(e,"__esModule",{value:!0}),e.default=p;var w=ns();Object.defineProperty(e,"KeywordCxt",{enumerable:!0,get:function(){return w.KeywordCxt}});var h=Y();Object.defineProperty(e,"_",{enumerable:!0,get:function(){return h._}}),Object.defineProperty(e,"str",{enumerable:!0,get:function(){return h.str}}),Object.defineProperty(e,"stringify",{enumerable:!0,get:function(){return h.stringify}}),Object.defineProperty(e,"nil",{enumerable:!0,get:function(){return h.nil}}),Object.defineProperty(e,"Name",{enumerable:!0,get:function(){return h.Name}}),Object.defineProperty(e,"CodeGen",{enumerable:!0,get:function(){return h.CodeGen}});var $=Ms();Object.defineProperty(e,"ValidationError",{enumerable:!0,get:function(){return $.default}});var v=is();Object.defineProperty(e,"MissingRefError",{enumerable:!0,get:function(){return v.default}})}(ht,ht.exports)),ht.exports}var ya=ma();const ga=fi(ya),va=new ga,Je={type:"object",properties:{x:{type:"number"},y:{type:"number"}},required:["x","y"]},wa={type:"object",properties:{start:{type:"object",properties:{slotId:{type:"integer"},nodeId:{type:"integer"}},required:["nodeId","slotId"],nullable:!0},end:{type:"object",properties:{slotId:{type:"integer"},nodeId:{type:"integer"}},required:["nodeId","slotId"],nullable:!0}}},_a={type:"object",properties:{id:{type:"integer"},componentType:{type:"integer"},nodeType:{type:"integer"},position:Je,slotIds:{type:"array",items:{type:"integer"}},state:{type:"boolean"}},required:["id","componentType","nodeType","position","slotIds","state"]},ka={type:"object",properties:{id:{type:"integer"},componentType:{type:"integer"},position:Je,endPosition:Je,anchors:{type:"array",items:Je},connectedTo:wa},required:["id","componentType","position","endPosition","anchors","connectedTo"]},ba={type:"object",properties:{id:{type:"integer"},componentType:{type:"integer"},position:Je,parentId:{type:"integer"},slotIdAtParent:{type:"integer"},connectionIds:{type:"array",items:{type:"integer"}},inSlot:{type:"boolean"},color:{type:"string"},colorActive:{type:"string"},radius:{type:"number",minimum:0},attractionRadius:{type:"number",minimum:0}},required:["id","componentType","position","parentId","slotIdAtParent","connectionIds","inSlot","color","colorActive","radius","attractionRadius"]},$a={type:"object",properties:{id:{type:"integer"},componentType:{type:"integer"},position:Je,text:{type:"string"},parent:{type:"object",properties:{id:{type:"integer"},type:{type:"integer"}},required:["id","type"],nullable:!0},style:{type:"string"}},required:["id","componentType","position","text","style"]},Sa={type:"object",properties:{id:{type:"integer"},data:{type:"object",properties:{output:{type:"boolean"},signalFrom:{type:"array",items:{type:"array",items:{type:"integer"}}},signalTo:{type:"array",items:{type:"integer"}},nodeType:{type:"integer"}},required:["output","signalFrom","signalTo","nodeType"]}},required:["id","data"]},Pa={type:"object",properties:{id:{type:"string"},title:{type:"string"},data:{type:"object",properties:{nodes:{type:"array",items:_a},connections:{type:"array",items:ka},slots:{type:"array",items:ba},texts:{type:"array",items:$a}},required:["nodes","connections","slots","texts"]},signal:{type:"array",items:Sa}},required:["id","data","signal"]},li=va.compile(Pa);function Ea(t,e,s){if(!s.target){console.error("Falha ao tentar carregar os dados da entrada de dados");return}const n=s.target;if(!n.files||!n.files[0])return;const r=new FileReader;r.readAsArrayBuffer(n.files[0]),r.onload=()=>{if(!r.result||typeof r.result=="string")return;const i=ao(new Uint8Array(r.result)),o=JSON.parse(new TextDecoder().decode(i));if(!li(o)){window.alert("Falha ao carregar projeto! Arquivo inválido ou corrompido."),console.error("Falha ao carregar projeto! Arquivo inválido ou corrompido.",li.errors);return}t.editorEnv=ct.createFromJson(o,e,t.editorEnv.nodeImageList)}}function sr(t){const e=window.prompt("Salvar projeto como:",`${t.simulationTitle}-${Date.now()}`);if(e===null)return;const s=document.createElement("a"),n=new TextEncoder().encode(t.saveAsJson()),r=oo(n,{level:6});s.href=URL.createObjectURL(new Blob([r],{type:"application/gzip"})),s.download=`${e}.simulation`,s.click()}function Ia(t){return confirm(`Deseja limpar o editor?
Qualquer progresso não salvo será perdido!`)===!0?new ct(t.simulationId,t.simulationTitle,0,t.nodeImageList):t}class Oa{_keyboard;constructor(e){this._keyboard=e}onKeyDown(e){this._keyboard.nKeysPressed!==0&&(this._keyboard.keyPressed?this._keyboard.keyHold=!0:(this._keyboard.keyPressed=!0,this._keyboard.keyHold=!1),!this._keyboard.keyHold&&e.isMouseInsideEditor()&&this.handleKeyPressed(e))}handleKeyPressed(e){const s=this._keyboard.getKeysPressed();s[me.ADD]||s[me.ADD_u]?e.node(z.G_AND):s[me.NAND]||s[me.NAND_u]?e.node(z.G_NAND):s[me.NOR]||s[me.NOR_u]?e.node(z.G_NOR):s[me.NOT]||s[me.NOT_u]?e.node(z.G_NOT):s[me.OR]||s[me.OR_u]?e.node(z.G_OR):s[me.XNOR]||s[me.XNOR_u]?e.node(z.G_XNOR):s[me.XOR]||s[me.XOR_u]?e.node(z.G_XOR):s[Be.SWITCH]||s[Be.SWITCH_u]?e.input(z.I_SWITCH):s[Be.BUTTON]||s[Be.BUTTON_u]?e.input(z.I_BUTTON):s[Be.CLOCK]||s[Be.CLOCK_u]?e.input(z.I_CLOCK):s[rt.LED_RED]||s[rt.LED_RED_u]?e.output(z.O_LED_RED):s[rt.SEGMENTS]||s[rt.SEGMENTS_u]?e.output(z.O_7_SEGMENTS):s[$s.DELETE]?e.remove():s[$s.INSERT]&&sr(e.editorEnv)}onKeyUp(){this._keyboard.keyPressed&&this._keyboard.nKeysPressed===0&&(this._keyboard.keyPressed=!1,this._keyboard.keyHold=!1)}}class Ta{keys={};keyPressed=!1;keyHold=!1;stateChange=!1;_nKeysPressed=0;get nKeysPressed(){return this._nKeysPressed}set nKeysPressed(e){e<0&&console.warn("Número de teclas pressionadas é menor que 0!"),this._nKeysPressed=Math.max(0,e)}setKeyPressed(e,s){this.keys[e]=s,this.nKeysPressed+=s?1:-1}getKeysPressed(){return this.keys}}const Ca=[pi,mi,yi,gi,vi,wi,_i,ki,bi,$i,Si,Pi,Ti,Ci,Ni,xi,Ri,Mi,Di,ji,Ai,qi];function Na(){const t={};for(const e of Ca)Or(e).then(s=>{t[e]=s}).catch(()=>{console.warn("Erro ao carregar as imagens.")});return t}function xa(t,e,s){if(!window){console.error("Variável window é nula! Não será possível iniciar o editor");return}window.onload=()=>{t.resize(),setInterval(t.compute,1e3/t.tickRate),t.update(),setTimeout(()=>{document.getElementById("app").style.visibility="visible",document.getElementById("app-toolbar").style.visibility="visible",document.getElementById("app").className="animate-show",document.getElementById("app-toolbar").className="animate-show",document.getElementById("loading-div").style.visibility="hidden"},1e3)},window.onresize=()=>t.resize(),e.onmousedown=()=>t.mouse.clicked=!0,e.onmouseup=e.onmouseout=()=>t.mouse.clicked=!1,window.onmousemove=({x:r,y:i})=>t.setLocalMousePosition(r,i),window.onkeydown=r=>t.keyboard.setKeyPressed(r.key,!0),window.onkeyup=r=>t.keyboard.setKeyPressed(r.key,!1);const n=document.getElementsByTagName("img");for(const r of n)!r.classList.contains("app-component-image")||!r.parentElement||!r.parentElement.classList.contains("app-component")||!r.hasAttributes()||!r.draggable||r.parentElement.addEventListener("dragstart",i=>{i.dataTransfer?.setData("text/plain",r.id),i.dataTransfer?.setDragImage(r,r.width/2,r.height/2)});e.addEventListener("dragover",r=>{r.preventDefault()}),e.addEventListener("drop",r=>{r.preventDefault(),r.dataTransfer&&(t.setLocalMousePosition(r.x,r.y),t.addByDrapAndDrop(r.dataTransfer.getData("text/plain")))}),document.getElementById("save-editor")?.addEventListener("click",()=>sr(t.editorEnv)),document.getElementById("load-editor")?.addEventListener("click",()=>{document.getElementById("load-editor-file")?.click()}),document.getElementById("load-editor-file")?.addEventListener("change",r=>Ea(t,t.canvasCtx,r)),document.getElementById("clear-editor")?.addEventListener("click",()=>{t.editorEnv=Ia(t.editorEnv)})}class Ra{editorEnv;mouse;keyboard;mouseEvents;keyboardEvents;canvasId;canvasCtx;backgroundCtx;backgroundPattern;windowResized;tickRate;constructor(e,s,n,r,i=60){this.editorEnv=new ct(e,s,0,Na()),this.mouse=new Hr,this.keyboard=new Ta,this.mouseEvents=new ye(this.mouse),this.keyboardEvents=new Oa(this.keyboard);const o=document.getElementById(n),u=document.getElementById(r);this.canvasId=n,this.canvasCtx=this.createContext(o),this.backgroundCtx=this.createContext(u),this.backgroundPattern=null,this.loadBackgroundPattern(dr),this.windowResized=!0,this.tickRate=i,xa(this,o)}createContext(e){return e.getContext("2d",{desynchronized:!0})}loadBackgroundPattern(e){const s=new Image;s.onload=()=>{this.backgroundPattern=this.backgroundCtx.createPattern(s,"repeat")},s.src=e}getEditorArea(){const e=document.getElementById(this.canvasId)?.parentElement,s=new T(0,0);if(e){const n=window.getComputedStyle(e);s.x=parseFloat(n.width.substring(0,n.length-2)),s.y=parseFloat(n.height.substring(0,n.length-2))}else s.x=window.innerWidth,s.y=window.innerHeight;return s}setLocalMousePosition(e,s){const n=this.canvasCtx.canvas.getBoundingClientRect();this.mouse.position=new T(e-n.left,s-n.top)}isMouseInsideEditor(){const e=new T(this.canvasCtx.canvas.width,this.canvasCtx.canvas.height);return!(!T.min(this.mouse.position,T.ZERO).equals(T.ZERO)||!T.max(this.mouse.position,e).equals(e))}resize(){const e=this.getEditorArea();this.canvasCtx.canvas.width=e.x,this.canvasCtx.canvas.height=e.y,this.backgroundCtx.canvas.width=e.x,this.backgroundCtx.canvas.height=e.y,this.windowResized=!0}update=()=>{hr(this.canvasCtx,this.editorEnv.components),this.windowResized&&(fr(this.backgroundCtx,this.backgroundPattern),this.windowResized=!1),requestAnimationFrame(this.update)};compute=()=>{this.keyboardEvents.onKeyDown(this),this.keyboardEvents.onKeyUp(),this.mouseEvents.onMouseClick(this.editorEnv),this.mouseEvents.onMouseMove(this.editorEnv),this.mouseEvents.onMouseRelease(this.editorEnv),Ss.onPhysicsEngineUpdate(this.editorEnv.nodes,this.editorEnv.signalGraph)};node(e=z.G_AND,s=this.mouse.position.x,n=this.mouse.position.y){return _e.node(void 0,this.editorEnv,this.canvasCtx.canvas.width,this.canvasCtx.canvas.height,e,s,n)}input(e=z.I_SWITCH,s=this.mouse.position.x,n=this.mouse.position.y){return _e.input(void 0,this.editorEnv,this.canvasCtx.canvas.width,this.canvasCtx.canvas.height,e,s,n)}output(e=z.O_LED_RED,s=this.mouse.position.x,n=this.mouse.position.y){return _e.output(void 0,this.editorEnv,this.canvasCtx.canvas.width,this.canvasCtx.canvas.height,e,s,n)}line(e,s,n,r,i,o){return _e.connection(void 0,this.editorEnv,e,s,n,r,i,o)}text(e,s,n,r,i){return _e.text(void 0,this.editorEnv,this.canvasCtx,e,s,n,r,i)}slot(e,s,n,r,i,o,u,p,w){return _e.slot(void 0,this.editorEnv,e,s,n,r,i,o,u,p,w)}remove(){return this.mouseEvents.getCollisionList().nodes.length!==0?this.editorEnv.removeComponent(this.mouseEvents.getCollisionList().nodes[0]):this.mouseEvents.getCollisionList().connections.length!==0?this.editorEnv.removeComponent(this.mouseEvents.getCollisionList().connections[0]):this.mouseEvents.getCollisionList().texts.length!==0?this.editorEnv.removeComponent(this.mouseEvents.getCollisionList().texts[0]):!1}addByDrapAndDrop(e){switch(e){case"and-gate":return this.node(z.G_AND);case"or-gate":return this.node(z.G_OR);case"not-gate":return this.node(z.G_NOT);case"nand-gate":return this.node(z.G_NAND);case"nor-gate":return this.node(z.G_NOR);case"xor-gate":return this.node(z.G_XOR);case"xnor-gate":return this.node(z.G_XNOR);case"switch-input":return this.input(z.I_SWITCH);case"button-input":return this.input(z.I_BUTTON);case"clock-input":return this.input(z.I_CLOCK);case"led-red-output":return this.output(z.O_LED_RED);case"seven-segments-output":return this.output(z.O_7_SEGMENTS);default:return-1}}}class Ma{modalDOM;openButton;closeButton;skipButton;nextButton;previousButton;tutorialEndButton;currentCarrouselId;carrouselMaxId;carrouselItems;constructor(e,s,n,r,i,o,u){this.modalDOM=document.getElementById(e),this.openButton=this.checkHTMLButtonElement(document.getElementById(s)),this.skipButton=this.checkHTMLButtonElement(document.getElementById(r)),this.nextButton=this.checkHTMLButtonElement(document.getElementById(i)),this.previousButton=this.checkHTMLButtonElement(document.getElementById(o)),this.tutorialEndButton=this.checkHTMLButtonElement(document.getElementById(u)),this.closeButton=document.getElementById(n),this.currentCarrouselId=0,this.carrouselItems=document.getElementsByClassName("carrousel-item"),this.carrouselMaxId=this.carrouselItems.length-1,this.carrouselItems.length>0&&this.carrouselItems[0].classList.add("carrousel-active"),this.createEvents()}checkHTMLButtonElement(e){return e!==null&&e.tagName==="BUTTON"?e:null}createEvents(){this.modalDOM!==null&&this.openButton!==null&&(this.openButton.addEventListener("click",()=>{this.modalDOM.style.display="block"}),this.closeButton&&this.closeButton.addEventListener("click",()=>{this.modalDOM.style.display="none"})),this.modalDOM!==null&&this.skipButton!==null&&this.nextButton!==null&&this.previousButton!==null&&this.tutorialEndButton!==null&&(this.previousButton.style.display="none",this.tutorialEndButton.style.display="none",this.skipButton.addEventListener("click",()=>{this.carrouselPrevious(0),this.modalDOM.style.display="none"}),this.previousButton.addEventListener("click",()=>{this.carrouselPrevious(this.currentCarrouselId-1)}),this.nextButton.addEventListener("click",()=>{this.carrouselNext(this.currentCarrouselId+1)}),this.tutorialEndButton.addEventListener("click",()=>{this.carrouselPrevious(0),this.modalDOM.style.display="none"}))}carrouselNext(e){this.nextButton===null||this.previousButton===null||this.skipButton===null||this.tutorialEndButton===null||(this.carrouselItems[this.currentCarrouselId].classList.remove("carrousel-active"),this.currentCarrouselId=e,this.currentCarrouselId>=this.carrouselMaxId&&(this.currentCarrouselId=this.carrouselMaxId,this.nextButton.style.display="none",this.tutorialEndButton.style.display="block"),this.carrouselItems[this.currentCarrouselId].classList.add("carrousel-active"),this.previousButton.style.display="block",this.skipButton.style.display="none")}carrouselPrevious(e){this.nextButton===null||this.previousButton===null||this.skipButton===null||this.tutorialEndButton===null||(this.carrouselItems[this.currentCarrouselId].classList.remove("carrousel-active"),this.currentCarrouselId=e,this.currentCarrouselId<=0&&(this.currentCarrouselId=0,this.previousButton.style.display="none",this.skipButton.style.display="block"),this.tutorialEndButton.style.display="none",this.carrouselItems[this.currentCarrouselId].classList.add("carrousel-active"),this.nextButton.style.display="block")}}new Ma("app-modal-tutorial","tutorial-button","app-modal-close","app-tutorial-skip","app-tutorial-next","app-tutorial-previous","app-tutorial-close");new Ra(cr(),"Teste","editor-canvas","background-canvas");
