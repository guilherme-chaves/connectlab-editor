var De=Object.defineProperty;var He=(s,t,e)=>t in s?De(s,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):s[t]=e;var a=(s,t,e)=>He(s,typeof t!="symbol"?t+"":t,e);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const n of o)if(n.type==="childList")for(const r of n.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&i(r)}).observe(document,{childList:!0,subtree:!0});function e(o){const n={};return o.integrity&&(n.integrity=o.integrity),o.referrerPolicy&&(n.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?n.credentials="include":o.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function i(o){if(o.ep)return;o.ep=!0;const n=e(o);fetch(o.href,n)}})();var Z=(s=>(s.ADD="a",s.ADD_u="A",s.NAND="d",s.NAND_u="D",s.NOR="r",s.NOR_u="R",s.NOT="n",s.NOT_u="N",s.OR="o",s.OR_u="O",s.XNOR="v",s.XNOR_u="V",s.XOR="x",s.XOR_u="X",s))(Z||{}),wt=(s=>(s.SWITCH="s",s.SWITCH_u="S",s.BUTTON="b",s.BUTTON_u="B",s))(wt||{}),kt=(s=>(s.LED_RED="l",s.LED_RED_u="L",s.SEGMENTS="e",s.SEGMENTS_u="E",s))(kt||{}),At=(s=>(s.DELETE="Delete",s.BACKSPACE="Backspace",s.INSERT="Insert",s))(At||{}),C=(s=>(s[s.LINE=1]="LINE",s[s.NODE=2]="NODE",s[s.TEXT=3]="TEXT",s[s.SLOT=4]="SLOT",s[s.INPUT=5]="INPUT",s[s.OUTPUT=6]="OUTPUT",s))(C||{}),y=(s=>(s[s.G_AND=0]="G_AND",s[s.G_NAND=1]="G_NAND",s[s.G_NOR=2]="G_NOR",s[s.G_NOT=3]="G_NOT",s[s.G_OR=4]="G_OR",s[s.G_XNOR=5]="G_XNOR",s[s.G_XOR=6]="G_XOR",s[s.I_SWITCH=100]="I_SWITCH",s[s.I_BUTTON=101]="I_BUTTON",s[s.O_LED_RED=200]="O_LED_RED",s[s.O_7_SEGMENTS=201]="O_7_SEGMENTS",s))(y||{}),S=(s=>(s[s.MOUSE_CLICKED=0]="MOUSE_CLICKED",s[s.MOUSE_RELEASED=1]="MOUSE_RELEASED",s[s.MOUSE_DRAGGED=2]="MOUSE_DRAGGED",s[s.KEY_PRESSED=10]="KEY_PRESSED",s[s.KEY_RELEASED=11]="KEY_RELEASED",s[s.KEY_HOLDED=12]="KEY_HOLDED",s[s.FOCUS_IN=20]="FOCUS_IN",s[s.FOCUS_OUT=21]="FOCUS_OUT",s))(S||{});const Le="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'?%3e%3csvg%20width='64'%20height='64'%20version='1.1'%20viewBox='0%200%2016%2016'%20xmlns='http://www.w3.org/2000/svg'%3e%3cg%20fill='none'%20stroke='%23289fac'%20stroke-linejoin='round'%20stroke-opacity='.5'%20stroke-width='.3'%3e%3cpath%20d='m0%2010.82h16'/%3e%3cpath%20d='m0%205.482h16'/%3e%3cpath%20d='m0%200.0675h16'/%3e%3cpath%20d='m10.82%200v16'/%3e%3cpath%20d='m16.06%200v16'/%3e%3cpath%20d='m0.0675%200v16'/%3e%3cpath%20d='m5.482%200v16'/%3e%3cpath%20d='m0%2016.06h16'/%3e%3c/g%3e%3c/svg%3e",Ee=["connections","nodes","slots","texts"];function Qt(s){s.save(),s.setTransform(1,0,0,1,0,0),s.clearRect(0,0,s.canvas.width,s.canvas.height),s.restore()}function Ae(s,t){Qt(s);for(const e of Ee)for(const i of t[e].values())i.draw(s)}function Re(s,t){Qt(s),s.rect(0,0,s.canvas.width,s.canvas.height),s.fillStyle=t??"#ff0000",s.fill()}const je=s=>{for(const t of Object.values(s))return t[1];return!1},Ue=s=>{let t=!0;for(const e of Object.values(s))t=t&&e[1];return t},Ze=s=>{let t=!0;for(const e of Object.values(s))t=t&&e[1];return!t},Fe=s=>{let t=!1;for(const e of Object.values(s))t=t||e[1];return!t},Be=s=>{for(const t of Object.values(s))return!t[1];return!0},ze=s=>{let t=!1;for(const e of Object.values(s))t=t||e[1];return t},Ge=s=>{let t;for(const e of Object.values(s)){if(t===void 0){t=e[1];continue}t=t===e[1]}return t??!1},We=s=>{let t;for(const e of Object.values(s)){if(t===void 0){t=e[1];continue}t=t!==e[1]}return t??!1},it={input_output:je,and:Ue,nand:Ze,nor:Fe,not:Be,or:ze,xnor:Ge,xor:We},lt={updateGraph(s,t){var o;const e=new Set,i=[t];for(;i.length>0;)!e.has(i[0])&&s[i[0]]!==void 0&&((s[i[0]].nodeType<100||s[i[0]].nodeType>=200)&&this.computeState(s,s[i[0]]),i.push(...((o=s[i[0]])==null?void 0:o.signalTo)??[])),e.add(i[0]),i.shift()},computeState(s,t){const e=this.getComputeFunction(t.nodeType);for(const i of Object.keys(t.signalFrom))t.signalFrom[parseInt(i)][1]=s[parseInt(i)].state;t.state=e(t.signalFrom)},getComputeFunction(s){switch(s){case y.G_AND:return it.and;case y.G_NAND:return it.nand;case y.G_NOR:return it.nor;case y.G_NOT:return it.not;case y.G_OR:return it.or;case y.G_XNOR:return it.xnor;case y.G_XOR:return it.xor;default:return it.input_output}}},at={vertex:{add(s,t,e,i=!1,o={},n=[]){s[t]||(s[t]={state:i,signalFrom:o,signalTo:n,nodeType:e},lt.updateGraph(s,t))},remove(s,t){if(s[t]){for(const e of Object.values(s[t].signalTo))s[e]!==void 0&&(s[e].signalFrom=Object.fromEntries(Object.entries(s[e].signalFrom).filter(i=>parseInt(i[0])!==t)),lt.updateGraph(s,e));delete s[t]}},getState(s,t){var e;return((e=s[t])==null?void 0:e.state)??!1},setState(s,t,e){s[t]&&(s[t].state=e)}},edge:{add(s,t,e,i){const o=e.parent.id,n=i.parent.id;s[o]!==void 0?s[o].signalTo.push(n):console.warn(`Node inicial com ID ${n} não encontrado no grafo de sinal, isso poderá acarretar em bugs`,t),s[n]!==void 0?s[n].signalFrom[o]=[i.slotIdAtParent,s[o].state]:console.warn(`Node final com ID ${n} não encontrado no grafo de sinal, isso poderá acarretar em bugs`,t),lt.updateGraph(s,o)},remove(s,t){var o,n,r,c;if(t===void 0)return;const e=((o=t.connectedTo.start)==null?void 0:o.nodeId)??-1,i=((n=t.connectedTo.end)==null?void 0:n.nodeId)??-1;if(i!==-1){const f=Object.keys((r=s[i])==null?void 0:r.signalFrom)[e]??"-1";parseInt(f)!==-1&&delete s[i].signalFrom[parseInt(f)]}if(e!==-1){const f=((c=s[e])==null?void 0:c.signalTo.indexOf(i))??-1;f!==-1&&s[e].signalTo.splice(f,1)}i!==-1&&lt.updateGraph(s,i),e!==-1&&lt.updateGraph(s,e)}}},St={node(s,t){const e=s.nodes.get(t);if(e===void 0)return!1;for(let i=0;i<e.slots.length;i++)s.removeComponent(e.slots[i].id,C.SLOT);return at.vertex.remove(s.signalGraph,t),s.nodes.delete(t)},slot(s,t){const e=s.slots.get(t);if(e===void 0)return!1;for(const i of Object.values(e.slotConnections))s.removeComponent(i.id,C.LINE);return s.slots.delete(t)},connection(s,t){var n,r;const e=s.connections.get(t);if(e===void 0)return!1;const i=s.slots.get(((n=e.connectedTo.start)==null?void 0:n.slotId)??-1),o=s.slots.get(((r=e.connectedTo.end)==null?void 0:r.slotId)??-1);if(i){const c=i.slotConnections.findIndex(f=>f.id===t);c!==-1&&i.slotConnections.splice(c,1)}if(o){const c=o.slotConnections.findIndex(f=>f.id===t);c!==-1&&o.slotConnections.splice(c,1)}return at.edge.remove(s.signalGraph,e),s.connections.delete(t)},text(s,t){return s.texts.delete(t)}},x=class x{constructor(t=0,e=0,i=!0){a(this,"_x",0);a(this,"_y",0);a(this,"useInt");this.useInt=i,typeof t=="number"?(this.x=t,this.y=e):typeof t=="object"&&(this.x=t.x,this.y=t.y)}get x(){return this._x}set x(t){this._x=this.useInt?Math.round(t):t}get y(){return this._y}set y(t){this._y=this.useInt?Math.round(t):t}add(t){return this.x+=t.x,this.y+=t.y,this}static add(t,e,i,o=!0){return i??(i=new x(0,0,o)),i.x=t.x+e.x,i.y=t.y+e.y,i}sub(t){return this.x-=t.x,this.y-=t.y,this}static sub(t,e,i,o=!0){return i??(i=new x(0,0,o)),i.x=t.x-e.x,i.y=t.y-e.y,i}mul(t){return t instanceof x?(this.x*=t.x,this.y*=t.y):(this.x*=t,this.y*=t),this}static mul(t,e,i,o=!0){return i??(i=new x(0,0,o)),e instanceof x?(i.x=t.x*e.x,i.y=t.y*e.y):(i.x=t.x*e,i.y=t.y*e),i}div(t){return t instanceof x?(this.x/=t.x,this.y/=t.y):(this.x/=t,this.y/=t),this}static div(t,e,i,o=!0){return i??(i=new x(0,0,o)),e instanceof x?(i.x=t.x/e.x,i.y=t.y/e.y):(i.x=t.x/e,i.y=t.y/e),i}dot(t){return this.x*t.x+this.y*t.y}static dot(t,e){return t.x*e.x+t.y*e.y}cross(t){return this.x*t.y-this.y*t.x}static cross(t,e){return t.x*e.y-t.y*e.x}len(){return Math.sqrt(this.lenSquared())}static len(t){return Math.sqrt(x.lenSquared(t))}lenSquared(){return this.dot(this)}static lenSquared(t){return x.dot(t,t)}madd(t,e){return this.x+=t.x*e,this.y+=t.y*e,this}static madd(t,e,i,o,n=!0){return o??(o=new x(0,0,n)),o.x=t.x+e.x*i,o.y=t.y+e.y*i,o}lerp(t,e){return this.madd(t.sub(this),e)}static lerp(t,e,i,o,n=!0){return x.madd(t,x.sub(e,t),i,o,n)}bilinear(t,e){return this.x=x.lerp(this,t,e.x).x,this.y=x.lerp(this,t,e.y).y,this}static bilinear(t,e,i,o,n=!0){return o??(o=new x(0,0,n)),o.x=x.lerp(t,e,i.x,void 0,n).x,o.y=x.lerp(t,e,i.y,void 0,n).y,o}equals(t,e=1e-4){return this.useInt&&t.useInt?this.x===t.x&&this.y===t.y:Math.abs(this.x-t.x)<e&&Math.abs(this.y-t.y)<e}static equals(t,e,i=1e-4){return t.useInt&&e.useInt?t.x===e.x&&t.y===e.y:Math.abs(t.x-e.x)<i&&Math.abs(t.y-e.y)<i}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this}static min(t,e,i,o=!0){return i??(i=new x(0,0,o)),i.x=Math.min(t.x,e.x),i.y=Math.min(t.y,e.y),i}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this}static max(t,e,i,o=!0){return i??(i=new x(0,0,o)),i.x=Math.max(t.x,e.x),i.y=Math.max(t.y,e.y),i}rotate(t){const e=Math.sin(t),i=Math.cos(t);return this.x=this.x*i-this.y*e,this.y=this.x*e+this.y*i,this}static rotate(t,e,i,o=!0){i??(i=new x(0,0,o));const n=Math.sin(e),r=Math.cos(e);return i.x=t.x*r-t.y*n,i.y=t.x*n+t.y*r,i}angleBetween(t){return Math.atan2(t.y-this.y,t.x-this.x)}static angleBetween(t,e){return Math.atan2(e.y-t.y,e.x-t.x)}normalize(){return this.useInt=!1,this.div(this.len())}static normalize(t,e,i=!1){return x.div(t,t.len(),e,i)}abs(){return this.x=Math.abs(this.x),this.y=Math.abs(this.y),this}static abs(t,e,i=!0){return e??(e=new x(0,0,i)),e.x=Math.abs(t.x),e.y=Math.abs(t.y),e}copy(){return new x(this,void 0,this.useInt)}static copy(t,e){return e.useInt=t.useInt,e.x=t.x,e.y=t.y,e}toPlainObject(){return{x:this.x,y:this.y,useInt:this.useInt}}};a(x,"ZERO",new x);let l=x;class ht{constructor(t,e=2,i=2,o="#FF8008DC"){a(this,"position");a(this,"points");a(this,"globalPoints");a(this,"width");a(this,"height");a(this,"drawPath");a(this,"regenPath");a(this,"borderColor");this.position=t,this.width=e,this.height=i,this.borderColor=o,this.points=this.setPoints(),this.regenPath=!1,this.globalPoints={a:this.position,b:l.add(this.position,this.points.b)}}setGlobalPoints(){l.add(this.position,this.points.b,this.globalPoints.b)}setPoints(){return{a:l.ZERO,b:new l(this.width,this.height)}}generatePath(){const t=new Path2D;return t.rect(this.position.x,this.position.y,this.width,this.height),this.regenPath=!1,t}draw(t,e){e&&((!this.drawPath||this.regenPath)&&(this.drawPath=this.generatePath()),t.save(),t.strokeStyle=this.borderColor,t.stroke(this.drawPath),t.restore())}moveShape(t,e=!0){e?this.position.add(t):l.copy(t,this.position),this.setGlobalPoints(),this.regenPath=!0}collisionWithPoint(t){return t.x>this.globalPoints.a.x&&t.x<this.globalPoints.b.x&&t.y>this.globalPoints.a.y&&t.y<this.globalPoints.b.y}collisionWithBox(t){return!(this.globalPoints.b.x<t.globalPoints.a.x||this.globalPoints.b.y<t.globalPoints.a.y||this.globalPoints.a.x>t.globalPoints.b.x||this.globalPoints.a.y>t.globalPoints.b.y)}collisionWithCircle(t){return t.collisionWithBox(this)}}const Pt=Math.PI*.25,Ot=Math.PI*.75,Vt={setCollisionShapeSize(s,t,e=0,i=0,o=0,n=0,r=1e-4){return s.useInt&&t.useInt?new l(s.x===t.x?e:i,s.y===t.y?o:n):new l(Math.abs(s.x-t.x)<r?e:i,Math.abs(s.y-t.y)<r?o:n,!1)},generateAnchors(s,t){const e=[];let i=new l;const o=s.copy(),n=new l(2,1,!1);let r,c=0;for(;c<64;){const f=new l(0,0,!1),p=o.angleBetween(t);if(f.x=p<=Pt&&p>=-Pt?1:p>Ot||p<-Ot?-1:0,f.y=p>Pt&&p<=Ot?1:p<-Pt&&p>=-Ot?-1:0,e.length===0?r=f.abs().div(n):r=f.abs().div(n).add(i),l.bilinear(s,t,r,o),e.push(r),i=r.copy(),o.equals(t))break;c+=1}return e},generateCollisionShapes(s,t,e){if(e.length===0)return[];const i=[];let o=s.copy();const n=new l;for(let r=0;r<=e.length;r++){r<e.length?l.bilinear(s,t,e[r],n):l.copy(t,n);const c=this.setCollisionShapeSize(o,n,12,n.x-o.x,12,n.y-o.y);i.push(new ht(o.sub(new l(6,6)),c.x,c.y)),o=n.copy()}return i}};class Ve{constructor(t,e,i,o={start:void 0,end:void 0},n){a(this,"id");a(this,"position");a(this,"componentType");a(this,"endPosition");a(this,"anchors");a(this,"connectedTo");a(this,"drawPath");a(this,"regenPath");a(this,"collisionShape");a(this,"selected");this.id=t,this.position=e,this.componentType=C.LINE,this.endPosition=i,this.anchors=n??[new l(.25,0),new l(.25,.5),new l(.5,.5),new l(.5,1)],this.connectedTo=o,this.regenPath=!0,this.collisionShape=this.generateCollisionShapes(),this.selected=!1}generatePath(){const t=new Path2D;t.moveTo(this.position.x,this.position.y);const e=new l;for(let i=0;i<this.anchors.length;i++)l.bilinear(this.position,this.endPosition,this.anchors[i],e),t.lineTo(e.x,e.y);return t.lineTo(this.endPosition.x,this.endPosition.y),this.regenPath=!1,t}generateCollisionShapes(){return Vt.generateCollisionShapes(this.position,this.endPosition,this.anchors)}generateAnchors(){return Vt.generateAnchors(this.position,this.endPosition)}draw(t){if(this.endPosition!==this.position){(this.regenPath||!this.drawPath)&&(this.drawPath=this.generatePath()),t.save(),t.strokeStyle="#101010",t.lineWidth=2,t.lineJoin="round",t.stroke(this.drawPath),t.restore();for(let e=0;e<this.collisionShape.length;e++)this.collisionShape[e].draw(t,this.selected)}}addAnchor(t,e=this.anchors.length){this.anchors.splice(e,0,t),this.regenPath=!0}removePoint(t=this.anchors.length-1){if(t<0||t>=this.anchors.length){console.error("ConnectionComponent.removePoint - index is out of bounds!");return}this.anchors.splice(t,1),this.regenPath=!0}move(t,e=!0,i=2,o=!0){e?(i!==1&&this.position.add(t),i!==0&&this.endPosition.add(t)):(i!==1&&l.copy(t,this.position),i!==0&&l.copy(t,this.endPosition)),this.anchors=this.generateAnchors(),o&&(this.collisionShape=this.generateCollisionShapes()),this.regenPath=!0}changeAnchor(t,e=this.anchors.length-1){if(e<0||e>=this.anchors.length){console.error("ConnectionComponent.changePosition - index is out of bounds!");return}this.anchors[e]=l.sub(t,this.position,void 0,!1).div(l.sub(this.endPosition,this.position,void 0,!1)),this.regenPath=!0}changeConnection(t,e,i=!1){t!==void 0&&e!==void 0?i?this.connectedTo.end={slotId:t,nodeId:e}:this.connectedTo.start={slotId:t,nodeId:e}:i?this.connectedTo.end=void 0:this.connectedTo.start=void 0}onEvent(t){switch(t){case S.FOCUS_IN:this.selected=!0;break;case S.FOCUS_OUT:this.selected=!1;break;default:return!1}return!0}toObject(){const t={id:this.id,componentType:this.componentType,position:this.position.toPlainObject(),endPosition:this.endPosition.toPlainObject(),anchors:[],connectedTo:this.connectedTo};return this.anchors.forEach(e=>t.anchors.push(e.toPlainObject())),t}}async function Xe(s){const t=new Image;return t.src=s,await t.decode(),window.createImageBitmap(t)}function xt(s,t){const e={};let i=0;for(const o of t)Object.keys(s).includes(o)&&(e[i]=s[o],i++);return e}const $t="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'?%3e%3csvg%20width='88'%20height='50'%20version='1.1'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='m64%2025h25m-64-10h-26m27%2020h-27'%20fill='none'%20stroke='%23000'%20stroke-width='2'/%3e%3cpath%20d='m26.857%207.8571h17.619c9.7607%200%2016.667%207.64%2016.667%2017.143s-7.3822%2017.143-17.143%2017.143h-17.143z'%20fill='%23fff'/%3e%3cpath%20d='m24%205v40h20.476c11.268%200%2020-9%2020-20s-8.7321-20-20-20zm2.8571%202.8571h17.619c9.7607%200%2016.667%207.64%2016.667%2017.143s-7.3822%2017.143-17.143%2017.143h-17.143z'/%3e%3c/svg%3e",te="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'?%3e%3csvg%20width='88'%20height='50'%20version='1.1'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='m73%2025h16m-64-10h-26m27%2020h-27'%20fill='none'%20stroke='%23000'%20stroke-width='2'/%3e%3cpath%20d='m26.857%207.8571h17.619c9.7607%200%2016.667%207.64%2016.667%2017.143s-7.3822%2017.143-17.143%2017.143h-17.143z'%20fill='%23fff'/%3e%3cpath%20d='m24%205v40h20.476c11.268%200%2020-9%2020-20s-8.7321-20-20-20zm2.8571%202.8571h17.619c9.7607%200%2016.667%207.64%2016.667%2017.143s-7.3822%2017.143-17.143%2017.143h-17.143z'/%3e%3cpath%20d='m73%2025a4%204%200%201%201-8%200%204%204%200%201%201%208%200z'%20fill='%23fff'%20stroke='%23000'%20stroke-width='3'/%3e%3c/svg%3e",ee="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'?%3e%3csvg%20width='88'%20height='50'%20version='1.1'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='m73%2025h16m-64-10h-26m27%2020h-27'%20fill='none'%20stroke='%23000'%20stroke-width='2'/%3e%3cpath%20d='m23.969%208h11.281c4.6842%200%2018.287-0.13021%2027.969%2017-4.7668%208.4291-10.521%2012.684-15.719%2014.812-5.3607%202.1954-9.8419%202.1875-12.25%202.1875h-11.25c1.8736-3.1084%204.75-9.0494%204.75-17%200-7.9734-2.9085-13.9-4.7812-17z'%20fill='%23fff'%20fill-rule='evenodd'/%3e%3cpath%20d='m18.094%205%202%202.4375s5.6562%207%205.6562%2017.562-5.6562%2017.562-5.6562%2017.562l-2%202.4375h17.156c2.4081%201e-6%207.6897%200.02451%2013.625-2.4062%205.9353-2.4308%2012.537-7.3433%2017.688-16.875l-1.3125-0.71875%201.3125-0.71875c-10.303-19.066-26.556-19.281-31.312-19.281zm5.875%203h11.281c4.6842%200%2018.287-0.13021%2027.969%2017-4.7668%208.4291-10.521%2012.684-15.719%2014.812-5.3607%202.1954-9.8419%202.1875-12.25%202.1875h-11.25c1.8736-3.1084%204.75-9.0494%204.75-17%200-7.9734-2.9085-13.9-4.7812-17z'%20fill-rule='evenodd'/%3e%3cpath%20d='m73%2025a4%204%200%201%201-8%200%204%204%200%201%201%208%200z'%20fill='%23fff'%20stroke='%23000'%20stroke-width='3'/%3e%3c/svg%3e",se="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'?%3e%3csvg%20width='88'%20height='50'%20version='1.1'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='m73.135%2025h15.843m-65.957%200h-24'%20fill='none'%20stroke='%23000'%20stroke-width='2'/%3e%3cpath%20d='m25.947%207.4063%2036.125%2017.594-36.125%2017.594z'%20fill='%23fff'/%3e%3cpath%20d='m72.978%2025a4%204%200%201%201-8%200%204%204%200%201%201%208%200z'%20fill='%23fff'%20stroke='%23000'%20stroke-width='3'/%3e%3cpath%20d='m22.947%202.5938v44.812l2.1562-1.0625%2041.031-20v-2.6875l-41.031-20zm3%204.8125%2036.125%2017.594-36.125%2017.594z'/%3e%3c/svg%3e",ie="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'?%3e%3csvg%20width='88'%20height='50'%20version='1.1'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='m64%2025h25m-64-10h-26m27%2020h-27'%20fill='none'%20stroke='%23000'%20stroke-width='2'/%3e%3cpath%20d='m23.969%208h11.281c4.6842%200%2018.287-0.13021%2027.969%2017-4.7668%208.4291-10.521%2012.684-15.719%2014.812-5.3607%202.1954-9.8419%202.1875-12.25%202.1875h-11.25c1.8736-3.1084%204.75-9.0494%204.75-17%200-7.9734-2.9085-13.9-4.7812-17z'%20fill='%23fff'%20fill-rule='evenodd'/%3e%3cpath%20d='m18.094%205%202%202.4375s5.6562%207%205.6562%2017.562-5.6562%2017.562-5.6562%2017.562l-2%202.4375h17.156c2.4081%201e-6%207.6897%200.02451%2013.625-2.4062%205.9353-2.4308%2012.537-7.3433%2017.688-16.875l-1.3125-0.71875%201.3125-0.71875c-10.303-19.066-26.556-19.281-31.312-19.281zm5.875%203h11.281c4.6842%200%2018.287-0.13021%2027.969%2017-4.7668%208.4291-10.521%2012.684-15.719%2014.812-5.3607%202.1954-9.8419%202.1875-12.25%202.1875h-11.25c1.8736-3.1084%204.75-9.0494%204.75-17%200-7.9734-2.9085-13.9-4.7812-17z'%20fill-rule='evenodd'/%3e%3c/svg%3e",oe="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'?%3e%3csvg%20width='88'%20height='50'%20version='1.1'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='m72.333%2025h16.667m-64.614-10h-25.386m26.362%2020h-26.362'%20fill='none'%20stroke='%23000'%20stroke-width='2'/%3e%3cg%20transform='translate(-6)'%20fill-rule='evenodd'%3e%3cpath%20d='m24.25%2042c-1.5974%202.6444-2.25%203-2.25%203h-3.6562l2-2.4375s5.6562-7.0001%205.6562-17.563-5.6562-17.562-5.6562-17.562l-2-2.4375h3.6562c0.78125%200.9375%201.4219%201.6562%202.2188%203%201.8727%203.0998%204.7812%209.0266%204.7812%2017%200%207.9506-2.8967%2013.879-4.75%2017z'/%3e%3cpath%20d='m29.969%208h11.281c4.6842%200%2018.287-0.13021%2027.969%2017-4.7668%208.4291-10.521%2012.684-15.719%2014.812-5.3607%202.1954-9.8419%202.1875-12.25%202.1875h-11.25c1.8736-3.1084%204.75-9.0494%204.75-17%200-7.9734-2.9085-13.9-4.7812-17z'%20fill='%23fff'/%3e%3cpath%20d='m24.094%205%202%202.4375s5.6562%207%205.6562%2017.562-5.6562%2017.562-5.6562%2017.562l-2%202.4375h17.156c2.4081%201e-6%207.6897%200.02451%2013.625-2.4062%205.9353-2.4308%2012.537-7.3433%2017.688-16.875l-1.3125-0.71875%201.3125-0.71875c-10.303-19.066-26.556-19.281-31.312-19.281zm5.875%203h11.281c4.6842%200%2018.287-0.13021%2027.969%2017-4.7668%208.4291-10.521%2012.684-15.719%2014.812-5.3607%202.1954-9.8419%202.1875-12.25%202.1875h-11.25c1.8736-3.1084%204.75-9.0494%204.75-17%200-7.9734-2.9085-13.9-4.7812-17z'/%3e%3c/g%3e%3cpath%20d='m73%2025a4%204%200%201%201-8%200%204%204%200%201%201%208%200z'%20fill='%23fff'%20stroke='%23000'%20stroke-width='3'/%3e%3c/svg%3e",ne="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'?%3e%3csvg%20width='88'%20height='50'%20version='1.1'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='m64%2025h25m-64.614-10h-25.386m26.362%2020h-26.362'%20fill='none'%20stroke='%23000'%20stroke-width='2'/%3e%3cg%20transform='translate(-6)'%20fill-rule='evenodd'%3e%3cpath%20d='m24.25%2042c-1.5974%202.6444-2.25%203-2.25%203h-3.6562l2-2.4375s5.6562-7%205.6562-17.562-5.6562-17.562-5.6562-17.562l-2-2.4375h3.6562c0.78125%200.9375%201.4219%201.6562%202.2188%203%201.8727%203.0998%204.7812%209.0266%204.7812%2017%200%207.9506-2.8967%2013.879-4.75%2017z'/%3e%3cpath%20d='m29.969%208h11.281c4.6842%200%2018.287-0.1302%2027.969%2017-4.7668%208.4291-10.521%2012.684-15.719%2014.812-5.3607%202.1954-9.8419%202.1875-12.25%202.1875h-11.25c1.8736-3.1084%204.75-9.0494%204.75-17%200-7.9734-2.9085-13.9-4.7812-17z'%20fill='%23fff'/%3e%3cpath%20d='m24.094%205%202%202.4375s5.6562%207%205.6562%2017.562-5.6562%2017.562-5.6562%2017.562l-2%202.4375h17.156c2.4081%200%207.6897%200.02451%2013.625-2.4062s12.537-7.3433%2017.688-16.875l-1.3125-0.71875%201.3125-0.71875c-10.303-19.066-26.556-19.281-31.312-19.281zm5.875%203h11.281c4.6842%200%2018.287-0.1302%2027.969%2017-4.7668%208.4291-10.521%2012.684-15.719%2014.812-5.3607%202.1954-9.8419%202.1875-12.25%202.1875h-11.25c1.8736-3.1084%204.75-9.0494%204.75-17%200-7.9734-2.9085-13.9-4.7812-17z'/%3e%3c/g%3e%3c/svg%3e",Je={id:y.G_AND,imgPath:[$t],connectionSlot:[{id:0,name:"A",in:!0,localPos:new l(0,15)},{id:1,name:"B",in:!0,localPos:new l(0,35)},{id:2,name:"C",in:!1,localPos:new l(88,25)}]},Ke={id:y.G_NAND,imgPath:[te],connectionSlot:[{id:0,name:"A",in:!0,localPos:new l(0,15)},{id:1,name:"B",in:!0,localPos:new l(0,35)},{id:2,name:"C",in:!1,localPos:new l(88,25)}]},Ye={id:y.G_NOR,imgPath:[ee],connectionSlot:[{id:0,name:"A",in:!0,localPos:new l(0,15)},{id:1,name:"B",in:!0,localPos:new l(0,35)},{id:2,name:"C",in:!1,localPos:new l(88,25)}]},qe={id:y.G_NOT,imgPath:[se],connectionSlot:[{id:0,name:"In",in:!0,localPos:new l(0,25)},{id:1,name:"Out",in:!1,localPos:new l(88,25)}]},Qe={id:y.G_OR,imgPath:[ie],connectionSlot:[{id:0,name:"A",in:!0,localPos:new l(0,15)},{id:1,name:"B",in:!0,localPos:new l(0,35)},{id:2,name:"C",in:!1,localPos:new l(88,25)}]},$e={id:y.G_XNOR,imgPath:[oe],connectionSlot:[{id:0,name:"A",in:!0,localPos:new l(0,15)},{id:1,name:"B",in:!0,localPos:new l(0,35)},{id:2,name:"C",in:!1,localPos:new l(88,25)}]},t0={id:y.G_XOR,imgPath:[ne],connectionSlot:[{id:0,name:"A",in:!0,localPos:new l(0,15)},{id:1,name:"B",in:!0,localPos:new l(0,35)},{id:2,name:"C",in:!1,localPos:new l(88,25)}]},ot={ADDNode:Je,NANDNode:Ke,NORNode:Ye,NOTNode:qe,ORNode:Qe,XNORNode:$e,XORNode:t0};class _t{constructor(t,e,i,o,n,r,c,f,p=!0){a(this,"id");a(this,"position");a(this,"componentType");a(this,"nodeType");a(this,"slots");a(this,"collisionShape");a(this,"_images");a(this,"imageWidth");a(this,"imageHeight");a(this,"_signalData");a(this,"selected");var h,d;if(this.id=t,this.position=e,this.componentType=C.NODE,this.nodeType=_t.getNodeModel(i),this._signalData=f[this.id],this.slots=r,this._images=xt(c,this.nodeType.imgPath),this.imageWidth=((h=this.image)==null?void 0:h.width)??100,this.imageHeight=((d=this.image)==null?void 0:d.height)??100,p){this.position.sub(new l(this.imageWidth/2,this.imageHeight/2));const g=new l(o,n).sub(new l(this.imageWidth,this.imageHeight));this.position.min(g).max(l.ZERO)}this.collisionShape=new ht(this.position,this.imageWidth,this.imageHeight),this.selected=!1}get image(){return Object.keys(this._images).length===0?null:this._images[0]}get state(){return this._signalData.state??!1}static getNodeModel(t){switch(t){case y.G_AND:return ot.ADDNode;case y.G_NAND:return ot.NANDNode;case y.G_NOR:return ot.NORNode;case y.G_NOT:return ot.NOTNode;case y.G_OR:return ot.ORNode;case y.G_XNOR:return ot.XNORNode;case y.G_XOR:return ot.XORNode;default:return ot.NOTNode}}move(t,e=!0){e?(this.position.add(t),this.collisionShape.moveShape(this.position,!1)):(l.sub(t,new l(this.imageWidth/2,this.imageHeight/2),this.position),this.collisionShape.moveShape(this.position,!1))}draw(t){this.image&&(t.drawImage(this.image,this.position.x,this.position.y),this.collisionShape!==void 0&&this.collisionShape.draw(t,this.selected))}onEvent(t){switch(t){case S.FOCUS_IN:this.selected=!0;break;case S.FOCUS_OUT:this.selected=!1;break;default:return!1}return!0}toObject(){return{id:this.id,componentType:this.componentType,nodeType:this.nodeType.id,position:this.position.toPlainObject(),slotIds:this.slots.map(e=>e.id),state:this.state}}}class e0{constructor(t,e,i="#FF8008DC"){a(this,"position");a(this,"radius");a(this,"radiusSquared");a(this,"drawPath");a(this,"regenPath");a(this,"borderColor");this.position=t,this.radius=e,this.radiusSquared=e*e,this.borderColor=i,this.regenPath=!1}generatePath(){const t=new Path2D;return t.arc(this.position.x,this.position.y,this.radius,0,Math.PI*2),this.regenPath=!1,t}draw(t,e){e&&((!this.drawPath||this.regenPath)&&(this.drawPath=this.generatePath()),t.save(),t.strokeStyle=this.borderColor,t.stroke(this.drawPath),t.restore())}moveShape(t,e=!0){e?this.position.add(t):l.copy(t,this.position),this.drawPath=this.generatePath()}collisionWithPoint(t){return l.sub(this.position,t).lenSquared()<this.radiusSquared}collisionWithBox(t){let e=0;return this.position.x<t.globalPoints.b.x?e+=Math.pow(t.globalPoints.b.x-this.position.x,2):this.position.x>t.globalPoints.a.x&&(e+=Math.pow(this.position.x-t.globalPoints.a.x,2)),this.position.y<t.globalPoints.b.y?e+=Math.pow(t.globalPoints.b.y-this.position.y,2):this.position.y>t.globalPoints.a.y&&(e+=Math.pow(this.position.y-t.globalPoints.a.y,2)),e<this.radiusSquared}collisionWithCircle(t){return l.sub(this.position,t.position).len()<this.radius+t.radius}}class s0{constructor(t,e,i,o,n=[],r=!0,c=4,f=12,p="#0880FF",h="#FF0000"){a(this,"id");a(this,"position");a(this,"globalPosition");a(this,"componentType");a(this,"parent");a(this,"slotIdAtParent");a(this,"_slotConnections");a(this,"drawPath");a(this,"regenPath");a(this,"selected");a(this,"inSlot");a(this,"color");a(this,"colorActive");a(this,"radius");a(this,"attractionRadius");a(this,"collisionShape");this.id=t,this.position=e,this.globalPosition=l.add(e,i.position),this.componentType=C.SLOT,this.parent=i,this.slotIdAtParent=o,this._slotConnections=n,this.color=p,this.colorActive=h,this.selected=!1,this.inSlot=r,this.radius=c,this.attractionRadius=f,this.collisionShape=new e0(this.globalPosition,this.attractionRadius),this.regenPath=!1}get slotConnections(){return this._slotConnections}set slotConnections(t){this.inSlot?(this._slotConnections.splice(0,this._slotConnections.length),this._slotConnections.push(t[0])):this._slotConnections=t}move(t,e=!0){l.add(this.position,this.parent.position,this.globalPosition),this.collisionShape.moveShape(this.globalPosition,!1),this.regenPath=!0}generatePath(){const t=new Path2D;return t.arc(this.globalPosition.x,this.globalPosition.y,this.radius,0,Math.PI*2),t}draw(t){(!this.drawPath||this.regenPath)&&(this.drawPath=this.generatePath()),t.save(),t.fillStyle=this.selected?this.colorActive:this.color,t.fill(this.drawPath),t.restore(),this.collisionShape.draw(t,this.selected)}onEvent(t){switch(t){case S.FOCUS_IN:this.selected=!0;break;case S.FOCUS_OUT:this.selected=!1;break;default:return!1}return!0}toObject(){return{id:this.id,componentType:this.componentType,position:this.position.toPlainObject(),parentId:this.parent.id,slotIdAtParent:this.slotIdAtParent,connectionIds:this.slotConnections.map(e=>e.id),inSlot:this.inSlot,color:this.color,colorActive:this.colorActive,radius:this.radius,attractionRadius:this.attractionRadius}}}class i0{constructor(t,e,i="",o="12px sans-serif",n,r){a(this,"id");a(this,"position");a(this,"componentType");a(this,"text");a(this,"parent");a(this,"style");a(this,"textSize");a(this,"collisionShape");a(this,"canvasContext");a(this,"selected");this.id=t,this.position=e,this.componentType=C.TEXT,this.text=i,this.style=o,this.parent=n,this.canvasContext=r,this.textSize=this.measureText(i,o),this.position.sub(l.div(this.textSize,2)),this.collisionShape=new ht(this.position,this.textSize.x,this.textSize.y),this.selected=!1}measureText(t,e){this.canvasContext.font=e,this.canvasContext.textBaseline="top",this.canvasContext.textAlign="left";const i=this.canvasContext.measureText(t);return new l(i.width,i.actualBoundingBoxDescent-i.actualBoundingBoxAscent).max(new l(16,16))}draw(t){t.save(),t.font=this.style,t.textBaseline="top",t.textAlign="left",t.fillText(this.text,this.position.x,this.position.y),t.restore(),this.collisionShape.draw(t,this.selected)}move(t,e=!0){e?this.position.add(t):l.sub(t,l.div(this.textSize,2),this.position),this.collisionShape.moveShape(this.position,!1)}onEvent(t){switch(t){case S.FOCUS_IN:this.selected=!0;break;case S.FOCUS_OUT:this.selected=!1;break;default:return!1}return!0}toObject(){return{id:this.id,componentType:this.componentType,position:this.position.toPlainObject(),text:this.text,parent:this.parent,style:this.style}}}const ae="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB3aWR0aD0iNzAiIGhlaWdodD0iNTAiIHZlcnNpb249IjEuMSIgdmlld0JveD0iMCAwIDcwIDUwIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIj4KIDxnPgogIDxyZWN0IHg9IjEiIHk9IjEiIHdpZHRoPSI0OCIgaGVpZ2h0PSI0OCIgZmlsbD0iI2ZmZiIgc3Ryb2tlPSIjMDAwIiBzdHJva2Utd2lkdGg9IjIiLz4KICA8cGF0aCBkPSJtNDkuNSAyNS4wNDRoMjEuNSIgZmlsbD0iI2ZmZiIgc3Ryb2tlPSIjMDAwIiBzdHJva2Utd2lkdGg9IjIuMTEzNiIvPgogIDx0ZXh0IHg9IjE1Ljg0OCIgeT0iMzYuNDM5OTk5IiBmaWxsPSIjMDAwMDAwIiBmb250LXNpemU9IjMycHgiIHN0cm9rZT0iIzAwMDAwMCIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+PHRzcGFuIHg9IjE1Ljg0OCIgeT0iMzYuNDM5OTk5IiBmaWxsPSIjMDAwMDAwIiBmb250LXNpemU9IjMycHgiIHN0cm9rZT0iIzAwMDAwMCI+MDwvdHNwYW4+PC90ZXh0PgogPC9nPgo8L3N2Zz4K",re="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB3aWR0aD0iNzAiIGhlaWdodD0iNTAiIHZlcnNpb249IjEuMSIgdmlld0JveD0iMCAwIDcwIDUwIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPgogPGc+CiAgPHJlY3QgeD0iMSIgeT0iMSIgd2lkdGg9IjQ4IiBoZWlnaHQ9IjQ4IiBmaWxsPSIjZmZmIiBzdHJva2U9IiMwMDAiIHN0cm9rZS13aWR0aD0iMiIvPgogIDxwYXRoIGQ9Im00OS41IDI1LjA0NGgyMS41IiBmaWxsPSIjZmZmIiBzdHJva2U9IiMwMDAiIHN0cm9rZS13aWR0aD0iMi4xMTM2Ii8+CiAgPHRleHQgeD0iMTUuODQ4IiB5PSIzNi40Mzk5OTkiIGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjMycHgiIHN0cm9rZT0iIzAwMDAwMCIgc3R5bGU9ImZvbnQtdmFyaWFudC1jYXBzOm5vcm1hbDtmb250LXZhcmlhbnQtZWFzdC1hc2lhbjpub3JtYWw7Zm9udC12YXJpYW50LWxpZ2F0dXJlczpub3JtYWw7Zm9udC12YXJpYW50LW51bWVyaWM6bm9ybWFsIiB4bWw6c3BhY2U9InByZXNlcnZlIj48dHNwYW4+MTwvdHNwYW4+PC90ZXh0PgogPC9nPgo8L3N2Zz4K",le="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'%20standalone='no'?%3e%3csvg%20width='70'%20height='50'%20version='1.1'%20viewBox='0%200%2070%2050'%20id='svg1'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:svg='http://www.w3.org/2000/svg'%3e%3cdefs%20id='defs1'%20/%3e%3cg%20id='g1'%20transform='translate(-0.96743465)'%3e%3cpath%20d='M%2049.5,25.044%20H%2071'%20fill='%23ffffff'%20stroke='%23000000'%20stroke-width='2.1136'%20id='path1'%20/%3e%3c/g%3e%3ccircle%20style='fill:%23ffffff;stroke:%23000000;stroke-width:2'%20id='path3'%20cx='25'%20cy='25'%20r='24'%20/%3e%3ccircle%20style='fill:%23b3b3b3;stroke:%23000000;stroke-width:1;stroke-dasharray:none'%20id='path4'%20cx='25'%20cy='25'%20r='20'%20/%3e%3c/svg%3e",he="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'%20standalone='no'?%3e%3csvg%20width='70'%20height='50'%20version='1.1'%20viewBox='0%200%2070%2050'%20id='svg1'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:svg='http://www.w3.org/2000/svg'%3e%3cdefs%20id='defs1'%20/%3e%3cg%20id='g4'%3e%3cpath%20d='M%2049.5,25.044%20H%2071'%20fill='%23ffffff'%20stroke='%23000000'%20stroke-width='2.1136'%20id='path1'%20transform='translate(-0.96743465)'%20/%3e%3ccircle%20style='fill:%23ffffff;stroke:%23000000;stroke-width:2'%20id='path3'%20cx='25'%20cy='25'%20r='24'%20/%3e%3ccircle%20style='fill:%23ff0000;stroke:%23000000;stroke-width:1;stroke-dasharray:none'%20id='path4'%20cx='25'%20cy='25'%20r='20'%20/%3e%3c/g%3e%3c/svg%3e",ce={id:y.I_SWITCH,imgPath:[ae,re],connectionSlot:[{id:0,in:!1,name:"Out",localPos:new l(70,25)}]},de={id:y.I_BUTTON,imgPath:[le,he],connectionSlot:[{id:0,in:!1,name:"Out",localPos:new l(70,25)}]};class o0{constructor(t,e,i,o,n,r,c,f=!0){a(this,"id");a(this,"position");a(this,"componentType");a(this,"nodeType");a(this,"slots");a(this,"collisionShape");a(this,"_images");a(this,"imageWidth");a(this,"imageHeight");a(this,"_signalData");a(this,"selected");var p,h;if(this.id=t,this.position=e,this.componentType=C.INPUT,this.nodeType=ce,this._signalData=c[this.id],this.slots=n,this._images=xt(r,this.nodeType.imgPath),this.imageWidth=((p=this.image)==null?void 0:p.width)??100,this.imageHeight=((h=this.image)==null?void 0:h.height)??100,f){this.position.sub(new l(this.imageWidth/2,this.imageHeight/2));const d=new l(i,o).sub(new l(this.imageWidth,this.imageHeight));this.position.min(d).max(l.ZERO)}this.collisionShape=new ht(this.position,this.imageWidth,this.imageHeight),this.selected=!1}get image(){return Object.keys(this._images).length===0?null:this._images[this.state?1:0]}get state(){return this._signalData.state??!1}set state(t){this._signalData.state=t}move(t,e=!0){e?(this.position.add(t),this.collisionShape.moveShape(this.position,!1)):(l.sub(t,new l(this.imageWidth/2,this.imageHeight/2),this.position),this.collisionShape.moveShape(this.position,!1))}draw(t){this.image&&(t.drawImage(this.image,this.position.x,this.position.y),this.collisionShape!==void 0&&this.collisionShape.draw(t,this.selected))}onEvent(t){switch(t){case S.MOUSE_RELEASED:this.state=!this.state;break;case S.FOCUS_IN:this.selected=!0;break;case S.FOCUS_OUT:this.selected=!1;break;default:return!1}return!0}toObject(){return{id:this.id,componentType:this.componentType,nodeType:this.nodeType.id,position:this.position.toPlainObject(),slotIds:this.slots.map(e=>e.id),state:this.state}}}const fe="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'?%3e%3csvg%20width='46.08'%20height='64'%20version='1.1'%20viewBox='0%200%2046.08%2064'%20xmlns='http://www.w3.org/2000/svg'%3e%3cg%20stroke='%23000'%20stroke-linejoin='round'%3e%3cpath%20d='m23.041%202.5131c-6.8934%200-12.445%204.8028-12.445%2010.768v18.825%202.7066h-7.2638v9.2635h39.415v-9.2635h-7.2638v-2.7066-18.825c0-5.9654-5.5488-10.768-12.442-10.768z'%20fill='%23d9d9d9'%20stroke-width='2.5854'/%3e%3cpath%20d='m9.619%2035.474h26.424'%20fill='%23fdfdfd'%20stroke-width='1.2927'/%3e%3cpath%20d='m23.04%2044.39v21.976'%20fill='%23fdfdfd'%20stroke-width='2.8546'/%3e%3c/g%3e%3c/svg%3e",pe="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'?%3e%3csvg%20width='46.08'%20height='64'%20version='1.1'%20viewBox='0%200%2046.08%2064'%20xmlns='http://www.w3.org/2000/svg'%3e%3cg%20stroke='%23000'%20stroke-linejoin='round'%3e%3cpath%20d='m23.041%202.5131c-6.8934%200-12.445%204.8028-12.445%2010.768v18.825%202.7066h-7.2638v9.2635h39.415v-9.2635h-7.2638v-2.7066-18.825c0-5.9654-5.5488-10.768-12.442-10.768z'%20fill='%23ff4949'%20stroke-width='2.5854'/%3e%3cpath%20d='m9.619%2035.474h26.424'%20fill='%23fdfdfd'%20stroke-width='1.2927'/%3e%3cpath%20d='m23.04%2044.39v21.976'%20fill='%23fdfdfd'%20stroke-width='2.8546'/%3e%3c/g%3e%3c/svg%3e",ge="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'%20standalone='no'?%3e%3c!--%20Created%20with%20Inkscape%20(http://www.inkscape.org/)%20--%3e%3csvg%20width='90'%20height='120'%20viewBox='0%200%2090%20120'%20version='1.1'%20id='svg1'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:svg='http://www.w3.org/2000/svg'%3e%3cdefs%20id='defs1'%20/%3e%3cg%20id='layer1'%3e%3crect%20style='fill:%23ffffff;stroke:%23000000;stroke-width:1.98364;stroke-dasharray:none;fill-opacity:1'%20id='rect1'%20width='68.016357'%20height='118.01637'%20x='20.991819'%20y='0.99181795'%20/%3e%3cpath%20style='fill:%23b3b3b3;fill-opacity:1;stroke:none;stroke-width:2;stroke-dasharray:none'%20d='m%2037.896931,20.60398%202.443296,-2.225144%20h%2029.843106%20l%201.919733,2.225144%20-1.919733,2.225144%20H%2040.340227%20Z'%20id='path1'%20/%3e%3cpath%20style='fill:%23b3b3b3;fill-opacity:1;stroke:none;stroke-width:2;stroke-dasharray:none'%20d='m%2073.999998,23.18857%202.225144,2.443296%20v%2029.843106%20l%20-2.225144,1.919732%20-2.225144,-1.919732%20V%2025.631866%20Z'%20id='path1-5'%20/%3e%3cpath%20style='fill:%23b3b3b3;fill-opacity:1;stroke:none;stroke-width:2;stroke-dasharray:none'%20d='m%2037.89693,59.979294%202.443296,-2.225144%20h%2029.843107%20l%201.919732,2.225144%20-1.919732,2.225144%20H%2040.340226%20Z'%20id='path2'%20/%3e%3cpath%20style='fill:%23b3b3b3;fill-opacity:1;stroke:none;stroke-width:2;stroke-dasharray:none'%20d='m%2035.999998,23.18857%202.225144,2.443296%20v%2029.843106%20l%20-2.225144,1.919732%20-2.225144,-1.919732%20V%2025.631866%20Z'%20id='path3'%20/%3e%3cpath%20style='fill:%23b3b3b3;fill-opacity:1;stroke:none;stroke-width:2;stroke-dasharray:none'%20d='m%2073.999998,62.605295%202.225144,2.443296%20V%2094.891697%20L%2073.999998,96.81143%2071.774854,94.891697%20V%2065.048591%20Z'%20id='path4'%20/%3e%3cpath%20style='fill:%23b3b3b3;fill-opacity:1;stroke:none;stroke-width:2;stroke-dasharray:none'%20d='m%2037.89693,99.396019%202.443296,-2.225144%20h%2029.843107%20l%201.919732,2.225144%20-1.919732,2.225141%20H%2040.340226%20Z'%20id='path5'%20/%3e%3cpath%20style='fill:%23b3b3b3;fill-opacity:1;stroke:none;stroke-width:2;stroke-dasharray:none'%20d='m%2035.999998,62.605295%202.225144,2.443296%20V%2094.891697%20L%2035.999998,96.81143%2033.774854,94.891697%20V%2065.048591%20Z'%20id='path6'%20/%3e%3cpath%20style='fill:none;fill-opacity:1;stroke:%23000000;stroke-width:2;stroke-dasharray:none;stroke-opacity:1'%20d='M%2020.942532,17%20H%200'%20id='path7'%20/%3e%3cpath%20style='fill:none;fill-opacity:1;stroke:%23000000;stroke-width:2;stroke-dasharray:none;stroke-opacity:1'%20d='M%2020.942532,31.333333%20H%200'%20id='path8'%20/%3e%3cpath%20style='fill:none;fill-opacity:1;stroke:%23000000;stroke-width:2;stroke-dasharray:none;stroke-opacity:1'%20d='M%2020.942532,45.666667%20H%200'%20id='path9'%20/%3e%3cpath%20style='fill:none;fill-opacity:1;stroke:%23000000;stroke-width:2;stroke-dasharray:none;stroke-opacity:1'%20d='M%2020.942532,60%20H%200'%20id='path10'%20/%3e%3cpath%20style='fill:none;fill-opacity:1;stroke:%23000000;stroke-width:2;stroke-dasharray:none;stroke-opacity:1'%20d='M%2020.942532,74.333333%20H%200'%20id='path11'%20/%3e%3cpath%20style='fill:none;fill-opacity:1;stroke:%23000000;stroke-width:2;stroke-dasharray:none;stroke-opacity:1'%20d='M%2020.942532,88.666667%20H%200'%20id='path12'%20/%3e%3cpath%20style='fill:none;fill-opacity:1;stroke:%23000000;stroke-width:2;stroke-dasharray:none;stroke-opacity:1'%20d='M%2020.942532,103%20H%200'%20id='path13'%20/%3e%3c/g%3e%3c/svg%3e",ye="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'%20standalone='no'?%3e%3c!--%20Created%20with%20Inkscape%20(http://www.inkscape.org/)%20--%3e%3csvg%20width='90'%20height='120'%20viewBox='0%200%2090%20120'%20version='1.1'%20id='svg1'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:svg='http://www.w3.org/2000/svg'%3e%3cdefs%20id='defs1'%20/%3e%3cg%20id='layer1'%3e%3crect%20style='display:none;fill:none;stroke:%23000000;stroke-width:1.98364;stroke-dasharray:none'%20id='rect1'%20width='68.016357'%20height='118.01637'%20x='20.991819'%20y='0.99181795'%20/%3e%3cpath%20style='fill:%23ff0000;fill-opacity:1;stroke:none;stroke-width:2;stroke-dasharray:none'%20d='m%2037.896931,20.60398%202.443296,-2.225144%20h%2029.843106%20l%201.919733,2.225144%20-1.919733,2.225144%20H%2040.340227%20Z'%20id='path1'%20/%3e%3cpath%20style='display:none;fill:%23ff0000;fill-opacity:1;stroke:none;stroke-width:2;stroke-dasharray:none'%20d='m%2073.999998,23.18857%202.225144,2.443296%20v%2029.843106%20l%20-2.225144,1.919732%20-2.225144,-1.919732%20V%2025.631866%20Z'%20id='path1-5'%20/%3e%3cpath%20style='display:none;fill:%23ff0000;fill-opacity:1;stroke:none;stroke-width:2;stroke-dasharray:none'%20d='m%2073.999998,62.605295%202.225144,2.443296%20V%2094.891697%20L%2073.999998,96.81143%2071.774854,94.891697%20V%2065.048591%20Z'%20id='path4'%20/%3e%3cpath%20style='display:none;fill:%23ff0000;fill-opacity:1;stroke:none;stroke-width:2;stroke-dasharray:none'%20d='m%2037.89693,99.396019%202.443296,-2.225144%20h%2029.843107%20l%201.919732,2.225144%20-1.919732,2.225141%20H%2040.340226%20Z'%20id='path5'%20/%3e%3cpath%20style='display:none;fill:%23ff0000;fill-opacity:1;stroke:none;stroke-width:2;stroke-dasharray:none'%20d='m%2035.999998,62.605295%202.225144,2.443296%20V%2094.891697%20L%2035.999998,96.81143%2033.774854,94.891697%20V%2065.048591%20Z'%20id='path6'%20/%3e%3cpath%20style='display:none;fill:%23ff0000;fill-opacity:1;stroke:none;stroke-width:2;stroke-dasharray:none'%20d='m%2035.999998,23.18857%202.225144,2.443296%20v%2029.843106%20l%20-2.225144,1.919732%20-2.225144,-1.919732%20V%2025.631866%20Z'%20id='path3'%20/%3e%3cpath%20style='display:none;fill:%23ff0000;fill-opacity:1;stroke:none;stroke-width:2;stroke-dasharray:none'%20d='m%2037.89693,59.979294%202.443296,-2.225144%20h%2029.843107%20l%201.919732,2.225144%20-1.919732,2.225144%20H%2040.340226%20Z'%20id='path2'%20/%3e%3cpath%20style='display:none;fill:none;fill-opacity:1;stroke:%23000000;stroke-width:2;stroke-dasharray:none;stroke-opacity:1'%20d='M%2020.942532,17%20H%200'%20id='path7'%20/%3e%3cpath%20style='display:none;fill:none;fill-opacity:1;stroke:%23000000;stroke-width:2;stroke-dasharray:none;stroke-opacity:1'%20d='M%2020.942532,31.333333%20H%200'%20id='path8'%20/%3e%3cpath%20style='display:none;fill:none;fill-opacity:1;stroke:%23000000;stroke-width:2;stroke-dasharray:none;stroke-opacity:1'%20d='M%2020.942532,45.666667%20H%200'%20id='path9'%20/%3e%3cpath%20style='display:none;fill:none;fill-opacity:1;stroke:%23000000;stroke-width:2;stroke-dasharray:none;stroke-opacity:1'%20d='M%2020.942532,60%20H%200'%20id='path10'%20/%3e%3cpath%20style='display:none;fill:none;fill-opacity:1;stroke:%23000000;stroke-width:2;stroke-dasharray:none;stroke-opacity:1'%20d='M%2020.942532,74.333333%20H%200'%20id='path11'%20/%3e%3cpath%20style='display:none;fill:none;fill-opacity:1;stroke:%23000000;stroke-width:2;stroke-dasharray:none;stroke-opacity:1'%20d='M%2020.942532,88.666667%20H%200'%20id='path12'%20/%3e%3cpath%20style='display:none;fill:none;fill-opacity:1;stroke:%23000000;stroke-width:2;stroke-dasharray:none;stroke-opacity:1'%20d='M%2020.942532,103%20H%200'%20id='path13'%20/%3e%3c/g%3e%3c/svg%3e",ue="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'%20standalone='no'?%3e%3c!--%20Created%20with%20Inkscape%20(http://www.inkscape.org/)%20--%3e%3csvg%20width='90'%20height='120'%20viewBox='0%200%2090%20120'%20version='1.1'%20id='svg1'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:svg='http://www.w3.org/2000/svg'%3e%3cdefs%20id='defs1'%20/%3e%3cg%20id='layer1'%3e%3crect%20style='display:none;fill:none;stroke:%23000000;stroke-width:1.98364;stroke-dasharray:none'%20id='rect1'%20width='68.016357'%20height='118.01637'%20x='20.991819'%20y='0.99181795'%20/%3e%3cpath%20style='display:none;fill:%23ff0000;fill-opacity:1;stroke:none;stroke-width:2;stroke-dasharray:none'%20d='m%2037.896931,20.60398%202.443296,-2.225144%20h%2029.843106%20l%201.919733,2.225144%20-1.919733,2.225144%20H%2040.340227%20Z'%20id='path1'%20/%3e%3cpath%20style='display:inline;fill:%23ff0000;fill-opacity:1;stroke:none;stroke-width:2;stroke-dasharray:none'%20d='m%2073.999998,23.18857%202.225144,2.443296%20v%2029.843106%20l%20-2.225144,1.919732%20-2.225144,-1.919732%20V%2025.631866%20Z'%20id='path1-5'%20/%3e%3cpath%20style='display:none;fill:%23ff0000;fill-opacity:1;stroke:none;stroke-width:2;stroke-dasharray:none'%20d='m%2073.999998,62.605295%202.225144,2.443296%20V%2094.891697%20L%2073.999998,96.81143%2071.774854,94.891697%20V%2065.048591%20Z'%20id='path4'%20/%3e%3cpath%20style='display:none;fill:%23ff0000;fill-opacity:1;stroke:none;stroke-width:2;stroke-dasharray:none'%20d='m%2037.89693,99.396019%202.443296,-2.225144%20h%2029.843107%20l%201.919732,2.225144%20-1.919732,2.225141%20H%2040.340226%20Z'%20id='path5'%20/%3e%3cpath%20style='display:none;fill:%23ff0000;fill-opacity:1;stroke:none;stroke-width:2;stroke-dasharray:none'%20d='m%2035.999998,62.605295%202.225144,2.443296%20V%2094.891697%20L%2035.999998,96.81143%2033.774854,94.891697%20V%2065.048591%20Z'%20id='path6'%20/%3e%3cpath%20style='display:none;fill:%23ff0000;fill-opacity:1;stroke:none;stroke-width:2;stroke-dasharray:none'%20d='m%2035.999998,23.18857%202.225144,2.443296%20v%2029.843106%20l%20-2.225144,1.919732%20-2.225144,-1.919732%20V%2025.631866%20Z'%20id='path3'%20/%3e%3cpath%20style='display:none;fill:%23ff0000;fill-opacity:1;stroke:none;stroke-width:2;stroke-dasharray:none'%20d='m%2037.89693,59.979294%202.443296,-2.225144%20h%2029.843107%20l%201.919732,2.225144%20-1.919732,2.225144%20H%2040.340226%20Z'%20id='path2'%20/%3e%3cpath%20style='display:none;fill:none;fill-opacity:1;stroke:%23000000;stroke-width:2;stroke-dasharray:none;stroke-opacity:1'%20d='M%2020.942532,17%20H%200'%20id='path7'%20/%3e%3cpath%20style='display:none;fill:none;fill-opacity:1;stroke:%23000000;stroke-width:2;stroke-dasharray:none;stroke-opacity:1'%20d='M%2020.942532,31.333333%20H%200'%20id='path8'%20/%3e%3cpath%20style='display:none;fill:none;fill-opacity:1;stroke:%23000000;stroke-width:2;stroke-dasharray:none;stroke-opacity:1'%20d='M%2020.942532,45.666667%20H%200'%20id='path9'%20/%3e%3cpath%20style='display:none;fill:none;fill-opacity:1;stroke:%23000000;stroke-width:2;stroke-dasharray:none;stroke-opacity:1'%20d='M%2020.942532,60%20H%200'%20id='path10'%20/%3e%3cpath%20style='display:none;fill:none;fill-opacity:1;stroke:%23000000;stroke-width:2;stroke-dasharray:none;stroke-opacity:1'%20d='M%2020.942532,74.333333%20H%200'%20id='path11'%20/%3e%3cpath%20style='display:none;fill:none;fill-opacity:1;stroke:%23000000;stroke-width:2;stroke-dasharray:none;stroke-opacity:1'%20d='M%2020.942532,88.666667%20H%200'%20id='path12'%20/%3e%3cpath%20style='display:none;fill:none;fill-opacity:1;stroke:%23000000;stroke-width:2;stroke-dasharray:none;stroke-opacity:1'%20d='M%2020.942532,103%20H%200'%20id='path13'%20/%3e%3c/g%3e%3c/svg%3e",me="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'%20standalone='no'?%3e%3c!--%20Created%20with%20Inkscape%20(http://www.inkscape.org/)%20--%3e%3csvg%20width='90'%20height='120'%20viewBox='0%200%2090%20120'%20version='1.1'%20id='svg1'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:svg='http://www.w3.org/2000/svg'%3e%3cdefs%20id='defs1'%20/%3e%3cg%20id='layer1'%3e%3crect%20style='display:none;fill:none;stroke:%23000000;stroke-width:1.98364;stroke-dasharray:none'%20id='rect1'%20width='68.016357'%20height='118.01637'%20x='20.991819'%20y='0.99181795'%20/%3e%3cpath%20style='display:none;fill:%23ff0000;fill-opacity:1;stroke:none;stroke-width:2;stroke-dasharray:none'%20d='m%2037.896931,20.60398%202.443296,-2.225144%20h%2029.843106%20l%201.919733,2.225144%20-1.919733,2.225144%20H%2040.340227%20Z'%20id='path1'%20/%3e%3cpath%20style='display:none;fill:%23ff0000;fill-opacity:1;stroke:none;stroke-width:2;stroke-dasharray:none'%20d='m%2073.999998,23.18857%202.225144,2.443296%20v%2029.843106%20l%20-2.225144,1.919732%20-2.225144,-1.919732%20V%2025.631866%20Z'%20id='path1-5'%20/%3e%3cpath%20style='display:inline;fill:%23ff0000;fill-opacity:1;stroke:none;stroke-width:2;stroke-dasharray:none'%20d='m%2073.999998,62.605295%202.225144,2.443296%20V%2094.891697%20L%2073.999998,96.81143%2071.774854,94.891697%20V%2065.048591%20Z'%20id='path4'%20/%3e%3cpath%20style='display:none;fill:%23ff0000;fill-opacity:1;stroke:none;stroke-width:2;stroke-dasharray:none'%20d='m%2037.89693,99.396019%202.443296,-2.225144%20h%2029.843107%20l%201.919732,2.225144%20-1.919732,2.225141%20H%2040.340226%20Z'%20id='path5'%20/%3e%3cpath%20style='display:none;fill:%23ff0000;fill-opacity:1;stroke:none;stroke-width:2;stroke-dasharray:none'%20d='m%2035.999998,62.605295%202.225144,2.443296%20V%2094.891697%20L%2035.999998,96.81143%2033.774854,94.891697%20V%2065.048591%20Z'%20id='path6'%20/%3e%3cpath%20style='display:none;fill:%23ff0000;fill-opacity:1;stroke:none;stroke-width:2;stroke-dasharray:none'%20d='m%2035.999998,23.18857%202.225144,2.443296%20v%2029.843106%20l%20-2.225144,1.919732%20-2.225144,-1.919732%20V%2025.631866%20Z'%20id='path3'%20/%3e%3cpath%20style='display:none;fill:%23ff0000;fill-opacity:1;stroke:none;stroke-width:2;stroke-dasharray:none'%20d='m%2037.89693,59.979294%202.443296,-2.225144%20h%2029.843107%20l%201.919732,2.225144%20-1.919732,2.225144%20H%2040.340226%20Z'%20id='path2'%20/%3e%3cpath%20style='display:none;fill:none;fill-opacity:1;stroke:%23000000;stroke-width:2;stroke-dasharray:none;stroke-opacity:1'%20d='M%2020.942532,17%20H%200'%20id='path7'%20/%3e%3cpath%20style='display:none;fill:none;fill-opacity:1;stroke:%23000000;stroke-width:2;stroke-dasharray:none;stroke-opacity:1'%20d='M%2020.942532,31.333333%20H%200'%20id='path8'%20/%3e%3cpath%20style='display:none;fill:none;fill-opacity:1;stroke:%23000000;stroke-width:2;stroke-dasharray:none;stroke-opacity:1'%20d='M%2020.942532,45.666667%20H%200'%20id='path9'%20/%3e%3cpath%20style='display:none;fill:none;fill-opacity:1;stroke:%23000000;stroke-width:2;stroke-dasharray:none;stroke-opacity:1'%20d='M%2020.942532,60%20H%200'%20id='path10'%20/%3e%3cpath%20style='display:none;fill:none;fill-opacity:1;stroke:%23000000;stroke-width:2;stroke-dasharray:none;stroke-opacity:1'%20d='M%2020.942532,74.333333%20H%200'%20id='path11'%20/%3e%3cpath%20style='display:none;fill:none;fill-opacity:1;stroke:%23000000;stroke-width:2;stroke-dasharray:none;stroke-opacity:1'%20d='M%2020.942532,88.666667%20H%200'%20id='path12'%20/%3e%3cpath%20style='display:none;fill:none;fill-opacity:1;stroke:%23000000;stroke-width:2;stroke-dasharray:none;stroke-opacity:1'%20d='M%2020.942532,103%20H%200'%20id='path13'%20/%3e%3c/g%3e%3c/svg%3e",we="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'%20standalone='no'?%3e%3c!--%20Created%20with%20Inkscape%20(http://www.inkscape.org/)%20--%3e%3csvg%20width='90'%20height='120'%20viewBox='0%200%2090%20120'%20version='1.1'%20id='svg1'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:svg='http://www.w3.org/2000/svg'%3e%3cdefs%20id='defs1'%20/%3e%3cg%20id='layer1'%3e%3crect%20style='display:none;fill:none;stroke:%23000000;stroke-width:1.98364;stroke-dasharray:none'%20id='rect1'%20width='68.016357'%20height='118.01637'%20x='20.991819'%20y='0.99181795'%20/%3e%3cpath%20style='display:none;fill:%23ff0000;fill-opacity:1;stroke:none;stroke-width:2;stroke-dasharray:none'%20d='m%2037.896931,20.60398%202.443296,-2.225144%20h%2029.843106%20l%201.919733,2.225144%20-1.919733,2.225144%20H%2040.340227%20Z'%20id='path1'%20/%3e%3cpath%20style='display:none;fill:%23ff0000;fill-opacity:1;stroke:none;stroke-width:2;stroke-dasharray:none'%20d='m%2073.999998,23.18857%202.225144,2.443296%20v%2029.843106%20l%20-2.225144,1.919732%20-2.225144,-1.919732%20V%2025.631866%20Z'%20id='path1-5'%20/%3e%3cpath%20style='display:none;fill:%23ff0000;fill-opacity:1;stroke:none;stroke-width:2;stroke-dasharray:none'%20d='m%2073.999998,62.605295%202.225144,2.443296%20V%2094.891697%20L%2073.999998,96.81143%2071.774854,94.891697%20V%2065.048591%20Z'%20id='path4'%20/%3e%3cpath%20style='display:inline;fill:%23ff0000;fill-opacity:1;stroke:none;stroke-width:2;stroke-dasharray:none'%20d='m%2037.89693,99.396019%202.443296,-2.225144%20h%2029.843107%20l%201.919732,2.225144%20-1.919732,2.225141%20H%2040.340226%20Z'%20id='path5'%20/%3e%3cpath%20style='display:none;fill:%23ff0000;fill-opacity:1;stroke:none;stroke-width:2;stroke-dasharray:none'%20d='m%2035.999998,62.605295%202.225144,2.443296%20V%2094.891697%20L%2035.999998,96.81143%2033.774854,94.891697%20V%2065.048591%20Z'%20id='path6'%20/%3e%3cpath%20style='display:none;fill:%23ff0000;fill-opacity:1;stroke:none;stroke-width:2;stroke-dasharray:none'%20d='m%2035.999998,23.18857%202.225144,2.443296%20v%2029.843106%20l%20-2.225144,1.919732%20-2.225144,-1.919732%20V%2025.631866%20Z'%20id='path3'%20/%3e%3cpath%20style='display:none;fill:%23ff0000;fill-opacity:1;stroke:none;stroke-width:2;stroke-dasharray:none'%20d='m%2037.89693,59.979294%202.443296,-2.225144%20h%2029.843107%20l%201.919732,2.225144%20-1.919732,2.225144%20H%2040.340226%20Z'%20id='path2'%20/%3e%3cpath%20style='display:none;fill:none;fill-opacity:1;stroke:%23000000;stroke-width:2;stroke-dasharray:none;stroke-opacity:1'%20d='M%2020.942532,17%20H%200'%20id='path7'%20/%3e%3cpath%20style='display:none;fill:none;fill-opacity:1;stroke:%23000000;stroke-width:2;stroke-dasharray:none;stroke-opacity:1'%20d='M%2020.942532,31.333333%20H%200'%20id='path8'%20/%3e%3cpath%20style='display:none;fill:none;fill-opacity:1;stroke:%23000000;stroke-width:2;stroke-dasharray:none;stroke-opacity:1'%20d='M%2020.942532,45.666667%20H%200'%20id='path9'%20/%3e%3cpath%20style='display:none;fill:none;fill-opacity:1;stroke:%23000000;stroke-width:2;stroke-dasharray:none;stroke-opacity:1'%20d='M%2020.942532,60%20H%200'%20id='path10'%20/%3e%3cpath%20style='display:none;fill:none;fill-opacity:1;stroke:%23000000;stroke-width:2;stroke-dasharray:none;stroke-opacity:1'%20d='M%2020.942532,74.333333%20H%200'%20id='path11'%20/%3e%3cpath%20style='display:none;fill:none;fill-opacity:1;stroke:%23000000;stroke-width:2;stroke-dasharray:none;stroke-opacity:1'%20d='M%2020.942532,88.666667%20H%200'%20id='path12'%20/%3e%3cpath%20style='display:none;fill:none;fill-opacity:1;stroke:%23000000;stroke-width:2;stroke-dasharray:none;stroke-opacity:1'%20d='M%2020.942532,103%20H%200'%20id='path13'%20/%3e%3c/g%3e%3c/svg%3e",ke="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'%20standalone='no'?%3e%3c!--%20Created%20with%20Inkscape%20(http://www.inkscape.org/)%20--%3e%3csvg%20width='90'%20height='120'%20viewBox='0%200%2090%20120'%20version='1.1'%20id='svg1'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:svg='http://www.w3.org/2000/svg'%3e%3cdefs%20id='defs1'%20/%3e%3cg%20id='layer1'%3e%3crect%20style='display:none;fill:none;stroke:%23000000;stroke-width:1.98364;stroke-dasharray:none'%20id='rect1'%20width='68.016357'%20height='118.01637'%20x='20.991819'%20y='0.99181795'%20/%3e%3cpath%20style='display:none;fill:%23ff0000;fill-opacity:1;stroke:none;stroke-width:2;stroke-dasharray:none'%20d='m%2037.896931,20.60398%202.443296,-2.225144%20h%2029.843106%20l%201.919733,2.225144%20-1.919733,2.225144%20H%2040.340227%20Z'%20id='path1'%20/%3e%3cpath%20style='display:none;fill:%23ff0000;fill-opacity:1;stroke:none;stroke-width:2;stroke-dasharray:none'%20d='m%2073.999998,23.18857%202.225144,2.443296%20v%2029.843106%20l%20-2.225144,1.919732%20-2.225144,-1.919732%20V%2025.631866%20Z'%20id='path1-5'%20/%3e%3cpath%20style='display:none;fill:%23ff0000;fill-opacity:1;stroke:none;stroke-width:2;stroke-dasharray:none'%20d='m%2073.999998,62.605295%202.225144,2.443296%20V%2094.891697%20L%2073.999998,96.81143%2071.774854,94.891697%20V%2065.048591%20Z'%20id='path4'%20/%3e%3cpath%20style='display:none;fill:%23ff0000;fill-opacity:1;stroke:none;stroke-width:2;stroke-dasharray:none'%20d='m%2037.89693,99.396019%202.443296,-2.225144%20h%2029.843107%20l%201.919732,2.225144%20-1.919732,2.225141%20H%2040.340226%20Z'%20id='path5'%20/%3e%3cpath%20style='display:inline;fill:%23ff0000;fill-opacity:1;stroke:none;stroke-width:2;stroke-dasharray:none'%20d='m%2035.999998,62.605295%202.225144,2.443296%20V%2094.891697%20L%2035.999998,96.81143%2033.774854,94.891697%20V%2065.048591%20Z'%20id='path6'%20/%3e%3cpath%20style='display:none;fill:%23ff0000;fill-opacity:1;stroke:none;stroke-width:2;stroke-dasharray:none'%20d='m%2035.999998,23.18857%202.225144,2.443296%20v%2029.843106%20l%20-2.225144,1.919732%20-2.225144,-1.919732%20V%2025.631866%20Z'%20id='path3'%20/%3e%3cpath%20style='display:none;fill:%23ff0000;fill-opacity:1;stroke:none;stroke-width:2;stroke-dasharray:none'%20d='m%2037.89693,59.979294%202.443296,-2.225144%20h%2029.843107%20l%201.919732,2.225144%20-1.919732,2.225144%20H%2040.340226%20Z'%20id='path2'%20/%3e%3cpath%20style='display:none;fill:none;fill-opacity:1;stroke:%23000000;stroke-width:2;stroke-dasharray:none;stroke-opacity:1'%20d='M%2020.942532,17%20H%200'%20id='path7'%20/%3e%3cpath%20style='display:none;fill:none;fill-opacity:1;stroke:%23000000;stroke-width:2;stroke-dasharray:none;stroke-opacity:1'%20d='M%2020.942532,31.333333%20H%200'%20id='path8'%20/%3e%3cpath%20style='display:none;fill:none;fill-opacity:1;stroke:%23000000;stroke-width:2;stroke-dasharray:none;stroke-opacity:1'%20d='M%2020.942532,45.666667%20H%200'%20id='path9'%20/%3e%3cpath%20style='display:none;fill:none;fill-opacity:1;stroke:%23000000;stroke-width:2;stroke-dasharray:none;stroke-opacity:1'%20d='M%2020.942532,60%20H%200'%20id='path10'%20/%3e%3cpath%20style='display:none;fill:none;fill-opacity:1;stroke:%23000000;stroke-width:2;stroke-dasharray:none;stroke-opacity:1'%20d='M%2020.942532,74.333333%20H%200'%20id='path11'%20/%3e%3cpath%20style='display:none;fill:none;fill-opacity:1;stroke:%23000000;stroke-width:2;stroke-dasharray:none;stroke-opacity:1'%20d='M%2020.942532,88.666667%20H%200'%20id='path12'%20/%3e%3cpath%20style='display:none;fill:none;fill-opacity:1;stroke:%23000000;stroke-width:2;stroke-dasharray:none;stroke-opacity:1'%20d='M%2020.942532,103%20H%200'%20id='path13'%20/%3e%3c/g%3e%3c/svg%3e",ve="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'%20standalone='no'?%3e%3c!--%20Created%20with%20Inkscape%20(http://www.inkscape.org/)%20--%3e%3csvg%20width='90'%20height='120'%20viewBox='0%200%2090%20120'%20version='1.1'%20id='svg1'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:svg='http://www.w3.org/2000/svg'%3e%3cdefs%20id='defs1'%20/%3e%3cg%20id='layer1'%3e%3crect%20style='display:none;fill:none;stroke:%23000000;stroke-width:1.98364;stroke-dasharray:none'%20id='rect1'%20width='68.016357'%20height='118.01637'%20x='20.991819'%20y='0.99181795'%20/%3e%3cpath%20style='display:none;fill:%23ff0000;fill-opacity:1;stroke:none;stroke-width:2;stroke-dasharray:none'%20d='m%2037.896931,20.60398%202.443296,-2.225144%20h%2029.843106%20l%201.919733,2.225144%20-1.919733,2.225144%20H%2040.340227%20Z'%20id='path1'%20/%3e%3cpath%20style='display:none;fill:%23ff0000;fill-opacity:1;stroke:none;stroke-width:2;stroke-dasharray:none'%20d='m%2073.999998,23.18857%202.225144,2.443296%20v%2029.843106%20l%20-2.225144,1.919732%20-2.225144,-1.919732%20V%2025.631866%20Z'%20id='path1-5'%20/%3e%3cpath%20style='display:none;fill:%23ff0000;fill-opacity:1;stroke:none;stroke-width:2;stroke-dasharray:none'%20d='m%2073.999998,62.605295%202.225144,2.443296%20V%2094.891697%20L%2073.999998,96.81143%2071.774854,94.891697%20V%2065.048591%20Z'%20id='path4'%20/%3e%3cpath%20style='display:none;fill:%23ff0000;fill-opacity:1;stroke:none;stroke-width:2;stroke-dasharray:none'%20d='m%2037.89693,99.396019%202.443296,-2.225144%20h%2029.843107%20l%201.919732,2.225144%20-1.919732,2.225141%20H%2040.340226%20Z'%20id='path5'%20/%3e%3cpath%20style='display:none;fill:%23ff0000;fill-opacity:1;stroke:none;stroke-width:2;stroke-dasharray:none'%20d='m%2035.999998,62.605295%202.225144,2.443296%20V%2094.891697%20L%2035.999998,96.81143%2033.774854,94.891697%20V%2065.048591%20Z'%20id='path6'%20/%3e%3cpath%20style='display:inline;fill:%23ff0000;fill-opacity:1;stroke:none;stroke-width:2;stroke-dasharray:none'%20d='m%2035.999998,23.18857%202.225144,2.443296%20v%2029.843106%20l%20-2.225144,1.919732%20-2.225144,-1.919732%20V%2025.631866%20Z'%20id='path3'%20/%3e%3cpath%20style='display:none;fill:%23ff0000;fill-opacity:1;stroke:none;stroke-width:2;stroke-dasharray:none'%20d='m%2037.89693,59.979294%202.443296,-2.225144%20h%2029.843107%20l%201.919732,2.225144%20-1.919732,2.225144%20H%2040.340226%20Z'%20id='path2'%20/%3e%3cpath%20style='display:none;fill:none;fill-opacity:1;stroke:%23000000;stroke-width:2;stroke-dasharray:none;stroke-opacity:1'%20d='M%2020.942532,17%20H%200'%20id='path7'%20/%3e%3cpath%20style='display:none;fill:none;fill-opacity:1;stroke:%23000000;stroke-width:2;stroke-dasharray:none;stroke-opacity:1'%20d='M%2020.942532,31.333333%20H%200'%20id='path8'%20/%3e%3cpath%20style='display:none;fill:none;fill-opacity:1;stroke:%23000000;stroke-width:2;stroke-dasharray:none;stroke-opacity:1'%20d='M%2020.942532,45.666667%20H%200'%20id='path9'%20/%3e%3cpath%20style='display:none;fill:none;fill-opacity:1;stroke:%23000000;stroke-width:2;stroke-dasharray:none;stroke-opacity:1'%20d='M%2020.942532,60%20H%200'%20id='path10'%20/%3e%3cpath%20style='display:none;fill:none;fill-opacity:1;stroke:%23000000;stroke-width:2;stroke-dasharray:none;stroke-opacity:1'%20d='M%2020.942532,74.333333%20H%200'%20id='path11'%20/%3e%3cpath%20style='display:none;fill:none;fill-opacity:1;stroke:%23000000;stroke-width:2;stroke-dasharray:none;stroke-opacity:1'%20d='M%2020.942532,88.666667%20H%200'%20id='path12'%20/%3e%3cpath%20style='display:none;fill:none;fill-opacity:1;stroke:%23000000;stroke-width:2;stroke-dasharray:none;stroke-opacity:1'%20d='M%2020.942532,103%20H%200'%20id='path13'%20/%3e%3c/g%3e%3c/svg%3e",xe="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'%20standalone='no'?%3e%3c!--%20Created%20with%20Inkscape%20(http://www.inkscape.org/)%20--%3e%3csvg%20width='90'%20height='120'%20viewBox='0%200%2090%20120'%20version='1.1'%20id='svg1'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:svg='http://www.w3.org/2000/svg'%3e%3cdefs%20id='defs1'%20/%3e%3cg%20id='layer1'%3e%3crect%20style='display:none;fill:none;stroke:%23000000;stroke-width:1.98364;stroke-dasharray:none'%20id='rect1'%20width='68.016357'%20height='118.01637'%20x='20.991819'%20y='0.99181795'%20/%3e%3cpath%20style='display:none;fill:%23ff0000;fill-opacity:1;stroke:none;stroke-width:2;stroke-dasharray:none'%20d='m%2037.896931,20.60398%202.443296,-2.225144%20h%2029.843106%20l%201.919733,2.225144%20-1.919733,2.225144%20H%2040.340227%20Z'%20id='path1'%20/%3e%3cpath%20style='display:none;fill:%23ff0000;fill-opacity:1;stroke:none;stroke-width:2;stroke-dasharray:none'%20d='m%2073.999998,23.18857%202.225144,2.443296%20v%2029.843106%20l%20-2.225144,1.919732%20-2.225144,-1.919732%20V%2025.631866%20Z'%20id='path1-5'%20/%3e%3cpath%20style='display:none;fill:%23ff0000;fill-opacity:1;stroke:none;stroke-width:2;stroke-dasharray:none'%20d='m%2073.999998,62.605295%202.225144,2.443296%20V%2094.891697%20L%2073.999998,96.81143%2071.774854,94.891697%20V%2065.048591%20Z'%20id='path4'%20/%3e%3cpath%20style='display:none;fill:%23ff0000;fill-opacity:1;stroke:none;stroke-width:2;stroke-dasharray:none'%20d='m%2037.89693,99.396019%202.443296,-2.225144%20h%2029.843107%20l%201.919732,2.225144%20-1.919732,2.225141%20H%2040.340226%20Z'%20id='path5'%20/%3e%3cpath%20style='display:none;fill:%23ff0000;fill-opacity:1;stroke:none;stroke-width:2;stroke-dasharray:none'%20d='m%2035.999998,62.605295%202.225144,2.443296%20V%2094.891697%20L%2035.999998,96.81143%2033.774854,94.891697%20V%2065.048591%20Z'%20id='path6'%20/%3e%3cpath%20style='display:none;fill:%23ff0000;fill-opacity:1;stroke:none;stroke-width:2;stroke-dasharray:none'%20d='m%2035.999998,23.18857%202.225144,2.443296%20v%2029.843106%20l%20-2.225144,1.919732%20-2.225144,-1.919732%20V%2025.631866%20Z'%20id='path3'%20/%3e%3cpath%20style='display:inline;fill:%23ff0000;fill-opacity:1;stroke:none;stroke-width:2;stroke-dasharray:none'%20d='m%2037.89693,59.979294%202.443296,-2.225144%20h%2029.843107%20l%201.919732,2.225144%20-1.919732,2.225144%20H%2040.340226%20Z'%20id='path2'%20/%3e%3cpath%20style='display:none;fill:none;fill-opacity:1;stroke:%23000000;stroke-width:2;stroke-dasharray:none;stroke-opacity:1'%20d='M%2020.942532,17%20H%200'%20id='path7'%20/%3e%3cpath%20style='display:none;fill:none;fill-opacity:1;stroke:%23000000;stroke-width:2;stroke-dasharray:none;stroke-opacity:1'%20d='M%2020.942532,31.333333%20H%200'%20id='path8'%20/%3e%3cpath%20style='display:none;fill:none;fill-opacity:1;stroke:%23000000;stroke-width:2;stroke-dasharray:none;stroke-opacity:1'%20d='M%2020.942532,45.666667%20H%200'%20id='path9'%20/%3e%3cpath%20style='display:none;fill:none;fill-opacity:1;stroke:%23000000;stroke-width:2;stroke-dasharray:none;stroke-opacity:1'%20d='M%2020.942532,60%20H%200'%20id='path10'%20/%3e%3cpath%20style='display:none;fill:none;fill-opacity:1;stroke:%23000000;stroke-width:2;stroke-dasharray:none;stroke-opacity:1'%20d='M%2020.942532,74.333333%20H%200'%20id='path11'%20/%3e%3cpath%20style='display:none;fill:none;fill-opacity:1;stroke:%23000000;stroke-width:2;stroke-dasharray:none;stroke-opacity:1'%20d='M%2020.942532,88.666667%20H%200'%20id='path12'%20/%3e%3cpath%20style='display:none;fill:none;fill-opacity:1;stroke:%23000000;stroke-width:2;stroke-dasharray:none;stroke-opacity:1'%20d='M%2020.942532,103%20H%200'%20id='path13'%20/%3e%3c/g%3e%3c/svg%3e",be={id:y.O_LED_RED,imgPath:[fe,pe],connectionSlot:[{id:0,in:!0,name:"In",localPos:new l(23,64)}]},Ie={id:y.O_7_SEGMENTS,imgPath:[ge,ye,ue,me,we,ke,ve,xe],connectionSlot:[{id:0,in:!0,name:"A",localPos:new l(0,17)},{id:1,in:!0,name:"B",localPos:new l(0,32)},{id:2,in:!0,name:"C",localPos:new l(0,46)},{id:3,in:!0,name:"D",localPos:new l(0,60)},{id:4,in:!0,name:"E",localPos:new l(0,75)},{id:5,in:!0,name:"F",localPos:new l(0,89)},{id:6,in:!0,name:"G",localPos:new l(0,103)}]};class n0{constructor(t,e,i,o,n,r,c,f=!0){a(this,"id");a(this,"position");a(this,"componentType");a(this,"nodeType");a(this,"slots");a(this,"collisionShape");a(this,"_images");a(this,"imageWidth");a(this,"imageHeight");a(this,"_signalData");a(this,"selected");var p,h;if(this.id=t,this.position=e,this.componentType=C.OUTPUT,this.nodeType=be,this._signalData=c[this.id],this.slots=n,this._images=xt(r,this.nodeType.imgPath),this.imageWidth=((p=this.image)==null?void 0:p.width)??100,this.imageHeight=((h=this.image)==null?void 0:h.height)??100,f){this.position.sub(new l(this.imageWidth/2,this.imageHeight/2));const d=new l(i,o).sub(new l(this.imageWidth,this.imageHeight));this.position.min(d).max(l.ZERO)}this.collisionShape=new ht(this.position,this.imageWidth,this.imageHeight),this.selected=!1}get image(){return Object.keys(this._images).length===0?null:this._images[this.state?1:0]}get state(){return this._signalData.state??!1}move(t,e=!0){e?(this.position.add(t),this.collisionShape.moveShape(this.position,!1)):(l.sub(t,new l(this.imageWidth/2,this.imageHeight/2),this.position),this.collisionShape.moveShape(this.position,!1))}draw(t){this.image&&(t.drawImage(this.image,this.position.x,this.position.y),this.collisionShape!==void 0&&this.collisionShape.draw(t,this.selected))}onEvent(t){switch(t){case S.FOCUS_IN:this.selected=!0;break;case S.FOCUS_OUT:this.selected=!1;break;default:return!1}return!0}toObject(){return{id:this.id,componentType:this.componentType,nodeType:this.nodeType.id,position:this.position.toPlainObject(),slotIds:this.slots.map(e=>e.id),state:this.state}}}class a0{constructor(t,e,i,o,n,r,c,f=!0){a(this,"id");a(this,"position");a(this,"componentType");a(this,"nodeType");a(this,"slots");a(this,"collisionShape");a(this,"_images");a(this,"imageWidth");a(this,"imageHeight");a(this,"_signalData");a(this,"selected");var p,h;if(this.id=t,this.position=e,this.componentType=C.OUTPUT,this.nodeType=Ie,this._signalData=c[this.id],this.slots=n,this._images=xt(r,this.nodeType.imgPath),this.imageWidth=((p=this.image)==null?void 0:p.width)??100,this.imageHeight=((h=this.image)==null?void 0:h.height)??100,f){this.position.sub(new l(this.imageWidth/2,this.imageHeight/2));const d=new l(i,o).sub(new l(this.imageWidth,this.imageHeight));this.position.min(d).max(l.ZERO)}this.collisionShape=new ht(this.position,this.imageWidth,this.imageHeight),this.selected=!1}get image(){return Object.keys(this._images).length===0?null:this._images[0]}get state(){return this._signalData.state??!1}move(t,e=!0){e?(this.position.add(t),this.collisionShape.moveShape(this.position,!1)):(l.sub(t,new l(this.imageWidth/2,this.imageHeight/2),this.position),this.collisionShape.moveShape(this.position,!1))}draw(t){if(this.image){if(t.drawImage(this.image,this.position.x,this.position.y),Object.keys(this._images).length>=8)for(const e of Object.values(this._signalData.signalFrom))e[1]&&t.drawImage(this._images[e[0]+1],this.position.x,this.position.y);this.collisionShape!==void 0&&this.collisionShape.draw(t,this.selected)}}onEvent(t){switch(t){case S.FOCUS_IN:this.selected=!0;break;case S.FOCUS_OUT:this.selected=!1;break;default:return!1}return!0}toObject(){return{id:this.id,componentType:this.componentType,nodeType:this.nodeType.id,position:this.position.toPlainObject(),slotIds:this.slots.map(e=>e.id),state:this.state}}}class r0{constructor(t,e,i,o,n,r,c,f=!0){a(this,"id");a(this,"position");a(this,"componentType");a(this,"nodeType");a(this,"slots");a(this,"collisionShape");a(this,"_images");a(this,"imageWidth");a(this,"imageHeight");a(this,"_signalData");a(this,"selected");var p,h;if(this.id=t,this.position=e,this.componentType=C.INPUT,this.nodeType=de,this._signalData=c[this.id],this.slots=n,this._images=xt(r,this.nodeType.imgPath),this.imageWidth=((p=this.image)==null?void 0:p.width)??100,this.imageHeight=((h=this.image)==null?void 0:h.height)??100,f){this.position.sub(new l(this.imageWidth/2,this.imageHeight/2));const d=new l(i,o).sub(new l(this.imageWidth,this.imageHeight));this.position.min(d).max(l.ZERO)}this.collisionShape=new ht(this.position,this.imageWidth,this.imageHeight),this.selected=!1}get image(){return Object.keys(this._images).length===0?null:this._images[this.state?1:0]}get state(){return this._signalData.state??!1}set state(t){this._signalData.state=t}move(t,e=!0){e?(this.position.add(t),this.collisionShape.moveShape(this.position,!1)):(l.sub(t,new l(this.imageWidth/2,this.imageHeight/2),this.position),this.collisionShape.moveShape(this.position,!1))}draw(t){this.image&&(t.drawImage(this.image,this.position.x,this.position.y),this.collisionShape!==void 0&&this.collisionShape.draw(t,this.selected))}onEvent(t){switch(t){case S.MOUSE_CLICKED:this.state=!0;break;case S.MOUSE_RELEASED:this.state=!1;break;case S.FOCUS_IN:this.selected=!0;break;case S.FOCUS_OUT:this.selected=!1;break;default:return!1}return!0}toObject(){return{id:this.id,componentType:this.componentType,nodeType:this.nodeType.id,position:this.position.toPlainObject(),slotIds:this.slots.map(e=>e.id),state:this.state}}}const X={node(s=-1,t,e,i,o,n,r,c=[],f=!0,p=!1){const h=s>=0?s:t.nextComponentId;if(o<0||o>=100)return console.error("O tipo de node passado como parâmetro é inválido!",o),-1;at.vertex.add(t.signalGraph,h,o,p);const d=new _t(h,new l(n,r),o,e,i,[],t.nodeImageList,t.signalGraph,f);t.nodes.set(h,d);const g=t.nodes.get(h);if(t.updateComponentId(s>=0?s:void 0),c.length===0){const w=_t.getNodeModel(o).connectionSlot;for(const k of Object.values(w)){const u=this.slot(void 0,t,k.localPos.x,k.localPos.y,g,k.id,k.in);if(!g.slots.find(b=>b.id===u)){const b=t.slots.get(u);b&&g.slots.push(b)}}}else for(const w of c){const k=t.slots.get(w);k&&g.slots.push(k)}return h},input(s=-1,t,e,i,o,n,r,c=[],f=!0,p=!1){const h=s>=0?s:t.nextComponentId;let d,g;switch(o){case y.I_SWITCH:at.vertex.add(t.signalGraph,h,o,p),d=new o0(h,new l(n,r),e,i,[],t.nodeImageList,t.signalGraph,f),g=ce;break;case y.I_BUTTON:at.vertex.add(t.signalGraph,h,o,p),d=new r0(h,new l(n,r),e,i,[],t.nodeImageList,t.signalGraph,f),g=de;break;default:return console.error("O tipo de node de entrada passado como parâmetro é inválido!",o),-1}t.nodes.set(h,d);const w=t.nodes.get(h);if(t.updateComponentId(s>=0?s:void 0),c.length===0){const k=g.connectionSlot;for(const u of Object.values(k)){const b=this.slot(void 0,t,u.localPos.x,u.localPos.y,w,u.id,u.in);if(!w.slots.find(T=>T.id===b)){const T=t.slots.get(b);T&&w.slots.push(T)}}}else for(const k of c){const u=t.slots.get(k);u&&w.slots.push(u)}return h},output(s=-1,t,e,i,o,n,r,c=[],f=!0,p=!1){const h=s>=0?s:t.nextComponentId;let d,g;switch(o){case y.O_LED_RED:at.vertex.add(t.signalGraph,h,o,p),d=new n0(h,new l(n,r),e,i,[],t.nodeImageList,t.signalGraph,f),g=be;break;case y.O_7_SEGMENTS:at.vertex.add(t.signalGraph,h,o,p),d=new a0(h,new l(n,r),e,i,[],t.nodeImageList,t.signalGraph,f),g=Ie;break;default:return console.error("O tipo de node de saída passado como parâmetro é inválido!",o),-1}t.nodes.set(h,d);const w=t.nodes.get(h);if(t.updateComponentId(s>=0?s:void 0),c.length===0){const k=g.connectionSlot;for(const u of Object.values(k)){const b=this.slot(void 0,t,u.localPos.x,u.localPos.y,w,u.id,u.in);if(!w.slots.find(T=>T.id===b)){const T=t.slots.get(b);T&&w.slots.push(T)}}}else for(const k of c){const u=t.slots.get(k);u&&w.slots.push(u)}return h},slot(s=-1,t,e,i,o,n,r,c,f,p,h){const d=s>=0?s:t.nextComponentId,g=new s0(d,new l(e,i),o,n,void 0,r,c,f,p,h);return t.slots.set(d,g),(o.componentType===C.INPUT||o.componentType===C.OUTPUT||o.componentType===C.NODE)&&o.slots.push(t.slots.get(d)),t.updateComponentId(s>=0?s:void 0)},connection(s=-1,t,e,i,o,n,r,c,f){const p=s>=0?s:t.nextComponentId,h=new Ve(p,new l(e,i),new l(o,n),{start:r,end:c},f);return t.connections.set(p,h),t.updateComponentId(s>=0?s:void 0)},text(s=-1,t,e,i,o,n,r,c){const f=s>=0?s:t.nextComponentId,p=new i0(f,new l(o,n),i,r,c?{id:c.id,type:c.componentType}:null,e);return t.texts.set(f,p),t.updateComponentId(s>=0?s:void 0)}};class bt{constructor(t,e=0,i,o={},n=new Map,r=new Map,c=new Map,f=new Map){a(this,"documentId");a(this,"_nextComponentId");a(this,"nodes");a(this,"slots");a(this,"connections");a(this,"texts");a(this,"nodeImageList");a(this,"signalGraph");this.documentId=t,this._nextComponentId=e,this.nodes=n,this.slots=r,this.connections=c,this.texts=f,this.signalGraph=o,this.nodeImageList=i}getDocumentId(){return this.documentId}get components(){return{nodes:this.nodes,slots:this.slots,connections:this.connections,texts:this.texts}}get nextComponentId(){return this._nextComponentId}updateComponentId(t){const e=this._nextComponentId;return this._nextComponentId=t?Math.max(this._nextComponentId,t+1):this._nextComponentId+1,e}removeComponent(t=this._nextComponentId-1,e){if(e)switch(e){case C.NODE:case C.INPUT:case C.OUTPUT:return St.node(this,t);case C.SLOT:return St.slot(this,t);case C.LINE:return St.connection(this,t);case C.TEXT:return St.text(this,t)}else{const i=this.connections.get(t)??this.nodes.get(t)??this.slots.get(t)??this.texts.get(t);if(i!==void 0)return this.removeComponent(i.id,i.componentType)}return!1}saveAsJson(){const t={id:this.documentId,data:{nodes:[],connections:[],slots:[],texts:[]},signal:{}};for(const[e,i]of Object.entries(this.components))for(const o of i.values())switch(e){case"nodes":t.data.nodes.push(o.toObject());break;case"slots":t.data.slots.push(o.toObject());break;case"connections":t.data.connections.push(o.toObject());break;case"texts":t.data.texts.push(o.toObject());break}return t.signal=this.signalGraph,JSON.stringify(t)}static createFromJson(t,e,i){const o=new bt(t.id,0,structuredClone(i),t.signal);for(const n of t.data.nodes)n.nodeType>=0&&n.nodeType<100?X.node(n.id,o,e.canvas.width,e.canvas.height,n.nodeType,n.position.x,n.position.y,n.slotIds,!1):n.nodeType>=100&&n.nodeType<200?X.input(n.id,o,e.canvas.width,e.canvas.height,n.nodeType,n.position.x,n.position.y,n.slotIds,!1):n.nodeType>=200&&n.nodeType<300&&X.output(n.id,o,e.canvas.width,e.canvas.height,n.nodeType,n.position.x,n.position.y,n.slotIds,!1);for(const n of t.data.slots)X.slot(n.id,o,n.position.x,n.position.y,o.nodes.get(n.parentId),n.slotIdAtParent,n.inSlot,n.radius,n.attractionRadius,n.color,n.colorActive);for(const n of t.data.connections)X.connection(n.id,o,n.position.x,n.position.y,n.endPosition.x,n.endPosition.y,n.connectedTo.start,n.connectedTo.end,n.anchors.map(r=>new l(r.x,r.y,r.useInt))),n.connectedTo.start&&o.slots.get(n.connectedTo.start.slotId).slotConnections.push(o.connections.get(n.id)),n.connectedTo.end&&o.slots.get(n.connectedTo.end.slotId).slotConnections.push(o.connections.get(n.id));for(const n of t.data.texts){X.text(n.id,o,e,n.text,n.position.x,n.position.y,n.style);break}return o}}const zt={checkComponentClick(s,t){const e=[];for(const[i,o]of t.entries()){if(o.collisionShape instanceof Array)return console.warn("Não utilize a função checkComponentClick para checar colisões com conexões!"),[];o.collisionShape.collisionWithPoint(s)&&e.push(i)}return e}},Rt={checkSlotClick(s,t){return zt.checkComponentClick(t,s)}},Tt={editingLineId:-1,editingLine:!1,lineStartSlot:-1,oldSlotCollision:-1,slotCollision:-1,checkConnectionClick(s,t){const e=[];for(const[i,o]of s.entries())o.collisionShape.find(r=>r.collisionWithPoint(t))!==void 0&&e.push(i);return e},addLine(s,t){if(this.editingLine&&this.editingLineId!==-1)return!0;const e=t.getCollisionList().slots;if(e.length>0){const i=s.slots.get(e[0]);return i?(this.editingLineId=X.connection(void 0,s,i.globalPosition.x,i.globalPosition.y,i.globalPosition.x,i.globalPosition.y,{slotId:i.id,nodeId:i.parent.id}),this.editingLine=!0,this.oldSlotCollision=this.slotCollision,this.slotCollision=i.id,this.lineStartSlot=i.id,!0):!1}else this.oldSlotCollision=this.slotCollision,this.slotCollision=-1;return!1},move(s,t,e){if(!this.editingLine||this.editingLineId===-1||!(t.movingObject==="none"||t.movingObject==="connection")||!s.connections.has(this.editingLineId))return!1;t.movingObject="connection";const i=s.connections.get(this.editingLineId);return i?(i.move(e,!1,1,!1),this.bindConnection(s,e),!0):!1},fixLine(s,t){if(this.editingLine&&this.editingLineId!==-1){const e=Rt.checkSlotClick(s.slots,t);if(this.slotCollision!==-1&&e.length>0&&e[0]!==this.lineStartSlot){let i=s.slots.get(this.lineStartSlot),o=s.slots.get(e[0]);const n=s.connections.get(this.editingLineId);if(i.inSlot===o.inSlot)return s.removeComponent(this.editingLineId,C.LINE),this.resetConnEventParams(),!1;if(!o.inSlot){const r=this.lineStartSlot,c=i;this.lineStartSlot=e[0],i=o,e[0]=r,o=c}return this.removeOldInSlotConnection(s,i),this.removeOldInSlotConnection(s,o),i.slotConnections=[...i.slotConnections,n],o.slotConnections=[...o.slotConnections,n],this.changeConnectionParams(s.connections.get(this.editingLineId),i.globalPosition,o.globalPosition,this.lineStartSlot,i.parent.id,e[0],o.parent.id),at.edge.add(s.signalGraph,n,i,o),n.collisionShape=n.generateCollisionShapes(),this.resetConnEventParams(),!0}else return s.removeComponent(this.editingLineId,C.LINE),this.resetConnEventParams(),!1}return this.resetConnEventParams(),!1},bindConnection(s,t){var e;if(this.editingLine&&this.editingLineId!==-1){const i=Rt.checkSlotClick(s.slots,t),o=s.connections.get(this.editingLineId);if(i.length>0){if(((e=o.connectedTo.start)==null?void 0:e.slotId)!==i[0]){const n=s.slots.get(i[0]);this.oldSlotCollision=this.slotCollision,this.slotCollision=i[0],o.endPosition=new l(n.globalPosition)}}else this.slotCollision!==-1&&(this.oldSlotCollision=this.slotCollision,this.slotCollision=-1),o.endPosition=t}},changeConnectionParams(s,t,e,i,o,n,r){t!==void 0&&s.move(t,!1,0,!1),e!==void 0&&s.move(e,!1,1,!1),i!==void 0&&o!==void 0&&s.changeConnection(i,o,!1),n!==void 0&&r!==void 0&&s.changeConnection(n,r,!0)},removeOldInSlotConnection(s,t){if(!t.inSlot)return;const e=t.slotConnections[0];e!==void 0&&(t.slotConnections.splice(0,t.slotConnections.length),e.connectedTo.start&&s.slots.get(e.connectedTo.start.slotId).slotConnections.find((i,o,n)=>{var r;return i.id===((r=e.connectedTo.start)==null?void 0:r.slotId)?(n.splice(o,1),!0):!1}),e.connectedTo.end&&s.slots.get(e.connectedTo.end.slotId).slotConnections.find((i,o,n)=>{var r;return i.id===((r=e.connectedTo.end)==null?void 0:r.slotId)?(n.splice(o,1),!0):!1}),s.removeComponent(e.id,C.LINE))},resetConnEventParams(){this.editingLine=!1,this.editingLineId=-1,this.slotCollision=-1,this.oldSlotCollision=-1,this.lineStartSlot=-1}},Xt={checkNodeClick(s,t){return zt.checkComponentClick(t,s)},move(s,t,e,i=!0){const o=t.getCollisionList().nodes;if(o.length===0||!(t.movingObject==="none"||t.movingObject==="node"))return!1;t.movingObject="node";const n=s.nodes.get(o[0]);return n===void 0?!1:(n.move(e,i),this.moveLinkedElements(n,i),!0)},moveLinkedElements(s,t=!0){var e,i;for(const o of s.slots)if(o){o.move();for(let n=0;n<o.slotConnections.length;n++){const r=o.slotConnections[n];((e=r.connectedTo.start)==null?void 0:e.slotId)===o.id?r.move(o.globalPosition,t,0):((i=r.connectedTo.end)==null?void 0:i.slotId)===o.id&&r.move(o.globalPosition,t,1)}}}},Jt={checkTextClick(s,t){return zt.checkComponentClick(t,s)},move(s,t,e,i=!0){const o=t.getCollisionList().texts;if(o.length===0||!(t.movingObject==="none"||t.movingObject==="text"))return!1;t.movingObject="text";const n=s.get(o[0]);return n===void 0?!1:(n.move(e,i),!0)}};class l0{constructor(t){a(this,"collisionList");a(this,"_mouse");a(this,"movingObject");this._mouse=t,this.collisionList={nodes:[],slots:[],connections:[],texts:[]},this.movingObject="none"}onMouseClick(t){if(this._mouse.stateChanged&&this._mouse.clicked){this.clearAllCollisions(t);const e=Xt.checkNodeClick(t.nodes,this._mouse.position),i=Rt.checkSlotClick(t.slots,this._mouse.position),o=Tt.checkConnectionClick(t.connections,this._mouse.position),n=Jt.checkTextClick(t.texts,this._mouse.position);this.collisionList={nodes:e,slots:i,connections:o,texts:n},Tt.addLine(t,this);const r=t.nodes.get(this.collisionList.nodes[0]);r!==void 0&&r.nodeType.id===y.I_BUTTON&&(r.onEvent(S.MOUSE_CLICKED),lt.updateGraph(t.signalGraph,this.collisionList.nodes[0])),this.displaySelectedComponents(t),this._mouse.stateChanged=!1}}onMouseRelease(t){if(!this._mouse.clicked&&this._mouse.stateChanged){if(!this._mouse.dragged&&this.collisionList.nodes.length!==0){const e=t.nodes.get(this.collisionList.nodes[0]);e!==void 0&&e.componentType===C.INPUT&&e.onEvent(S.MOUSE_RELEASED)&&lt.updateGraph(t.signalGraph,this.collisionList.nodes[0])}Tt.fixLine(t,this._mouse.position),this._mouse.stateChanged=!1}this.movingObject="none"}onMouseMove(t){return this._mouse.clicked&&this._mouse.dragged?Tt.move(t,this,this._mouse.position)||Xt.move(t,this,this._mouse.position,!1)||Jt.move(t.texts,this,this._mouse.position,!1):!1}displaySelectedComponents(t){var e;for(const[i,o]of Object.entries(this.collisionList))(e=t.components[i].get(o[0]))==null||e.onEvent(S.FOCUS_IN)}clearSelectedComponents(t){var e;for(const[i,o]of Object.entries(this.collisionList))for(const n of o)(e=t.components[i].get(n))==null||e.onEvent(S.FOCUS_OUT)}getCollisionList(){return this.collisionList}clearAllCollisions(t){this.clearSelectedComponents(t),this.collisionList.nodes=[],this.collisionList.slots=[],this.collisionList.connections=[],this.collisionList.texts=[]}}class h0{constructor(){a(this,"position",new l);a(this,"_mouseClicked",!1);a(this,"doubleClicked",!1);a(this,"clickStartPosition",new l);a(this,"_mouseStateChanged",!1);a(this,"clickToDragThreshold",6);a(this,"doubleClickTimer",300);a(this,"alreadyClicked",!1)}get clicked(){return this._mouseClicked}set clicked(t){this._mouseClicked=t,this._mouseStateChanged=!0,t&&(this.clickStartPosition=this.position.copy())}get dragged(){const t=l.sub(this.position,this.clickStartPosition);return t.x>this.clickToDragThreshold||t.x<-this.clickToDragThreshold||t.y>this.clickToDragThreshold||t.y<-this.clickToDragThreshold}get stateChanged(){return this._mouseStateChanged}set stateChanged(t){this._mouseStateChanged=t,this.alreadyClicked?this.doubleClicked=this._mouseClicked:(this.alreadyClicked=!0,setTimeout(()=>this.alreadyClicked=!1,this.doubleClickTimer))}}var E=Uint8Array,J=Uint16Array,Gt=Int32Array,Mt=new E([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),Nt=new E([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),jt=new E([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Ce=function(s,t){for(var e=new J(31),i=0;i<31;++i)e[i]=t+=1<<s[i-1];for(var o=new Gt(e[30]),i=1;i<30;++i)for(var n=e[i];n<e[i+1];++n)o[n]=n-e[i]<<5|i;return{b:e,r:o}},Se=Ce(Mt,2),Pe=Se.b,Ut=Se.r;Pe[28]=258,Ut[258]=28;var Oe=Ce(Nt,0),c0=Oe.b,Kt=Oe.r,Zt=new J(32768);for(var I=0;I<32768;++I){var nt=(I&43690)>>1|(I&21845)<<1;nt=(nt&52428)>>2|(nt&13107)<<2,nt=(nt&61680)>>4|(nt&3855)<<4,Zt[I]=((nt&65280)>>8|(nt&255)<<8)>>1}var $=function(s,t,e){for(var i=s.length,o=0,n=new J(t);o<i;++o)s[o]&&++n[s[o]-1];var r=new J(t);for(o=1;o<t;++o)r[o]=r[o-1]+n[o-1]<<1;var c;if(e){c=new J(1<<t);var f=15-t;for(o=0;o<i;++o)if(s[o])for(var p=o<<4|s[o],h=t-s[o],d=r[s[o]-1]++<<h,g=d|(1<<h)-1;d<=g;++d)c[Zt[d]>>f]=p}else for(c=new J(i),o=0;o<i;++o)s[o]&&(c[o]=Zt[r[s[o]-1]++]>>15-s[o]);return c},rt=new E(288);for(var I=0;I<144;++I)rt[I]=8;for(var I=144;I<256;++I)rt[I]=9;for(var I=256;I<280;++I)rt[I]=7;for(var I=280;I<288;++I)rt[I]=8;var vt=new E(32);for(var I=0;I<32;++I)vt[I]=5;var d0=$(rt,9,0),f0=$(rt,9,1),p0=$(vt,5,0),g0=$(vt,5,1),Ht=function(s){for(var t=s[0],e=1;e<s.length;++e)s[e]>t&&(t=s[e]);return t},Y=function(s,t,e){var i=t/8|0;return(s[i]|s[i+1]<<8)>>(t&7)&e},Lt=function(s,t){var e=t/8|0;return(s[e]|s[e+1]<<8|s[e+2]<<16)>>(t&7)},Wt=function(s){return(s+7)/8|0},Te=function(s,t,e){return(e==null||e>s.length)&&(e=s.length),new E(s.subarray(t,e))},y0=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],q=function(s,t,e){var i=new Error(t||y0[s]);if(i.code=s,Error.captureStackTrace&&Error.captureStackTrace(i,q),!e)throw i;return i},u0=function(s,t,e,i){var o=s.length,n=0;if(!o||t.f&&!t.l)return e||new E(0);var r=!e,c=r||t.i!=2,f=t.i;r&&(e=new E(o*3));var p=function(gt){var yt=e.length;if(gt>yt){var ft=new E(Math.max(yt*2,gt));ft.set(e),e=ft}},h=t.f||0,d=t.p||0,g=t.b||0,w=t.l,k=t.d,u=t.m,b=t.n,T=o*8;do{if(!w){h=Y(s,d,1);var z=Y(s,d+1,3);if(d+=3,z)if(z==1)w=f0,k=g0,u=9,b=5;else if(z==2){var U=Y(s,d,31)+257,N=Y(s,d+10,15)+4,v=U+Y(s,d+5,31)+1;d+=14;for(var m=new E(v),D=new E(19),_=0;_<N;++_)D[jt[_]]=Y(s,d+_*3,7);d+=N*3;for(var R=Ht(D),st=(1<<R)-1,G=$(D,R,1),_=0;_<v;){var F=G[Y(s,d,st)];d+=F&15;var M=F>>4;if(M<16)m[_++]=M;else{var H=0,P=0;for(M==16?(P=3+Y(s,d,3),d+=2,H=m[_-1]):M==17?(P=3+Y(s,d,7),d+=3):M==18&&(P=11+Y(s,d,127),d+=7);P--;)m[_++]=H}}var B=m.subarray(0,U),L=m.subarray(U);u=Ht(B),b=Ht(L),w=$(B,u,1),k=$(L,b,1)}else q(1);else{var M=Wt(d)+4,j=s[M-4]|s[M-3]<<8,A=M+j;if(A>o){f&&q(0);break}c&&p(g+j),e.set(s.subarray(M,A),g),t.b=g+=j,t.p=d=A*8,t.f=h;continue}if(d>T){f&&q(0);break}}c&&p(g+131072);for(var pt=(1<<u)-1,K=(1<<b)-1,tt=d;;tt=d){var H=w[Lt(s,d)&pt],W=H>>4;if(d+=H&15,d>T){f&&q(0);break}if(H||q(2),W<256)e[g++]=W;else if(W==256){tt=d,w=null;break}else{var V=W-254;if(W>264){var _=W-257,O=Mt[_];V=Y(s,d,(1<<O)-1)+Pe[_],d+=O}var Q=k[Lt(s,d)&K],ct=Q>>4;Q||q(3),d+=Q&15;var L=c0[ct];if(ct>3){var O=Nt[ct];L+=Lt(s,d)&(1<<O)-1,d+=O}if(d>T){f&&q(0);break}c&&p(g+131072);var dt=g+V;if(g<L){var It=n-L,Ct=Math.min(L,dt);for(It+g<0&&q(3);g<Ct;++g)e[g]=i[It+g]}for(;g<dt;++g)e[g]=e[g-L]}}t.l=w,t.p=tt,t.b=g,t.f=h,w&&(h=1,t.m=u,t.d=k,t.n=b)}while(!h);return g!=e.length&&r?Te(e,0,g):e.subarray(0,g)},et=function(s,t,e){e<<=t&7;var i=t/8|0;s[i]|=e,s[i+1]|=e>>8},ut=function(s,t,e){e<<=t&7;var i=t/8|0;s[i]|=e,s[i+1]|=e>>8,s[i+2]|=e>>16},Et=function(s,t){for(var e=[],i=0;i<s.length;++i)s[i]&&e.push({s:i,f:s[i]});var o=e.length,n=e.slice();if(!o)return{t:Me,l:0};if(o==1){var r=new E(e[0].s+1);return r[e[0].s]=1,{t:r,l:1}}e.sort(function(A,U){return A.f-U.f}),e.push({s:-1,f:25001});var c=e[0],f=e[1],p=0,h=1,d=2;for(e[0]={s:-1,f:c.f+f.f,l:c,r:f};h!=o-1;)c=e[e[p].f<e[d].f?p++:d++],f=e[p!=h&&e[p].f<e[d].f?p++:d++],e[h++]={s:-1,f:c.f+f.f,l:c,r:f};for(var g=n[0].s,i=1;i<o;++i)n[i].s>g&&(g=n[i].s);var w=new J(g+1),k=Ft(e[h-1],w,0);if(k>t){var i=0,u=0,b=k-t,T=1<<b;for(n.sort(function(U,N){return w[N.s]-w[U.s]||U.f-N.f});i<o;++i){var z=n[i].s;if(w[z]>t)u+=T-(1<<k-w[z]),w[z]=t;else break}for(u>>=b;u>0;){var M=n[i].s;w[M]<t?u-=1<<t-w[M]++-1:++i}for(;i>=0&&u;--i){var j=n[i].s;w[j]==t&&(--w[j],++u)}k=t}return{t:new E(w),l:k}},Ft=function(s,t,e){return s.s==-1?Math.max(Ft(s.l,t,e+1),Ft(s.r,t,e+1)):t[s.s]=e},Yt=function(s){for(var t=s.length;t&&!s[--t];);for(var e=new J(++t),i=0,o=s[0],n=1,r=function(f){e[i++]=f},c=1;c<=t;++c)if(s[c]==o&&c!=t)++n;else{if(!o&&n>2){for(;n>138;n-=138)r(32754);n>2&&(r(n>10?n-11<<5|28690:n-3<<5|12305),n=0)}else if(n>3){for(r(o),--n;n>6;n-=6)r(8304);n>2&&(r(n-3<<5|8208),n=0)}for(;n--;)r(o);n=1,o=s[c]}return{c:e.subarray(0,i),n:t}},mt=function(s,t){for(var e=0,i=0;i<t.length;++i)e+=s[i]*t[i];return e},_e=function(s,t,e){var i=e.length,o=Wt(t+2);s[o]=i&255,s[o+1]=i>>8,s[o+2]=s[o]^255,s[o+3]=s[o+1]^255;for(var n=0;n<i;++n)s[o+n+4]=e[n];return(o+4+i)*8},qt=function(s,t,e,i,o,n,r,c,f,p,h){et(t,h++,e),++o[256];for(var d=Et(o,15),g=d.t,w=d.l,k=Et(n,15),u=k.t,b=k.l,T=Yt(g),z=T.c,M=T.n,j=Yt(u),A=j.c,U=j.n,N=new J(19),v=0;v<z.length;++v)++N[z[v]&31];for(var v=0;v<A.length;++v)++N[A[v]&31];for(var m=Et(N,7),D=m.t,_=m.l,R=19;R>4&&!D[jt[R-1]];--R);var st=p+5<<3,G=mt(o,rt)+mt(n,vt)+r,F=mt(o,g)+mt(n,u)+r+14+3*R+mt(N,D)+2*N[16]+3*N[17]+7*N[18];if(f>=0&&st<=G&&st<=F)return _e(t,h,s.subarray(f,f+p));var H,P,B,L;if(et(t,h,1+(F<G)),h+=2,F<G){H=$(g,w,0),P=g,B=$(u,b,0),L=u;var pt=$(D,_,0);et(t,h,M-257),et(t,h+5,U-1),et(t,h+10,R-4),h+=14;for(var v=0;v<R;++v)et(t,h+3*v,D[jt[v]]);h+=3*R;for(var K=[z,A],tt=0;tt<2;++tt)for(var W=K[tt],v=0;v<W.length;++v){var V=W[v]&31;et(t,h,pt[V]),h+=D[V],V>15&&(et(t,h,W[v]>>5&127),h+=W[v]>>12)}}else H=d0,P=rt,B=p0,L=vt;for(var v=0;v<c;++v){var O=i[v];if(O>255){var V=O>>18&31;ut(t,h,H[V+257]),h+=P[V+257],V>7&&(et(t,h,O>>23&31),h+=Mt[V]);var Q=O&31;ut(t,h,B[Q]),h+=L[Q],Q>3&&(ut(t,h,O>>5&8191),h+=Nt[Q])}else ut(t,h,H[O]),h+=P[O]}return ut(t,h,H[256]),h+P[256]},m0=new Gt([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),Me=new E(0),w0=function(s,t,e,i,o,n){var r=n.z||s.length,c=new E(i+r+5*(1+Math.ceil(r/7e3))+o),f=c.subarray(i,c.length-o),p=n.l,h=(n.r||0)&7;if(t){h&&(f[0]=n.r>>3);for(var d=m0[t-1],g=d>>13,w=d&8191,k=(1<<e)-1,u=n.p||new J(32768),b=n.h||new J(k+1),T=Math.ceil(e/3),z=2*T,M=function(Dt){return(s[Dt]^s[Dt+1]<<T^s[Dt+2]<<z)&k},j=new Gt(25e3),A=new J(288),U=new J(32),N=0,v=0,m=n.i||0,D=0,_=n.w||0,R=0;m+2<r;++m){var st=M(m),G=m&32767,F=b[st];if(u[G]=F,b[st]=G,_<=m){var H=r-m;if((N>7e3||D>24576)&&(H>423||!p)){h=qt(s,f,0,j,A,U,v,D,R,m-R,h),D=N=v=0,R=m;for(var P=0;P<286;++P)A[P]=0;for(var P=0;P<30;++P)U[P]=0}var B=2,L=0,pt=w,K=G-F&32767;if(H>2&&st==M(m-K))for(var tt=Math.min(g,H)-1,W=Math.min(32767,m),V=Math.min(258,H);K<=W&&--pt&&G!=F;){if(s[m+B]==s[m+B-K]){for(var O=0;O<V&&s[m+O]==s[m+O-K];++O);if(O>B){if(B=O,L=K,O>tt)break;for(var Q=Math.min(K,O-2),ct=0,P=0;P<Q;++P){var dt=m-K+P&32767,It=u[dt],Ct=dt-It&32767;Ct>ct&&(ct=Ct,F=dt)}}}G=F,F=u[G],K+=G-F&32767}if(L){j[D++]=268435456|Ut[B]<<18|Kt[L];var gt=Ut[B]&31,yt=Kt[L]&31;v+=Mt[gt]+Nt[yt],++A[257+gt],++U[yt],_=m+B,++N}else j[D++]=s[m],++A[s[m]]}}for(m=Math.max(m,_);m<r;++m)j[D++]=s[m],++A[s[m]];h=qt(s,f,p,j,A,U,v,D,R,m-R,h),p||(n.r=h&7|f[h/8|0]<<3,h-=7,n.h=b,n.p=u,n.i=m,n.w=_)}else{for(var m=n.w||0;m<r+p;m+=65535){var ft=m+65535;ft>=r&&(f[h/8|0]=p,ft=r),h=_e(f,h+1,s.subarray(m,ft))}n.i=r}return Te(c,0,i+Wt(h)+o)},k0=function(){for(var s=new Int32Array(256),t=0;t<256;++t){for(var e=t,i=9;--i;)e=(e&1&&-306674912)^e>>>1;s[t]=e}return s}(),v0=function(){var s=-1;return{p:function(t){for(var e=s,i=0;i<t.length;++i)e=k0[e&255^t[i]]^e>>>8;s=e},d:function(){return~s}}},x0=function(s,t,e,i,o){if(!o&&(o={l:1},t.dictionary)){var n=t.dictionary.subarray(-32768),r=new E(n.length+s.length);r.set(n),r.set(s,n.length),s=r,o.w=n.length}return w0(s,t.level==null?6:t.level,t.mem==null?o.l?Math.ceil(Math.max(8,Math.min(13,Math.log(s.length)))*1.5):20:12+t.mem,e,i,o)},Bt=function(s,t,e){for(;e;++t)s[t]=e,e>>>=8},b0=function(s,t){var e=t.filename;if(s[0]=31,s[1]=139,s[2]=8,s[8]=t.level<2?4:t.level==9?2:0,s[9]=3,t.mtime!=0&&Bt(s,4,Math.floor(new Date(t.mtime||Date.now())/1e3)),e){s[3]=8;for(var i=0;i<=e.length;++i)s[i+10]=e.charCodeAt(i)}},I0=function(s){(s[0]!=31||s[1]!=139||s[2]!=8)&&q(6,"invalid gzip data");var t=s[3],e=10;t&4&&(e+=(s[10]|s[11]<<8)+2);for(var i=(t>>3&1)+(t>>4&1);i>0;i-=!s[e++]);return e+(t&2)},C0=function(s){var t=s.length;return(s[t-4]|s[t-3]<<8|s[t-2]<<16|s[t-1]<<24)>>>0},S0=function(s){return 10+(s.filename?s.filename.length+1:0)};function P0(s,t){t||(t={});var e=v0(),i=s.length;e.p(s);var o=x0(s,t,S0(t),8),n=o.length;return b0(o,t),Bt(o,n-8,e.d()),Bt(o,n-4,i),o}function O0(s,t){var e=I0(s);return e+8>s.length&&q(6,"invalid gzip data"),u0(s.subarray(e,-8),{i:2},new E(C0(s)),t)}var T0=typeof TextDecoder<"u"&&new TextDecoder,_0=0;try{T0.decode(Me,{stream:!0}),_0=1}catch{}function M0(s,t,e){if(!e.target){console.error("Falha ao tentar carregar os dados da entrada de dados");return}const i=e.target;if(!i.files||!i.files[0])return;const o=new FileReader;o.readAsArrayBuffer(i.files[0]),o.onload=()=>{if(!o.result||typeof o.result=="string")return;const n=O0(new Uint8Array(o.result)),r=JSON.parse(new TextDecoder().decode(n));if(typeof r.id!="string"&&typeof r.data.nodes!="object"&&Number.isInteger(r.data.nodes.length)&&typeof r.data.connections!="object"&&Number.isInteger(r.data.connections.length)&&typeof r.data.slots!="object"&&Number.isInteger(r.data.slots.length)&&typeof r.data.texts!="object"&&Number.isInteger(r.data.texts.length)&&typeof r.signal!="object"){window.alert("Falha ao carregar projeto! Arquivo inválido ou corrompido."),console.error("Falha ao carregar projeto! Arquivo inválido ou corrompido.");return}s.editorEnv=bt.createFromJson(r,t,s.editorEnv.nodeImageList)}}function Ne(s){const t=window.prompt("Salvar projeto como:",`${s.documentId}-${Date.now()}`);if(t===null)return;const e=document.createElement("a"),i=new TextEncoder().encode(s.saveAsJson()),o=P0(i,{level:6});e.href=URL.createObjectURL(new Blob([o],{type:"application/gzip"})),e.download=`${t}.simulation`,e.click()}function N0(s){return confirm(`Deseja limpar o editor?
Qualquer progresso não salvo será perdido!`)===!0?new bt(s.documentId,0,s.nodeImageList):null}class D0{constructor(t){a(this,"_keyboard");this._keyboard=t}onKeyDown(t){this._keyboard.nKeysPressed!==0&&(this._keyboard.keyPressed?this._keyboard.keyHold=!0:(this._keyboard.keyPressed=!0,this._keyboard.keyHold=!1),this._keyboard.keyHold||this.handleKeyPressed(t))}handleKeyPressed(t){const e=this._keyboard.getKeysPressed();e[Z.ADD]||e[Z.ADD_u]?t.node(y.G_AND):e[Z.NAND]||e[Z.NAND_u]?t.node(y.G_NAND):e[Z.NOR]||e[Z.NOR_u]?t.node(y.G_NOR):e[Z.NOT]||e[Z.NOT_u]?t.node(y.G_NOT):e[Z.OR]||e[Z.OR_u]?t.node(y.G_OR):e[Z.XNOR]||e[Z.XNOR_u]?t.node(y.G_XNOR):e[Z.XOR]||e[Z.XOR_u]?t.node(y.G_XOR):e[wt.SWITCH]||e[wt.SWITCH_u]?t.input(y.I_SWITCH):e[wt.BUTTON]||e[wt.BUTTON_u]?t.input(y.I_BUTTON):e[kt.LED_RED]||e[kt.LED_RED_u]?t.output(y.O_LED_RED):e[kt.SEGMENTS]||e[kt.SEGMENTS_u]?t.output(y.O_7_SEGMENTS):e[At.DELETE]?t.remove():e[At.INSERT]&&Ne(t.editorEnv)}onKeyUp(){this._keyboard.keyPressed&&this._keyboard.nKeysPressed===0&&(this._keyboard.keyPressed=!1,this._keyboard.keyHold=!1)}}class H0{constructor(){a(this,"keys",{});a(this,"keyPressed",!1);a(this,"keyHold",!1);a(this,"stateChange",!1);a(this,"_nKeysPressed",0)}get nKeysPressed(){return this._nKeysPressed}set nKeysPressed(t){t<0&&console.warn("Número de teclas pressionadas é menor que 0!"),this._nKeysPressed=Math.max(0,t)}setKeyPressed(t,e){this.keys[t]=e,this.nKeysPressed+=e?1:-1}getKeysPressed(){return this.keys}}const L0=[$t,te,ee,se,ie,oe,ne,ae,re,le,he,fe,pe,ge,ye,ue,me,we,ke,ve,xe];function E0(){const s={};for(const t of L0)Xe(t).then(e=>{s[t]=e});return s}function A0(s,t,e){var i,o,n,r;if(!window){console.error("Variável window é nula! Não será possível iniciar o editor");return}window.onload=()=>{s.resize(),setInterval(s.compute,1e3/s.tickRate),s.update(),setTimeout(()=>{document.getElementById("app").style.visibility="visible",document.getElementById("app-toolbar").style.visibility="visible",document.getElementById("app").className="animate-show",document.getElementById("app-toolbar").className="animate-show",document.getElementById("loading-div").style.visibility="hidden"},1e3)},window.onresize=()=>s.resize(),t.onmousedown=()=>s.mouse.clicked=!0,t.onmouseup=t.onmouseout=()=>s.mouse.clicked=!1,window.onmousemove=({x:c,y:f})=>s.setLocalMousePosition(c,f),window.onkeydown=c=>s.keyboard.setKeyPressed(c.key,!0),window.onkeyup=c=>s.keyboard.setKeyPressed(c.key,!1),(i=document.getElementById("save-editor"))==null||i.addEventListener("click",()=>Ne(s.editorEnv)),(o=document.getElementById("load-editor"))==null||o.addEventListener("click",()=>{var c;(c=document.getElementById("load-editor-file"))==null||c.click()}),(n=document.getElementById("load-editor-file"))==null||n.addEventListener("change",c=>M0(s,s.canvasCtx,c)),(r=document.getElementById("clear-editor"))==null||r.addEventListener("click",()=>{s.editorEnv=N0(s.editorEnv)??s.editorEnv})}class R0{constructor(t,e,i,o=60){a(this,"editorEnv");a(this,"mouse");a(this,"keyboard");a(this,"mouseEvents");a(this,"keyboardEvents");a(this,"canvasId");a(this,"canvasCtx");a(this,"backgroundCtx");a(this,"backgroundPattern");a(this,"windowResized");a(this,"tickRate");a(this,"update",()=>{Ae(this.canvasCtx,this.editorEnv.components),this.windowResized&&(Re(this.backgroundCtx,this.backgroundPattern),this.windowResized=!1),requestAnimationFrame(this.update)});a(this,"compute",()=>{this.keyboardEvents.onKeyDown(this),this.keyboardEvents.onKeyUp(),this.mouseEvents.onMouseClick(this.editorEnv),this.mouseEvents.onMouseMove(this.editorEnv),this.mouseEvents.onMouseRelease(this.editorEnv)});this.editorEnv=new bt(t,0,E0()),this.mouse=new h0,this.keyboard=new H0,this.mouseEvents=new l0(this.mouse),this.keyboardEvents=new D0(this.keyboard);const n=document.getElementById(e),r=document.getElementById(i);this.canvasId=e,this.canvasCtx=this.createContext(n),this.backgroundCtx=this.createContext(r),this.backgroundPattern=null,this.loadBackgroundPattern(Le),this.windowResized=!0,this.tickRate=o,A0(this,n)}createContext(t){return t.getContext("2d",{desynchronized:!0})}loadBackgroundPattern(t){const e=new Image;e.onload=()=>{this.backgroundPattern=this.backgroundCtx.createPattern(e,"repeat")},e.src=t}getEditorArea(){var i;const t=(i=document.getElementById(this.canvasId))==null?void 0:i.parentElement,e=new l(0,0,!1);if(t){const o=window.getComputedStyle(t);e.x=parseFloat(o.width.substring(0,o.length-2)),e.y=parseFloat(o.height.substring(0,o.length-2))}else e.x=window.innerWidth,e.y=window.innerHeight;return e}setLocalMousePosition(t,e){const i=this.canvasCtx.canvas.getBoundingClientRect();this.mouse.position=new l(t-i.left,e-i.top)}resize(){const t=this.getEditorArea();this.canvasCtx.canvas.width=t.x,this.canvasCtx.canvas.height=t.y,this.backgroundCtx.canvas.width=t.x,this.backgroundCtx.canvas.height=t.y,this.windowResized=!0}node(t=y.G_AND,e=this.mouse.position.x,i=this.mouse.position.y){return X.node(void 0,this.editorEnv,this.canvasCtx.canvas.width,this.canvasCtx.canvas.height,t,e,i)}input(t=y.I_SWITCH,e=this.mouse.position.x,i=this.mouse.position.y){return X.input(void 0,this.editorEnv,this.canvasCtx.canvas.width,this.canvasCtx.canvas.height,t,e,i)}output(t=y.O_LED_RED,e=this.mouse.position.x,i=this.mouse.position.y){return X.output(void 0,this.editorEnv,this.canvasCtx.canvas.width,this.canvasCtx.canvas.height,t,e,i)}line(t,e,i,o,n,r){return X.connection(void 0,this.editorEnv,t,e,i,o,n,r)}text(t,e,i,o,n){return X.text(void 0,this.editorEnv,this.canvasCtx,t,e,i,o,n)}slot(t,e,i,o,n,r,c,f,p){return X.slot(void 0,this.editorEnv,t,e,i,o,n,r,c,f,p)}remove(){return this.mouseEvents.getCollisionList().nodes.length!==0?this.editorEnv.removeComponent(this.mouseEvents.getCollisionList().nodes[0]):this.mouseEvents.getCollisionList().connections.length!==0?this.editorEnv.removeComponent(this.mouseEvents.getCollisionList().connections[0]):this.mouseEvents.getCollisionList().texts.length!==0?this.editorEnv.removeComponent(this.mouseEvents.getCollisionList().texts[0]):!1}}const j0=new R0("teste","editor-canvas","editor-background");j0.text("Olá mundo",500,200,"32px sans-serif");
